2025-06-29 17:01:29.018  INFO [NONE] 22536 --- [  restartedMain] o.e.xlr8travel.Xlr8travelApplication     : Starting Xlr8travelApplication using Java 21.0.5 with PID 22536 (C:\Users\razvi\Desktop\Licenta\backend\target\classes started by razvi in C:\Users\razvi\Desktop\Licenta\backend)
2025-06-29 17:01:29.031 DEBUG [NONE] 22536 --- [  restartedMain] o.e.xlr8travel.Xlr8travelApplication     : Running with Spring Boot v3.2.4, Spring v6.1.5
2025-06-29 17:01:29.032  INFO [NONE] 22536 --- [  restartedMain] o.e.xlr8travel.Xlr8travelApplication     : The following 1 profile is active: "local"
2025-06-29 17:01:29.073  INFO [NONE] 22536 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-29 17:01:29.074  INFO [NONE] 22536 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-29 17:01:30.094  INFO [NONE] 22536 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-29 17:01:30.182  INFO [NONE] 22536 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 79 ms. Found 9 JPA repository interfaces.
2025-06-29 17:01:31.006  INFO [NONE] 22536 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-29 17:01:31.018  INFO [NONE] 22536 --- [  restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-29 17:01:31.018  INFO [NONE] 22536 --- [  restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.19]
2025-06-29 17:01:31.094  INFO [NONE] 22536 --- [  restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-06-29 17:01:31.095  INFO [NONE] 22536 --- [  restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2020 ms
2025-06-29 17:01:31.360  INFO [NONE] 22536 --- [  restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-29 17:01:31.439  INFO [NONE] 22536 --- [  restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.4.Final
2025-06-29 17:01:31.480  INFO [NONE] 22536 --- [  restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-06-29 17:01:31.722  INFO [NONE] 22536 --- [  restartedMain] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-29 17:01:31.750  INFO [NONE] 22536 --- [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-06-29 17:01:31.958  INFO [NONE] 22536 --- [  restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@471aa280
2025-06-29 17:01:31.961  INFO [NONE] 22536 --- [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-06-29 17:01:32.016  WARN [NONE] 22536 --- [  restartedMain] org.hibernate.orm.deprecation            : HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-29 17:01:33.170  INFO [NONE] 22536 --- [  restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-29 17:01:43.447  INFO [NONE] 22536 --- [  restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-29 17:01:43.785  INFO [NONE] 22536 --- [  restartedMain] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-29 17:01:44.237 DEBUG [NONE] 22536 --- [  restartedMain] o.e.x.security.JwtAuthenticationFilter   : Filter 'jwtAuthenticationFilter' configured for use
2025-06-29 17:01:44.239 DEBUG [NONE] 22536 --- [  restartedMain] o.e.x.security.RateLimitingFilter        : Filter 'rateLimitingFilter' configured for use
2025-06-29 17:01:44.446  INFO [NONE] 22536 --- [  restartedMain] o.e.x.config.LocalPropertiesConfig       : Loaded application-local.properties
2025-06-29 17:01:44.774  INFO [NONE] 22536 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : === GEMINI SERVICE CONFIGURATION ===
2025-06-29 17:01:44.775  INFO [NONE] 22536 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : Project ID: xlr8travel
2025-06-29 17:01:44.776  INFO [NONE] 22536 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : Location ID: us-east1
2025-06-29 17:01:44.776  INFO [NONE] 22536 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : Model: gemini-2.0-flash-001
2025-06-29 17:01:44.776  INFO [NONE] 22536 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : Credentials Path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 17:01:44.776  INFO [NONE] 22536 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : API Key: ***SET***
2025-06-29 17:01:44.777  INFO [NONE] 22536 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : ✅ Credentials file exists: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 17:01:44.778  INFO [NONE] 22536 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : ✅ Credentials file size: 2376 bytes
2025-06-29 17:01:44.778  INFO [NONE] 22536 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : ✅ GOOGLE_APPLICATION_CREDENTIALS env var is set: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 17:01:44.778  INFO [NONE] 22536 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : =====================================
2025-06-29 17:01:44.807  INFO [NONE] 22536 --- [  restartedMain] o.e.x.config.SensitiveDataConfig         : Validating sensitive data configuration for profile: local
2025-06-29 17:01:44.808  WARN [NONE] 22536 --- [  restartedMain] o.e.x.config.SensitiveDataConfig         : Environment variable SPRING_DATASOURCE_URL is not set
2025-06-29 17:01:44.808  WARN [NONE] 22536 --- [  restartedMain] o.e.x.config.SensitiveDataConfig         : Environment variable SPRING_DATASOURCE_USERNAME is not set
2025-06-29 17:01:44.808  WARN [NONE] 22536 --- [  restartedMain] o.e.x.config.SensitiveDataConfig         : Environment variable SPRING_DATASOURCE_PASSWORD is not set
2025-06-29 17:01:44.809  WARN [NONE] 22536 --- [  restartedMain] o.e.x.config.SensitiveDataConfig         : Environment variable STRIPE_SECRET_KEY is not set
2025-06-29 17:01:44.863  WARN [NONE] 22536 --- [  restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-29 17:01:44.992  INFO [NONE] 22536 --- [  restartedMain] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2025-06-29 17:01:45.289  INFO [NONE] 22536 --- [  restartedMain] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 4 endpoint(s) beneath base path '/actuator'
2025-06-29 17:01:45.384  INFO [NONE] 22536 --- [  restartedMain] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@2e2a91b, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@70828683, org.springframework.security.web.context.SecurityContextHolderFilter@6faafa2f, org.springframework.security.web.header.HeaderWriterFilter@2479e402, org.springframework.web.filter.CorsFilter@2ae3776b, org.springframework.security.web.authentication.logout.LogoutFilter@4425bd99, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@24276303, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@7f7f71c4, org.example.xlr8travel.security.JwtAuthenticationFilter@10115914, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@39397579, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@2080cda, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@4809c526, org.springframework.security.web.session.ConcurrentSessionFilter@678f6b42, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@44900182, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@299275a0, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4e11c757, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5fb4074d, org.springframework.security.web.session.SessionManagementFilter@44fd136e, org.springframework.security.web.access.ExceptionTranslationFilter@344598d4, org.springframework.security.web.access.intercept.AuthorizationFilter@52650f25]
2025-06-29 17:01:45.900  INFO [NONE] 22536 --- [  restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2025-06-29 17:01:45.967  INFO [NONE] 22536 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path ''
2025-06-29 17:01:45.977  INFO [NONE] 22536 --- [  restartedMain] o.e.xlr8travel.Xlr8travelApplication     : Started Xlr8travelApplication in 17.388 seconds (process running for 17.942)
2025-06-29 17:01:51.183  INFO [NONE] 22536 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-29 17:01:51.183  INFO [NONE] 22536 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-06-29 17:01:51.186  INFO [NONE] 22536 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2025-06-29 17:01:51.209 DEBUG [117b1044-c69e-4879-a2b0-8b534c6f3b58] 22536 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/nearby?origin=OTP
2025-06-29 17:01:51.240 DEBUG [117b1044-c69e-4879-a2b0-8b534c6f3b58] 22536 --- [nio-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 17:01:51.245  WARN [117b1044-c69e-4879-a2b0-8b534c6f3b58] 22536 --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/api/flights/nearby' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2025-06-29 17:01:51.260 DEBUG [117b1044-c69e-4879-a2b0-8b534c6f3b58] 22536 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/nearby?origin=OTP
2025-06-29 17:01:51.296  INFO [117b1044-c69e-4879-a2b0-8b534c6f3b58] 22536 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Received request for nearby flights from origin: OTP, departureDate: null
2025-06-29 17:01:51.297  INFO [117b1044-c69e-4879-a2b0-8b534c6f3b58] 22536 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Using search date: 2025-06-29
2025-06-29 17:01:51.298  INFO [117b1044-c69e-4879-a2b0-8b534c6f3b58] 22536 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Cache key: OTP-2025-06-29
2025-06-29 17:01:51.300  INFO [117b1044-c69e-4879-a2b0-8b534c6f3b58] 22536 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : No valid cache found. Searching nearby flights from origin: OTP, after date: 2025-06-29
2025-06-29 17:01:51.301  INFO [117b1044-c69e-4879-a2b0-8b534c6f3b58] 22536 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Calling flightService.findByOriginAndDepartureDateAfter for origin: OTP, date: 2025-06-29
2025-06-29 17:01:51.425  INFO [117b1044-c69e-4879-a2b0-8b534c6f3b58] 22536 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Database query completed, found 16 flights
2025-06-29 17:01:51.426  INFO [117b1044-c69e-4879-a2b0-8b534c6f3b58] 22536 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Converting 16 Flight entities to FlightDTOs
2025-06-29 17:01:51.428  INFO [117b1044-c69e-4879-a2b0-8b534c6f3b58] 22536 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Converted to 16 FlightDTOs
2025-06-29 17:01:51.428  INFO [117b1044-c69e-4879-a2b0-8b534c6f3b58] 22536 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Grouping flights by destination country
2025-06-29 17:01:51.429  INFO [117b1044-c69e-4879-a2b0-8b534c6f3b58] 22536 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Grouped flights into 7 countries
2025-06-29 17:01:51.429  INFO [117b1044-c69e-4879-a2b0-8b534c6f3b58] 22536 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Selecting diverse flights - one from each country first
2025-06-29 17:01:51.429  INFO [117b1044-c69e-4879-a2b0-8b534c6f3b58] 22536 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Adding first flight from Greece (has 2 flights)
2025-06-29 17:01:51.429  INFO [117b1044-c69e-4879-a2b0-8b534c6f3b58] 22536 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Adding first flight from Netherlands (has 2 flights)
2025-06-29 17:01:51.429  INFO [117b1044-c69e-4879-a2b0-8b534c6f3b58] 22536 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Adding first flight from Italy (has 2 flights)
2025-06-29 17:01:51.430  INFO [117b1044-c69e-4879-a2b0-8b534c6f3b58] 22536 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Adding first flight from United Kingdom (has 2 flights)
2025-06-29 17:01:51.430  INFO [117b1044-c69e-4879-a2b0-8b534c6f3b58] 22536 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Adding first flight from France (has 2 flights)
2025-06-29 17:01:51.430  INFO [117b1044-c69e-4879-a2b0-8b534c6f3b58] 22536 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Adding first flight from Switzerland (has 2 flights)
2025-06-29 17:01:51.430  INFO [117b1044-c69e-4879-a2b0-8b534c6f3b58] 22536 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Reached 6 flights after first pass, stopping
2025-06-29 17:01:51.430  INFO [117b1044-c69e-4879-a2b0-8b534c6f3b58] 22536 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Caching 6 diverse flights with key: OTP-2025-06-29
2025-06-29 17:01:51.431  INFO [117b1044-c69e-4879-a2b0-8b534c6f3b58] 22536 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Returning 6 diverse nearby flights from: OTP
2025-06-29 17:01:55.544 DEBUG [6031d3b0-ec95-4aca-b8d0-901decaa4c2d] 22536 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /oauth2/authorization/google
2025-06-29 17:01:55.595 DEBUG [6031d3b0-ec95-4aca-b8d0-901decaa4c2d] 22536 --- [nio-8080-exec-2] o.s.s.web.DefaultRedirectStrategy        : Redirecting to https://accounts.google.com/o/oauth2/v2/auth?response_type=code&client_id=280181287068-i92p696f0ja6qv5lecrhi4dmn2hsrvie.apps.googleusercontent.com&scope=email%20profile&state=RnwaZQwtdKwa33AtE-lEd21ZVUH5yD2-kk4C94ihb7s%3D&redirect_uri=http://localhost:8080/login/oauth2/code/google
2025-06-29 17:01:57.587 DEBUG [2827f5e2-f953-4211-a485-45b581b5be4e] 22536 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /login/oauth2/code/google?state=RnwaZQwtdKwa33AtE-lEd21ZVUH5yD2-kk4C94ihb7s%3D&code=4%2F0AVMBsJgGmp-zopnM3OMND87lJrFHlExOkq7sYjm1G6HtZ_PUUnRFbW-JLNekq3Ykgd41Aw&scope=email+profile+openid+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email&authuser=1&prompt=none
2025-06-29 17:01:58.248  INFO [2827f5e2-f953-4211-a485-45b581b5be4e] 22536 --- [nio-8080-exec-3] o.e.x.security.CustomOAuth2UserService   : Creating new user from OAuth2 login: ****@****.***
2025-06-29 17:01:58.335  INFO [2827f5e2-f953-4211-a485-45b581b5be4e] 22536 --- [nio-8080-exec-3] o.e.x.security.CustomOAuth2UserService   : Successfully created new user from OAuth2 login: ****@****.***
2025-06-29 17:01:58.338 DEBUG [2827f5e2-f953-4211-a485-45b581b5be4e] 22536 --- [nio-8080-exec-3] .s.ChangeSessionIdAuthenticationStrategy : Changed session id from C83D99DEEF5C87F36198321583A05417
2025-06-29 17:01:58.339 DEBUG [2827f5e2-f953-4211-a485-45b581b5be4e] 22536 --- [nio-8080-exec-3] o.s.s.core.session.SessionRegistryImpl   : Registering session 65F00495DBBB266EC058C1F751606AE8, for principal Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}]
2025-06-29 17:01:58.340 DEBUG [2827f5e2-f953-4211-a485-45b581b5be4e] 22536 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=C83D99DEEF5C87F36198321583A05417], Granted Authorities=[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@444ce3e8]
2025-06-29 17:01:58.341 DEBUG [2827f5e2-f953-4211-a485-45b581b5be4e] 22536 --- [nio-8080-exec-3] .s.o.c.w.OAuth2LoginAuthenticationFilter : Set SecurityContextHolder to OAuth2AuthenticationToken [Principal=Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=C83D99DEEF5C87F36198321583A05417], Granted Authorities=[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]]
2025-06-29 17:01:58.370  INFO [2827f5e2-f953-4211-a485-45b581b5be4e] 22536 --- [nio-8080-exec-3] e.x.s.OAuth2AuthenticationSuccessHandler : Extracting username from authentication: 104658082982173093135
2025-06-29 17:01:58.371  INFO [2827f5e2-f953-4211-a485-45b581b5be4e] 22536 --- [nio-8080-exec-3] e.x.s.OAuth2AuthenticationSuccessHandler : Principal class: org.springframework.security.oauth2.core.user.DefaultOAuth2User
2025-06-29 17:01:58.371  INFO [2827f5e2-f953-4211-a485-45b581b5be4e] 22536 --- [nio-8080-exec-3] e.x.s.OAuth2AuthenticationSuccessHandler : Principal is DefaultOAuth2User
2025-06-29 17:01:58.371  INFO [2827f5e2-f953-4211-a485-45b581b5be4e] 22536 --- [nio-8080-exec-3] e.x.s.OAuth2AuthenticationSuccessHandler : OAuth2User attributes: {sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}
2025-06-29 17:01:58.372  INFO [2827f5e2-f953-4211-a485-45b581b5be4e] 22536 --- [nio-8080-exec-3] e.x.s.OAuth2AuthenticationSuccessHandler : Using email as username: ****@****.***
2025-06-29 17:01:58.373  INFO [2827f5e2-f953-4211-a485-45b581b5be4e] 22536 --- [nio-8080-exec-3] e.x.s.OAuth2AuthenticationSuccessHandler : Extracting username from authentication: 104658082982173093135
2025-06-29 17:01:58.373  INFO [2827f5e2-f953-4211-a485-45b581b5be4e] 22536 --- [nio-8080-exec-3] e.x.s.OAuth2AuthenticationSuccessHandler : Principal class: org.springframework.security.oauth2.core.user.DefaultOAuth2User
2025-06-29 17:01:58.373  INFO [2827f5e2-f953-4211-a485-45b581b5be4e] 22536 --- [nio-8080-exec-3] e.x.s.OAuth2AuthenticationSuccessHandler : Principal is DefaultOAuth2User
2025-06-29 17:01:58.373  INFO [2827f5e2-f953-4211-a485-45b581b5be4e] 22536 --- [nio-8080-exec-3] e.x.s.OAuth2AuthenticationSuccessHandler : OAuth2User attributes: {sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}
2025-06-29 17:01:58.374  INFO [2827f5e2-f953-4211-a485-45b581b5be4e] 22536 --- [nio-8080-exec-3] e.x.s.OAuth2AuthenticationSuccessHandler : Using email as username: ****@****.***
2025-06-29 17:01:58.374  INFO [2827f5e2-f953-4211-a485-45b581b5be4e] 22536 --- [nio-8080-exec-3] e.x.s.OAuth2AuthenticationSuccessHandler : OAuth tokens stored in session for user: ****@****.***
2025-06-29 17:01:58.375 DEBUG [2827f5e2-f953-4211-a485-45b581b5be4e] 22536 --- [nio-8080-exec-3] o.s.s.web.DefaultRedirectStrategy        : Redirecting to http://localhost:3000?oauth=success
2025-06-29 17:01:59.036 DEBUG [21a2871d-7579-416f-8292-9920a774c4f0] 22536 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/oauth/complete
2025-06-29 17:01:59.042 DEBUG [188176a4-ee97-4328-868b-448936411b2a] 22536 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/oauth/complete
2025-06-29 17:01:59.043 DEBUG [e05cf666-27f2-41b1-9826-89f15d1aaa87] 22536 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/oauth/complete
2025-06-29 17:01:59.052 DEBUG [275f1268-cf6f-413e-83f3-5b857a1aac45] 22536 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/oauth/complete
2025-06-29 17:01:59.084 DEBUG [e05cf666-27f2-41b1-9826-89f15d1aaa87] 22536 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/oauth/complete
2025-06-29 17:01:59.084 DEBUG [275f1268-cf6f-413e-83f3-5b857a1aac45] 22536 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/oauth/complete
2025-06-29 17:01:59.088  INFO [275f1268-cf6f-413e-83f3-5b857a1aac45] 22536 --- [nio-8080-exec-7] o.e.x.controllers.OAuthController        : OAuth tokens retrieved and cleared from session for user: ****@****.***
2025-06-29 17:01:59.088  INFO [e05cf666-27f2-41b1-9826-89f15d1aaa87] 22536 --- [nio-8080-exec-6] o.e.x.controllers.OAuthController        : OAuth tokens retrieved and cleared from session for user: ****@****.***
2025-06-29 17:01:59.096 DEBUG [e05cf666-27f2-41b1-9826-89f15d1aaa87] 22536 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=C83D99DEEF5C87F36198321583A05417], Granted Authorities=[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]]]
2025-06-29 17:01:59.097 DEBUG [275f1268-cf6f-413e-83f3-5b857a1aac45] 22536 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=C83D99DEEF5C87F36198321583A05417], Granted Authorities=[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]]]
2025-06-29 17:01:59.411 DEBUG [0e92a8bd-a0da-4cbb-aba4-9cf01cdea1da] 22536 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/nearby?origin=OTP
2025-06-29 17:01:59.428 DEBUG [0e92a8bd-a0da-4cbb-aba4-9cf01cdea1da] 22536 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/nearby?origin=OTP
2025-06-29 17:01:59.442  INFO [0e92a8bd-a0da-4cbb-aba4-9cf01cdea1da] 22536 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Received request for nearby flights from origin: OTP, departureDate: null
2025-06-29 17:01:59.457  INFO [0e92a8bd-a0da-4cbb-aba4-9cf01cdea1da] 22536 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Using search date: 2025-06-29
2025-06-29 17:01:59.469  INFO [0e92a8bd-a0da-4cbb-aba4-9cf01cdea1da] 22536 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Cache key: OTP-2025-06-29
2025-06-29 17:01:59.471  INFO [0e92a8bd-a0da-4cbb-aba4-9cf01cdea1da] 22536 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Returning cached nearby flights for origin: OTP, found 6 flights
2025-06-29 17:01:59.477 DEBUG [0e92a8bd-a0da-4cbb-aba4-9cf01cdea1da] 22536 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=C83D99DEEF5C87F36198321583A05417], Granted Authorities=[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]]]
2025-06-29 17:02:01.634 DEBUG [b342bc1f-c6aa-4386-8b25-6142df2052c9] 22536 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 17:02:01.678 DEBUG [b342bc1f-c6aa-4386-8b25-6142df2052c9] 22536 --- [nio-8080-exec-9] o.s.s.core.session.SessionRegistryImpl   : Registering session F7A2E8E431347F8480E2D76274B920EB, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[])
2025-06-29 17:02:01.679 DEBUG [b342bc1f-c6aa-4386-8b25-6142df2052c9] 22536 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@71c66b09]
2025-06-29 17:02:01.684 DEBUG [b342bc1f-c6aa-4386-8b25-6142df2052c9] 22536 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me
2025-06-29 17:02:01.686  INFO [b342bc1f-c6aa-4386-8b25-6142df2052c9] 22536 --- [nio-8080-exec-9] o.e.x.controllers.UserController         : Request received for current user details: ****@****.***
2025-06-29 17:02:01.696  INFO [b342bc1f-c6aa-4386-8b25-6142df2052c9] 22536 --- [nio-8080-exec-9] o.e.x.controllers.UserController         : Returning details for user: ****@****.***
2025-06-29 17:02:01.797 DEBUG [f198ea16-f0f9-4673-adfb-9694db90a214] 22536 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 17:02:01.797 DEBUG [b2d5d47a-88f1-4f24-bb83-7b30568b1f93] 22536 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:02:01.816 DEBUG [f198ea16-f0f9-4673-adfb-9694db90a214] 22536 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=C83D99DEEF5C87F36198321583A05417], Granted Authorities=[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]]]
2025-06-29 17:02:01.839 DEBUG [f198ea16-f0f9-4673-adfb-9694db90a214] 22536 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 17:02:01.853 DEBUG [b2d5d47a-88f1-4f24-bb83-7b30568b1f93] 22536 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:02:01.860 DEBUG [b2d5d47a-88f1-4f24-bb83-7b30568b1f93] 22536 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:02:01.862  INFO [b2d5d47a-88f1-4f24-bb83-7b30568b1f93] 22536 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:02:01.889  WARN [f198ea16-f0f9-4673-adfb-9694db90a214] 22536 --- [io-8080-exec-10] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 17:02:01.902  INFO [b2d5d47a-88f1-4f24-bb83-7b30568b1f93] 22536 --- [nio-8080-exec-1] o.e.xlr8travel.services.CartServiceImpl  : No existing cart found for user ****@****.*** with ID 4, creating a new one.
2025-06-29 17:02:01.903  WARN [f198ea16-f0f9-4673-adfb-9694db90a214] 22536 --- [io-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 17:02:01.930  INFO [b2d5d47a-88f1-4f24-bb83-7b30568b1f93] 22536 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 17:02:02.124 DEBUG [387fb22d-f507-441b-9e14-2fa1c967e417] 22536 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 17:02:02.144 DEBUG [387fb22d-f507-441b-9e14-2fa1c967e417] 22536 --- [nio-8080-exec-2] o.s.s.core.session.SessionRegistryImpl   : Registering session 19ECBD2E9FCD04BD2C105FA2224C4C68, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[])
2025-06-29 17:02:02.144 DEBUG [387fb22d-f507-441b-9e14-2fa1c967e417] 22536 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@43aa5244]
2025-06-29 17:02:02.147 DEBUG [387fb22d-f507-441b-9e14-2fa1c967e417] 22536 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me
2025-06-29 17:02:02.149  INFO [387fb22d-f507-441b-9e14-2fa1c967e417] 22536 --- [nio-8080-exec-2] o.e.x.controllers.UserController         : Request received for current user details: ****@****.***
2025-06-29 17:02:02.160  INFO [387fb22d-f507-441b-9e14-2fa1c967e417] 22536 --- [nio-8080-exec-2] o.e.x.controllers.UserController         : Returning details for user: ****@****.***
2025-06-29 17:02:07.744 DEBUG [586bb766-4555-4a0a-9983-b2db813fc1f5] 22536 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-29 17:02:07.751 DEBUG [586bb766-4555-4a0a-9983-b2db813fc1f5] 22536 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-29 17:02:07.878  INFO [586bb766-4555-4a0a-9983-b2db813fc1f5] 22536 --- [nio-8080-exec-3] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: one way trip from bucharest to paris
2025-06-29 17:02:07.881  INFO [586bb766-4555-4a0a-9983-b2db813fc1f5] 22536 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-29 17:02:07.882  INFO [586bb766-4555-4a0a-9983-b2db813fc1f5] 22536 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-29 17:02:07.895 DEBUG [586bb766-4555-4a0a-9983-b2db813fc1f5] 22536 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-29).    For example, if today is 2025-06-29, a good departure date would be between 2025-07-06 and 2025-07-13, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "one way trip from bucharest to paris";
2025-06-29 17:02:07.900  INFO [586bb766-4555-4a0a-9983-b2db813fc1f5] 22536 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-29 17:02:07.901  INFO [586bb766-4555-4a0a-9983-b2db813fc1f5] 22536 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-29 17:02:07.901  INFO [586bb766-4555-4a0a-9983-b2db813fc1f5] 22536 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-29 17:02:07.902  INFO [586bb766-4555-4a0a-9983-b2db813fc1f5] 22536 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 17:02:07.902  INFO [586bb766-4555-4a0a-9983-b2db813fc1f5] 22536 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-29 17:02:08.808  INFO [586bb766-4555-4a0a-9983-b2db813fc1f5] 22536 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-29 17:02:08.813  INFO [586bb766-4555-4a0a-9983-b2db813fc1f5] 22536 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-29 17:02:08.869  INFO [586bb766-4555-4a0a-9983-b2db813fc1f5] 22536 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-29 17:02:09.113  INFO [586bb766-4555-4a0a-9983-b2db813fc1f5] 22536 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-29 17:02:12.221  INFO [586bb766-4555-4a0a-9983-b2db813fc1f5] 22536 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-29 17:02:12.221  INFO [586bb766-4555-4a0a-9983-b2db813fc1f5] 22536 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Response length: 184 characters
2025-06-29 17:02:12.224 DEBUG [586bb766-4555-4a0a-9983-b2db813fc1f5] 22536 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-06-29",
  "returnDate": null,
  "tripType": "oneWay",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-29 17:02:12.225 DEBUG [586bb766-4555-4a0a-9983-b2db813fc1f5] 22536 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-29 17:02:12.231 DEBUG [586bb766-4555-4a0a-9983-b2db813fc1f5] 22536 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-29 17:02:12.231 DEBUG [586bb766-4555-4a0a-9983-b2db813fc1f5] 22536 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-29 17:02:12.233 DEBUG [586bb766-4555-4a0a-9983-b2db813fc1f5] 22536 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 17:02:12.233  INFO [586bb766-4555-4a0a-9983-b2db813fc1f5] 22536 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 17:02:12.233  INFO [586bb766-4555-4a0a-9983-b2db813fc1f5] 22536 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-06-29, returnDate=null, tripType=oneWay, adults=1, children=0, infants=0
2025-06-29 17:02:12.233  INFO [586bb766-4555-4a0a-9983-b2db813fc1f5] 22536 --- [nio-8080-exec-3] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-29 17:02:12.239 DEBUG [586bb766-4555-4a0a-9983-b2db813fc1f5] 22536 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:02:17.160 DEBUG [7f6b7f32-4411-49a5-b9f8-ea2229879983] 22536 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 17:02:17.173 DEBUG [7f6b7f32-4411-49a5-b9f8-ea2229879983] 22536 --- [nio-8080-exec-4] o.s.s.core.session.SessionRegistryImpl   : Registering session 4524A71A7B8FFFA40305B6DC45AAEA25, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[])
2025-06-29 17:02:17.174 DEBUG [7f6b7f32-4411-49a5-b9f8-ea2229879983] 22536 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@6d5a8347]
2025-06-29 17:02:17.176 DEBUG [7f6b7f32-4411-49a5-b9f8-ea2229879983] 22536 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me
2025-06-29 17:02:17.178  INFO [7f6b7f32-4411-49a5-b9f8-ea2229879983] 22536 --- [nio-8080-exec-4] o.e.x.controllers.UserController         : Request received for current user details: ****@****.***
2025-06-29 17:02:17.184  INFO [7f6b7f32-4411-49a5-b9f8-ea2229879983] 22536 --- [nio-8080-exec-4] o.e.x.controllers.UserController         : Returning details for user: ****@****.***
2025-06-29 17:02:17.241 DEBUG [473e45c9-aa20-4089-ae51-12ecd016a37c] 22536 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 17:02:17.248 DEBUG [7094e6cb-130a-468a-96de-9a4617c529c2] 22536 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:02:17.248 DEBUG [3d310b5f-83fa-4e3d-b201-d531ff1b95fb] 22536 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-06-29&tripType=oneWay
2025-06-29 17:02:17.252 DEBUG [3d310b5f-83fa-4e3d-b201-d531ff1b95fb] 22536 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-06-29&tripType=oneWay
2025-06-29 17:02:17.259  INFO [3d310b5f-83fa-4e3d-b201-d531ff1b95fb] 22536 --- [nio-8080-exec-6] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-06-29, Return=null, Pax=1/0/0
2025-06-29 17:02:17.258 DEBUG [473e45c9-aa20-4089-ae51-12ecd016a37c] 22536 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:02:17.259  INFO [3d310b5f-83fa-4e3d-b201-d531ff1b95fb] 22536 --- [nio-8080-exec-6] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-06-29
2025-06-29 17:02:17.263 DEBUG [473e45c9-aa20-4089-ae51-12ecd016a37c] 22536 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 17:02:17.265 DEBUG [7094e6cb-130a-468a-96de-9a4617c529c2] 22536 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:02:17.268 DEBUG [7094e6cb-130a-468a-96de-9a4617c529c2] 22536 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:02:17.268  INFO [7094e6cb-130a-468a-96de-9a4617c529c2] 22536 --- [nio-8080-exec-7] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:02:17.268  WARN [3d310b5f-83fa-4e3d-b201-d531ff1b95fb] 22536 --- [nio-8080-exec-6] o.e.x.controllers.FlightController       : No flights found for search: OTP to CDG on 2025-06-29
2025-06-29 17:02:17.269  INFO [3d310b5f-83fa-4e3d-b201-d531ff1b95fb] 22536 --- [nio-8080-exec-6] o.e.x.controllers.FlightController       : Found 0 available flights for search criteria.
2025-06-29 17:02:17.272 DEBUG [3d310b5f-83fa-4e3d-b201-d531ff1b95fb] 22536 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:02:17.296  WARN [473e45c9-aa20-4089-ae51-12ecd016a37c] 22536 --- [nio-8080-exec-5] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 17:02:17.297 DEBUG [78d44c1e-db60-4483-bed3-44fbbaebd8b9] 22536 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-06-29&tripType=oneWay
2025-06-29 17:02:17.297  WARN [473e45c9-aa20-4089-ae51-12ecd016a37c] 22536 --- [nio-8080-exec-5] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 17:02:17.299 DEBUG [78d44c1e-db60-4483-bed3-44fbbaebd8b9] 22536 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-06-29&tripType=oneWay
2025-06-29 17:02:17.302  INFO [78d44c1e-db60-4483-bed3-44fbbaebd8b9] 22536 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-06-29, Return=null, Pax=1/0/0
2025-06-29 17:02:17.302  INFO [78d44c1e-db60-4483-bed3-44fbbaebd8b9] 22536 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-06-29
2025-06-29 17:02:17.305 DEBUG [42f2ef08-bac4-4e8b-8a99-57f38c3654da] 22536 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 17:02:17.311  INFO [7094e6cb-130a-468a-96de-9a4617c529c2] 22536 --- [nio-8080-exec-7] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 17:02:17.311  WARN [78d44c1e-db60-4483-bed3-44fbbaebd8b9] 22536 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : No flights found for search: OTP to CDG on 2025-06-29
2025-06-29 17:02:17.311  INFO [78d44c1e-db60-4483-bed3-44fbbaebd8b9] 22536 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Found 0 available flights for search criteria.
2025-06-29 17:02:17.312 DEBUG [78d44c1e-db60-4483-bed3-44fbbaebd8b9] 22536 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:02:17.318 DEBUG [42f2ef08-bac4-4e8b-8a99-57f38c3654da] 22536 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:02:17.322 DEBUG [42f2ef08-bac4-4e8b-8a99-57f38c3654da] 22536 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 17:02:17.332  WARN [42f2ef08-bac4-4e8b-8a99-57f38c3654da] 22536 --- [nio-8080-exec-9] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 17:02:17.334  WARN [42f2ef08-bac4-4e8b-8a99-57f38c3654da] 22536 --- [nio-8080-exec-9] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 17:02:17.346 DEBUG [d07eb41a-bdac-4e4e-81f9-3a8a3ed12940] 22536 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 17:02:17.349 DEBUG [d07eb41a-bdac-4e4e-81f9-3a8a3ed12940] 22536 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 17:02:17.351  INFO [d07eb41a-bdac-4e4e-81f9-3a8a3ed12940] 22536 --- [io-8080-exec-10] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 17:02:17.554  INFO [d07eb41a-bdac-4e4e-81f9-3a8a3ed12940] 22536 --- [io-8080-exec-10] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 17:02:17.560 DEBUG [d07eb41a-bdac-4e4e-81f9-3a8a3ed12940] 22536 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:02:17.567 DEBUG [101c2c3a-569b-4e4e-865d-ea9ad3c55ea7] 22536 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 17:02:17.569 DEBUG [101c2c3a-569b-4e4e-865d-ea9ad3c55ea7] 22536 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 17:02:17.569  INFO [101c2c3a-569b-4e4e-865d-ea9ad3c55ea7] 22536 --- [nio-8080-exec-1] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 17:02:17.570 DEBUG [315c4485-8a51-4585-98b5-3e4e05fa5252] 22536 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 17:02:17.573 DEBUG [315c4485-8a51-4585-98b5-3e4e05fa5252] 22536 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 17:02:17.573  INFO [315c4485-8a51-4585-98b5-3e4e05fa5252] 22536 --- [nio-8080-exec-2] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 17:02:17.616  INFO [101c2c3a-569b-4e4e-865d-ea9ad3c55ea7] 22536 --- [nio-8080-exec-1] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 17:02:17.618 DEBUG [101c2c3a-569b-4e4e-865d-ea9ad3c55ea7] 22536 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:02:17.764  INFO [315c4485-8a51-4585-98b5-3e4e05fa5252] 22536 --- [nio-8080-exec-2] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 17:02:17.766 DEBUG [315c4485-8a51-4585-98b5-3e4e05fa5252] 22536 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:02:17.773 DEBUG [58fac59e-6df1-4e12-a11d-69573ef49196] 22536 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 17:02:17.774 DEBUG [58fac59e-6df1-4e12-a11d-69573ef49196] 22536 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 17:02:17.775  INFO [58fac59e-6df1-4e12-a11d-69573ef49196] 22536 --- [nio-8080-exec-3] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 17:02:17.820  INFO [58fac59e-6df1-4e12-a11d-69573ef49196] 22536 --- [nio-8080-exec-3] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 17:02:17.822 DEBUG [58fac59e-6df1-4e12-a11d-69573ef49196] 22536 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:02:27.400 DEBUG [a6771b2c-956f-4f8f-97cd-ee6e90d5bc15] 22536 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 17:02:27.401 DEBUG [1507eef9-5878-4b71-a2e0-e9eee79842c1] 22536 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:02:27.424 DEBUG [a6771b2c-956f-4f8f-97cd-ee6e90d5bc15] 22536 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:02:27.427 DEBUG [1507eef9-5878-4b71-a2e0-e9eee79842c1] 22536 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:02:27.429 DEBUG [a6771b2c-956f-4f8f-97cd-ee6e90d5bc15] 22536 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 17:02:27.430 DEBUG [1507eef9-5878-4b71-a2e0-e9eee79842c1] 22536 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:02:27.433  INFO [1507eef9-5878-4b71-a2e0-e9eee79842c1] 22536 --- [nio-8080-exec-6] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:02:27.443  WARN [a6771b2c-956f-4f8f-97cd-ee6e90d5bc15] 22536 --- [nio-8080-exec-4] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 17:02:27.444  WARN [a6771b2c-956f-4f8f-97cd-ee6e90d5bc15] 22536 --- [nio-8080-exec-4] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 17:02:27.461  INFO [1507eef9-5878-4b71-a2e0-e9eee79842c1] 22536 --- [nio-8080-exec-6] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 17:02:27.474 DEBUG [4f51052e-a703-4687-8f88-40092b95ffbd] 22536 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 17:02:27.500 DEBUG [4f51052e-a703-4687-8f88-40092b95ffbd] 22536 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:02:27.507 DEBUG [4f51052e-a703-4687-8f88-40092b95ffbd] 22536 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 17:02:27.510 DEBUG [9296c5e6-8e30-45a9-b00e-aabb382852f1] 22536 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/nearby?origin=OTP
2025-06-29 17:02:27.513 DEBUG [9296c5e6-8e30-45a9-b00e-aabb382852f1] 22536 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/nearby?origin=OTP
2025-06-29 17:02:27.514  INFO [9296c5e6-8e30-45a9-b00e-aabb382852f1] 22536 --- [nio-8080-exec-7] o.e.x.controllers.FlightController       : Received request for nearby flights from origin: OTP, departureDate: null
2025-06-29 17:02:27.515  INFO [9296c5e6-8e30-45a9-b00e-aabb382852f1] 22536 --- [nio-8080-exec-7] o.e.x.controllers.FlightController       : Using search date: 2025-06-29
2025-06-29 17:02:27.516  INFO [9296c5e6-8e30-45a9-b00e-aabb382852f1] 22536 --- [nio-8080-exec-7] o.e.x.controllers.FlightController       : Cache key: OTP-2025-06-29
2025-06-29 17:02:27.516  INFO [9296c5e6-8e30-45a9-b00e-aabb382852f1] 22536 --- [nio-8080-exec-7] o.e.x.controllers.FlightController       : Returning cached nearby flights for origin: OTP, found 6 flights
2025-06-29 17:02:27.518 DEBUG [9296c5e6-8e30-45a9-b00e-aabb382852f1] 22536 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:02:27.524  WARN [4f51052e-a703-4687-8f88-40092b95ffbd] 22536 --- [nio-8080-exec-5] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 17:02:27.526  WARN [4f51052e-a703-4687-8f88-40092b95ffbd] 22536 --- [nio-8080-exec-5] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 17:02:30.561 DEBUG [1b73b8bb-ec1d-4444-8d38-d635c20d1944] 22536 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-29 17:02:30.563 DEBUG [1b73b8bb-ec1d-4444-8d38-d635c20d1944] 22536 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-29 17:02:30.566  INFO [1b73b8bb-ec1d-4444-8d38-d635c20d1944] 22536 --- [nio-8080-exec-8] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris
2025-06-29 17:02:30.567  INFO [1b73b8bb-ec1d-4444-8d38-d635c20d1944] 22536 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-29 17:02:30.567  INFO [1b73b8bb-ec1d-4444-8d38-d635c20d1944] 22536 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-29 17:02:30.567 DEBUG [1b73b8bb-ec1d-4444-8d38-d635c20d1944] 22536 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-29).    For example, if today is 2025-06-29, a good departure date would be between 2025-07-06 and 2025-07-13, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris";
2025-06-29 17:02:30.570  INFO [1b73b8bb-ec1d-4444-8d38-d635c20d1944] 22536 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-29 17:02:30.571  INFO [1b73b8bb-ec1d-4444-8d38-d635c20d1944] 22536 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-29 17:02:30.571  INFO [1b73b8bb-ec1d-4444-8d38-d635c20d1944] 22536 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-29 17:02:30.571  INFO [1b73b8bb-ec1d-4444-8d38-d635c20d1944] 22536 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 17:02:30.571  INFO [1b73b8bb-ec1d-4444-8d38-d635c20d1944] 22536 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-29 17:02:30.576  INFO [1b73b8bb-ec1d-4444-8d38-d635c20d1944] 22536 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-29 17:02:30.577  INFO [1b73b8bb-ec1d-4444-8d38-d635c20d1944] 22536 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-29 17:02:30.577  INFO [1b73b8bb-ec1d-4444-8d38-d635c20d1944] 22536 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-29 17:02:30.578  INFO [1b73b8bb-ec1d-4444-8d38-d635c20d1944] 22536 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-29 17:02:32.581  INFO [1b73b8bb-ec1d-4444-8d38-d635c20d1944] 22536 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-29 17:02:32.582  INFO [1b73b8bb-ec1d-4444-8d38-d635c20d1944] 22536 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Response length: 195 characters
2025-06-29 17:02:32.582 DEBUG [1b73b8bb-ec1d-4444-8d38-d635c20d1944] 22536 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-06",
  "returnDate": "2025-07-08",
  "tripType": "roundTrip",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-29 17:02:32.582 DEBUG [1b73b8bb-ec1d-4444-8d38-d635c20d1944] 22536 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-29 17:02:32.583 DEBUG [1b73b8bb-ec1d-4444-8d38-d635c20d1944] 22536 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-29 17:02:32.583 DEBUG [1b73b8bb-ec1d-4444-8d38-d635c20d1944] 22536 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-29 17:02:32.583 DEBUG [1b73b8bb-ec1d-4444-8d38-d635c20d1944] 22536 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 17:02:32.583  INFO [1b73b8bb-ec1d-4444-8d38-d635c20d1944] 22536 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 17:02:32.583  INFO [1b73b8bb-ec1d-4444-8d38-d635c20d1944] 22536 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-06, returnDate=2025-07-08, tripType=roundTrip, adults=1, children=0, infants=0
2025-06-29 17:02:32.584  INFO [1b73b8bb-ec1d-4444-8d38-d635c20d1944] 22536 --- [nio-8080-exec-8] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-29 17:02:32.585 DEBUG [1b73b8bb-ec1d-4444-8d38-d635c20d1944] 22536 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:02:34.498 DEBUG [24c43813-78a3-4a9e-8e6e-0a919a843a49] 22536 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-29 17:02:34.501 DEBUG [24c43813-78a3-4a9e-8e6e-0a919a843a49] 22536 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-29 17:02:34.503  INFO [24c43813-78a3-4a9e-8e6e-0a919a843a49] 22536 --- [nio-8080-exec-9] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris one way
2025-06-29 17:02:34.503  INFO [24c43813-78a3-4a9e-8e6e-0a919a843a49] 22536 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-29 17:02:34.503  INFO [24c43813-78a3-4a9e-8e6e-0a919a843a49] 22536 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-29 17:02:34.503 DEBUG [24c43813-78a3-4a9e-8e6e-0a919a843a49] 22536 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-29).    For example, if today is 2025-06-29, a good departure date would be between 2025-07-06 and 2025-07-13, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris one way";
2025-06-29 17:02:34.505  INFO [24c43813-78a3-4a9e-8e6e-0a919a843a49] 22536 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-29 17:02:34.506  INFO [24c43813-78a3-4a9e-8e6e-0a919a843a49] 22536 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-29 17:02:34.506  INFO [24c43813-78a3-4a9e-8e6e-0a919a843a49] 22536 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-29 17:02:34.506  INFO [24c43813-78a3-4a9e-8e6e-0a919a843a49] 22536 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 17:02:34.506  INFO [24c43813-78a3-4a9e-8e6e-0a919a843a49] 22536 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-29 17:02:34.507  INFO [24c43813-78a3-4a9e-8e6e-0a919a843a49] 22536 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-29 17:02:34.508  INFO [24c43813-78a3-4a9e-8e6e-0a919a843a49] 22536 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-29 17:02:34.508  INFO [24c43813-78a3-4a9e-8e6e-0a919a843a49] 22536 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-29 17:02:34.508  INFO [24c43813-78a3-4a9e-8e6e-0a919a843a49] 22536 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-29 17:02:36.181  INFO [24c43813-78a3-4a9e-8e6e-0a919a843a49] 22536 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-29 17:02:36.181  INFO [24c43813-78a3-4a9e-8e6e-0a919a843a49] 22536 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Response length: 184 characters
2025-06-29 17:02:36.181 DEBUG [24c43813-78a3-4a9e-8e6e-0a919a843a49] 22536 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-06",
  "returnDate": null,
  "tripType": "oneWay",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-29 17:02:36.182 DEBUG [24c43813-78a3-4a9e-8e6e-0a919a843a49] 22536 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-29 17:02:36.182 DEBUG [24c43813-78a3-4a9e-8e6e-0a919a843a49] 22536 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-29 17:02:36.182 DEBUG [24c43813-78a3-4a9e-8e6e-0a919a843a49] 22536 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-29 17:02:36.182 DEBUG [24c43813-78a3-4a9e-8e6e-0a919a843a49] 22536 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 17:02:36.183  INFO [24c43813-78a3-4a9e-8e6e-0a919a843a49] 22536 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 17:02:36.183  INFO [24c43813-78a3-4a9e-8e6e-0a919a843a49] 22536 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-06, returnDate=null, tripType=oneWay, adults=1, children=0, infants=0
2025-06-29 17:02:36.183  INFO [24c43813-78a3-4a9e-8e6e-0a919a843a49] 22536 --- [nio-8080-exec-9] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-29 17:02:36.184 DEBUG [24c43813-78a3-4a9e-8e6e-0a919a843a49] 22536 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:02:40.135 DEBUG [bd157648-f1f7-4d3f-883d-d691ef68b835] 22536 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 17:02:40.156 DEBUG [bd157648-f1f7-4d3f-883d-d691ef68b835] 22536 --- [io-8080-exec-10] o.s.s.core.session.SessionRegistryImpl   : Registering session 74397EA24F165798DBC2E103B103C69A, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[])
2025-06-29 17:02:40.157 DEBUG [bd157648-f1f7-4d3f-883d-d691ef68b835] 22536 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@d7585df]
2025-06-29 17:02:40.159 DEBUG [bd157648-f1f7-4d3f-883d-d691ef68b835] 22536 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me
2025-06-29 17:02:40.160  INFO [bd157648-f1f7-4d3f-883d-d691ef68b835] 22536 --- [io-8080-exec-10] o.e.x.controllers.UserController         : Request received for current user details: ****@****.***
2025-06-29 17:02:40.179  INFO [bd157648-f1f7-4d3f-883d-d691ef68b835] 22536 --- [io-8080-exec-10] o.e.x.controllers.UserController         : Returning details for user: ****@****.***
2025-06-29 17:02:40.345 DEBUG [c1e3673e-2d19-45b4-856d-138dfb9fade2] 22536 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:02:40.345 DEBUG [e409df43-c23a-4c7c-ae90-a7ea24b1537d] 22536 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 17:02:40.345 DEBUG [b63fdd31-940d-4621-b165-a8d9cd53369b] 22536 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 17:02:40.350 DEBUG [b63fdd31-940d-4621-b165-a8d9cd53369b] 22536 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 17:02:40.352  INFO [b63fdd31-940d-4621-b165-a8d9cd53369b] 22536 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 17:02:40.352  INFO [b63fdd31-940d-4621-b165-a8d9cd53369b] 22536 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 17:02:40.399 DEBUG [c1e3673e-2d19-45b4-856d-138dfb9fade2] 22536 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:02:40.401 DEBUG [c1e3673e-2d19-45b4-856d-138dfb9fade2] 22536 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:02:40.402  INFO [c1e3673e-2d19-45b4-856d-138dfb9fade2] 22536 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:02:40.413 DEBUG [e409df43-c23a-4c7c-ae90-a7ea24b1537d] 22536 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:02:40.416 DEBUG [e409df43-c23a-4c7c-ae90-a7ea24b1537d] 22536 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 17:02:40.458  WARN [e409df43-c23a-4c7c-ae90-a7ea24b1537d] 22536 --- [nio-8080-exec-1] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 17:02:40.459  WARN [e409df43-c23a-4c7c-ae90-a7ea24b1537d] 22536 --- [nio-8080-exec-1] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 17:02:40.470 DEBUG [06273cc5-23d5-4900-bb4f-65b5aad06f82] 22536 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 17:02:40.506  INFO [c1e3673e-2d19-45b4-856d-138dfb9fade2] 22536 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 17:02:40.512 DEBUG [06273cc5-23d5-4900-bb4f-65b5aad06f82] 22536 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:02:40.516 DEBUG [06273cc5-23d5-4900-bb4f-65b5aad06f82] 22536 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 17:02:40.543  WARN [06273cc5-23d5-4900-bb4f-65b5aad06f82] 22536 --- [nio-8080-exec-4] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 17:02:40.544  WARN [06273cc5-23d5-4900-bb4f-65b5aad06f82] 22536 --- [nio-8080-exec-4] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 17:02:40.651  INFO [b63fdd31-940d-4621-b165-a8d9cd53369b] 22536 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 17:02:40.653 DEBUG [b63fdd31-940d-4621-b165-a8d9cd53369b] 22536 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:02:40.677 DEBUG [1963386a-d405-4c7d-8d7f-f780c816bd52] 22536 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 17:02:40.679 DEBUG [1963386a-d405-4c7d-8d7f-f780c816bd52] 22536 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 17:02:40.681  INFO [1963386a-d405-4c7d-8d7f-f780c816bd52] 22536 --- [nio-8080-exec-6] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 17:02:40.681  INFO [1963386a-d405-4c7d-8d7f-f780c816bd52] 22536 --- [nio-8080-exec-6] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 17:02:40.696 DEBUG [e74f9add-4703-43fe-8371-a9b801b5c587] 22536 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 17:02:40.700 DEBUG [e74f9add-4703-43fe-8371-a9b801b5c587] 22536 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 17:02:40.701  INFO [e74f9add-4703-43fe-8371-a9b801b5c587] 22536 --- [nio-8080-exec-7] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 17:02:40.895  INFO [e74f9add-4703-43fe-8371-a9b801b5c587] 22536 --- [nio-8080-exec-7] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 17:02:40.897 DEBUG [e74f9add-4703-43fe-8371-a9b801b5c587] 22536 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:02:40.922 DEBUG [71a2a1a3-8ffb-4b1a-be96-4bf4852a4952] 22536 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 17:02:40.924 DEBUG [71a2a1a3-8ffb-4b1a-be96-4bf4852a4952] 22536 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 17:02:40.927  INFO [71a2a1a3-8ffb-4b1a-be96-4bf4852a4952] 22536 --- [nio-8080-exec-5] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 17:02:40.943 DEBUG [41b43417-2a7c-446f-8711-6d550ed5fe2c] 22536 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 17:02:40.949 DEBUG [41b43417-2a7c-446f-8711-6d550ed5fe2c] 22536 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 17:02:40.950  INFO [41b43417-2a7c-446f-8711-6d550ed5fe2c] 22536 --- [nio-8080-exec-8] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 17:02:40.950  INFO [1963386a-d405-4c7d-8d7f-f780c816bd52] 22536 --- [nio-8080-exec-6] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 17:02:40.952 DEBUG [1963386a-d405-4c7d-8d7f-f780c816bd52] 22536 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:02:40.977  INFO [71a2a1a3-8ffb-4b1a-be96-4bf4852a4952] 22536 --- [nio-8080-exec-5] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 17:02:40.978 DEBUG [71a2a1a3-8ffb-4b1a-be96-4bf4852a4952] 22536 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:02:41.183  INFO [41b43417-2a7c-446f-8711-6d550ed5fe2c] 22536 --- [nio-8080-exec-8] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 17:02:41.185 DEBUG [41b43417-2a7c-446f-8711-6d550ed5fe2c] 22536 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:02:41.211 DEBUG [032c63af-eb2b-48df-b31c-09a657d98e5a] 22536 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 17:02:41.213 DEBUG [032c63af-eb2b-48df-b31c-09a657d98e5a] 22536 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 17:02:41.214  INFO [032c63af-eb2b-48df-b31c-09a657d98e5a] 22536 --- [nio-8080-exec-9] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 17:02:41.264  INFO [032c63af-eb2b-48df-b31c-09a657d98e5a] 22536 --- [nio-8080-exec-9] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 17:02:41.266 DEBUG [032c63af-eb2b-48df-b31c-09a657d98e5a] 22536 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:02:46.944 DEBUG [8f7d6daf-b90b-401d-8f3f-1611c55e0dba] 22536 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 17:02:46.956 DEBUG [8f7d6daf-b90b-401d-8f3f-1611c55e0dba] 22536 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:02:46.960 DEBUG [8f7d6daf-b90b-401d-8f3f-1611c55e0dba] 22536 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 17:02:46.961  INFO [8f7d6daf-b90b-401d-8f3f-1611c55e0dba] 22536 --- [io-8080-exec-10] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 17:02:46.961  INFO [8f7d6daf-b90b-401d-8f3f-1611c55e0dba] 22536 --- [io-8080-exec-10] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 17:02:46.973 DEBUG [6a175495-a628-44b5-87ae-33ac89befecd] 22536 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 17:02:46.984 DEBUG [6a175495-a628-44b5-87ae-33ac89befecd] 22536 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:02:46.987 DEBUG [6a175495-a628-44b5-87ae-33ac89befecd] 22536 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 17:02:46.987  INFO [6a175495-a628-44b5-87ae-33ac89befecd] 22536 --- [nio-8080-exec-1] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 17:02:46.988  INFO [6a175495-a628-44b5-87ae-33ac89befecd] 22536 --- [nio-8080-exec-1] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 17:02:47.157 DEBUG [ff0ad724-3242-4c40-9cc4-de937ac6a824] 22536 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 17:02:47.178 DEBUG [ff0ad724-3242-4c40-9cc4-de937ac6a824] 22536 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:02:47.182 DEBUG [ff0ad724-3242-4c40-9cc4-de937ac6a824] 22536 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 17:02:47.183  INFO [ff0ad724-3242-4c40-9cc4-de937ac6a824] 22536 --- [nio-8080-exec-3] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 17:02:47.184  INFO [ff0ad724-3242-4c40-9cc4-de937ac6a824] 22536 --- [nio-8080-exec-3] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 17:02:59.966 DEBUG [69ddb89c-bf03-4846-89b8-9ed2e427abb2] 22536 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /api/cart/add
2025-06-29 17:02:59.988 DEBUG [69ddb89c-bf03-4846-89b8-9ed2e427abb2] 22536 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:02:59.990 DEBUG [69ddb89c-bf03-4846-89b8-9ed2e427abb2] 22536 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured POST /api/cart/add
2025-06-29 17:03:00.054  INFO [69ddb89c-bf03-4846-89b8-9ed2e427abb2] 22536 --- [nio-8080-exec-5] o.e.x.controllers.CartController         : User ****@****.*** request to add flight ID 16 to persistent cart
2025-06-29 17:03:00.142  INFO [69ddb89c-bf03-4846-89b8-9ed2e427abb2] 22536 --- [nio-8080-exec-5] o.e.xlr8travel.services.CartServiceImpl  : Added new flight ID 16 to cart for user ****@****.***
2025-06-29 17:03:00.176  INFO [69ddb89c-bf03-4846-89b8-9ed2e427abb2] 22536 --- [nio-8080-exec-5] o.e.x.controllers.CartController         : Flight ID 16 added/incremented in persistent cart for user ****@****.***.
2025-06-29 17:03:00.222 DEBUG [156d3523-e191-4b9e-8985-0a94ea169933] 22536 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:03:00.250 DEBUG [156d3523-e191-4b9e-8985-0a94ea169933] 22536 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:03:00.251 DEBUG [156d3523-e191-4b9e-8985-0a94ea169933] 22536 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:03:00.253  INFO [156d3523-e191-4b9e-8985-0a94ea169933] 22536 --- [nio-8080-exec-8] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:03:00.453  INFO [156d3523-e191-4b9e-8985-0a94ea169933] 22536 --- [nio-8080-exec-8] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 17:03:02.237 DEBUG [7c8ccca1-accb-4f24-92a6-63d46e42c2dc] 22536 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:03:02.252 DEBUG [7c8ccca1-accb-4f24-92a6-63d46e42c2dc] 22536 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:03:02.253 DEBUG [7c8ccca1-accb-4f24-92a6-63d46e42c2dc] 22536 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:03:02.254  INFO [7c8ccca1-accb-4f24-92a6-63d46e42c2dc] 22536 --- [nio-8080-exec-9] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:03:02.308  INFO [7c8ccca1-accb-4f24-92a6-63d46e42c2dc] 22536 --- [nio-8080-exec-9] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 17:03:02.315 DEBUG [ae745dab-a17d-42a3-aa19-1f9297ff9f5b] 22536 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:03:02.326 DEBUG [ae745dab-a17d-42a3-aa19-1f9297ff9f5b] 22536 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:03:02.328 DEBUG [ae745dab-a17d-42a3-aa19-1f9297ff9f5b] 22536 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:03:02.328  INFO [ae745dab-a17d-42a3-aa19-1f9297ff9f5b] 22536 --- [io-8080-exec-10] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:03:02.374  INFO [ae745dab-a17d-42a3-aa19-1f9297ff9f5b] 22536 --- [io-8080-exec-10] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 17:03:05.109 DEBUG [4feb834d-51e5-4c0f-9d98-cb47b12504ab] 22536 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:03:05.123 DEBUG [4feb834d-51e5-4c0f-9d98-cb47b12504ab] 22536 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:03:05.125 DEBUG [4feb834d-51e5-4c0f-9d98-cb47b12504ab] 22536 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:03:05.126  INFO [4feb834d-51e5-4c0f-9d98-cb47b12504ab] 22536 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:03:05.175  INFO [4feb834d-51e5-4c0f-9d98-cb47b12504ab] 22536 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 17:03:05.182 DEBUG [304e68df-921b-4e42-ba89-90c6ae87a763] 22536 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:03:05.193 DEBUG [304e68df-921b-4e42-ba89-90c6ae87a763] 22536 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:03:05.195 DEBUG [304e68df-921b-4e42-ba89-90c6ae87a763] 22536 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:03:05.195  INFO [304e68df-921b-4e42-ba89-90c6ae87a763] 22536 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:03:05.244  INFO [304e68df-921b-4e42-ba89-90c6ae87a763] 22536 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 17:03:13.353 DEBUG [1f36b694-c487-432f-b4dc-0e4f51ff0fcd] 22536 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing POST /api/checkout/create-payment-intent
2025-06-29 17:03:13.354 DEBUG [1f36b694-c487-432f-b4dc-0e4f51ff0fcd] 22536 --- [nio-8080-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 17:03:13.355 DEBUG [1f36b694-c487-432f-b4dc-0e4f51ff0fcd] 22536 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured POST /api/checkout/create-payment-intent
2025-06-29 17:03:13.375  INFO [1f36b694-c487-432f-b4dc-0e4f51ff0fcd] 22536 --- [nio-8080-exec-4] o.e.x.controllers.PaymentController      : Creating payment intent for amount: 23995 ron
2025-06-29 17:03:14.084  INFO [1f36b694-c487-432f-b4dc-0e4f51ff0fcd] 22536 --- [nio-8080-exec-4] o.e.x.controllers.PaymentController      : Payment intent created successfully: pi_3RfLp7Gf8s1WZJnq19Aj034M
2025-06-29 17:03:15.410 DEBUG [6c9d9b14-8a63-468b-af55-c9df730cfc9b] 22536 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/checkout/confirm
2025-06-29 17:03:15.423 DEBUG [6c9d9b14-8a63-468b-af55-c9df730cfc9b] 22536 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:03:15.425 DEBUG [6c9d9b14-8a63-468b-af55-c9df730cfc9b] 22536 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /api/checkout/confirm
2025-06-29 17:03:15.428  INFO [6c9d9b14-8a63-468b-af55-c9df730cfc9b] 22536 --- [nio-8080-exec-2] o.e.x.controllers.CheckoutController     : Received purchase confirmation request.
2025-06-29 17:03:15.434  INFO [6c9d9b14-8a63-468b-af55-c9df730cfc9b] 22536 --- [nio-8080-exec-2] o.e.x.controllers.CheckoutController     : Processing purchase for user: ****@****.***
2025-06-29 17:03:15.479  INFO [6c9d9b14-8a63-468b-af55-c9df730cfc9b] 22536 --- [nio-8080-exec-2] o.e.x.controllers.CheckoutController     : User ****@****.*** persistent cart has 1 items.
2025-06-29 17:03:15.480  WARN [6c9d9b14-8a63-468b-af55-c9df730cfc9b] 22536 --- [nio-8080-exec-2] o.e.x.controllers.CheckoutController     : !!! SIMULATING successful payment processing for user ****@****.*** !!!
2025-06-29 17:03:15.482  INFO [6c9d9b14-8a63-468b-af55-c9df730cfc9b] 22536 --- [nio-8080-exec-2] o.e.x.services.OrderServiceImpl          : Creating order from persistent cart for user: ****@****.***
2025-06-29 17:03:15.487  INFO [6c9d9b14-8a63-468b-af55-c9df730cfc9b] 22536 --- [nio-8080-exec-2] o.e.x.services.OrderServiceImpl          : Order 1 created for user ****@****.***, status: PENDING_PAYMENT. Total: 37.99
2025-06-29 17:03:15.487  INFO [6c9d9b14-8a63-468b-af55-c9df730cfc9b] 22536 --- [nio-8080-exec-2] o.e.x.services.OrderServiceImpl          : Created ticket with deferred seat selection (fallback) for flight XT-OTP-CDG-2 for user ****@****.***
2025-06-29 17:03:16.955  INFO [6c9d9b14-8a63-468b-af55-c9df730cfc9b] 22536 --- [nio-8080-exec-2] o.e.x.services.EmailServiceImpl          : Purchase confirmation email sent to ****@****.***
2025-06-29 17:03:16.956  INFO [6c9d9b14-8a63-468b-af55-c9df730cfc9b] 22536 --- [nio-8080-exec-2] o.e.x.services.OrderServiceImpl          : Purchase confirmation email sent to user: ****@****.***
2025-06-29 17:03:16.968  INFO [6c9d9b14-8a63-468b-af55-c9df730cfc9b] 22536 --- [nio-8080-exec-2] o.e.x.controllers.CheckoutController     : Order successfully created for user ****@****.***. Confirmation: 1
2025-06-29 17:03:16.972  INFO [6c9d9b14-8a63-468b-af55-c9df730cfc9b] 22536 --- [nio-8080-exec-2] o.e.xlr8travel.services.CartServiceImpl  : Clearing 1 items from cart for user ****@****.***
2025-06-29 17:03:16.994  INFO [6c9d9b14-8a63-468b-af55-c9df730cfc9b] 22536 --- [nio-8080-exec-2] o.e.x.controllers.CheckoutController     : Persistent cart cleared for user ****@****.***.
2025-06-29 17:03:17.005 DEBUG [9596438a-68a4-4090-8c1d-f38c9a0560f6] 22536 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing DELETE /api/cart/remove/16
2025-06-29 17:03:17.098 DEBUG [9596438a-68a4-4090-8c1d-f38c9a0560f6] 22536 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:03:17.099 DEBUG [9596438a-68a4-4090-8c1d-f38c9a0560f6] 22536 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured DELETE /api/cart/remove/16
2025-06-29 17:03:17.181  INFO [9596438a-68a4-4090-8c1d-f38c9a0560f6] 22536 --- [nio-8080-exec-7] o.e.x.controllers.CartController         : User ****@****.*** request to remove flight ID 16 from persistent cart
2025-06-29 17:03:17.192  WARN [9596438a-68a4-4090-8c1d-f38c9a0560f6] 22536 --- [nio-8080-exec-7] o.e.xlr8travel.services.CartServiceImpl  : Attempted to remove flight ID 16 not found in cart for user ****@****.***
2025-06-29 17:03:17.194  WARN [9596438a-68a4-4090-8c1d-f38c9a0560f6] 22536 --- [nio-8080-exec-7] o.e.x.controllers.CartController         : Attempted to remove flight ID 16 not found in persistent cart for user ****@****.***
2025-06-29 17:03:17.204 DEBUG [5a79dd11-c9af-4a0d-816b-a341dba73598] 22536 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:03:17.295 DEBUG [5a79dd11-c9af-4a0d-816b-a341dba73598] 22536 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:03:17.297 DEBUG [5a79dd11-c9af-4a0d-816b-a341dba73598] 22536 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:03:17.298  INFO [5a79dd11-c9af-4a0d-816b-a341dba73598] 22536 --- [nio-8080-exec-6] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:03:17.387  INFO [5a79dd11-c9af-4a0d-816b-a341dba73598] 22536 --- [nio-8080-exec-6] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 17:03:19.916 DEBUG [b4f8387e-d304-4644-b264-e2104dd8d9c0] 22536 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 17:03:20.030 DEBUG [b4f8387e-d304-4644-b264-e2104dd8d9c0] 22536 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:03:20.032 DEBUG [b4f8387e-d304-4644-b264-e2104dd8d9c0] 22536 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 17:03:20.130  INFO [b4f8387e-d304-4644-b264-e2104dd8d9c0] 22536 --- [nio-8080-exec-5] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 17:03:20.131  INFO [b4f8387e-d304-4644-b264-e2104dd8d9c0] 22536 --- [nio-8080-exec-5] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 17:03:20.137  INFO [b4f8387e-d304-4644-b264-e2104dd8d9c0] 22536 --- [nio-8080-exec-5] o.e.x.services.TicketServiceImpl         : Found 1 tickets eligible for check-in for user 4
2025-06-29 17:03:20.159 DEBUG [aec14550-90ec-4e8b-8be9-39830e1c59c1] 22536 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 17:03:20.267 DEBUG [aec14550-90ec-4e8b-8be9-39830e1c59c1] 22536 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:03:20.269 DEBUG [aec14550-90ec-4e8b-8be9-39830e1c59c1] 22536 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 17:03:20.371  INFO [aec14550-90ec-4e8b-8be9-39830e1c59c1] 22536 --- [nio-8080-exec-8] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 17:03:20.372  INFO [aec14550-90ec-4e8b-8be9-39830e1c59c1] 22536 --- [nio-8080-exec-8] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 17:03:20.377  INFO [aec14550-90ec-4e8b-8be9-39830e1c59c1] 22536 --- [nio-8080-exec-8] o.e.x.services.TicketServiceImpl         : Found 1 tickets eligible for check-in for user 4
2025-06-29 17:03:23.521 DEBUG [5611e7d0-7fcb-4a07-91c4-6a6e854eb7c4] 22536 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 17:03:23.874 DEBUG [5611e7d0-7fcb-4a07-91c4-6a6e854eb7c4] 22536 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:03:23.878 DEBUG [5611e7d0-7fcb-4a07-91c4-6a6e854eb7c4] 22536 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 17:03:23.879  INFO [5611e7d0-7fcb-4a07-91c4-6a6e854eb7c4] 22536 --- [nio-8080-exec-9] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 17:03:23.879  INFO [5611e7d0-7fcb-4a07-91c4-6a6e854eb7c4] 22536 --- [nio-8080-exec-9] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 17:03:23.977 DEBUG [14834d4d-0620-4f53-9c67-9693e9de6f70] 22536 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 17:03:24.126 DEBUG [14834d4d-0620-4f53-9c67-9693e9de6f70] 22536 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:03:24.129 DEBUG [14834d4d-0620-4f53-9c67-9693e9de6f70] 22536 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 17:03:24.130  INFO [14834d4d-0620-4f53-9c67-9693e9de6f70] 22536 --- [io-8080-exec-10] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 17:03:24.130  INFO [14834d4d-0620-4f53-9c67-9693e9de6f70] 22536 --- [io-8080-exec-10] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 17:03:47.117 DEBUG [272aa508-2a9e-4cbd-b449-4479447d4303] 22536 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 17:03:47.237 DEBUG [272aa508-2a9e-4cbd-b449-4479447d4303] 22536 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:03:47.239 DEBUG [272aa508-2a9e-4cbd-b449-4479447d4303] 22536 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 17:03:47.241  INFO [272aa508-2a9e-4cbd-b449-4479447d4303] 22536 --- [nio-8080-exec-1] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 17:03:47.241  INFO [272aa508-2a9e-4cbd-b449-4479447d4303] 22536 --- [nio-8080-exec-1] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 17:03:47.287 DEBUG [c97e0d9f-901f-4872-84c1-7eba89549c23] 22536 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 17:03:47.380 DEBUG [c97e0d9f-901f-4872-84c1-7eba89549c23] 22536 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:03:47.382 DEBUG [c97e0d9f-901f-4872-84c1-7eba89549c23] 22536 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 17:03:47.383  INFO [c97e0d9f-901f-4872-84c1-7eba89549c23] 22536 --- [nio-8080-exec-3] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 17:03:47.383  INFO [c97e0d9f-901f-4872-84c1-7eba89549c23] 22536 --- [nio-8080-exec-3] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 17:03:50.069 DEBUG [50da8948-083d-468f-98e9-01c442123bbc] 22536 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing POST /api/check-in/3/with-seat
2025-06-29 17:03:50.155 DEBUG [50da8948-083d-468f-98e9-01c442123bbc] 22536 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:03:50.158 DEBUG [50da8948-083d-468f-98e9-01c442123bbc] 22536 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured POST /api/check-in/3/with-seat
2025-06-29 17:03:50.244  INFO [50da8948-083d-468f-98e9-01c442123bbc] 22536 --- [nio-8080-exec-4] o.e.x.controllers.CheckinController      : Checking in ticket 3 with seat for user: ****@****.***
2025-06-29 17:03:50.249  INFO [50da8948-083d-468f-98e9-01c442123bbc] 22536 --- [nio-8080-exec-4] o.e.x.services.TicketServiceImpl         : Checking in ticket 3 with seat 15B of type SEAT_TYPE_EXTRA_LEGROOM
2025-06-29 17:03:50.250  INFO [50da8948-083d-468f-98e9-01c442123bbc] 22536 --- [nio-8080-exec-4] o.e.x.services.TicketServiceImpl         : Checking if seat 15B is booked for flight 16
2025-06-29 17:03:50.256  INFO [50da8948-083d-468f-98e9-01c442123bbc] 22536 --- [nio-8080-exec-4] o.e.x.services.TicketServiceImpl         : Successfully checked in ticket 3 with seat 15B
2025-06-29 17:03:53.052 DEBUG [2e7db198-51c0-4952-a6d2-0e7c77cc9319] 22536 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/check-in/boarding-passes
2025-06-29 17:03:53.053 DEBUG [ace6dd5a-2975-4e00-a62a-e967bb2c06cc] 22536 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/check-in/boarding-passes
2025-06-29 17:03:53.057 DEBUG [25a7df32-8dba-4a6e-adb5-339d62f20c92] 22536 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/boarding-passes
2025-06-29 17:03:53.169 DEBUG [25a7df32-8dba-4a6e-adb5-339d62f20c92] 22536 --- [nio-8080-exec-6] o.s.s.core.session.SessionRegistryImpl   : Registering session 12FFE1B749C9ABAE2972970E16243D84, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}])
2025-06-29 17:03:53.170 DEBUG [25a7df32-8dba-4a6e-adb5-339d62f20c92] 22536 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@4d98e098]
2025-06-29 17:03:53.172 DEBUG [25a7df32-8dba-4a6e-adb5-339d62f20c92] 22536 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/boarding-passes
2025-06-29 17:03:53.267  INFO [25a7df32-8dba-4a6e-adb5-339d62f20c92] 22536 --- [nio-8080-exec-6] o.e.x.services.TicketServiceImpl         : Finding checked-in tickets for user 4
2025-06-29 17:03:53.274 DEBUG [d567a9d3-3086-4893-86d7-f574a6608911] 22536 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/boarding-passes
2025-06-29 17:03:53.371 DEBUG [d567a9d3-3086-4893-86d7-f574a6608911] 22536 --- [nio-8080-exec-5] o.s.s.core.session.SessionRegistryImpl   : Registering session 2147A7DB07B0C15B2DA0943A36329943, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}])
2025-06-29 17:03:53.372 DEBUG [d567a9d3-3086-4893-86d7-f574a6608911] 22536 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@707b70c8]
2025-06-29 17:03:53.374 DEBUG [d567a9d3-3086-4893-86d7-f574a6608911] 22536 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/boarding-passes
2025-06-29 17:03:53.467  INFO [d567a9d3-3086-4893-86d7-f574a6608911] 22536 --- [nio-8080-exec-5] o.e.x.services.TicketServiceImpl         : Finding checked-in tickets for user 4
2025-06-29 17:04:31.658 DEBUG [b92ff122-6065-49fd-a42a-b43a801ab57c] 22536 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/nearby?origin=OTP
2025-06-29 17:04:31.659 DEBUG [b92ff122-6065-49fd-a42a-b43a801ab57c] 22536 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/nearby?origin=OTP
2025-06-29 17:04:31.660  INFO [b92ff122-6065-49fd-a42a-b43a801ab57c] 22536 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Received request for nearby flights from origin: OTP, departureDate: null
2025-06-29 17:04:31.660  INFO [b92ff122-6065-49fd-a42a-b43a801ab57c] 22536 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Using search date: 2025-06-29
2025-06-29 17:04:31.660  INFO [b92ff122-6065-49fd-a42a-b43a801ab57c] 22536 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Cache key: OTP-2025-06-29
2025-06-29 17:04:31.660  INFO [b92ff122-6065-49fd-a42a-b43a801ab57c] 22536 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Returning cached nearby flights for origin: OTP, found 6 flights
2025-06-29 17:04:31.661 DEBUG [b92ff122-6065-49fd-a42a-b43a801ab57c] 22536 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:04:34.161 DEBUG [a2bff906-74ae-4aef-a26d-fd5e876b4518] 22536 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-29 17:04:34.162 DEBUG [a2bff906-74ae-4aef-a26d-fd5e876b4518] 22536 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-29 17:04:34.163  INFO [a2bff906-74ae-4aef-a26d-fd5e876b4518] 22536 --- [nio-8080-exec-3] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris
2025-06-29 17:04:34.163  INFO [a2bff906-74ae-4aef-a26d-fd5e876b4518] 22536 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-29 17:04:34.163  INFO [a2bff906-74ae-4aef-a26d-fd5e876b4518] 22536 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-29 17:04:34.163 DEBUG [a2bff906-74ae-4aef-a26d-fd5e876b4518] 22536 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-29).    For example, if today is 2025-06-29, a good departure date would be between 2025-07-06 and 2025-07-13, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris";
2025-06-29 17:04:34.165  INFO [a2bff906-74ae-4aef-a26d-fd5e876b4518] 22536 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-29 17:04:34.166  INFO [a2bff906-74ae-4aef-a26d-fd5e876b4518] 22536 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-29 17:04:34.166  INFO [a2bff906-74ae-4aef-a26d-fd5e876b4518] 22536 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-29 17:04:34.166  INFO [a2bff906-74ae-4aef-a26d-fd5e876b4518] 22536 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 17:04:34.166  INFO [a2bff906-74ae-4aef-a26d-fd5e876b4518] 22536 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-29 17:04:34.168  INFO [a2bff906-74ae-4aef-a26d-fd5e876b4518] 22536 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-29 17:04:34.168  INFO [a2bff906-74ae-4aef-a26d-fd5e876b4518] 22536 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-29 17:04:34.169  INFO [a2bff906-74ae-4aef-a26d-fd5e876b4518] 22536 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-29 17:04:34.169  INFO [a2bff906-74ae-4aef-a26d-fd5e876b4518] 22536 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-29 17:04:36.093  INFO [a2bff906-74ae-4aef-a26d-fd5e876b4518] 22536 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-29 17:04:36.093  INFO [a2bff906-74ae-4aef-a26d-fd5e876b4518] 22536 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Response length: 195 characters
2025-06-29 17:04:36.094 DEBUG [a2bff906-74ae-4aef-a26d-fd5e876b4518] 22536 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-06",
  "returnDate": "2025-07-08",
  "tripType": "roundTrip",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-29 17:04:36.094 DEBUG [a2bff906-74ae-4aef-a26d-fd5e876b4518] 22536 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-29 17:04:36.094 DEBUG [a2bff906-74ae-4aef-a26d-fd5e876b4518] 22536 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-29 17:04:36.095 DEBUG [a2bff906-74ae-4aef-a26d-fd5e876b4518] 22536 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-29 17:04:36.095 DEBUG [a2bff906-74ae-4aef-a26d-fd5e876b4518] 22536 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 17:04:36.095  INFO [a2bff906-74ae-4aef-a26d-fd5e876b4518] 22536 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 17:04:36.095  INFO [a2bff906-74ae-4aef-a26d-fd5e876b4518] 22536 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-06, returnDate=2025-07-08, tripType=roundTrip, adults=1, children=0, infants=0
2025-06-29 17:04:36.095  INFO [a2bff906-74ae-4aef-a26d-fd5e876b4518] 22536 --- [nio-8080-exec-3] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-29 17:04:36.096 DEBUG [a2bff906-74ae-4aef-a26d-fd5e876b4518] 22536 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:04:38.503 DEBUG [6228b17d-7418-4ae7-a674-23d77764dcb4] 22536 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-29 17:04:38.505 DEBUG [6228b17d-7418-4ae7-a674-23d77764dcb4] 22536 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-29 17:04:38.506  INFO [6228b17d-7418-4ae7-a674-23d77764dcb4] 22536 --- [nio-8080-exec-4] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris one way
2025-06-29 17:04:38.506  INFO [6228b17d-7418-4ae7-a674-23d77764dcb4] 22536 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-29 17:04:38.506  INFO [6228b17d-7418-4ae7-a674-23d77764dcb4] 22536 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-29 17:04:38.506 DEBUG [6228b17d-7418-4ae7-a674-23d77764dcb4] 22536 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-29).    For example, if today is 2025-06-29, a good departure date would be between 2025-07-06 and 2025-07-13, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris one way";
2025-06-29 17:04:38.509  INFO [6228b17d-7418-4ae7-a674-23d77764dcb4] 22536 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-29 17:04:38.509  INFO [6228b17d-7418-4ae7-a674-23d77764dcb4] 22536 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-29 17:04:38.509  INFO [6228b17d-7418-4ae7-a674-23d77764dcb4] 22536 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-29 17:04:38.510  INFO [6228b17d-7418-4ae7-a674-23d77764dcb4] 22536 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 17:04:38.510  INFO [6228b17d-7418-4ae7-a674-23d77764dcb4] 22536 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-29 17:04:38.511  INFO [6228b17d-7418-4ae7-a674-23d77764dcb4] 22536 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-29 17:04:38.511  INFO [6228b17d-7418-4ae7-a674-23d77764dcb4] 22536 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-29 17:04:38.511  INFO [6228b17d-7418-4ae7-a674-23d77764dcb4] 22536 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-29 17:04:38.512  INFO [6228b17d-7418-4ae7-a674-23d77764dcb4] 22536 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-29 17:04:40.303  INFO [6228b17d-7418-4ae7-a674-23d77764dcb4] 22536 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-29 17:04:40.303  INFO [6228b17d-7418-4ae7-a674-23d77764dcb4] 22536 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Response length: 184 characters
2025-06-29 17:04:40.304 DEBUG [6228b17d-7418-4ae7-a674-23d77764dcb4] 22536 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-06",
  "returnDate": null,
  "tripType": "oneWay",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-29 17:04:40.304 DEBUG [6228b17d-7418-4ae7-a674-23d77764dcb4] 22536 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-29 17:04:40.304 DEBUG [6228b17d-7418-4ae7-a674-23d77764dcb4] 22536 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-29 17:04:40.305 DEBUG [6228b17d-7418-4ae7-a674-23d77764dcb4] 22536 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-29 17:04:40.305 DEBUG [6228b17d-7418-4ae7-a674-23d77764dcb4] 22536 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 17:04:40.305  INFO [6228b17d-7418-4ae7-a674-23d77764dcb4] 22536 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 17:04:40.305  INFO [6228b17d-7418-4ae7-a674-23d77764dcb4] 22536 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-06, returnDate=null, tripType=oneWay, adults=1, children=0, infants=0
2025-06-29 17:04:40.306  INFO [6228b17d-7418-4ae7-a674-23d77764dcb4] 22536 --- [nio-8080-exec-4] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-29 17:04:40.307 DEBUG [6228b17d-7418-4ae7-a674-23d77764dcb4] 22536 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:04:42.045 DEBUG [b84a04c8-3bb9-4a01-be83-6ccebc059d56] 22536 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 17:04:42.165 DEBUG [b84a04c8-3bb9-4a01-be83-6ccebc059d56] 22536 --- [nio-8080-exec-2] o.s.s.core.session.SessionRegistryImpl   : Registering session A816FD6C9968D876AF66DD520E18BFC9, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}])
2025-06-29 17:04:42.166 DEBUG [b84a04c8-3bb9-4a01-be83-6ccebc059d56] 22536 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@34d55b56]
2025-06-29 17:04:42.168 DEBUG [b84a04c8-3bb9-4a01-be83-6ccebc059d56] 22536 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me
2025-06-29 17:04:42.169  INFO [b84a04c8-3bb9-4a01-be83-6ccebc059d56] 22536 --- [nio-8080-exec-2] o.e.x.controllers.UserController         : Request received for current user details: ****@****.***
2025-06-29 17:04:42.267  INFO [b84a04c8-3bb9-4a01-be83-6ccebc059d56] 22536 --- [nio-8080-exec-2] o.e.x.controllers.UserController         : Returning details for user: ****@****.***
2025-06-29 17:04:42.303 DEBUG [22c45117-13ea-4c26-b561-6244d9220021] 22536 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 17:04:42.308 DEBUG [e0848ecd-e413-4d83-b89a-7eb297876426] 22536 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 17:04:42.309 DEBUG [4c01b21c-e8ea-414f-a4f8-ea483abacfd6] 22536 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:04:42.310 DEBUG [e0848ecd-e413-4d83-b89a-7eb297876426] 22536 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 17:04:42.311  INFO [e0848ecd-e413-4d83-b89a-7eb297876426] 22536 --- [nio-8080-exec-6] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 17:04:42.311  INFO [e0848ecd-e413-4d83-b89a-7eb297876426] 22536 --- [nio-8080-exec-6] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 17:04:42.390  INFO [e0848ecd-e413-4d83-b89a-7eb297876426] 22536 --- [nio-8080-exec-6] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 17:04:42.391 DEBUG [e0848ecd-e413-4d83-b89a-7eb297876426] 22536 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:04:42.398 DEBUG [db0abc2b-006e-4e81-9e86-1fc442291065] 22536 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 17:04:42.399 DEBUG [db0abc2b-006e-4e81-9e86-1fc442291065] 22536 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 17:04:42.400  INFO [db0abc2b-006e-4e81-9e86-1fc442291065] 22536 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 17:04:42.401  INFO [db0abc2b-006e-4e81-9e86-1fc442291065] 22536 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 17:04:42.428 DEBUG [ab27cb29-575f-417c-83a4-c79955d76077] 22536 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 17:04:42.430 DEBUG [ab27cb29-575f-417c-83a4-c79955d76077] 22536 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 17:04:42.431  INFO [ab27cb29-575f-417c-83a4-c79955d76077] 22536 --- [nio-8080-exec-9] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 17:04:42.453 DEBUG [22c45117-13ea-4c26-b561-6244d9220021] 22536 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:04:42.456 DEBUG [4c01b21c-e8ea-414f-a4f8-ea483abacfd6] 22536 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:04:42.456 DEBUG [22c45117-13ea-4c26-b561-6244d9220021] 22536 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 17:04:42.457 DEBUG [4c01b21c-e8ea-414f-a4f8-ea483abacfd6] 22536 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:04:42.458  INFO [4c01b21c-e8ea-414f-a4f8-ea483abacfd6] 22536 --- [nio-8080-exec-5] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:04:42.459  INFO [db0abc2b-006e-4e81-9e86-1fc442291065] 22536 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 17:04:42.460 DEBUG [db0abc2b-006e-4e81-9e86-1fc442291065] 22536 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:04:42.559  WARN [22c45117-13ea-4c26-b561-6244d9220021] 22536 --- [nio-8080-exec-7] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 17:04:42.560  WARN [22c45117-13ea-4c26-b561-6244d9220021] 22536 --- [nio-8080-exec-7] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 17:04:42.566 DEBUG [6e04c4e9-f205-4ed3-89c9-5098a68e4f55] 22536 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 17:04:42.567  INFO [4c01b21c-e8ea-414f-a4f8-ea483abacfd6] 22536 --- [nio-8080-exec-5] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 17:04:42.594  INFO [ab27cb29-575f-417c-83a4-c79955d76077] 22536 --- [nio-8080-exec-9] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 17:04:42.595 DEBUG [ab27cb29-575f-417c-83a4-c79955d76077] 22536 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:04:42.602 DEBUG [91110941-5be3-4397-83c9-4effad3c9d39] 22536 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 17:04:42.605 DEBUG [91110941-5be3-4397-83c9-4effad3c9d39] 22536 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 17:04:42.606  INFO [91110941-5be3-4397-83c9-4effad3c9d39] 22536 --- [nio-8080-exec-1] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 17:04:42.615 DEBUG [69e9c6dc-bb2f-4ea7-88bf-ad239a6d6940] 22536 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 17:04:42.616 DEBUG [69e9c6dc-bb2f-4ea7-88bf-ad239a6d6940] 22536 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 17:04:42.617  INFO [69e9c6dc-bb2f-4ea7-88bf-ad239a6d6940] 22536 --- [nio-8080-exec-3] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 17:04:42.647  INFO [91110941-5be3-4397-83c9-4effad3c9d39] 22536 --- [nio-8080-exec-1] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 17:04:42.648 DEBUG [91110941-5be3-4397-83c9-4effad3c9d39] 22536 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:04:42.675 DEBUG [6e04c4e9-f205-4ed3-89c9-5098a68e4f55] 22536 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:04:42.677 DEBUG [6e04c4e9-f205-4ed3-89c9-5098a68e4f55] 22536 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 17:04:42.767  WARN [6e04c4e9-f205-4ed3-89c9-5098a68e4f55] 22536 --- [io-8080-exec-10] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 17:04:42.768  WARN [6e04c4e9-f205-4ed3-89c9-5098a68e4f55] 22536 --- [io-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 17:04:42.778  INFO [69e9c6dc-bb2f-4ea7-88bf-ad239a6d6940] 22536 --- [nio-8080-exec-3] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 17:04:42.780 DEBUG [69e9c6dc-bb2f-4ea7-88bf-ad239a6d6940] 22536 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:04:42.787 DEBUG [7fc9b64b-0ded-41a3-80b2-efde06d77ffa] 22536 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 17:04:42.788 DEBUG [7fc9b64b-0ded-41a3-80b2-efde06d77ffa] 22536 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 17:04:42.789  INFO [7fc9b64b-0ded-41a3-80b2-efde06d77ffa] 22536 --- [nio-8080-exec-4] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 17:04:42.825  INFO [7fc9b64b-0ded-41a3-80b2-efde06d77ffa] 22536 --- [nio-8080-exec-4] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 17:04:42.826 DEBUG [7fc9b64b-0ded-41a3-80b2-efde06d77ffa] 22536 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:04:48.750 DEBUG [4e66a484-cbf7-4615-8540-92a18fd3803b] 22536 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 17:04:48.853 DEBUG [4e66a484-cbf7-4615-8540-92a18fd3803b] 22536 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:04:48.855 DEBUG [4e66a484-cbf7-4615-8540-92a18fd3803b] 22536 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 17:04:48.856  INFO [4e66a484-cbf7-4615-8540-92a18fd3803b] 22536 --- [nio-8080-exec-2] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 17:04:48.856  INFO [4e66a484-cbf7-4615-8540-92a18fd3803b] 22536 --- [nio-8080-exec-2] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 17:04:48.899 DEBUG [fdfc296e-9f78-4af4-8171-007f8d40807b] 22536 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 17:04:49.003 DEBUG [fdfc296e-9f78-4af4-8171-007f8d40807b] 22536 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:04:49.005 DEBUG [fdfc296e-9f78-4af4-8171-007f8d40807b] 22536 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 17:04:49.006  INFO [fdfc296e-9f78-4af4-8171-007f8d40807b] 22536 --- [nio-8080-exec-6] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 17:04:49.006  INFO [fdfc296e-9f78-4af4-8171-007f8d40807b] 22536 --- [nio-8080-exec-6] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 17:04:49.050 DEBUG [db5edfa0-216a-4afa-a7a6-ee297600e955] 22536 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 17:04:49.162 DEBUG [db5edfa0-216a-4afa-a7a6-ee297600e955] 22536 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:04:49.165 DEBUG [db5edfa0-216a-4afa-a7a6-ee297600e955] 22536 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 17:04:49.165  INFO [db5edfa0-216a-4afa-a7a6-ee297600e955] 22536 --- [nio-8080-exec-8] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 17:04:49.166  INFO [db5edfa0-216a-4afa-a7a6-ee297600e955] 22536 --- [nio-8080-exec-8] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 17:05:02.539 DEBUG [b808ec1f-ce35-4770-9d6b-aa5eca8122dd] 22536 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/cart/add
2025-06-29 17:05:02.641 DEBUG [b808ec1f-ce35-4770-9d6b-aa5eca8122dd] 22536 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:05:02.643 DEBUG [b808ec1f-ce35-4770-9d6b-aa5eca8122dd] 22536 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/cart/add
2025-06-29 17:05:02.736  INFO [b808ec1f-ce35-4770-9d6b-aa5eca8122dd] 22536 --- [nio-8080-exec-7] o.e.x.controllers.CartController         : User ****@****.*** request to add flight ID 16 to persistent cart
2025-06-29 17:05:02.744  INFO [b808ec1f-ce35-4770-9d6b-aa5eca8122dd] 22536 --- [nio-8080-exec-7] o.e.xlr8travel.services.CartServiceImpl  : Added new flight ID 16 to cart for user ****@****.***
2025-06-29 17:05:02.761  INFO [b808ec1f-ce35-4770-9d6b-aa5eca8122dd] 22536 --- [nio-8080-exec-7] o.e.x.controllers.CartController         : Flight ID 16 added/incremented in persistent cart for user ****@****.***.
2025-06-29 17:05:02.775 DEBUG [430d1b82-e45d-46d7-bdb2-645eb3254b76] 22536 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:05:02.886 DEBUG [430d1b82-e45d-46d7-bdb2-645eb3254b76] 22536 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:05:02.888 DEBUG [430d1b82-e45d-46d7-bdb2-645eb3254b76] 22536 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:05:02.889  INFO [430d1b82-e45d-46d7-bdb2-645eb3254b76] 22536 --- [nio-8080-exec-5] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:05:03.004  INFO [430d1b82-e45d-46d7-bdb2-645eb3254b76] 22536 --- [nio-8080-exec-5] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 17:05:03.290 DEBUG [fc6b32f6-3a79-4fb3-b846-07f9bc77c7ef] 22536 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:05:03.379 DEBUG [fc6b32f6-3a79-4fb3-b846-07f9bc77c7ef] 22536 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:05:03.380 DEBUG [fc6b32f6-3a79-4fb3-b846-07f9bc77c7ef] 22536 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:05:03.381  INFO [fc6b32f6-3a79-4fb3-b846-07f9bc77c7ef] 22536 --- [nio-8080-exec-9] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:05:03.472  INFO [fc6b32f6-3a79-4fb3-b846-07f9bc77c7ef] 22536 --- [nio-8080-exec-9] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 17:05:03.478 DEBUG [3f8cd33e-098a-47cb-aae1-15093f5d5d6c] 22536 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:05:03.573 DEBUG [3f8cd33e-098a-47cb-aae1-15093f5d5d6c] 22536 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:05:03.575 DEBUG [3f8cd33e-098a-47cb-aae1-15093f5d5d6c] 22536 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:05:03.576  INFO [3f8cd33e-098a-47cb-aae1-15093f5d5d6c] 22536 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:05:03.678  INFO [3f8cd33e-098a-47cb-aae1-15093f5d5d6c] 22536 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 17:05:05.485 DEBUG [d1b2f144-8017-41e7-a7ad-a38a082e5427] 22536 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:05:05.587 DEBUG [d1b2f144-8017-41e7-a7ad-a38a082e5427] 22536 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:05:05.588 DEBUG [d1b2f144-8017-41e7-a7ad-a38a082e5427] 22536 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:05:05.589  INFO [d1b2f144-8017-41e7-a7ad-a38a082e5427] 22536 --- [io-8080-exec-10] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:05:05.682  INFO [d1b2f144-8017-41e7-a7ad-a38a082e5427] 22536 --- [io-8080-exec-10] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 17:05:05.689 DEBUG [2669ebdc-d90e-4b17-b642-51db90fc0250] 22536 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:05:05.792 DEBUG [2669ebdc-d90e-4b17-b642-51db90fc0250] 22536 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:05:05.793 DEBUG [2669ebdc-d90e-4b17-b642-51db90fc0250] 22536 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:05:05.794  INFO [2669ebdc-d90e-4b17-b642-51db90fc0250] 22536 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:05:05.900  INFO [2669ebdc-d90e-4b17-b642-51db90fc0250] 22536 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 17:05:12.171 DEBUG [7ec6f7cc-252b-4828-9dad-00a316f59c82] 22536 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing POST /api/checkout/create-payment-intent
2025-06-29 17:05:12.172 DEBUG [7ec6f7cc-252b-4828-9dad-00a316f59c82] 22536 --- [nio-8080-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 17:05:12.173 DEBUG [7ec6f7cc-252b-4828-9dad-00a316f59c82] 22536 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured POST /api/checkout/create-payment-intent
2025-06-29 17:05:12.174  INFO [7ec6f7cc-252b-4828-9dad-00a316f59c82] 22536 --- [nio-8080-exec-4] o.e.x.controllers.PaymentController      : Creating payment intent for amount: 23995 ron
2025-06-29 17:05:12.717  INFO [7ec6f7cc-252b-4828-9dad-00a316f59c82] 22536 --- [nio-8080-exec-4] o.e.x.controllers.PaymentController      : Payment intent created successfully: pi_3RfLr2Gf8s1WZJnq0PUHK2m0
2025-06-29 17:05:14.018 DEBUG [a87ded4c-b1cc-47b4-8e6b-b640599f23b4] 22536 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/checkout/confirm
2025-06-29 17:05:14.117 DEBUG [a87ded4c-b1cc-47b4-8e6b-b640599f23b4] 22536 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:05:14.118 DEBUG [a87ded4c-b1cc-47b4-8e6b-b640599f23b4] 22536 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /api/checkout/confirm
2025-06-29 17:05:14.119  INFO [a87ded4c-b1cc-47b4-8e6b-b640599f23b4] 22536 --- [nio-8080-exec-2] o.e.x.controllers.CheckoutController     : Received purchase confirmation request.
2025-06-29 17:05:14.198  INFO [a87ded4c-b1cc-47b4-8e6b-b640599f23b4] 22536 --- [nio-8080-exec-2] o.e.x.controllers.CheckoutController     : Processing purchase for user: ****@****.***
2025-06-29 17:05:14.205  INFO [a87ded4c-b1cc-47b4-8e6b-b640599f23b4] 22536 --- [nio-8080-exec-2] o.e.x.controllers.CheckoutController     : User ****@****.*** persistent cart has 1 items.
2025-06-29 17:05:14.206  WARN [a87ded4c-b1cc-47b4-8e6b-b640599f23b4] 22536 --- [nio-8080-exec-2] o.e.x.controllers.CheckoutController     : !!! SIMULATING successful payment processing for user ****@****.*** !!!
2025-06-29 17:05:14.206  INFO [a87ded4c-b1cc-47b4-8e6b-b640599f23b4] 22536 --- [nio-8080-exec-2] o.e.x.services.OrderServiceImpl          : Creating order from persistent cart for user: ****@****.***
2025-06-29 17:05:14.210  INFO [a87ded4c-b1cc-47b4-8e6b-b640599f23b4] 22536 --- [nio-8080-exec-2] o.e.x.services.OrderServiceImpl          : Order 2 created for user ****@****.***, status: PENDING_PAYMENT. Total: 37.99
2025-06-29 17:05:14.210  INFO [a87ded4c-b1cc-47b4-8e6b-b640599f23b4] 22536 --- [nio-8080-exec-2] o.e.x.services.OrderServiceImpl          : Created ticket with deferred seat selection (fallback) for flight XT-OTP-CDG-2 for user ****@****.***
2025-06-29 17:05:15.608  INFO [a87ded4c-b1cc-47b4-8e6b-b640599f23b4] 22536 --- [nio-8080-exec-2] o.e.x.services.EmailServiceImpl          : Purchase confirmation email sent to ****@****.***
2025-06-29 17:05:15.608  INFO [a87ded4c-b1cc-47b4-8e6b-b640599f23b4] 22536 --- [nio-8080-exec-2] o.e.x.services.OrderServiceImpl          : Purchase confirmation email sent to user: ****@****.***
2025-06-29 17:05:15.623  INFO [a87ded4c-b1cc-47b4-8e6b-b640599f23b4] 22536 --- [nio-8080-exec-2] o.e.x.controllers.CheckoutController     : Order successfully created for user ****@****.***. Confirmation: 2
2025-06-29 17:05:15.626  INFO [a87ded4c-b1cc-47b4-8e6b-b640599f23b4] 22536 --- [nio-8080-exec-2] o.e.xlr8travel.services.CartServiceImpl  : Clearing 1 items from cart for user ****@****.***
2025-06-29 17:05:15.641  INFO [a87ded4c-b1cc-47b4-8e6b-b640599f23b4] 22536 --- [nio-8080-exec-2] o.e.x.controllers.CheckoutController     : Persistent cart cleared for user ****@****.***.
2025-06-29 17:05:15.649 DEBUG [a3f904c2-d81a-4c8d-b66f-bd012c309831] 22536 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing DELETE /api/cart/remove/16
2025-06-29 17:05:15.748 DEBUG [a3f904c2-d81a-4c8d-b66f-bd012c309831] 22536 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:05:15.750 DEBUG [a3f904c2-d81a-4c8d-b66f-bd012c309831] 22536 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured DELETE /api/cart/remove/16
2025-06-29 17:05:15.834  INFO [a3f904c2-d81a-4c8d-b66f-bd012c309831] 22536 --- [nio-8080-exec-6] o.e.x.controllers.CartController         : User ****@****.*** request to remove flight ID 16 from persistent cart
2025-06-29 17:05:15.841  WARN [a3f904c2-d81a-4c8d-b66f-bd012c309831] 22536 --- [nio-8080-exec-6] o.e.xlr8travel.services.CartServiceImpl  : Attempted to remove flight ID 16 not found in cart for user ****@****.***
2025-06-29 17:05:15.843  WARN [a3f904c2-d81a-4c8d-b66f-bd012c309831] 22536 --- [nio-8080-exec-6] o.e.x.controllers.CartController         : Attempted to remove flight ID 16 not found in persistent cart for user ****@****.***
2025-06-29 17:05:15.852 DEBUG [12530417-9019-4864-a296-32657fd601e1] 22536 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:05:15.938 DEBUG [12530417-9019-4864-a296-32657fd601e1] 22536 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:05:15.939 DEBUG [12530417-9019-4864-a296-32657fd601e1] 22536 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:05:15.940  INFO [12530417-9019-4864-a296-32657fd601e1] 22536 --- [nio-8080-exec-8] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:05:16.023  INFO [12530417-9019-4864-a296-32657fd601e1] 22536 --- [nio-8080-exec-8] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 17:05:17.617 DEBUG [9273b087-c02a-494b-beeb-92f6f2914bf5] 22536 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 17:05:17.723 DEBUG [9273b087-c02a-494b-beeb-92f6f2914bf5] 22536 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:05:17.725 DEBUG [9273b087-c02a-494b-beeb-92f6f2914bf5] 22536 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 17:05:17.805  INFO [9273b087-c02a-494b-beeb-92f6f2914bf5] 22536 --- [nio-8080-exec-7] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 17:05:17.806  INFO [9273b087-c02a-494b-beeb-92f6f2914bf5] 22536 --- [nio-8080-exec-7] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 17:05:17.811  INFO [9273b087-c02a-494b-beeb-92f6f2914bf5] 22536 --- [nio-8080-exec-7] o.e.x.services.TicketServiceImpl         : Found 1 tickets eligible for check-in for user 4
2025-06-29 17:05:17.818 DEBUG [6219a622-31a9-44a4-b632-f9ee513ac9df] 22536 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 17:05:17.916 DEBUG [6219a622-31a9-44a4-b632-f9ee513ac9df] 22536 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:05:17.917 DEBUG [6219a622-31a9-44a4-b632-f9ee513ac9df] 22536 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 17:05:18.005  INFO [6219a622-31a9-44a4-b632-f9ee513ac9df] 22536 --- [nio-8080-exec-5] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 17:05:18.005  INFO [6219a622-31a9-44a4-b632-f9ee513ac9df] 22536 --- [nio-8080-exec-5] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 17:05:18.010  INFO [6219a622-31a9-44a4-b632-f9ee513ac9df] 22536 --- [nio-8080-exec-5] o.e.x.services.TicketServiceImpl         : Found 1 tickets eligible for check-in for user 4
2025-06-29 17:05:35.331 DEBUG [052be739-2aa9-4f40-8965-d5bcbfa8f7af] 22536 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/nearby?origin=OTP
2025-06-29 17:05:35.332 DEBUG [052be739-2aa9-4f40-8965-d5bcbfa8f7af] 22536 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/nearby?origin=OTP
2025-06-29 17:05:35.332  INFO [052be739-2aa9-4f40-8965-d5bcbfa8f7af] 22536 --- [nio-8080-exec-9] o.e.x.controllers.FlightController       : Received request for nearby flights from origin: OTP, departureDate: null
2025-06-29 17:05:35.333  INFO [052be739-2aa9-4f40-8965-d5bcbfa8f7af] 22536 --- [nio-8080-exec-9] o.e.x.controllers.FlightController       : Using search date: 2025-06-29
2025-06-29 17:05:35.333  INFO [052be739-2aa9-4f40-8965-d5bcbfa8f7af] 22536 --- [nio-8080-exec-9] o.e.x.controllers.FlightController       : Cache key: OTP-2025-06-29
2025-06-29 17:05:35.333  INFO [052be739-2aa9-4f40-8965-d5bcbfa8f7af] 22536 --- [nio-8080-exec-9] o.e.x.controllers.FlightController       : Returning cached nearby flights for origin: OTP, found 6 flights
2025-06-29 17:05:35.334 DEBUG [052be739-2aa9-4f40-8965-d5bcbfa8f7af] 22536 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:05:37.037 DEBUG [9fd7290d-1b41-438a-abbf-2559b8bb7c3b] 22536 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-29 17:05:37.038 DEBUG [9fd7290d-1b41-438a-abbf-2559b8bb7c3b] 22536 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-29 17:05:37.039  INFO [9fd7290d-1b41-438a-abbf-2559b8bb7c3b] 22536 --- [nio-8080-exec-1] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris
2025-06-29 17:05:37.040  INFO [9fd7290d-1b41-438a-abbf-2559b8bb7c3b] 22536 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-29 17:05:37.040  INFO [9fd7290d-1b41-438a-abbf-2559b8bb7c3b] 22536 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-29 17:05:37.040 DEBUG [9fd7290d-1b41-438a-abbf-2559b8bb7c3b] 22536 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-29).    For example, if today is 2025-06-29, a good departure date would be between 2025-07-06 and 2025-07-13, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris";
2025-06-29 17:05:37.042  INFO [9fd7290d-1b41-438a-abbf-2559b8bb7c3b] 22536 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-29 17:05:37.043  INFO [9fd7290d-1b41-438a-abbf-2559b8bb7c3b] 22536 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-29 17:05:37.043  INFO [9fd7290d-1b41-438a-abbf-2559b8bb7c3b] 22536 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-29 17:05:37.043  INFO [9fd7290d-1b41-438a-abbf-2559b8bb7c3b] 22536 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 17:05:37.043  INFO [9fd7290d-1b41-438a-abbf-2559b8bb7c3b] 22536 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-29 17:05:37.045  INFO [9fd7290d-1b41-438a-abbf-2559b8bb7c3b] 22536 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-29 17:05:37.049  INFO [9fd7290d-1b41-438a-abbf-2559b8bb7c3b] 22536 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-29 17:05:37.050  INFO [9fd7290d-1b41-438a-abbf-2559b8bb7c3b] 22536 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-29 17:05:37.052  INFO [9fd7290d-1b41-438a-abbf-2559b8bb7c3b] 22536 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-29 17:05:38.979  INFO [9fd7290d-1b41-438a-abbf-2559b8bb7c3b] 22536 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-29 17:05:38.979  INFO [9fd7290d-1b41-438a-abbf-2559b8bb7c3b] 22536 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Response length: 195 characters
2025-06-29 17:05:38.979 DEBUG [9fd7290d-1b41-438a-abbf-2559b8bb7c3b] 22536 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-06",
  "returnDate": "2025-07-08",
  "tripType": "roundTrip",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-29 17:05:38.980 DEBUG [9fd7290d-1b41-438a-abbf-2559b8bb7c3b] 22536 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-29 17:05:38.980 DEBUG [9fd7290d-1b41-438a-abbf-2559b8bb7c3b] 22536 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-29 17:05:38.980 DEBUG [9fd7290d-1b41-438a-abbf-2559b8bb7c3b] 22536 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-29 17:05:38.981 DEBUG [9fd7290d-1b41-438a-abbf-2559b8bb7c3b] 22536 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 17:05:38.981  INFO [9fd7290d-1b41-438a-abbf-2559b8bb7c3b] 22536 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 17:05:38.981  INFO [9fd7290d-1b41-438a-abbf-2559b8bb7c3b] 22536 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-06, returnDate=2025-07-08, tripType=roundTrip, adults=1, children=0, infants=0
2025-06-29 17:05:38.981  INFO [9fd7290d-1b41-438a-abbf-2559b8bb7c3b] 22536 --- [nio-8080-exec-1] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-29 17:05:38.982 DEBUG [9fd7290d-1b41-438a-abbf-2559b8bb7c3b] 22536 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:05:40.494 DEBUG [bb624ca3-9e76-4387-b3f0-d948d549d54f] 22536 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-29 17:05:40.496 DEBUG [bb624ca3-9e76-4387-b3f0-d948d549d54f] 22536 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-29 17:05:40.497  INFO [bb624ca3-9e76-4387-b3f0-d948d549d54f] 22536 --- [io-8080-exec-10] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris one way
2025-06-29 17:05:40.497  INFO [bb624ca3-9e76-4387-b3f0-d948d549d54f] 22536 --- [io-8080-exec-10] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-29 17:05:40.497  INFO [bb624ca3-9e76-4387-b3f0-d948d549d54f] 22536 --- [io-8080-exec-10] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-29 17:05:40.498 DEBUG [bb624ca3-9e76-4387-b3f0-d948d549d54f] 22536 --- [io-8080-exec-10] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-29).    For example, if today is 2025-06-29, a good departure date would be between 2025-07-06 and 2025-07-13, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris one way";
2025-06-29 17:05:40.500  INFO [bb624ca3-9e76-4387-b3f0-d948d549d54f] 22536 --- [io-8080-exec-10] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-29 17:05:40.500  INFO [bb624ca3-9e76-4387-b3f0-d948d549d54f] 22536 --- [io-8080-exec-10] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-29 17:05:40.500  INFO [bb624ca3-9e76-4387-b3f0-d948d549d54f] 22536 --- [io-8080-exec-10] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-29 17:05:40.501  INFO [bb624ca3-9e76-4387-b3f0-d948d549d54f] 22536 --- [io-8080-exec-10] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 17:05:40.502  INFO [bb624ca3-9e76-4387-b3f0-d948d549d54f] 22536 --- [io-8080-exec-10] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-29 17:05:40.503  INFO [bb624ca3-9e76-4387-b3f0-d948d549d54f] 22536 --- [io-8080-exec-10] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-29 17:05:40.503  INFO [bb624ca3-9e76-4387-b3f0-d948d549d54f] 22536 --- [io-8080-exec-10] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-29 17:05:40.503  INFO [bb624ca3-9e76-4387-b3f0-d948d549d54f] 22536 --- [io-8080-exec-10] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-29 17:05:40.503  INFO [bb624ca3-9e76-4387-b3f0-d948d549d54f] 22536 --- [io-8080-exec-10] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-29 17:05:42.266  INFO [bb624ca3-9e76-4387-b3f0-d948d549d54f] 22536 --- [io-8080-exec-10] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-29 17:05:42.267  INFO [bb624ca3-9e76-4387-b3f0-d948d549d54f] 22536 --- [io-8080-exec-10] o.e.x.services.GeminiServiceImpl         : Response length: 184 characters
2025-06-29 17:05:42.268 DEBUG [bb624ca3-9e76-4387-b3f0-d948d549d54f] 22536 --- [io-8080-exec-10] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-06",
  "returnDate": null,
  "tripType": "oneWay",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-29 17:05:42.268 DEBUG [bb624ca3-9e76-4387-b3f0-d948d549d54f] 22536 --- [io-8080-exec-10] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-29 17:05:42.269 DEBUG [bb624ca3-9e76-4387-b3f0-d948d549d54f] 22536 --- [io-8080-exec-10] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-29 17:05:42.269 DEBUG [bb624ca3-9e76-4387-b3f0-d948d549d54f] 22536 --- [io-8080-exec-10] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-29 17:05:42.269 DEBUG [bb624ca3-9e76-4387-b3f0-d948d549d54f] 22536 --- [io-8080-exec-10] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 17:05:42.269  INFO [bb624ca3-9e76-4387-b3f0-d948d549d54f] 22536 --- [io-8080-exec-10] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 17:05:42.269  INFO [bb624ca3-9e76-4387-b3f0-d948d549d54f] 22536 --- [io-8080-exec-10] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-06, returnDate=null, tripType=oneWay, adults=1, children=0, infants=0
2025-06-29 17:05:42.270  INFO [bb624ca3-9e76-4387-b3f0-d948d549d54f] 22536 --- [io-8080-exec-10] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-29 17:05:42.271 DEBUG [bb624ca3-9e76-4387-b3f0-d948d549d54f] 22536 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:05:44.003 DEBUG [d0238930-a4f8-4aee-98e6-132e8ad79f60] 22536 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 17:05:44.115 DEBUG [d0238930-a4f8-4aee-98e6-132e8ad79f60] 22536 --- [nio-8080-exec-3] o.s.s.core.session.SessionRegistryImpl   : Registering session 39C5D7EE83F96591D36653C0AE23A8A4, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}])
2025-06-29 17:05:44.116 DEBUG [d0238930-a4f8-4aee-98e6-132e8ad79f60] 22536 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@34cbdf27]
2025-06-29 17:05:44.117 DEBUG [d0238930-a4f8-4aee-98e6-132e8ad79f60] 22536 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me
2025-06-29 17:05:44.118  INFO [d0238930-a4f8-4aee-98e6-132e8ad79f60] 22536 --- [nio-8080-exec-3] o.e.x.controllers.UserController         : Request received for current user details: ****@****.***
2025-06-29 17:05:44.225  INFO [d0238930-a4f8-4aee-98e6-132e8ad79f60] 22536 --- [nio-8080-exec-3] o.e.x.controllers.UserController         : Returning details for user: ****@****.***
2025-06-29 17:05:44.285 DEBUG [5e2f283b-7ae2-4027-85a0-b22e598fb85d] 22536 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 17:05:44.285 DEBUG [5088105f-7a1e-4bc4-a0bc-1930e8acf68c] 22536 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:05:44.285 DEBUG [29031374-4fbe-4230-a7cd-7bf94dbadde6] 22536 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 17:05:44.288 DEBUG [29031374-4fbe-4230-a7cd-7bf94dbadde6] 22536 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 17:05:44.290  INFO [29031374-4fbe-4230-a7cd-7bf94dbadde6] 22536 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 17:05:44.290  INFO [29031374-4fbe-4230-a7cd-7bf94dbadde6] 22536 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 17:05:44.382  INFO [29031374-4fbe-4230-a7cd-7bf94dbadde6] 22536 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 17:05:44.383 DEBUG [29031374-4fbe-4230-a7cd-7bf94dbadde6] 22536 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:05:44.390 DEBUG [231982fb-883b-499d-8409-65bb1302c8cd] 22536 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 17:05:44.392 DEBUG [231982fb-883b-499d-8409-65bb1302c8cd] 22536 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 17:05:44.393  INFO [231982fb-883b-499d-8409-65bb1302c8cd] 22536 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 17:05:44.393  INFO [231982fb-883b-499d-8409-65bb1302c8cd] 22536 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 17:05:44.414 DEBUG [5fb320c6-003d-49aa-8baf-c6d8e0fc3336] 22536 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 17:05:44.416 DEBUG [5fb320c6-003d-49aa-8baf-c6d8e0fc3336] 22536 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 17:05:44.417  INFO [5fb320c6-003d-49aa-8baf-c6d8e0fc3336] 22536 --- [nio-8080-exec-7] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 17:05:44.442 DEBUG [5088105f-7a1e-4bc4-a0bc-1930e8acf68c] 22536 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:05:44.443 DEBUG [5088105f-7a1e-4bc4-a0bc-1930e8acf68c] 22536 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:05:44.443 DEBUG [5e2f283b-7ae2-4027-85a0-b22e598fb85d] 22536 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:05:44.444  INFO [5088105f-7a1e-4bc4-a0bc-1930e8acf68c] 22536 --- [nio-8080-exec-6] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:05:44.445 DEBUG [5e2f283b-7ae2-4027-85a0-b22e598fb85d] 22536 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 17:05:44.457  INFO [231982fb-883b-499d-8409-65bb1302c8cd] 22536 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 17:05:44.459 DEBUG [231982fb-883b-499d-8409-65bb1302c8cd] 22536 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:05:44.552  WARN [5e2f283b-7ae2-4027-85a0-b22e598fb85d] 22536 --- [nio-8080-exec-4] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 17:05:44.553  WARN [5e2f283b-7ae2-4027-85a0-b22e598fb85d] 22536 --- [nio-8080-exec-4] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 17:05:44.558 DEBUG [780ec925-d4e5-499f-a136-06c16897b432] 22536 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 17:05:44.560  INFO [5088105f-7a1e-4bc4-a0bc-1930e8acf68c] 22536 --- [nio-8080-exec-6] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 17:05:44.575  INFO [5fb320c6-003d-49aa-8baf-c6d8e0fc3336] 22536 --- [nio-8080-exec-7] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 17:05:44.576 DEBUG [5fb320c6-003d-49aa-8baf-c6d8e0fc3336] 22536 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:05:44.583 DEBUG [332fff52-2e80-48ff-bed6-e45597a3d239] 22536 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 17:05:44.585 DEBUG [332fff52-2e80-48ff-bed6-e45597a3d239] 22536 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 17:05:44.586  INFO [332fff52-2e80-48ff-bed6-e45597a3d239] 22536 --- [nio-8080-exec-9] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 17:05:44.591 DEBUG [f071ecbb-a117-4815-a66f-ce521ab862b8] 22536 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 17:05:44.592 DEBUG [f071ecbb-a117-4815-a66f-ce521ab862b8] 22536 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 17:05:44.593  INFO [f071ecbb-a117-4815-a66f-ce521ab862b8] 22536 --- [nio-8080-exec-1] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 17:05:44.626  INFO [332fff52-2e80-48ff-bed6-e45597a3d239] 22536 --- [nio-8080-exec-9] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 17:05:44.627 DEBUG [332fff52-2e80-48ff-bed6-e45597a3d239] 22536 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:05:44.675 DEBUG [780ec925-d4e5-499f-a136-06c16897b432] 22536 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:05:44.677 DEBUG [780ec925-d4e5-499f-a136-06c16897b432] 22536 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 17:05:44.759  INFO [f071ecbb-a117-4815-a66f-ce521ab862b8] 22536 --- [nio-8080-exec-1] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 17:05:44.761 DEBUG [f071ecbb-a117-4815-a66f-ce521ab862b8] 22536 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:05:44.768 DEBUG [f99b4892-f5c5-4d52-b6e9-42dea417e1ca] 22536 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 17:05:44.770 DEBUG [f99b4892-f5c5-4d52-b6e9-42dea417e1ca] 22536 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 17:05:44.771  INFO [f99b4892-f5c5-4d52-b6e9-42dea417e1ca] 22536 --- [io-8080-exec-10] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 17:05:44.789  WARN [780ec925-d4e5-499f-a136-06c16897b432] 22536 --- [nio-8080-exec-5] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 17:05:44.789  WARN [780ec925-d4e5-499f-a136-06c16897b432] 22536 --- [nio-8080-exec-5] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 17:05:44.811  INFO [f99b4892-f5c5-4d52-b6e9-42dea417e1ca] 22536 --- [io-8080-exec-10] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 17:05:44.813 DEBUG [f99b4892-f5c5-4d52-b6e9-42dea417e1ca] 22536 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:05:49.373 DEBUG [dfe64de6-ceee-4992-9996-82e921a59025] 22536 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 17:05:49.474 DEBUG [dfe64de6-ceee-4992-9996-82e921a59025] 22536 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:05:49.477 DEBUG [dfe64de6-ceee-4992-9996-82e921a59025] 22536 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 17:05:49.477  INFO [dfe64de6-ceee-4992-9996-82e921a59025] 22536 --- [nio-8080-exec-3] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 17:05:49.477  INFO [dfe64de6-ceee-4992-9996-82e921a59025] 22536 --- [nio-8080-exec-3] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 17:05:49.524 DEBUG [9cb34ccb-43f9-4e21-a66a-58fa97c1b2cd] 22536 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 17:05:49.647 DEBUG [9cb34ccb-43f9-4e21-a66a-58fa97c1b2cd] 22536 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:05:49.649 DEBUG [9cb34ccb-43f9-4e21-a66a-58fa97c1b2cd] 22536 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 17:05:49.650  INFO [9cb34ccb-43f9-4e21-a66a-58fa97c1b2cd] 22536 --- [nio-8080-exec-2] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 17:05:49.650  INFO [9cb34ccb-43f9-4e21-a66a-58fa97c1b2cd] 22536 --- [nio-8080-exec-2] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 17:05:49.695 DEBUG [0970f81c-9ed3-4519-b835-26937484f80d] 22536 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 17:05:49.814 DEBUG [0970f81c-9ed3-4519-b835-26937484f80d] 22536 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:05:49.816 DEBUG [0970f81c-9ed3-4519-b835-26937484f80d] 22536 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 17:05:49.817  INFO [0970f81c-9ed3-4519-b835-26937484f80d] 22536 --- [nio-8080-exec-8] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 17:05:49.817  INFO [0970f81c-9ed3-4519-b835-26937484f80d] 22536 --- [nio-8080-exec-8] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 17:05:51.747 DEBUG [852904a9-59fe-43df-98fd-3d2a38050d12] 22536 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 17:05:51.870 DEBUG [852904a9-59fe-43df-98fd-3d2a38050d12] 22536 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:05:51.873 DEBUG [852904a9-59fe-43df-98fd-3d2a38050d12] 22536 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 17:05:51.873  INFO [852904a9-59fe-43df-98fd-3d2a38050d12] 22536 --- [nio-8080-exec-4] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 17:05:51.874  INFO [852904a9-59fe-43df-98fd-3d2a38050d12] 22536 --- [nio-8080-exec-4] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 17:05:51.943 DEBUG [c4d7574e-f8f6-45fe-8d67-4830cf7c1f24] 22536 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 17:05:52.091 DEBUG [c4d7574e-f8f6-45fe-8d67-4830cf7c1f24] 22536 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:05:52.094 DEBUG [c4d7574e-f8f6-45fe-8d67-4830cf7c1f24] 22536 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 17:05:52.095  INFO [c4d7574e-f8f6-45fe-8d67-4830cf7c1f24] 22536 --- [nio-8080-exec-6] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 17:05:52.095  INFO [c4d7574e-f8f6-45fe-8d67-4830cf7c1f24] 22536 --- [nio-8080-exec-6] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 17:05:52.158 DEBUG [7a884850-9dc5-450f-95b1-0e61594b2e5c] 22536 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 17:05:52.298 DEBUG [7a884850-9dc5-450f-95b1-0e61594b2e5c] 22536 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:05:52.304 DEBUG [7a884850-9dc5-450f-95b1-0e61594b2e5c] 22536 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 17:05:52.313  INFO [7a884850-9dc5-450f-95b1-0e61594b2e5c] 22536 --- [nio-8080-exec-7] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 17:05:52.313  INFO [7a884850-9dc5-450f-95b1-0e61594b2e5c] 22536 --- [nio-8080-exec-7] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 17:06:05.806 DEBUG [29755945-1b66-43e8-9733-033fa1a63a39] 22536 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing POST /api/cart/add
2025-06-29 17:06:05.909 DEBUG [29755945-1b66-43e8-9733-033fa1a63a39] 22536 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:06:05.911 DEBUG [29755945-1b66-43e8-9733-033fa1a63a39] 22536 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured POST /api/cart/add
2025-06-29 17:06:06.007  INFO [29755945-1b66-43e8-9733-033fa1a63a39] 22536 --- [nio-8080-exec-9] o.e.x.controllers.CartController         : User ****@****.*** request to add flight ID 16 to persistent cart
2025-06-29 17:06:06.017  INFO [29755945-1b66-43e8-9733-033fa1a63a39] 22536 --- [nio-8080-exec-9] o.e.xlr8travel.services.CartServiceImpl  : Added new flight ID 16 to cart for user ****@****.***
2025-06-29 17:06:06.039  INFO [29755945-1b66-43e8-9733-033fa1a63a39] 22536 --- [nio-8080-exec-9] o.e.x.controllers.CartController         : Flight ID 16 added/incremented in persistent cart for user ****@****.***.
2025-06-29 17:06:06.052 DEBUG [5a23ddb4-9ab8-4179-953b-943623db09ed] 22536 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:06:06.177 DEBUG [5a23ddb4-9ab8-4179-953b-943623db09ed] 22536 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:06:06.179 DEBUG [5a23ddb4-9ab8-4179-953b-943623db09ed] 22536 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:06:06.179  INFO [5a23ddb4-9ab8-4179-953b-943623db09ed] 22536 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:06:06.299  INFO [5a23ddb4-9ab8-4179-953b-943623db09ed] 22536 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 17:06:06.585 DEBUG [ce5fe737-cfe7-49a5-888d-b12fe177439b] 22536 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:06:06.687 DEBUG [ce5fe737-cfe7-49a5-888d-b12fe177439b] 22536 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:06:06.688 DEBUG [ce5fe737-cfe7-49a5-888d-b12fe177439b] 22536 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:06:06.689  INFO [ce5fe737-cfe7-49a5-888d-b12fe177439b] 22536 --- [nio-8080-exec-5] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:06:06.791  INFO [ce5fe737-cfe7-49a5-888d-b12fe177439b] 22536 --- [nio-8080-exec-5] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 17:06:06.798 DEBUG [04fbd7b5-4505-498c-86b9-4a4f44bd3790] 22536 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:06:06.898 DEBUG [04fbd7b5-4505-498c-86b9-4a4f44bd3790] 22536 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:06:06.899 DEBUG [04fbd7b5-4505-498c-86b9-4a4f44bd3790] 22536 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:06:06.900  INFO [04fbd7b5-4505-498c-86b9-4a4f44bd3790] 22536 --- [io-8080-exec-10] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:06:07.004  INFO [04fbd7b5-4505-498c-86b9-4a4f44bd3790] 22536 --- [io-8080-exec-10] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 17:06:11.928 DEBUG [8327cfb2-d284-4ef2-8c33-5d53bfcb9bac] 22536 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 17:06:11.929 DEBUG [8327cfb2-d284-4ef2-8c33-5d53bfcb9bac] 22536 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 17:06:11.932  INFO [8327cfb2-d284-4ef2-8c33-5d53bfcb9bac] 22536 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 17:06:11.932  INFO [8327cfb2-d284-4ef2-8c33-5d53bfcb9bac] 22536 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 17:06:12.016  INFO [8327cfb2-d284-4ef2-8c33-5d53bfcb9bac] 22536 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 17:06:12.018 DEBUG [8327cfb2-d284-4ef2-8c33-5d53bfcb9bac] 22536 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:06:12.027 DEBUG [33efe738-011b-4cbc-b8db-1d3f4c6952ec] 22536 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 17:06:12.028 DEBUG [33efe738-011b-4cbc-b8db-1d3f4c6952ec] 22536 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 17:06:12.029  INFO [33efe738-011b-4cbc-b8db-1d3f4c6952ec] 22536 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 17:06:12.030  INFO [33efe738-011b-4cbc-b8db-1d3f4c6952ec] 22536 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 17:06:12.055 DEBUG [406fbcd4-3bb0-4a5c-93c2-c3a817ff0410] 22536 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 17:06:12.057 DEBUG [406fbcd4-3bb0-4a5c-93c2-c3a817ff0410] 22536 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 17:06:12.058  INFO [406fbcd4-3bb0-4a5c-93c2-c3a817ff0410] 22536 --- [nio-8080-exec-8] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 17:06:12.121  INFO [33efe738-011b-4cbc-b8db-1d3f4c6952ec] 22536 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 17:06:12.122 DEBUG [33efe738-011b-4cbc-b8db-1d3f4c6952ec] 22536 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:06:12.225  INFO [406fbcd4-3bb0-4a5c-93c2-c3a817ff0410] 22536 --- [nio-8080-exec-8] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 17:06:12.227 DEBUG [406fbcd4-3bb0-4a5c-93c2-c3a817ff0410] 22536 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:06:12.235 DEBUG [bcaf01ec-cc0a-4620-89c0-75d83d0eebb2] 22536 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 17:06:12.238 DEBUG [bcaf01ec-cc0a-4620-89c0-75d83d0eebb2] 22536 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 17:06:12.239  INFO [bcaf01ec-cc0a-4620-89c0-75d83d0eebb2] 22536 --- [nio-8080-exec-4] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 17:06:12.245 DEBUG [dc1bb0ab-fbc5-488a-a6a6-7243d884d4a6] 22536 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 17:06:12.246 DEBUG [dc1bb0ab-fbc5-488a-a6a6-7243d884d4a6] 22536 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 17:06:12.248  INFO [dc1bb0ab-fbc5-488a-a6a6-7243d884d4a6] 22536 --- [nio-8080-exec-6] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 17:06:12.285  INFO [bcaf01ec-cc0a-4620-89c0-75d83d0eebb2] 22536 --- [nio-8080-exec-4] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 17:06:12.287 DEBUG [bcaf01ec-cc0a-4620-89c0-75d83d0eebb2] 22536 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:06:12.436  INFO [dc1bb0ab-fbc5-488a-a6a6-7243d884d4a6] 22536 --- [nio-8080-exec-6] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 17:06:12.437 DEBUG [dc1bb0ab-fbc5-488a-a6a6-7243d884d4a6] 22536 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:06:12.444 DEBUG [9b21b70f-9fb2-45f1-af0b-fc697a52c58b] 22536 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 17:06:12.446 DEBUG [9b21b70f-9fb2-45f1-af0b-fc697a52c58b] 22536 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 17:06:12.446  INFO [9b21b70f-9fb2-45f1-af0b-fc697a52c58b] 22536 --- [nio-8080-exec-7] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 17:06:12.484  INFO [9b21b70f-9fb2-45f1-af0b-fc697a52c58b] 22536 --- [nio-8080-exec-7] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 17:06:12.487 DEBUG [9b21b70f-9fb2-45f1-af0b-fc697a52c58b] 22536 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:01:58.318091, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:10:37.331  INFO [NONE] 22536 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-29 17:10:37.335  INFO [NONE] 22536 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-06-29 17:10:37.338  INFO [NONE] 22536 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-06-29 17:11:01.790  INFO [NONE] 25344 --- [  restartedMain] o.e.xlr8travel.Xlr8travelApplication     : Starting Xlr8travelApplication using Java 21.0.5 with PID 25344 (C:\Users\razvi\Desktop\Licenta\backend\target\classes started by razvi in C:\Users\razvi\Desktop\Licenta\backend)
2025-06-29 17:11:01.798 DEBUG [NONE] 25344 --- [  restartedMain] o.e.xlr8travel.Xlr8travelApplication     : Running with Spring Boot v3.2.4, Spring v6.1.5
2025-06-29 17:11:01.798  INFO [NONE] 25344 --- [  restartedMain] o.e.xlr8travel.Xlr8travelApplication     : The following 1 profile is active: "local"
2025-06-29 17:11:01.846  INFO [NONE] 25344 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-29 17:11:01.846  INFO [NONE] 25344 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-29 17:11:02.951  INFO [NONE] 25344 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-29 17:11:03.043  INFO [NONE] 25344 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 84 ms. Found 9 JPA repository interfaces.
2025-06-29 17:11:04.029  INFO [NONE] 25344 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-29 17:11:04.039  INFO [NONE] 25344 --- [  restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-29 17:11:04.040  INFO [NONE] 25344 --- [  restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.19]
2025-06-29 17:11:04.115  INFO [NONE] 25344 --- [  restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-06-29 17:11:04.117  INFO [NONE] 25344 --- [  restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2269 ms
2025-06-29 17:11:04.399  INFO [NONE] 25344 --- [  restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-29 17:11:04.455  INFO [NONE] 25344 --- [  restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.4.Final
2025-06-29 17:11:04.487  INFO [NONE] 25344 --- [  restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-06-29 17:11:04.692  INFO [NONE] 25344 --- [  restartedMain] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-29 17:11:04.719  INFO [NONE] 25344 --- [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-06-29 17:11:04.891  INFO [NONE] 25344 --- [  restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@36e44a12
2025-06-29 17:11:04.893  INFO [NONE] 25344 --- [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-06-29 17:11:04.938  WARN [NONE] 25344 --- [  restartedMain] org.hibernate.orm.deprecation            : HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-29 17:11:06.148  INFO [NONE] 25344 --- [  restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-29 17:11:16.025  INFO [NONE] 25344 --- [  restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-29 17:11:16.400  INFO [NONE] 25344 --- [  restartedMain] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-29 17:11:16.904  WARN [NONE] 25344 --- [  restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Cannot deserialize session attribute [SPRING_SECURITY_CONTEXT] for session [65F00495DBBB266EC058C1F751606AE8]
2025-06-29 17:11:16.906 ERROR [NONE] 25344 --- [  restartedMain] o.a.catalina.session.StandardManager     : Exception loading sessions from persistent storage

java.io.StreamCorruptedException: invalid type code: 00
	at java.base/java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1793)
	at java.base/java.io.ObjectInputStream$FieldValues.<init>(ObjectInputStream.java:2618)
	at java.base/java.io.ObjectInputStream.defaultReadObject(ObjectInputStream.java:678)
	at java.base/java.lang.Throwable.readObject(Throwable.java:936)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1102)
	at java.base/java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2444)
	at java.base/java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2284)
	at java.base/java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1762)
	at java.base/java.io.ObjectInputStream.readObject(ObjectInputStream.java:540)
	at java.base/java.io.ObjectInputStream.readObject(ObjectInputStream.java:498)
	at org.apache.catalina.session.StandardSession.doReadObject(StandardSession.java:1348)
	at org.apache.catalina.session.StandardSession.readObjectData(StandardSession.java:985)
	at org.apache.catalina.session.StandardManager.doLoad(StandardManager.java:210)
	at org.apache.catalina.session.StandardManager.load(StandardManager.java:156)
	at org.apache.catalina.session.StandardManager.startInternal(StandardManager.java:346)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4893)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1332)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1322)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:866)
	at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:845)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1332)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1322)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:866)
	at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:240)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.StandardService.startInternal(StandardService.java:433)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:921)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.startup.Tomcat.start(Tomcat.java:437)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:126)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.<init>(TomcatWebServer.java:105)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getTomcatWebServer(TomcatServletWebServerFactory.java:499)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getWebServer(TomcatServletWebServerFactory.java:218)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.createWebServer(ServletWebServerApplicationContext.java:188)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:162)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:618)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at org.example.xlr8travel.Xlr8travelApplication.main(Xlr8travelApplication.java:10)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)

2025-06-29 17:11:16.925 DEBUG [NONE] 25344 --- [  restartedMain] o.e.x.security.JwtAuthenticationFilter   : Filter 'jwtAuthenticationFilter' configured for use
2025-06-29 17:11:16.928 DEBUG [NONE] 25344 --- [  restartedMain] o.e.x.security.RateLimitingFilter        : Filter 'rateLimitingFilter' configured for use
2025-06-29 17:11:17.229  INFO [NONE] 25344 --- [  restartedMain] o.e.x.config.LocalPropertiesConfig       : Loaded application-local.properties
2025-06-29 17:11:17.645  INFO [NONE] 25344 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : === GEMINI SERVICE CONFIGURATION ===
2025-06-29 17:11:17.647  INFO [NONE] 25344 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : Project ID: xlr8travel
2025-06-29 17:11:17.647  INFO [NONE] 25344 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : Location ID: us-east1
2025-06-29 17:11:17.647  INFO [NONE] 25344 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : Model: gemini-2.0-flash-001
2025-06-29 17:11:17.647  INFO [NONE] 25344 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : Credentials Path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 17:11:17.648  INFO [NONE] 25344 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : API Key: ***SET***
2025-06-29 17:11:17.648  INFO [NONE] 25344 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : ✅ Credentials file exists: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 17:11:17.649  INFO [NONE] 25344 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : ✅ Credentials file size: 2376 bytes
2025-06-29 17:11:17.649  INFO [NONE] 25344 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : ✅ GOOGLE_APPLICATION_CREDENTIALS env var is set: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 17:11:17.649  INFO [NONE] 25344 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : =====================================
2025-06-29 17:11:17.690  INFO [NONE] 25344 --- [  restartedMain] o.e.x.config.SensitiveDataConfig         : Validating sensitive data configuration for profile: local
2025-06-29 17:11:17.691  WARN [NONE] 25344 --- [  restartedMain] o.e.x.config.SensitiveDataConfig         : Environment variable SPRING_DATASOURCE_URL is not set
2025-06-29 17:11:17.691  WARN [NONE] 25344 --- [  restartedMain] o.e.x.config.SensitiveDataConfig         : Environment variable SPRING_DATASOURCE_USERNAME is not set
2025-06-29 17:11:17.691  WARN [NONE] 25344 --- [  restartedMain] o.e.x.config.SensitiveDataConfig         : Environment variable SPRING_DATASOURCE_PASSWORD is not set
2025-06-29 17:11:17.692  WARN [NONE] 25344 --- [  restartedMain] o.e.x.config.SensitiveDataConfig         : Environment variable STRIPE_SECRET_KEY is not set
2025-06-29 17:11:17.767  WARN [NONE] 25344 --- [  restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-29 17:11:17.917  INFO [NONE] 25344 --- [  restartedMain] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2025-06-29 17:11:18.283  INFO [NONE] 25344 --- [  restartedMain] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 4 endpoint(s) beneath base path '/actuator'
2025-06-29 17:11:18.423  INFO [NONE] 25344 --- [  restartedMain] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6df60c76, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3fa330ae, org.springframework.security.web.context.SecurityContextHolderFilter@4c69f188, org.springframework.security.web.header.HeaderWriterFilter@3497d0f4, org.springframework.web.filter.CorsFilter@1e405b71, org.springframework.security.web.authentication.logout.LogoutFilter@69e20d90, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@93bc5bd, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@4d84a743, org.example.xlr8travel.security.JwtAuthenticationFilter@2aefa30a, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@5b3136d0, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@24e9078b, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@3356cbfb, org.springframework.security.web.session.ConcurrentSessionFilter@10246302, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@1db8f0ad, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@29fa0217, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1e386ace, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6e1ee45b, org.springframework.security.web.session.SessionManagementFilter@699ed178, org.springframework.security.web.access.ExceptionTranslationFilter@4e761aba, org.springframework.security.web.access.intercept.AuthorizationFilter@bfd2b6]
2025-06-29 17:11:19.097  INFO [NONE] 25344 --- [  restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2025-06-29 17:11:19.185  INFO [NONE] 25344 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path ''
2025-06-29 17:11:19.199  INFO [NONE] 25344 --- [  restartedMain] o.e.xlr8travel.Xlr8travelApplication     : Started Xlr8travelApplication in 18.009 seconds (process running for 18.73)
2025-06-29 17:11:34.568  INFO [NONE] 25344 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-29 17:11:34.569  INFO [NONE] 25344 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-06-29 17:11:34.571  INFO [NONE] 25344 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2025-06-29 17:11:34.591 DEBUG [c95010e2-3e25-4ad6-9371-068dcf79f485] 25344 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/nearby?origin=OTP
2025-06-29 17:11:34.613 DEBUG [c95010e2-3e25-4ad6-9371-068dcf79f485] 25344 --- [nio-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 17:11:34.619  WARN [c95010e2-3e25-4ad6-9371-068dcf79f485] 25344 --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/api/flights/nearby' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2025-06-29 17:11:34.631 DEBUG [c95010e2-3e25-4ad6-9371-068dcf79f485] 25344 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/nearby?origin=OTP
2025-06-29 17:11:34.656  INFO [c95010e2-3e25-4ad6-9371-068dcf79f485] 25344 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Received request for nearby flights from origin: OTP, departureDate: null
2025-06-29 17:11:34.656  INFO [c95010e2-3e25-4ad6-9371-068dcf79f485] 25344 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Using search date: 2025-06-29
2025-06-29 17:11:34.658  INFO [c95010e2-3e25-4ad6-9371-068dcf79f485] 25344 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Cache key: OTP-2025-06-29
2025-06-29 17:11:34.658  INFO [c95010e2-3e25-4ad6-9371-068dcf79f485] 25344 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : No valid cache found. Searching nearby flights from origin: OTP, after date: 2025-06-29
2025-06-29 17:11:34.658  INFO [c95010e2-3e25-4ad6-9371-068dcf79f485] 25344 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Calling flightService.findByOriginAndDepartureDateAfter for origin: OTP, date: 2025-06-29
2025-06-29 17:11:34.724  INFO [c95010e2-3e25-4ad6-9371-068dcf79f485] 25344 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Database query completed, found 16 flights
2025-06-29 17:11:34.725  INFO [c95010e2-3e25-4ad6-9371-068dcf79f485] 25344 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Converting 16 Flight entities to FlightDTOs
2025-06-29 17:11:34.726  INFO [c95010e2-3e25-4ad6-9371-068dcf79f485] 25344 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Converted to 16 FlightDTOs
2025-06-29 17:11:34.726  INFO [c95010e2-3e25-4ad6-9371-068dcf79f485] 25344 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Grouping flights by destination country
2025-06-29 17:11:34.727  INFO [c95010e2-3e25-4ad6-9371-068dcf79f485] 25344 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Grouped flights into 7 countries
2025-06-29 17:11:34.727  INFO [c95010e2-3e25-4ad6-9371-068dcf79f485] 25344 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Selecting diverse flights - one from each country first
2025-06-29 17:11:34.727  INFO [c95010e2-3e25-4ad6-9371-068dcf79f485] 25344 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Adding first flight from Greece (has 2 flights)
2025-06-29 17:11:34.728  INFO [c95010e2-3e25-4ad6-9371-068dcf79f485] 25344 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Adding first flight from Netherlands (has 2 flights)
2025-06-29 17:11:34.728  INFO [c95010e2-3e25-4ad6-9371-068dcf79f485] 25344 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Adding first flight from Italy (has 2 flights)
2025-06-29 17:11:34.728  INFO [c95010e2-3e25-4ad6-9371-068dcf79f485] 25344 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Adding first flight from United Kingdom (has 2 flights)
2025-06-29 17:11:34.728  INFO [c95010e2-3e25-4ad6-9371-068dcf79f485] 25344 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Adding first flight from France (has 2 flights)
2025-06-29 17:11:34.728  INFO [c95010e2-3e25-4ad6-9371-068dcf79f485] 25344 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Adding first flight from Switzerland (has 2 flights)
2025-06-29 17:11:34.729  INFO [c95010e2-3e25-4ad6-9371-068dcf79f485] 25344 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Reached 6 flights after first pass, stopping
2025-06-29 17:11:34.729  INFO [c95010e2-3e25-4ad6-9371-068dcf79f485] 25344 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Caching 6 diverse flights with key: OTP-2025-06-29
2025-06-29 17:11:34.730  INFO [c95010e2-3e25-4ad6-9371-068dcf79f485] 25344 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Returning 6 diverse nearby flights from: OTP
2025-06-29 17:11:35.929 DEBUG [12e17bad-8ad9-413b-b6f3-b35d1eae5366] 25344 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:11:36.036 ERROR [12e17bad-8ad9-413b-b6f3-b35d1eae5366] 25344 --- [nio-8080-exec-2] o.e.x.security.JwtAuthenticationFilter   : Cannot set user authentication: User ****@****.*** not found
2025-06-29 17:11:36.037 DEBUG [12e17bad-8ad9-413b-b6f3-b35d1eae5366] 25344 --- [nio-8080-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 17:11:36.048 DEBUG [12e17bad-8ad9-413b-b6f3-b35d1eae5366] 25344 --- [nio-8080-exec-2] o.s.s.w.s.HttpSessionRequestCache        : Saved request http://localhost:8080/api/cart?continue to session
2025-06-29 17:11:36.049 DEBUG [12e17bad-8ad9-413b-b6f3-b35d1eae5366] 25344 --- [nio-8080-exec-2] s.w.a.DelegatingAuthenticationEntryPoint : Trying to match using Ant [pattern='/api/**']
2025-06-29 17:11:36.049 DEBUG [12e17bad-8ad9-413b-b6f3-b35d1eae5366] 25344 --- [nio-8080-exec-2] s.w.a.DelegatingAuthenticationEntryPoint : Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@6552ede6
2025-06-29 17:11:36.057 DEBUG [5a8033d3-1b88-41a1-9aaa-ae18938e9f17] 25344 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:11:36.069 ERROR [5a8033d3-1b88-41a1-9aaa-ae18938e9f17] 25344 --- [nio-8080-exec-3] o.e.x.security.JwtAuthenticationFilter   : Cannot set user authentication: User ****@****.*** not found
2025-06-29 17:11:36.070 DEBUG [5a8033d3-1b88-41a1-9aaa-ae18938e9f17] 25344 --- [nio-8080-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 17:11:36.074 DEBUG [5a8033d3-1b88-41a1-9aaa-ae18938e9f17] 25344 --- [nio-8080-exec-3] o.s.s.w.s.HttpSessionRequestCache        : Saved request http://localhost:8080/api/cart?continue to session
2025-06-29 17:11:36.074 DEBUG [5a8033d3-1b88-41a1-9aaa-ae18938e9f17] 25344 --- [nio-8080-exec-3] s.w.a.DelegatingAuthenticationEntryPoint : Trying to match using Ant [pattern='/api/**']
2025-06-29 17:11:36.078 DEBUG [5a8033d3-1b88-41a1-9aaa-ae18938e9f17] 25344 --- [nio-8080-exec-3] s.w.a.DelegatingAuthenticationEntryPoint : Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@6552ede6
2025-06-29 17:11:37.527 DEBUG [d9207b1b-3ac4-48f5-afa3-75441c6baf9b] 25344 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/nearby?origin=OTP
2025-06-29 17:11:37.528 DEBUG [d9207b1b-3ac4-48f5-afa3-75441c6baf9b] 25344 --- [nio-8080-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 17:11:37.531 DEBUG [d9207b1b-3ac4-48f5-afa3-75441c6baf9b] 25344 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/nearby?origin=OTP
2025-06-29 17:11:37.532  INFO [d9207b1b-3ac4-48f5-afa3-75441c6baf9b] 25344 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Received request for nearby flights from origin: OTP, departureDate: null
2025-06-29 17:11:37.532  INFO [d9207b1b-3ac4-48f5-afa3-75441c6baf9b] 25344 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Using search date: 2025-06-29
2025-06-29 17:11:37.532  INFO [d9207b1b-3ac4-48f5-afa3-75441c6baf9b] 25344 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Cache key: OTP-2025-06-29
2025-06-29 17:11:37.533  INFO [d9207b1b-3ac4-48f5-afa3-75441c6baf9b] 25344 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Returning cached nearby flights for origin: OTP, found 6 flights
2025-06-29 17:11:38.791 DEBUG [c6bd1dd3-22c9-4b32-8c05-4258ee240160] 25344 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /api/logout
2025-06-29 17:11:38.792 DEBUG [c6bd1dd3-22c9-4b32-8c05-4258ee240160] 25344 --- [nio-8080-exec-5] o.s.s.w.a.logout.LogoutFilter            : Logging out [null]
2025-06-29 17:11:40.054 DEBUG [e8104db2-66e2-4720-8bb7-a2e977f50265] 25344 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /oauth2/authorization/google
2025-06-29 17:11:40.065 DEBUG [e8104db2-66e2-4720-8bb7-a2e977f50265] 25344 --- [nio-8080-exec-6] o.s.s.web.DefaultRedirectStrategy        : Redirecting to https://accounts.google.com/o/oauth2/v2/auth?response_type=code&client_id=280181287068-i92p696f0ja6qv5lecrhi4dmn2hsrvie.apps.googleusercontent.com&scope=email%20profile&state=DxWGnew6e6PjXTznXF8Okfuzpcb0c37cFVa5-gQgS1s%3D&redirect_uri=http://localhost:8080/login/oauth2/code/google
2025-06-29 17:11:43.552 DEBUG [dda5a4f8-8fd6-4e8b-ac35-5f64e5e2d964] 25344 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /login/oauth2/code/google?state=DxWGnew6e6PjXTznXF8Okfuzpcb0c37cFVa5-gQgS1s%3D&code=4%2F0AVMBsJieB9STZuXxCbaYpEZelS7PsYb7ecf7DFcVGwBax6C1LNrgHECXaLVQYDIl_ywUQw&scope=email+profile+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile+openid&authuser=1&prompt=none
2025-06-29 17:11:44.109  INFO [dda5a4f8-8fd6-4e8b-ac35-5f64e5e2d964] 25344 --- [nio-8080-exec-7] o.e.x.security.CustomOAuth2UserService   : Creating new user from OAuth2 login: ****@****.***
2025-06-29 17:11:44.194  INFO [dda5a4f8-8fd6-4e8b-ac35-5f64e5e2d964] 25344 --- [nio-8080-exec-7] o.e.x.security.CustomOAuth2UserService   : Successfully created new user from OAuth2 login: ****@****.***
2025-06-29 17:11:44.205 DEBUG [dda5a4f8-8fd6-4e8b-ac35-5f64e5e2d964] 25344 --- [nio-8080-exec-7] .s.ChangeSessionIdAuthenticationStrategy : Changed session id from 65F00495DBBB266EC058C1F751606AE8
2025-06-29 17:11:44.207 DEBUG [dda5a4f8-8fd6-4e8b-ac35-5f64e5e2d964] 25344 --- [nio-8080-exec-7] o.s.s.core.session.SessionRegistryImpl   : Registering session 8BD70926E63D445575D873C4DD415C68, for principal Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}]
2025-06-29 17:11:44.208 DEBUG [dda5a4f8-8fd6-4e8b-ac35-5f64e5e2d964] 25344 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@4f1ab2d3]
2025-06-29 17:11:44.209 DEBUG [dda5a4f8-8fd6-4e8b-ac35-5f64e5e2d964] 25344 --- [nio-8080-exec-7] .s.o.c.w.OAuth2LoginAuthenticationFilter : Set SecurityContextHolder to OAuth2AuthenticationToken [Principal=Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]]
2025-06-29 17:11:44.223  INFO [dda5a4f8-8fd6-4e8b-ac35-5f64e5e2d964] 25344 --- [nio-8080-exec-7] e.x.s.OAuth2AuthenticationSuccessHandler : Extracting username from authentication: 104658082982173093135
2025-06-29 17:11:44.224  INFO [dda5a4f8-8fd6-4e8b-ac35-5f64e5e2d964] 25344 --- [nio-8080-exec-7] e.x.s.OAuth2AuthenticationSuccessHandler : Principal class: org.springframework.security.oauth2.core.user.DefaultOAuth2User
2025-06-29 17:11:44.224  INFO [dda5a4f8-8fd6-4e8b-ac35-5f64e5e2d964] 25344 --- [nio-8080-exec-7] e.x.s.OAuth2AuthenticationSuccessHandler : Principal is DefaultOAuth2User
2025-06-29 17:11:44.224  INFO [dda5a4f8-8fd6-4e8b-ac35-5f64e5e2d964] 25344 --- [nio-8080-exec-7] e.x.s.OAuth2AuthenticationSuccessHandler : OAuth2User attributes: {sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}
2025-06-29 17:11:44.225  INFO [dda5a4f8-8fd6-4e8b-ac35-5f64e5e2d964] 25344 --- [nio-8080-exec-7] e.x.s.OAuth2AuthenticationSuccessHandler : Using email as username: ****@****.***
2025-06-29 17:11:44.226  INFO [dda5a4f8-8fd6-4e8b-ac35-5f64e5e2d964] 25344 --- [nio-8080-exec-7] e.x.s.OAuth2AuthenticationSuccessHandler : Extracting username from authentication: 104658082982173093135
2025-06-29 17:11:44.226  INFO [dda5a4f8-8fd6-4e8b-ac35-5f64e5e2d964] 25344 --- [nio-8080-exec-7] e.x.s.OAuth2AuthenticationSuccessHandler : Principal class: org.springframework.security.oauth2.core.user.DefaultOAuth2User
2025-06-29 17:11:44.226  INFO [dda5a4f8-8fd6-4e8b-ac35-5f64e5e2d964] 25344 --- [nio-8080-exec-7] e.x.s.OAuth2AuthenticationSuccessHandler : Principal is DefaultOAuth2User
2025-06-29 17:11:44.227  INFO [dda5a4f8-8fd6-4e8b-ac35-5f64e5e2d964] 25344 --- [nio-8080-exec-7] e.x.s.OAuth2AuthenticationSuccessHandler : OAuth2User attributes: {sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}
2025-06-29 17:11:44.227  INFO [dda5a4f8-8fd6-4e8b-ac35-5f64e5e2d964] 25344 --- [nio-8080-exec-7] e.x.s.OAuth2AuthenticationSuccessHandler : Using email as username: ****@****.***
2025-06-29 17:11:44.228  INFO [dda5a4f8-8fd6-4e8b-ac35-5f64e5e2d964] 25344 --- [nio-8080-exec-7] e.x.s.OAuth2AuthenticationSuccessHandler : OAuth tokens stored in session for user: ****@****.***
2025-06-29 17:11:44.228 DEBUG [dda5a4f8-8fd6-4e8b-ac35-5f64e5e2d964] 25344 --- [nio-8080-exec-7] o.s.s.web.DefaultRedirectStrategy        : Redirecting to http://localhost:3000?oauth=success
2025-06-29 17:11:45.044 DEBUG [d50563a4-5347-4536-93bb-3c0f6f980ea8] 25344 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/oauth/complete
2025-06-29 17:11:45.047 DEBUG [a48ec8c4-120b-4c15-8461-dcb8bdb9f630] 25344 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/oauth/complete
2025-06-29 17:11:45.063 DEBUG [a655a0d1-4568-441f-b8bc-580440f4a520] 25344 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing POST /api/oauth/complete
2025-06-29 17:11:45.068 DEBUG [094c0a34-1dcf-4832-95e7-bbc43694b009] 25344 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/oauth/complete
2025-06-29 17:11:45.076 DEBUG [094c0a34-1dcf-4832-95e7-bbc43694b009] 25344 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/oauth/complete
2025-06-29 17:11:45.081  INFO [094c0a34-1dcf-4832-95e7-bbc43694b009] 25344 --- [nio-8080-exec-1] o.e.x.controllers.OAuthController        : OAuth tokens retrieved and cleared from session for user: ****@****.***
2025-06-29 17:11:45.087 DEBUG [094c0a34-1dcf-4832-95e7-bbc43694b009] 25344 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]]]
2025-06-29 17:11:45.092 DEBUG [a655a0d1-4568-441f-b8bc-580440f4a520] 25344 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured POST /api/oauth/complete
2025-06-29 17:11:45.106 DEBUG [a655a0d1-4568-441f-b8bc-580440f4a520] 25344 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]]]
2025-06-29 17:11:45.441 DEBUG [3523a41c-d805-4848-84a7-0642c49b0d15] 25344 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/nearby?origin=OTP
2025-06-29 17:11:45.455 DEBUG [3523a41c-d805-4848-84a7-0642c49b0d15] 25344 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/nearby?origin=OTP
2025-06-29 17:11:45.458  INFO [3523a41c-d805-4848-84a7-0642c49b0d15] 25344 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Received request for nearby flights from origin: OTP, departureDate: null
2025-06-29 17:11:45.459  INFO [3523a41c-d805-4848-84a7-0642c49b0d15] 25344 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Using search date: 2025-06-29
2025-06-29 17:11:45.461  INFO [3523a41c-d805-4848-84a7-0642c49b0d15] 25344 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Cache key: OTP-2025-06-29
2025-06-29 17:11:45.461  INFO [3523a41c-d805-4848-84a7-0642c49b0d15] 25344 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Returning cached nearby flights for origin: OTP, found 6 flights
2025-06-29 17:11:45.465 DEBUG [3523a41c-d805-4848-84a7-0642c49b0d15] 25344 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]]]
2025-06-29 17:11:46.045 DEBUG [b850c1e6-459e-4240-af66-c40a9b2fd920] 25344 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 17:11:46.067 DEBUG [b850c1e6-459e-4240-af66-c40a9b2fd920] 25344 --- [nio-8080-exec-3] o.s.s.core.session.SessionRegistryImpl   : Registering session 57647C361B1C474D7F42C62C8C9B93CD, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:11:44.177978, lastLogin=null, addresses=[], tickets=[])
2025-06-29 17:11:46.068 DEBUG [b850c1e6-459e-4240-af66-c40a9b2fd920] 25344 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:11:44.177978, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@66e5dd2b]
2025-06-29 17:11:46.071 DEBUG [b850c1e6-459e-4240-af66-c40a9b2fd920] 25344 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me
2025-06-29 17:11:46.073  INFO [b850c1e6-459e-4240-af66-c40a9b2fd920] 25344 --- [nio-8080-exec-3] o.e.x.controllers.UserController         : Request received for current user details: ****@****.***
2025-06-29 17:11:46.083  INFO [b850c1e6-459e-4240-af66-c40a9b2fd920] 25344 --- [nio-8080-exec-3] o.e.x.controllers.UserController         : Returning details for user: ****@****.***
2025-06-29 17:11:46.118 DEBUG [eeccfd09-a656-4f12-ae56-8e8bfc61db14] 25344 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:11:46.119 DEBUG [3a9e1441-a549-4bf2-b0f9-b5be830aa5b4] 25344 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 17:11:46.132 DEBUG [eeccfd09-a656-4f12-ae56-8e8bfc61db14] 25344 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=65F00495DBBB266EC058C1F751606AE8], Granted Authorities=[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]]]
2025-06-29 17:11:46.138 DEBUG [eeccfd09-a656-4f12-ae56-8e8bfc61db14] 25344 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:11:46.140  INFO [eeccfd09-a656-4f12-ae56-8e8bfc61db14] 25344 --- [nio-8080-exec-4] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:11:46.142 DEBUG [3a9e1441-a549-4bf2-b0f9-b5be830aa5b4] 25344 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:11:44.177978, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8BD70926E63D445575D873C4DD415C68], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:11:46.146 DEBUG [3a9e1441-a549-4bf2-b0f9-b5be830aa5b4] 25344 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 17:11:46.162  INFO [eeccfd09-a656-4f12-ae56-8e8bfc61db14] 25344 --- [nio-8080-exec-4] o.e.xlr8travel.services.CartServiceImpl  : No existing cart found for user ****@****.*** with ID 4, creating a new one.
2025-06-29 17:11:46.163  WARN [3a9e1441-a549-4bf2-b0f9-b5be830aa5b4] 25344 --- [nio-8080-exec-5] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 17:11:46.175  WARN [3a9e1441-a549-4bf2-b0f9-b5be830aa5b4] 25344 --- [nio-8080-exec-5] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 17:11:46.179  INFO [eeccfd09-a656-4f12-ae56-8e8bfc61db14] 25344 --- [nio-8080-exec-4] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 17:11:54.928 DEBUG [bf4d64e6-746e-455f-b50c-2ba8884d8834] 25344 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-29 17:11:54.930 DEBUG [bf4d64e6-746e-455f-b50c-2ba8884d8834] 25344 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-29 17:11:54.951  INFO [bf4d64e6-746e-455f-b50c-2ba8884d8834] 25344 --- [nio-8080-exec-6] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: weekend trip from bucharest to paris
2025-06-29 17:11:54.952  INFO [bf4d64e6-746e-455f-b50c-2ba8884d8834] 25344 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-29 17:11:54.952  INFO [bf4d64e6-746e-455f-b50c-2ba8884d8834] 25344 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-29 17:11:54.954 DEBUG [bf4d64e6-746e-455f-b50c-2ba8884d8834] 25344 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-29).    For example, if today is 2025-06-29, a good departure date would be between 2025-07-06 and 2025-07-13, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "weekend trip from bucharest to paris";
2025-06-29 17:11:54.956  INFO [bf4d64e6-746e-455f-b50c-2ba8884d8834] 25344 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-29 17:11:54.957  INFO [bf4d64e6-746e-455f-b50c-2ba8884d8834] 25344 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-29 17:11:54.957  INFO [bf4d64e6-746e-455f-b50c-2ba8884d8834] 25344 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-29 17:11:54.957  INFO [bf4d64e6-746e-455f-b50c-2ba8884d8834] 25344 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 17:11:54.957  INFO [bf4d64e6-746e-455f-b50c-2ba8884d8834] 25344 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-29 17:11:55.008  INFO [bf4d64e6-746e-455f-b50c-2ba8884d8834] 25344 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-29 17:11:55.010  INFO [bf4d64e6-746e-455f-b50c-2ba8884d8834] 25344 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-29 17:11:55.013  INFO [bf4d64e6-746e-455f-b50c-2ba8884d8834] 25344 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-29 17:11:55.034  INFO [bf4d64e6-746e-455f-b50c-2ba8884d8834] 25344 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-29 17:11:59.543  INFO [bf4d64e6-746e-455f-b50c-2ba8884d8834] 25344 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-29 17:11:59.544  INFO [bf4d64e6-746e-455f-b50c-2ba8884d8834] 25344 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Response length: 195 characters
2025-06-29 17:11:59.547 DEBUG [bf4d64e6-746e-455f-b50c-2ba8884d8834] 25344 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-06",
  "returnDate": "2025-07-08",
  "tripType": "roundTrip",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-29 17:11:59.548 DEBUG [bf4d64e6-746e-455f-b50c-2ba8884d8834] 25344 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-29 17:11:59.556 DEBUG [bf4d64e6-746e-455f-b50c-2ba8884d8834] 25344 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-29 17:11:59.556 DEBUG [bf4d64e6-746e-455f-b50c-2ba8884d8834] 25344 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-29 17:11:59.557 DEBUG [bf4d64e6-746e-455f-b50c-2ba8884d8834] 25344 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 17:11:59.558  INFO [bf4d64e6-746e-455f-b50c-2ba8884d8834] 25344 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 17:11:59.558  INFO [bf4d64e6-746e-455f-b50c-2ba8884d8834] 25344 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-06, returnDate=2025-07-08, tripType=roundTrip, adults=1, children=0, infants=0
2025-06-29 17:11:59.558  INFO [bf4d64e6-746e-455f-b50c-2ba8884d8834] 25344 --- [nio-8080-exec-6] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-29 17:11:59.564 DEBUG [bf4d64e6-746e-455f-b50c-2ba8884d8834] 25344 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:11:44.177978, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8BD70926E63D445575D873C4DD415C68], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:12:01.443 DEBUG [cc9119b5-9003-4054-85c8-3b26542fbbe9] 25344 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 17:12:01.462 DEBUG [cc9119b5-9003-4054-85c8-3b26542fbbe9] 25344 --- [nio-8080-exec-7] o.s.s.core.session.SessionRegistryImpl   : Registering session 8D14F80675F118F45993C7B01117CD1E, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:11:44.177978, lastLogin=null, addresses=[], tickets=[])
2025-06-29 17:12:01.463 DEBUG [cc9119b5-9003-4054-85c8-3b26542fbbe9] 25344 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:11:44.177978, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@1a2be1cc]
2025-06-29 17:12:01.467 DEBUG [cc9119b5-9003-4054-85c8-3b26542fbbe9] 25344 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me
2025-06-29 17:12:01.468  INFO [cc9119b5-9003-4054-85c8-3b26542fbbe9] 25344 --- [nio-8080-exec-7] o.e.x.controllers.UserController         : Request received for current user details: ****@****.***
2025-06-29 17:12:01.478  INFO [cc9119b5-9003-4054-85c8-3b26542fbbe9] 25344 --- [nio-8080-exec-7] o.e.x.controllers.UserController         : Returning details for user: ****@****.***
2025-06-29 17:12:01.551 DEBUG [17792a00-2abf-4b3d-8ca6-934493ab4195] 25344 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 17:12:01.551 DEBUG [d385018c-cda1-4fc6-af56-cfc134573b42] 25344 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 17:12:01.553 DEBUG [d385018c-cda1-4fc6-af56-cfc134573b42] 25344 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 17:12:01.553 DEBUG [4de7c134-3342-4250-8130-cc68826427ec] 25344 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:12:01.560  INFO [d385018c-cda1-4fc6-af56-cfc134573b42] 25344 --- [nio-8080-exec-9] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 17:12:01.560  INFO [d385018c-cda1-4fc6-af56-cfc134573b42] 25344 --- [nio-8080-exec-9] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 17:12:01.600 DEBUG [4de7c134-3342-4250-8130-cc68826427ec] 25344 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:11:44.177978, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8BD70926E63D445575D873C4DD415C68], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:12:01.600 DEBUG [17792a00-2abf-4b3d-8ca6-934493ab4195] 25344 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:11:44.177978, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8BD70926E63D445575D873C4DD415C68], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:12:01.604 DEBUG [4de7c134-3342-4250-8130-cc68826427ec] 25344 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:12:01.605  INFO [4de7c134-3342-4250-8130-cc68826427ec] 25344 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:12:01.605 DEBUG [17792a00-2abf-4b3d-8ca6-934493ab4195] 25344 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 17:12:01.616  WARN [17792a00-2abf-4b3d-8ca6-934493ab4195] 25344 --- [nio-8080-exec-8] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 17:12:01.619  WARN [17792a00-2abf-4b3d-8ca6-934493ab4195] 25344 --- [nio-8080-exec-8] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 17:12:01.630 DEBUG [d71ba8b8-75bf-4fe6-b33f-134c69df3074] 25344 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 17:12:01.632  INFO [4de7c134-3342-4250-8130-cc68826427ec] 25344 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 17:12:01.647 DEBUG [d71ba8b8-75bf-4fe6-b33f-134c69df3074] 25344 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:11:44.177978, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8BD70926E63D445575D873C4DD415C68], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:12:01.651 DEBUG [d71ba8b8-75bf-4fe6-b33f-134c69df3074] 25344 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 17:12:01.667  WARN [d71ba8b8-75bf-4fe6-b33f-134c69df3074] 25344 --- [io-8080-exec-10] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 17:12:01.668  WARN [d71ba8b8-75bf-4fe6-b33f-134c69df3074] 25344 --- [io-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 17:12:01.700  INFO [d385018c-cda1-4fc6-af56-cfc134573b42] 25344 --- [nio-8080-exec-9] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 17:12:01.703 DEBUG [d385018c-cda1-4fc6-af56-cfc134573b42] 25344 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:11:44.177978, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8BD70926E63D445575D873C4DD415C68], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:12:01.711 DEBUG [1482a60b-ccfc-44a9-ab70-56d5509f08d3] 25344 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 17:12:01.713 DEBUG [1482a60b-ccfc-44a9-ab70-56d5509f08d3] 25344 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 17:12:01.715  INFO [1482a60b-ccfc-44a9-ab70-56d5509f08d3] 25344 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 17:12:01.715  INFO [1482a60b-ccfc-44a9-ab70-56d5509f08d3] 25344 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 17:12:01.725 DEBUG [0f9ff049-965c-4101-bca3-1d906b3dbdb9] 25344 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=CDG&destination=OTP&departureDate=2025-07-08&tripType=oneWay
2025-06-29 17:12:01.728 DEBUG [0f9ff049-965c-4101-bca3-1d906b3dbdb9] 25344 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=CDG&destination=OTP&departureDate=2025-07-08&tripType=oneWay
2025-06-29 17:12:01.730  INFO [0f9ff049-965c-4101-bca3-1d906b3dbdb9] 25344 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=CDG, Dest=OTP, Depart=2025-07-08, Return=null, Pax=1/0/0
2025-06-29 17:12:01.730  INFO [0f9ff049-965c-4101-bca3-1d906b3dbdb9] 25344 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : Performing one-way flight search from CDG to OTP on 2025-07-08
2025-06-29 17:12:01.739  WARN [0f9ff049-965c-4101-bca3-1d906b3dbdb9] 25344 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : No flights found for search: CDG to OTP on 2025-07-08
2025-06-29 17:12:01.739  INFO [0f9ff049-965c-4101-bca3-1d906b3dbdb9] 25344 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : Found 0 available flights for search criteria.
2025-06-29 17:12:01.741 DEBUG [0f9ff049-965c-4101-bca3-1d906b3dbdb9] 25344 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:11:44.177978, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8BD70926E63D445575D873C4DD415C68], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:12:01.786 DEBUG [403081f2-a7df-4b8d-81e8-36fbae73625d] 25344 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 17:12:01.789 DEBUG [403081f2-a7df-4b8d-81e8-36fbae73625d] 25344 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 17:12:01.791  INFO [403081f2-a7df-4b8d-81e8-36fbae73625d] 25344 --- [nio-8080-exec-5] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 17:12:01.791  INFO [1482a60b-ccfc-44a9-ab70-56d5509f08d3] 25344 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 17:12:01.792 DEBUG [1482a60b-ccfc-44a9-ab70-56d5509f08d3] 25344 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:11:44.177978, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8BD70926E63D445575D873C4DD415C68], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:12:01.804 DEBUG [6f798004-c5c9-48f1-b189-298746e7d635] 25344 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=CDG&destination=OTP&departureDate=2025-07-08&tripType=oneWay
2025-06-29 17:12:01.807 DEBUG [6f798004-c5c9-48f1-b189-298746e7d635] 25344 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=CDG&destination=OTP&departureDate=2025-07-08&tripType=oneWay
2025-06-29 17:12:01.809  INFO [6f798004-c5c9-48f1-b189-298746e7d635] 25344 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=CDG, Dest=OTP, Depart=2025-07-08, Return=null, Pax=1/0/0
2025-06-29 17:12:01.809  INFO [6f798004-c5c9-48f1-b189-298746e7d635] 25344 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Performing one-way flight search from CDG to OTP on 2025-07-08
2025-06-29 17:12:01.818  WARN [6f798004-c5c9-48f1-b189-298746e7d635] 25344 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : No flights found for search: CDG to OTP on 2025-07-08
2025-06-29 17:12:01.819  INFO [6f798004-c5c9-48f1-b189-298746e7d635] 25344 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Found 0 available flights for search criteria.
2025-06-29 17:12:01.820 DEBUG [6f798004-c5c9-48f1-b189-298746e7d635] 25344 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:11:44.177978, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8BD70926E63D445575D873C4DD415C68], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:12:02.016  INFO [403081f2-a7df-4b8d-81e8-36fbae73625d] 25344 --- [nio-8080-exec-5] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 17:12:02.023 DEBUG [403081f2-a7df-4b8d-81e8-36fbae73625d] 25344 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:11:44.177978, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8BD70926E63D445575D873C4DD415C68], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:12:02.031 DEBUG [ae4e7073-6849-424f-a87b-9161198207e6] 25344 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 17:12:02.033 DEBUG [ae4e7073-6849-424f-a87b-9161198207e6] 25344 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 17:12:02.034  INFO [ae4e7073-6849-424f-a87b-9161198207e6] 25344 --- [nio-8080-exec-6] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 17:12:02.035 DEBUG [e82269e4-0526-45f0-8e6e-c1f04274656a] 25344 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 17:12:02.037 DEBUG [e82269e4-0526-45f0-8e6e-c1f04274656a] 25344 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 17:12:02.038  INFO [e82269e4-0526-45f0-8e6e-c1f04274656a] 25344 --- [nio-8080-exec-7] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 17:12:02.083  INFO [ae4e7073-6849-424f-a87b-9161198207e6] 25344 --- [nio-8080-exec-6] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 17:12:02.085 DEBUG [ae4e7073-6849-424f-a87b-9161198207e6] 25344 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:11:44.177978, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8BD70926E63D445575D873C4DD415C68], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:12:02.230  INFO [e82269e4-0526-45f0-8e6e-c1f04274656a] 25344 --- [nio-8080-exec-7] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 17:12:02.233 DEBUG [e82269e4-0526-45f0-8e6e-c1f04274656a] 25344 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:11:44.177978, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8BD70926E63D445575D873C4DD415C68], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:12:02.242 DEBUG [fccb2ba0-52c0-4eef-b147-574b8bf89ca5] 25344 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 17:12:02.245 DEBUG [fccb2ba0-52c0-4eef-b147-574b8bf89ca5] 25344 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 17:12:02.247  INFO [fccb2ba0-52c0-4eef-b147-574b8bf89ca5] 25344 --- [nio-8080-exec-8] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 17:12:02.291  INFO [fccb2ba0-52c0-4eef-b147-574b8bf89ca5] 25344 --- [nio-8080-exec-8] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 17:12:02.293 DEBUG [fccb2ba0-52c0-4eef-b147-574b8bf89ca5] 25344 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:11:44.177978, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8BD70926E63D445575D873C4DD415C68], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:12:06.694 DEBUG [1ea3ba80-346d-493c-8b3e-ed0c9ccfa873] 25344 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/nearby?origin=OTP
2025-06-29 17:12:06.696 DEBUG [1ea3ba80-346d-493c-8b3e-ed0c9ccfa873] 25344 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/nearby?origin=OTP
2025-06-29 17:12:06.697  INFO [1ea3ba80-346d-493c-8b3e-ed0c9ccfa873] 25344 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Received request for nearby flights from origin: OTP, departureDate: null
2025-06-29 17:12:06.697  INFO [1ea3ba80-346d-493c-8b3e-ed0c9ccfa873] 25344 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Using search date: 2025-06-29
2025-06-29 17:12:06.698  INFO [1ea3ba80-346d-493c-8b3e-ed0c9ccfa873] 25344 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Cache key: OTP-2025-06-29
2025-06-29 17:12:06.698  INFO [1ea3ba80-346d-493c-8b3e-ed0c9ccfa873] 25344 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Returning cached nearby flights for origin: OTP, found 6 flights
2025-06-29 17:12:06.699 DEBUG [1ea3ba80-346d-493c-8b3e-ed0c9ccfa873] 25344 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:11:44.177978, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8BD70926E63D445575D873C4DD415C68], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:12:08.679 DEBUG [8b6d20d2-2833-461e-b305-666f08b906c4] 25344 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-29 17:12:08.680 DEBUG [8b6d20d2-2833-461e-b305-666f08b906c4] 25344 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-29 17:12:08.681  INFO [8b6d20d2-2833-461e-b305-666f08b906c4] 25344 --- [io-8080-exec-10] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris
2025-06-29 17:12:08.682  INFO [8b6d20d2-2833-461e-b305-666f08b906c4] 25344 --- [io-8080-exec-10] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-29 17:12:08.682  INFO [8b6d20d2-2833-461e-b305-666f08b906c4] 25344 --- [io-8080-exec-10] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-29 17:12:08.682 DEBUG [8b6d20d2-2833-461e-b305-666f08b906c4] 25344 --- [io-8080-exec-10] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-29).    For example, if today is 2025-06-29, a good departure date would be between 2025-07-06 and 2025-07-13, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris";
2025-06-29 17:12:08.685  INFO [8b6d20d2-2833-461e-b305-666f08b906c4] 25344 --- [io-8080-exec-10] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-29 17:12:08.685  INFO [8b6d20d2-2833-461e-b305-666f08b906c4] 25344 --- [io-8080-exec-10] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-29 17:12:08.685  INFO [8b6d20d2-2833-461e-b305-666f08b906c4] 25344 --- [io-8080-exec-10] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-29 17:12:08.686  INFO [8b6d20d2-2833-461e-b305-666f08b906c4] 25344 --- [io-8080-exec-10] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 17:12:08.686  INFO [8b6d20d2-2833-461e-b305-666f08b906c4] 25344 --- [io-8080-exec-10] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-29 17:12:08.687  INFO [8b6d20d2-2833-461e-b305-666f08b906c4] 25344 --- [io-8080-exec-10] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-29 17:12:08.688  INFO [8b6d20d2-2833-461e-b305-666f08b906c4] 25344 --- [io-8080-exec-10] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-29 17:12:08.688  INFO [8b6d20d2-2833-461e-b305-666f08b906c4] 25344 --- [io-8080-exec-10] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-29 17:12:08.688  INFO [8b6d20d2-2833-461e-b305-666f08b906c4] 25344 --- [io-8080-exec-10] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-29 17:12:10.503  INFO [8b6d20d2-2833-461e-b305-666f08b906c4] 25344 --- [io-8080-exec-10] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-29 17:12:10.504  INFO [8b6d20d2-2833-461e-b305-666f08b906c4] 25344 --- [io-8080-exec-10] o.e.x.services.GeminiServiceImpl         : Response length: 195 characters
2025-06-29 17:12:10.505 DEBUG [8b6d20d2-2833-461e-b305-666f08b906c4] 25344 --- [io-8080-exec-10] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-06",
  "returnDate": "2025-07-08",
  "tripType": "roundTrip",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-29 17:12:10.506 DEBUG [8b6d20d2-2833-461e-b305-666f08b906c4] 25344 --- [io-8080-exec-10] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-29 17:12:10.506 DEBUG [8b6d20d2-2833-461e-b305-666f08b906c4] 25344 --- [io-8080-exec-10] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-29 17:12:10.506 DEBUG [8b6d20d2-2833-461e-b305-666f08b906c4] 25344 --- [io-8080-exec-10] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-29 17:12:10.506 DEBUG [8b6d20d2-2833-461e-b305-666f08b906c4] 25344 --- [io-8080-exec-10] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 17:12:10.506  INFO [8b6d20d2-2833-461e-b305-666f08b906c4] 25344 --- [io-8080-exec-10] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 17:12:10.506  INFO [8b6d20d2-2833-461e-b305-666f08b906c4] 25344 --- [io-8080-exec-10] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-06, returnDate=2025-07-08, tripType=roundTrip, adults=1, children=0, infants=0
2025-06-29 17:12:10.507  INFO [8b6d20d2-2833-461e-b305-666f08b906c4] 25344 --- [io-8080-exec-10] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-29 17:12:10.509 DEBUG [8b6d20d2-2833-461e-b305-666f08b906c4] 25344 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:11:44.177978, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8BD70926E63D445575D873C4DD415C68], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:12:12.846 DEBUG [97983256-1e99-4a71-b1fb-d2cedcb4c4d0] 25344 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-29 17:12:12.848 DEBUG [97983256-1e99-4a71-b1fb-d2cedcb4c4d0] 25344 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-29 17:12:12.850  INFO [97983256-1e99-4a71-b1fb-d2cedcb4c4d0] 25344 --- [nio-8080-exec-9] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris one way
2025-06-29 17:12:12.850  INFO [97983256-1e99-4a71-b1fb-d2cedcb4c4d0] 25344 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-29 17:12:12.850  INFO [97983256-1e99-4a71-b1fb-d2cedcb4c4d0] 25344 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-29 17:12:12.851 DEBUG [97983256-1e99-4a71-b1fb-d2cedcb4c4d0] 25344 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-29).    For example, if today is 2025-06-29, a good departure date would be between 2025-07-06 and 2025-07-13, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris one way";
2025-06-29 17:12:12.858  INFO [97983256-1e99-4a71-b1fb-d2cedcb4c4d0] 25344 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-29 17:12:12.859  INFO [97983256-1e99-4a71-b1fb-d2cedcb4c4d0] 25344 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-29 17:12:12.859  INFO [97983256-1e99-4a71-b1fb-d2cedcb4c4d0] 25344 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-29 17:12:12.859  INFO [97983256-1e99-4a71-b1fb-d2cedcb4c4d0] 25344 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 17:12:12.860  INFO [97983256-1e99-4a71-b1fb-d2cedcb4c4d0] 25344 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-29 17:12:12.861  INFO [97983256-1e99-4a71-b1fb-d2cedcb4c4d0] 25344 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-29 17:12:12.861  INFO [97983256-1e99-4a71-b1fb-d2cedcb4c4d0] 25344 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-29 17:12:12.862  INFO [97983256-1e99-4a71-b1fb-d2cedcb4c4d0] 25344 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-29 17:12:12.862  INFO [97983256-1e99-4a71-b1fb-d2cedcb4c4d0] 25344 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-29 17:12:14.470  INFO [97983256-1e99-4a71-b1fb-d2cedcb4c4d0] 25344 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-29 17:12:14.471  INFO [97983256-1e99-4a71-b1fb-d2cedcb4c4d0] 25344 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Response length: 184 characters
2025-06-29 17:12:14.471 DEBUG [97983256-1e99-4a71-b1fb-d2cedcb4c4d0] 25344 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-06",
  "returnDate": null,
  "tripType": "oneWay",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-29 17:12:14.472 DEBUG [97983256-1e99-4a71-b1fb-d2cedcb4c4d0] 25344 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-29 17:12:14.472 DEBUG [97983256-1e99-4a71-b1fb-d2cedcb4c4d0] 25344 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-29 17:12:14.472 DEBUG [97983256-1e99-4a71-b1fb-d2cedcb4c4d0] 25344 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-29 17:12:14.472 DEBUG [97983256-1e99-4a71-b1fb-d2cedcb4c4d0] 25344 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 17:12:14.473  INFO [97983256-1e99-4a71-b1fb-d2cedcb4c4d0] 25344 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 17:12:14.473  INFO [97983256-1e99-4a71-b1fb-d2cedcb4c4d0] 25344 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-06, returnDate=null, tripType=oneWay, adults=1, children=0, infants=0
2025-06-29 17:12:14.473  INFO [97983256-1e99-4a71-b1fb-d2cedcb4c4d0] 25344 --- [nio-8080-exec-9] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-29 17:12:14.474 DEBUG [97983256-1e99-4a71-b1fb-d2cedcb4c4d0] 25344 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:11:44.177978, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8BD70926E63D445575D873C4DD415C68], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:12:16.099 DEBUG [d1671304-61e3-4f2f-8d5b-6cef21ec9bda] 25344 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 17:12:16.111 DEBUG [d1671304-61e3-4f2f-8d5b-6cef21ec9bda] 25344 --- [nio-8080-exec-3] o.s.s.core.session.SessionRegistryImpl   : Registering session A317BEE9D27D26E155C458A56BA33B4A, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:11:44.177978, lastLogin=null, addresses=[], tickets=[])
2025-06-29 17:12:16.112 DEBUG [d1671304-61e3-4f2f-8d5b-6cef21ec9bda] 25344 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:11:44.177978, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@2b3a0263]
2025-06-29 17:12:16.115 DEBUG [d1671304-61e3-4f2f-8d5b-6cef21ec9bda] 25344 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me
2025-06-29 17:12:16.115  INFO [d1671304-61e3-4f2f-8d5b-6cef21ec9bda] 25344 --- [nio-8080-exec-3] o.e.x.controllers.UserController         : Request received for current user details: ****@****.***
2025-06-29 17:12:16.121  INFO [d1671304-61e3-4f2f-8d5b-6cef21ec9bda] 25344 --- [nio-8080-exec-3] o.e.x.controllers.UserController         : Returning details for user: ****@****.***
2025-06-29 17:12:16.186 DEBUG [a9f4aedf-eba1-4746-969c-c1242ff0ebca] 25344 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:12:16.186 DEBUG [8bdd2dc6-a4cf-406d-9f9f-ca8b64ecdc11] 25344 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 17:12:16.186 DEBUG [f501def1-16bb-437d-a7dd-8b2ca06b5f99] 25344 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 17:12:16.189 DEBUG [f501def1-16bb-437d-a7dd-8b2ca06b5f99] 25344 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 17:12:16.191  INFO [f501def1-16bb-437d-a7dd-8b2ca06b5f99] 25344 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 17:12:16.192  INFO [f501def1-16bb-437d-a7dd-8b2ca06b5f99] 25344 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 17:12:16.202 DEBUG [a9f4aedf-eba1-4746-969c-c1242ff0ebca] 25344 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:11:44.177978, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8BD70926E63D445575D873C4DD415C68], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:12:16.203 DEBUG [8bdd2dc6-a4cf-406d-9f9f-ca8b64ecdc11] 25344 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:11:44.177978, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8BD70926E63D445575D873C4DD415C68], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:12:16.204 DEBUG [a9f4aedf-eba1-4746-969c-c1242ff0ebca] 25344 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:12:16.205 DEBUG [8bdd2dc6-a4cf-406d-9f9f-ca8b64ecdc11] 25344 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 17:12:16.206  INFO [a9f4aedf-eba1-4746-969c-c1242ff0ebca] 25344 --- [nio-8080-exec-5] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:12:16.226  WARN [8bdd2dc6-a4cf-406d-9f9f-ca8b64ecdc11] 25344 --- [nio-8080-exec-2] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 17:12:16.229  WARN [8bdd2dc6-a4cf-406d-9f9f-ca8b64ecdc11] 25344 --- [nio-8080-exec-2] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 17:12:16.238 DEBUG [bae000bc-4221-4e0b-97ca-2a3edc119022] 25344 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 17:12:16.239  INFO [a9f4aedf-eba1-4746-969c-c1242ff0ebca] 25344 --- [nio-8080-exec-5] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 17:12:16.251 DEBUG [bae000bc-4221-4e0b-97ca-2a3edc119022] 25344 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:11:44.177978, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8BD70926E63D445575D873C4DD415C68], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:12:16.253 DEBUG [bae000bc-4221-4e0b-97ca-2a3edc119022] 25344 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 17:12:16.260  WARN [bae000bc-4221-4e0b-97ca-2a3edc119022] 25344 --- [nio-8080-exec-6] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 17:12:16.261  WARN [bae000bc-4221-4e0b-97ca-2a3edc119022] 25344 --- [nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 17:12:16.276  INFO [f501def1-16bb-437d-a7dd-8b2ca06b5f99] 25344 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 17:12:16.278 DEBUG [f501def1-16bb-437d-a7dd-8b2ca06b5f99] 25344 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:11:44.177978, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8BD70926E63D445575D873C4DD415C68], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:12:16.284 DEBUG [ce8fa7e6-6f7c-4216-bd70-99a7ef184308] 25344 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 17:12:16.285 DEBUG [ce8fa7e6-6f7c-4216-bd70-99a7ef184308] 25344 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 17:12:16.286  INFO [ce8fa7e6-6f7c-4216-bd70-99a7ef184308] 25344 --- [nio-8080-exec-7] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 17:12:16.287  INFO [ce8fa7e6-6f7c-4216-bd70-99a7ef184308] 25344 --- [nio-8080-exec-7] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 17:12:16.305 DEBUG [6726881e-edb2-4eec-855e-fa8b22a6a28a] 25344 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 17:12:16.307 DEBUG [6726881e-edb2-4eec-855e-fa8b22a6a28a] 25344 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 17:12:16.307  INFO [6726881e-edb2-4eec-855e-fa8b22a6a28a] 25344 --- [nio-8080-exec-8] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 17:12:16.336  INFO [ce8fa7e6-6f7c-4216-bd70-99a7ef184308] 25344 --- [nio-8080-exec-7] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 17:12:16.337 DEBUG [ce8fa7e6-6f7c-4216-bd70-99a7ef184308] 25344 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:11:44.177978, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8BD70926E63D445575D873C4DD415C68], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:12:16.448  INFO [6726881e-edb2-4eec-855e-fa8b22a6a28a] 25344 --- [nio-8080-exec-8] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 17:12:16.449 DEBUG [6726881e-edb2-4eec-855e-fa8b22a6a28a] 25344 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:11:44.177978, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8BD70926E63D445575D873C4DD415C68], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:12:16.455 DEBUG [4c675262-58b2-465d-857f-f31a9afe5aba] 25344 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 17:12:16.457 DEBUG [4c675262-58b2-465d-857f-f31a9afe5aba] 25344 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 17:12:16.457 DEBUG [86c12f64-4052-44ab-b335-e9f6db9b5c2c] 25344 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 17:12:16.458  INFO [4c675262-58b2-465d-857f-f31a9afe5aba] 25344 --- [nio-8080-exec-1] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 17:12:16.458 DEBUG [86c12f64-4052-44ab-b335-e9f6db9b5c2c] 25344 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 17:12:16.459  INFO [86c12f64-4052-44ab-b335-e9f6db9b5c2c] 25344 --- [io-8080-exec-10] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 17:12:16.499  INFO [4c675262-58b2-465d-857f-f31a9afe5aba] 25344 --- [nio-8080-exec-1] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 17:12:16.500 DEBUG [4c675262-58b2-465d-857f-f31a9afe5aba] 25344 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:11:44.177978, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8BD70926E63D445575D873C4DD415C68], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:12:16.651  INFO [86c12f64-4052-44ab-b335-e9f6db9b5c2c] 25344 --- [io-8080-exec-10] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 17:12:16.652 DEBUG [86c12f64-4052-44ab-b335-e9f6db9b5c2c] 25344 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:11:44.177978, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8BD70926E63D445575D873C4DD415C68], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:12:16.659 DEBUG [0547b78f-35c3-4d18-8640-b4f227e40f57] 25344 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 17:12:16.660 DEBUG [0547b78f-35c3-4d18-8640-b4f227e40f57] 25344 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 17:12:16.661  INFO [0547b78f-35c3-4d18-8640-b4f227e40f57] 25344 --- [nio-8080-exec-9] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 17:12:16.707  INFO [0547b78f-35c3-4d18-8640-b4f227e40f57] 25344 --- [nio-8080-exec-9] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 17:12:16.708 DEBUG [0547b78f-35c3-4d18-8640-b4f227e40f57] 25344 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:11:44.177978, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8BD70926E63D445575D873C4DD415C68], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:12:22.798 DEBUG [02b25a68-42b6-4edd-9540-0ff6b22eabfa] 25344 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 17:12:22.809 DEBUG [02b25a68-42b6-4edd-9540-0ff6b22eabfa] 25344 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:11:44.177978, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8BD70926E63D445575D873C4DD415C68], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:12:22.814 DEBUG [02b25a68-42b6-4edd-9540-0ff6b22eabfa] 25344 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 17:12:22.815  INFO [02b25a68-42b6-4edd-9540-0ff6b22eabfa] 25344 --- [nio-8080-exec-3] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 17:12:22.816  INFO [02b25a68-42b6-4edd-9540-0ff6b22eabfa] 25344 --- [nio-8080-exec-3] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 17:12:22.827 DEBUG [fb37b6de-008c-4fa8-a8ac-815cfa7c608a] 25344 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 17:12:22.838 DEBUG [fb37b6de-008c-4fa8-a8ac-815cfa7c608a] 25344 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:11:44.177978, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8BD70926E63D445575D873C4DD415C68], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:12:22.840 DEBUG [fb37b6de-008c-4fa8-a8ac-815cfa7c608a] 25344 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 17:12:22.841  INFO [fb37b6de-008c-4fa8-a8ac-815cfa7c608a] 25344 --- [nio-8080-exec-2] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 17:12:22.841  INFO [fb37b6de-008c-4fa8-a8ac-815cfa7c608a] 25344 --- [nio-8080-exec-2] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 17:12:23.062 DEBUG [e411e957-a6ad-4423-9e1a-22c05dbddfe3] 25344 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 17:12:23.076 DEBUG [e411e957-a6ad-4423-9e1a-22c05dbddfe3] 25344 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:11:44.177978, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8BD70926E63D445575D873C4DD415C68], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:12:23.080 DEBUG [e411e957-a6ad-4423-9e1a-22c05dbddfe3] 25344 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 17:12:23.081  INFO [e411e957-a6ad-4423-9e1a-22c05dbddfe3] 25344 --- [nio-8080-exec-5] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 17:12:23.081  INFO [e411e957-a6ad-4423-9e1a-22c05dbddfe3] 25344 --- [nio-8080-exec-5] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 17:12:26.013 DEBUG [b42b7d50-9255-488c-a29d-4f9d5d58ffef] 25344 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/cart/add
2025-06-29 17:12:26.026 DEBUG [b42b7d50-9255-488c-a29d-4f9d5d58ffef] 25344 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:11:44.177978, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8BD70926E63D445575D873C4DD415C68], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:12:26.028 DEBUG [b42b7d50-9255-488c-a29d-4f9d5d58ffef] 25344 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/cart/add
2025-06-29 17:12:26.108  INFO [b42b7d50-9255-488c-a29d-4f9d5d58ffef] 25344 --- [nio-8080-exec-6] o.e.x.controllers.CartController         : User ****@****.*** request to add flight ID 16 to persistent cart
2025-06-29 17:12:26.173  INFO [b42b7d50-9255-488c-a29d-4f9d5d58ffef] 25344 --- [nio-8080-exec-6] o.e.xlr8travel.services.CartServiceImpl  : Added new flight ID 16 to cart for user ****@****.***
2025-06-29 17:12:26.206  INFO [b42b7d50-9255-488c-a29d-4f9d5d58ffef] 25344 --- [nio-8080-exec-6] o.e.x.controllers.CartController         : Flight ID 16 added/incremented in persistent cart for user ****@****.***.
2025-06-29 17:12:26.222 DEBUG [d83a7f35-5cdb-42bc-acfc-be3ae838cc46] 25344 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:12:26.236 DEBUG [d83a7f35-5cdb-42bc-acfc-be3ae838cc46] 25344 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:11:44.177978, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8BD70926E63D445575D873C4DD415C68], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:12:26.238 DEBUG [d83a7f35-5cdb-42bc-acfc-be3ae838cc46] 25344 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:12:26.239  INFO [d83a7f35-5cdb-42bc-acfc-be3ae838cc46] 25344 --- [nio-8080-exec-4] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:12:26.304  INFO [d83a7f35-5cdb-42bc-acfc-be3ae838cc46] 25344 --- [nio-8080-exec-4] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 17:12:26.643 DEBUG [6412ee58-1213-4e3b-9a4b-948f91a4b7ba] 25344 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:12:26.654 DEBUG [6412ee58-1213-4e3b-9a4b-948f91a4b7ba] 25344 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:11:44.177978, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8BD70926E63D445575D873C4DD415C68], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:12:26.658 DEBUG [6412ee58-1213-4e3b-9a4b-948f91a4b7ba] 25344 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:12:26.659  INFO [6412ee58-1213-4e3b-9a4b-948f91a4b7ba] 25344 --- [nio-8080-exec-7] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:12:26.705  INFO [6412ee58-1213-4e3b-9a4b-948f91a4b7ba] 25344 --- [nio-8080-exec-7] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 17:12:26.711 DEBUG [570a96a3-6c3e-49bf-9315-b8de4ff34db8] 25344 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:12:26.720 DEBUG [570a96a3-6c3e-49bf-9315-b8de4ff34db8] 25344 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:11:44.177978, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8BD70926E63D445575D873C4DD415C68], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:12:26.722 DEBUG [570a96a3-6c3e-49bf-9315-b8de4ff34db8] 25344 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:12:26.723  INFO [570a96a3-6c3e-49bf-9315-b8de4ff34db8] 25344 --- [nio-8080-exec-8] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:12:26.768  INFO [570a96a3-6c3e-49bf-9315-b8de4ff34db8] 25344 --- [nio-8080-exec-8] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 17:12:28.746 DEBUG [7dcb6073-2a12-4685-8270-c49bc46c045d] 25344 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:12:28.761 DEBUG [7dcb6073-2a12-4685-8270-c49bc46c045d] 25344 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:11:44.177978, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8BD70926E63D445575D873C4DD415C68], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:12:28.763 DEBUG [7dcb6073-2a12-4685-8270-c49bc46c045d] 25344 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:12:28.764  INFO [7dcb6073-2a12-4685-8270-c49bc46c045d] 25344 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:12:28.815  INFO [7dcb6073-2a12-4685-8270-c49bc46c045d] 25344 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 17:12:28.823 DEBUG [42a9e6be-169d-47f5-8e8c-dc4439905095] 25344 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:12:28.834 DEBUG [42a9e6be-169d-47f5-8e8c-dc4439905095] 25344 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:11:44.177978, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8BD70926E63D445575D873C4DD415C68], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:12:28.835 DEBUG [42a9e6be-169d-47f5-8e8c-dc4439905095] 25344 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:12:28.836  INFO [42a9e6be-169d-47f5-8e8c-dc4439905095] 25344 --- [io-8080-exec-10] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:12:28.890  INFO [42a9e6be-169d-47f5-8e8c-dc4439905095] 25344 --- [io-8080-exec-10] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 17:12:41.230 DEBUG [134a620e-9bff-4131-8ed5-ca7b55644b98] 25344 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing POST /api/checkout/create-payment-intent
2025-06-29 17:12:41.230 DEBUG [134a620e-9bff-4131-8ed5-ca7b55644b98] 25344 --- [nio-8080-exec-9] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 17:12:41.231 DEBUG [134a620e-9bff-4131-8ed5-ca7b55644b98] 25344 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured POST /api/checkout/create-payment-intent
2025-06-29 17:12:41.251  INFO [134a620e-9bff-4131-8ed5-ca7b55644b98] 25344 --- [nio-8080-exec-9] o.e.x.controllers.PaymentController      : Creating payment intent for amount: 22495 ron
2025-06-29 17:12:41.927  INFO [134a620e-9bff-4131-8ed5-ca7b55644b98] 25344 --- [nio-8080-exec-9] o.e.x.controllers.PaymentController      : Payment intent created successfully: pi_3RfLyHGf8s1WZJnq1qZIj3pt
2025-06-29 17:12:43.159 DEBUG [4af39ad4-da4d-4b21-8cb7-66449af67065] 25344 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /api/checkout/confirm
2025-06-29 17:12:43.171 DEBUG [4af39ad4-da4d-4b21-8cb7-66449af67065] 25344 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:11:44.177978, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8BD70926E63D445575D873C4DD415C68], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:12:43.173 DEBUG [4af39ad4-da4d-4b21-8cb7-66449af67065] 25344 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /api/checkout/confirm
2025-06-29 17:12:43.175  INFO [4af39ad4-da4d-4b21-8cb7-66449af67065] 25344 --- [nio-8080-exec-3] o.e.x.controllers.CheckoutController     : Received purchase confirmation request.
2025-06-29 17:12:43.180  INFO [4af39ad4-da4d-4b21-8cb7-66449af67065] 25344 --- [nio-8080-exec-3] o.e.x.controllers.CheckoutController     : Processing purchase for user: ****@****.***
2025-06-29 17:12:43.219  INFO [4af39ad4-da4d-4b21-8cb7-66449af67065] 25344 --- [nio-8080-exec-3] o.e.x.controllers.CheckoutController     : User ****@****.*** persistent cart has 1 items.
2025-06-29 17:12:43.219  WARN [4af39ad4-da4d-4b21-8cb7-66449af67065] 25344 --- [nio-8080-exec-3] o.e.x.controllers.CheckoutController     : !!! SIMULATING successful payment processing for user ****@****.*** !!!
2025-06-29 17:12:43.221  INFO [4af39ad4-da4d-4b21-8cb7-66449af67065] 25344 --- [nio-8080-exec-3] o.e.x.services.OrderServiceImpl          : Creating order from persistent cart for user: ****@****.***
2025-06-29 17:12:43.229  INFO [4af39ad4-da4d-4b21-8cb7-66449af67065] 25344 --- [nio-8080-exec-3] o.e.x.services.OrderServiceImpl          : Order 1 created for user ****@****.***, status: PENDING_PAYMENT. Total: 37.99
2025-06-29 17:12:43.230  INFO [4af39ad4-da4d-4b21-8cb7-66449af67065] 25344 --- [nio-8080-exec-3] o.e.x.services.OrderServiceImpl          : Created ticket with deferred seat selection (fallback) for flight XT-OTP-CDG-2 for user ****@****.***
2025-06-29 17:12:44.574  INFO [4af39ad4-da4d-4b21-8cb7-66449af67065] 25344 --- [nio-8080-exec-3] o.e.x.services.EmailServiceImpl          : Purchase confirmation email sent to ****@****.***
2025-06-29 17:12:44.574  INFO [4af39ad4-da4d-4b21-8cb7-66449af67065] 25344 --- [nio-8080-exec-3] o.e.x.services.OrderServiceImpl          : Purchase confirmation email sent to user: ****@****.***
2025-06-29 17:12:44.588  INFO [4af39ad4-da4d-4b21-8cb7-66449af67065] 25344 --- [nio-8080-exec-3] o.e.x.controllers.CheckoutController     : Order successfully created for user ****@****.***. Confirmation: 1
2025-06-29 17:12:44.594  INFO [4af39ad4-da4d-4b21-8cb7-66449af67065] 25344 --- [nio-8080-exec-3] o.e.xlr8travel.services.CartServiceImpl  : Clearing 1 items from cart for user ****@****.***
2025-06-29 17:12:44.616  INFO [4af39ad4-da4d-4b21-8cb7-66449af67065] 25344 --- [nio-8080-exec-3] o.e.x.controllers.CheckoutController     : Persistent cart cleared for user ****@****.***.
2025-06-29 17:12:44.626 DEBUG [6264277e-8164-4e3d-bada-9daeb0b7009c] 25344 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing DELETE /api/cart/remove/16
2025-06-29 17:12:44.734 DEBUG [6264277e-8164-4e3d-bada-9daeb0b7009c] 25344 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:11:44.177978, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8BD70926E63D445575D873C4DD415C68], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:12:44.736 DEBUG [6264277e-8164-4e3d-bada-9daeb0b7009c] 25344 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured DELETE /api/cart/remove/16
2025-06-29 17:12:44.821  INFO [6264277e-8164-4e3d-bada-9daeb0b7009c] 25344 --- [nio-8080-exec-2] o.e.x.controllers.CartController         : User ****@****.*** request to remove flight ID 16 from persistent cart
2025-06-29 17:12:44.830  WARN [6264277e-8164-4e3d-bada-9daeb0b7009c] 25344 --- [nio-8080-exec-2] o.e.xlr8travel.services.CartServiceImpl  : Attempted to remove flight ID 16 not found in cart for user ****@****.***
2025-06-29 17:12:44.833  WARN [6264277e-8164-4e3d-bada-9daeb0b7009c] 25344 --- [nio-8080-exec-2] o.e.x.controllers.CartController         : Attempted to remove flight ID 16 not found in persistent cart for user ****@****.***
2025-06-29 17:12:44.843 DEBUG [ba1d378b-7e25-4d8c-99a0-775fb3cdd06f] 25344 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:12:44.936 DEBUG [ba1d378b-7e25-4d8c-99a0-775fb3cdd06f] 25344 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:11:44.177978, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8BD70926E63D445575D873C4DD415C68], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:12:44.938 DEBUG [ba1d378b-7e25-4d8c-99a0-775fb3cdd06f] 25344 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:12:44.939  INFO [ba1d378b-7e25-4d8c-99a0-775fb3cdd06f] 25344 --- [nio-8080-exec-5] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:12:45.024  INFO [ba1d378b-7e25-4d8c-99a0-775fb3cdd06f] 25344 --- [nio-8080-exec-5] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 17:12:45.730 DEBUG [532abd6e-c8bd-427e-b134-921b0ee5e014] 25344 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 17:12:45.836 DEBUG [532abd6e-c8bd-427e-b134-921b0ee5e014] 25344 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:11:44.177978, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8BD70926E63D445575D873C4DD415C68], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:12:45.838 DEBUG [532abd6e-c8bd-427e-b134-921b0ee5e014] 25344 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 17:12:45.931  INFO [532abd6e-c8bd-427e-b134-921b0ee5e014] 25344 --- [nio-8080-exec-1] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 17:12:45.931  INFO [532abd6e-c8bd-427e-b134-921b0ee5e014] 25344 --- [nio-8080-exec-1] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 17:12:45.938  INFO [532abd6e-c8bd-427e-b134-921b0ee5e014] 25344 --- [nio-8080-exec-1] o.e.x.services.TicketServiceImpl         : Found 1 tickets eligible for check-in for user 4
2025-06-29 17:12:45.946 DEBUG [e7a115f9-f093-4edd-9708-0b64872097c8] 25344 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 17:12:46.039 DEBUG [e7a115f9-f093-4edd-9708-0b64872097c8] 25344 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:11:44.177978, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8BD70926E63D445575D873C4DD415C68], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:12:46.040 DEBUG [e7a115f9-f093-4edd-9708-0b64872097c8] 25344 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 17:12:46.125  INFO [e7a115f9-f093-4edd-9708-0b64872097c8] 25344 --- [io-8080-exec-10] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 17:12:46.125  INFO [e7a115f9-f093-4edd-9708-0b64872097c8] 25344 --- [io-8080-exec-10] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 17:12:46.130  INFO [e7a115f9-f093-4edd-9708-0b64872097c8] 25344 --- [io-8080-exec-10] o.e.x.services.TicketServiceImpl         : Found 1 tickets eligible for check-in for user 4
2025-06-29 17:13:06.113 DEBUG [2ca6cbaa-2f33-4fdf-b101-811ac143b21b] 25344 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/nearby?origin=OTP
2025-06-29 17:13:06.114 DEBUG [2ca6cbaa-2f33-4fdf-b101-811ac143b21b] 25344 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/nearby?origin=OTP
2025-06-29 17:13:06.115  INFO [2ca6cbaa-2f33-4fdf-b101-811ac143b21b] 25344 --- [nio-8080-exec-9] o.e.x.controllers.FlightController       : Received request for nearby flights from origin: OTP, departureDate: null
2025-06-29 17:13:06.115  INFO [2ca6cbaa-2f33-4fdf-b101-811ac143b21b] 25344 --- [nio-8080-exec-9] o.e.x.controllers.FlightController       : Using search date: 2025-06-29
2025-06-29 17:13:06.116  INFO [2ca6cbaa-2f33-4fdf-b101-811ac143b21b] 25344 --- [nio-8080-exec-9] o.e.x.controllers.FlightController       : Cache key: OTP-2025-06-29
2025-06-29 17:13:06.116  INFO [2ca6cbaa-2f33-4fdf-b101-811ac143b21b] 25344 --- [nio-8080-exec-9] o.e.x.controllers.FlightController       : Returning cached nearby flights for origin: OTP, found 6 flights
2025-06-29 17:13:06.118 DEBUG [2ca6cbaa-2f33-4fdf-b101-811ac143b21b] 25344 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:11:44.177978, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8BD70926E63D445575D873C4DD415C68], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:13:41.762  INFO [NONE] 25344 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-29 17:13:41.765  INFO [NONE] 25344 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-06-29 17:13:41.772  INFO [NONE] 25344 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-06-29 17:13:58.752  INFO [NONE] 17944 --- [  restartedMain] o.e.xlr8travel.Xlr8travelApplication     : Starting Xlr8travelApplication using Java 21.0.5 with PID 17944 (C:\Users\razvi\Desktop\Licenta\backend\target\classes started by razvi in C:\Users\razvi\Desktop\Licenta\backend)
2025-06-29 17:13:58.757 DEBUG [NONE] 17944 --- [  restartedMain] o.e.xlr8travel.Xlr8travelApplication     : Running with Spring Boot v3.2.4, Spring v6.1.5
2025-06-29 17:13:58.758  INFO [NONE] 17944 --- [  restartedMain] o.e.xlr8travel.Xlr8travelApplication     : The following 1 profile is active: "local"
2025-06-29 17:13:58.797  INFO [NONE] 17944 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-29 17:13:58.798  INFO [NONE] 17944 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-29 17:13:59.711  INFO [NONE] 17944 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-29 17:13:59.788  INFO [NONE] 17944 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 70 ms. Found 9 JPA repository interfaces.
2025-06-29 17:14:00.598  INFO [NONE] 17944 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-29 17:14:00.609  INFO [NONE] 17944 --- [  restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-29 17:14:00.609  INFO [NONE] 17944 --- [  restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.19]
2025-06-29 17:14:00.684  INFO [NONE] 17944 --- [  restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-06-29 17:14:00.685  INFO [NONE] 17944 --- [  restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1886 ms
2025-06-29 17:14:00.938  INFO [NONE] 17944 --- [  restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-29 17:14:00.988  INFO [NONE] 17944 --- [  restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.4.Final
2025-06-29 17:14:01.019  INFO [NONE] 17944 --- [  restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-06-29 17:14:01.234  INFO [NONE] 17944 --- [  restartedMain] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-29 17:14:01.262  INFO [NONE] 17944 --- [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-06-29 17:14:01.454  INFO [NONE] 17944 --- [  restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@1908641f
2025-06-29 17:14:01.456  INFO [NONE] 17944 --- [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-06-29 17:14:01.499  WARN [NONE] 17944 --- [  restartedMain] org.hibernate.orm.deprecation            : HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-29 17:14:02.767  INFO [NONE] 17944 --- [  restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-29 17:14:09.876  INFO [NONE] 17944 --- [  restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-29 17:14:10.518  INFO [NONE] 17944 --- [  restartedMain] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-29 17:14:10.949  WARN [NONE] 17944 --- [  restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Cannot deserialize session attribute [SPRING_SECURITY_CONTEXT] for session [8BD70926E63D445575D873C4DD415C68]
2025-06-29 17:14:10.951 ERROR [NONE] 17944 --- [  restartedMain] o.a.catalina.session.StandardManager     : Exception loading sessions from persistent storage

java.lang.ClassCastException: class java.io.ObjectStreamClass cannot be cast to class java.lang.String (java.io.ObjectStreamClass and java.lang.String are in module java.base of loader 'bootstrap')
	at java.base/java.io.ObjectInputStream.readTypeString(ObjectInputStream.java:1839)
	at java.base/java.io.ObjectStreamClass.readNonProxy(ObjectStreamClass.java:709)
	at java.base/java.io.ObjectInputStream.readClassDescriptor(ObjectInputStream.java:1014)
	at java.base/java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:2050)
	at java.base/java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1927)
	at java.base/java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2252)
	at java.base/java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1762)
	at java.base/java.io.ObjectInputStream.readObject(ObjectInputStream.java:540)
	at java.base/java.io.ObjectInputStream.readObject(ObjectInputStream.java:498)
	at org.apache.catalina.session.StandardSession.doReadObject(StandardSession.java:1415)
	at org.apache.catalina.session.StandardSession.readObjectData(StandardSession.java:985)
	at org.apache.catalina.session.StandardManager.doLoad(StandardManager.java:210)
	at org.apache.catalina.session.StandardManager.load(StandardManager.java:156)
	at org.apache.catalina.session.StandardManager.startInternal(StandardManager.java:346)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4893)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1332)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1322)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:866)
	at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:845)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1332)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1322)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:866)
	at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:240)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.StandardService.startInternal(StandardService.java:433)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:921)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.startup.Tomcat.start(Tomcat.java:437)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:126)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.<init>(TomcatWebServer.java:105)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getTomcatWebServer(TomcatServletWebServerFactory.java:499)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getWebServer(TomcatServletWebServerFactory.java:218)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.createWebServer(ServletWebServerApplicationContext.java:188)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:162)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:618)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at org.example.xlr8travel.Xlr8travelApplication.main(Xlr8travelApplication.java:10)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)

2025-06-29 17:14:10.959 DEBUG [NONE] 17944 --- [  restartedMain] o.e.x.security.JwtAuthenticationFilter   : Filter 'jwtAuthenticationFilter' configured for use
2025-06-29 17:14:10.961 DEBUG [NONE] 17944 --- [  restartedMain] o.e.x.security.RateLimitingFilter        : Filter 'rateLimitingFilter' configured for use
2025-06-29 17:14:11.184  INFO [NONE] 17944 --- [  restartedMain] o.e.x.config.LocalPropertiesConfig       : Loaded application-local.properties
2025-06-29 17:14:11.569  INFO [NONE] 17944 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : === GEMINI SERVICE CONFIGURATION ===
2025-06-29 17:14:11.570  INFO [NONE] 17944 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : Project ID: xlr8travel
2025-06-29 17:14:11.571  INFO [NONE] 17944 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : Location ID: us-east1
2025-06-29 17:14:11.571  INFO [NONE] 17944 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : Model: gemini-2.0-flash-001
2025-06-29 17:14:11.571  INFO [NONE] 17944 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : Credentials Path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 17:14:11.571  INFO [NONE] 17944 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : API Key: ***SET***
2025-06-29 17:14:11.572  INFO [NONE] 17944 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : ✅ Credentials file exists: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 17:14:11.572  INFO [NONE] 17944 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : ✅ Credentials file size: 2376 bytes
2025-06-29 17:14:11.572  INFO [NONE] 17944 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : ✅ GOOGLE_APPLICATION_CREDENTIALS env var is set: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 17:14:11.573  INFO [NONE] 17944 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : =====================================
2025-06-29 17:14:11.600  INFO [NONE] 17944 --- [  restartedMain] o.e.x.config.SensitiveDataConfig         : Validating sensitive data configuration for profile: local
2025-06-29 17:14:11.601  WARN [NONE] 17944 --- [  restartedMain] o.e.x.config.SensitiveDataConfig         : Environment variable SPRING_DATASOURCE_URL is not set
2025-06-29 17:14:11.601  WARN [NONE] 17944 --- [  restartedMain] o.e.x.config.SensitiveDataConfig         : Environment variable SPRING_DATASOURCE_USERNAME is not set
2025-06-29 17:14:11.601  WARN [NONE] 17944 --- [  restartedMain] o.e.x.config.SensitiveDataConfig         : Environment variable SPRING_DATASOURCE_PASSWORD is not set
2025-06-29 17:14:11.602  WARN [NONE] 17944 --- [  restartedMain] o.e.x.config.SensitiveDataConfig         : Environment variable STRIPE_SECRET_KEY is not set
2025-06-29 17:14:11.653  WARN [NONE] 17944 --- [  restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-29 17:14:11.780  INFO [NONE] 17944 --- [  restartedMain] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2025-06-29 17:14:12.124  INFO [NONE] 17944 --- [  restartedMain] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 4 endpoint(s) beneath base path '/actuator'
2025-06-29 17:14:12.239  INFO [NONE] 17944 --- [  restartedMain] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@1368a6c1, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6ce4cc31, org.springframework.security.web.context.SecurityContextHolderFilter@647dc159, org.springframework.security.web.header.HeaderWriterFilter@4865e5d1, org.springframework.web.filter.CorsFilter@4130cd9e, org.springframework.security.web.authentication.logout.LogoutFilter@3ac99195, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@3c3f2d11, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@24e9078b, org.example.xlr8travel.security.JwtAuthenticationFilter@39f2d0d, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@262b3b16, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@2becfa1a, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@7525265b, org.springframework.security.web.session.ConcurrentSessionFilter@90bdff, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@662ae016, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@219223e2, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@24cd2bfc, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@23adc890, org.springframework.security.web.session.SessionManagementFilter@618d621f, org.springframework.security.web.access.ExceptionTranslationFilter@6282ddd7, org.springframework.security.web.access.intercept.AuthorizationFilter@4d94eb95]
2025-06-29 17:14:12.841  INFO [NONE] 17944 --- [  restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2025-06-29 17:14:12.927  INFO [NONE] 17944 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path ''
2025-06-29 17:14:12.941  INFO [NONE] 17944 --- [  restartedMain] o.e.xlr8travel.Xlr8travelApplication     : Started Xlr8travelApplication in 14.613 seconds (process running for 15.158)
2025-06-29 17:14:25.167  INFO [NONE] 17944 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-29 17:14:25.167  INFO [NONE] 17944 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-06-29 17:14:25.169  INFO [NONE] 17944 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-06-29 17:14:25.185 DEBUG [8d519bcd-e180-461c-8b55-2555191cdc16] 17944 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 17:14:25.301 ERROR [8d519bcd-e180-461c-8b55-2555191cdc16] 17944 --- [nio-8080-exec-1] o.e.x.security.JwtAuthenticationFilter   : Cannot set user authentication: User ****@****.*** not found
2025-06-29 17:14:25.304 DEBUG [8d519bcd-e180-461c-8b55-2555191cdc16] 17944 --- [nio-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 17:14:25.309  WARN [8d519bcd-e180-461c-8b55-2555191cdc16] 17944 --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/api/user/me' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2025-06-29 17:14:25.336 DEBUG [8d519bcd-e180-461c-8b55-2555191cdc16] 17944 --- [nio-8080-exec-1] o.s.s.w.s.HttpSessionRequestCache        : Saved request http://localhost:8080/api/user/me?continue to session
2025-06-29 17:14:25.337 DEBUG [8d519bcd-e180-461c-8b55-2555191cdc16] 17944 --- [nio-8080-exec-1] s.w.a.DelegatingAuthenticationEntryPoint : Trying to match using Ant [pattern='/api/**']
2025-06-29 17:14:25.337 DEBUG [8d519bcd-e180-461c-8b55-2555191cdc16] 17944 --- [nio-8080-exec-1] s.w.a.DelegatingAuthenticationEntryPoint : Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@638874d6
2025-06-29 17:14:25.921 DEBUG [5aab515d-9316-4470-a653-46494075d3e9] 17944 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/token/refresh
2025-06-29 17:14:25.922 DEBUG [5aab515d-9316-4470-a653-46494075d3e9] 17944 --- [nio-8080-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 17:14:25.925 DEBUG [5aab515d-9316-4470-a653-46494075d3e9] 17944 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /api/token/refresh
2025-06-29 17:14:26.015  INFO [5aab515d-9316-4470-a653-46494075d3e9] 17944 --- [nio-8080-exec-2] o.e.x.controllers.TokenController        : Generated new access token for user: ****@****.***
2025-06-29 17:14:26.225 DEBUG [b51eadf5-2cba-4be9-83d3-4ee05c1498ad] 17944 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 17:14:26.236 ERROR [b51eadf5-2cba-4be9-83d3-4ee05c1498ad] 17944 --- [nio-8080-exec-3] o.e.x.security.JwtAuthenticationFilter   : Cannot set user authentication: User ****@****.*** not found
2025-06-29 17:14:26.237 DEBUG [b51eadf5-2cba-4be9-83d3-4ee05c1498ad] 17944 --- [nio-8080-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 17:14:26.241 DEBUG [b51eadf5-2cba-4be9-83d3-4ee05c1498ad] 17944 --- [nio-8080-exec-3] o.s.s.w.s.HttpSessionRequestCache        : Saved request http://localhost:8080/api/user/me?continue to session
2025-06-29 17:14:26.241 DEBUG [b51eadf5-2cba-4be9-83d3-4ee05c1498ad] 17944 --- [nio-8080-exec-3] s.w.a.DelegatingAuthenticationEntryPoint : Trying to match using Ant [pattern='/api/**']
2025-06-29 17:14:26.242 DEBUG [b51eadf5-2cba-4be9-83d3-4ee05c1498ad] 17944 --- [nio-8080-exec-3] s.w.a.DelegatingAuthenticationEntryPoint : Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@638874d6
2025-06-29 17:14:26.392 DEBUG [015bdf5b-259c-45fc-a11c-2e071a6758d3] 17944 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/nearby?origin=OTP
2025-06-29 17:14:26.399 DEBUG [015bdf5b-259c-45fc-a11c-2e071a6758d3] 17944 --- [nio-8080-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 17:14:26.400 DEBUG [015bdf5b-259c-45fc-a11c-2e071a6758d3] 17944 --- [nio-8080-exec-4] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 8BD70926E63D445575D873C4DD415C68
2025-06-29 17:14:26.402 DEBUG [015bdf5b-259c-45fc-a11c-2e071a6758d3] 17944 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/nearby?origin=OTP
2025-06-29 17:14:26.411  INFO [015bdf5b-259c-45fc-a11c-2e071a6758d3] 17944 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Received request for nearby flights from origin: OTP, departureDate: null
2025-06-29 17:14:26.411  INFO [015bdf5b-259c-45fc-a11c-2e071a6758d3] 17944 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Using search date: 2025-06-29
2025-06-29 17:14:26.412  INFO [015bdf5b-259c-45fc-a11c-2e071a6758d3] 17944 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Cache key: OTP-2025-06-29
2025-06-29 17:14:26.412  INFO [015bdf5b-259c-45fc-a11c-2e071a6758d3] 17944 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : No valid cache found. Searching nearby flights from origin: OTP, after date: 2025-06-29
2025-06-29 17:14:26.412  INFO [015bdf5b-259c-45fc-a11c-2e071a6758d3] 17944 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Calling flightService.findByOriginAndDepartureDateAfter for origin: OTP, date: 2025-06-29
2025-06-29 17:14:26.469  INFO [015bdf5b-259c-45fc-a11c-2e071a6758d3] 17944 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Database query completed, found 16 flights
2025-06-29 17:14:26.470  INFO [015bdf5b-259c-45fc-a11c-2e071a6758d3] 17944 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Converting 16 Flight entities to FlightDTOs
2025-06-29 17:14:26.471  INFO [015bdf5b-259c-45fc-a11c-2e071a6758d3] 17944 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Converted to 16 FlightDTOs
2025-06-29 17:14:26.471  INFO [015bdf5b-259c-45fc-a11c-2e071a6758d3] 17944 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Grouping flights by destination country
2025-06-29 17:14:26.472  INFO [015bdf5b-259c-45fc-a11c-2e071a6758d3] 17944 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Grouped flights into 7 countries
2025-06-29 17:14:26.472  INFO [015bdf5b-259c-45fc-a11c-2e071a6758d3] 17944 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Selecting diverse flights - one from each country first
2025-06-29 17:14:26.473  INFO [015bdf5b-259c-45fc-a11c-2e071a6758d3] 17944 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Adding first flight from Greece (has 2 flights)
2025-06-29 17:14:26.473  INFO [015bdf5b-259c-45fc-a11c-2e071a6758d3] 17944 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Adding first flight from Netherlands (has 2 flights)
2025-06-29 17:14:26.473  INFO [015bdf5b-259c-45fc-a11c-2e071a6758d3] 17944 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Adding first flight from Italy (has 2 flights)
2025-06-29 17:14:26.473  INFO [015bdf5b-259c-45fc-a11c-2e071a6758d3] 17944 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Adding first flight from United Kingdom (has 2 flights)
2025-06-29 17:14:26.474  INFO [015bdf5b-259c-45fc-a11c-2e071a6758d3] 17944 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Adding first flight from France (has 2 flights)
2025-06-29 17:14:26.474  INFO [015bdf5b-259c-45fc-a11c-2e071a6758d3] 17944 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Adding first flight from Switzerland (has 2 flights)
2025-06-29 17:14:26.474  INFO [015bdf5b-259c-45fc-a11c-2e071a6758d3] 17944 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Reached 6 flights after first pass, stopping
2025-06-29 17:14:26.474  INFO [015bdf5b-259c-45fc-a11c-2e071a6758d3] 17944 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Caching 6 diverse flights with key: OTP-2025-06-29
2025-06-29 17:14:26.475  INFO [015bdf5b-259c-45fc-a11c-2e071a6758d3] 17944 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Returning 6 diverse nearby flights from: OTP
2025-06-29 17:14:27.588 DEBUG [57778588-01e6-48e8-ba17-56048e27d82d] 17944 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /oauth2/authorization/google
2025-06-29 17:14:27.596 DEBUG [57778588-01e6-48e8-ba17-56048e27d82d] 17944 --- [nio-8080-exec-5] o.s.s.web.DefaultRedirectStrategy        : Redirecting to https://accounts.google.com/o/oauth2/v2/auth?response_type=code&client_id=280181287068-i92p696f0ja6qv5lecrhi4dmn2hsrvie.apps.googleusercontent.com&scope=email%20profile&state=3ZWEJdnYsca8HgmN0gGoV5XAs24PWT-3KVsRCp3SK6g%3D&redirect_uri=http://localhost:8080/login/oauth2/code/google
2025-06-29 17:14:29.410 DEBUG [f004149a-dfbd-4d32-84a1-67b61c12df08] 17944 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /login/oauth2/code/google?state=3ZWEJdnYsca8HgmN0gGoV5XAs24PWT-3KVsRCp3SK6g%3D&code=4%2F0AVMBsJhFv9ZAN48tilEnKgSeVnMSt0P4VTx9DmslCBevV5yVuJMySTFE3oOjscdpwOS2uw&scope=email+profile+openid+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile&authuser=1&prompt=none
2025-06-29 17:14:29.869  INFO [f004149a-dfbd-4d32-84a1-67b61c12df08] 17944 --- [nio-8080-exec-6] o.e.x.security.CustomOAuth2UserService   : Creating new user from OAuth2 login: ****@****.***
2025-06-29 17:14:29.954  INFO [f004149a-dfbd-4d32-84a1-67b61c12df08] 17944 --- [nio-8080-exec-6] o.e.x.security.CustomOAuth2UserService   : Successfully created new user from OAuth2 login: ****@****.***
2025-06-29 17:14:29.957 DEBUG [f004149a-dfbd-4d32-84a1-67b61c12df08] 17944 --- [nio-8080-exec-6] .s.ChangeSessionIdAuthenticationStrategy : Changed session id from 83E96401700F68EDE8B6A7F4F474F375
2025-06-29 17:14:29.957 DEBUG [f004149a-dfbd-4d32-84a1-67b61c12df08] 17944 --- [nio-8080-exec-6] o.s.s.core.session.SessionRegistryImpl   : Registering session 11C415A9E127A492387E2C00704E2DDC, for principal Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}]
2025-06-29 17:14:29.959 DEBUG [f004149a-dfbd-4d32-84a1-67b61c12df08] 17944 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=83E96401700F68EDE8B6A7F4F474F375], Granted Authorities=[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@766acb88]
2025-06-29 17:14:29.960 DEBUG [f004149a-dfbd-4d32-84a1-67b61c12df08] 17944 --- [nio-8080-exec-6] .s.o.c.w.OAuth2LoginAuthenticationFilter : Set SecurityContextHolder to OAuth2AuthenticationToken [Principal=Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=83E96401700F68EDE8B6A7F4F474F375], Granted Authorities=[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]]
2025-06-29 17:14:29.962  INFO [f004149a-dfbd-4d32-84a1-67b61c12df08] 17944 --- [nio-8080-exec-6] e.x.s.OAuth2AuthenticationSuccessHandler : Extracting username from authentication: 104658082982173093135
2025-06-29 17:14:29.962  INFO [f004149a-dfbd-4d32-84a1-67b61c12df08] 17944 --- [nio-8080-exec-6] e.x.s.OAuth2AuthenticationSuccessHandler : Principal class: org.springframework.security.oauth2.core.user.DefaultOAuth2User
2025-06-29 17:14:29.962  INFO [f004149a-dfbd-4d32-84a1-67b61c12df08] 17944 --- [nio-8080-exec-6] e.x.s.OAuth2AuthenticationSuccessHandler : Principal is DefaultOAuth2User
2025-06-29 17:14:29.963  INFO [f004149a-dfbd-4d32-84a1-67b61c12df08] 17944 --- [nio-8080-exec-6] e.x.s.OAuth2AuthenticationSuccessHandler : OAuth2User attributes: {sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}
2025-06-29 17:14:29.963  INFO [f004149a-dfbd-4d32-84a1-67b61c12df08] 17944 --- [nio-8080-exec-6] e.x.s.OAuth2AuthenticationSuccessHandler : Using email as username: ****@****.***
2025-06-29 17:14:29.964  INFO [f004149a-dfbd-4d32-84a1-67b61c12df08] 17944 --- [nio-8080-exec-6] e.x.s.OAuth2AuthenticationSuccessHandler : Extracting username from authentication: 104658082982173093135
2025-06-29 17:14:29.964  INFO [f004149a-dfbd-4d32-84a1-67b61c12df08] 17944 --- [nio-8080-exec-6] e.x.s.OAuth2AuthenticationSuccessHandler : Principal class: org.springframework.security.oauth2.core.user.DefaultOAuth2User
2025-06-29 17:14:29.964  INFO [f004149a-dfbd-4d32-84a1-67b61c12df08] 17944 --- [nio-8080-exec-6] e.x.s.OAuth2AuthenticationSuccessHandler : Principal is DefaultOAuth2User
2025-06-29 17:14:29.964  INFO [f004149a-dfbd-4d32-84a1-67b61c12df08] 17944 --- [nio-8080-exec-6] e.x.s.OAuth2AuthenticationSuccessHandler : OAuth2User attributes: {sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}
2025-06-29 17:14:29.965  INFO [f004149a-dfbd-4d32-84a1-67b61c12df08] 17944 --- [nio-8080-exec-6] e.x.s.OAuth2AuthenticationSuccessHandler : Using email as username: ****@****.***
2025-06-29 17:14:29.965  INFO [f004149a-dfbd-4d32-84a1-67b61c12df08] 17944 --- [nio-8080-exec-6] e.x.s.OAuth2AuthenticationSuccessHandler : OAuth tokens stored in session for user: ****@****.***
2025-06-29 17:14:29.965 DEBUG [f004149a-dfbd-4d32-84a1-67b61c12df08] 17944 --- [nio-8080-exec-6] o.s.s.web.DefaultRedirectStrategy        : Redirecting to http://localhost:3000?oauth=success
2025-06-29 17:14:30.585 DEBUG [db09bbe6-0367-42f3-88f9-20c68ccfbbd4] 17944 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/oauth/complete
2025-06-29 17:14:30.590 DEBUG [3426238f-2eb2-4053-afd9-42961b2ef97b] 17944 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/oauth/complete
2025-06-29 17:14:30.593 DEBUG [420641e6-6a5a-43f8-9d05-2450ec746e4d] 17944 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing POST /api/oauth/complete
2025-06-29 17:14:30.596 DEBUG [a19686b4-557c-4252-a62c-ab15a1458949] 17944 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing POST /api/oauth/complete
2025-06-29 17:14:30.597 DEBUG [420641e6-6a5a-43f8-9d05-2450ec746e4d] 17944 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured POST /api/oauth/complete
2025-06-29 17:14:30.598 DEBUG [a19686b4-557c-4252-a62c-ab15a1458949] 17944 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured POST /api/oauth/complete
2025-06-29 17:14:30.600  INFO [a19686b4-557c-4252-a62c-ab15a1458949] 17944 --- [nio-8080-exec-9] o.e.x.controllers.OAuthController        : OAuth tokens retrieved and cleared from session for user: ****@****.***
2025-06-29 17:14:30.600  INFO [420641e6-6a5a-43f8-9d05-2450ec746e4d] 17944 --- [io-8080-exec-10] o.e.x.controllers.OAuthController        : OAuth tokens retrieved and cleared from session for user: ****@****.***
2025-06-29 17:14:30.603 DEBUG [420641e6-6a5a-43f8-9d05-2450ec746e4d] 17944 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=83E96401700F68EDE8B6A7F4F474F375], Granted Authorities=[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]]]
2025-06-29 17:14:30.603 DEBUG [a19686b4-557c-4252-a62c-ab15a1458949] 17944 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=83E96401700F68EDE8B6A7F4F474F375], Granted Authorities=[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]]]
2025-06-29 17:14:30.691 DEBUG [e23b88ba-b3fd-429b-9c33-dfac0d685c47] 17944 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/nearby?origin=OTP
2025-06-29 17:14:30.694 DEBUG [e23b88ba-b3fd-429b-9c33-dfac0d685c47] 17944 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/nearby?origin=OTP
2025-06-29 17:14:30.695  INFO [e23b88ba-b3fd-429b-9c33-dfac0d685c47] 17944 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Received request for nearby flights from origin: OTP, departureDate: null
2025-06-29 17:14:30.695  INFO [e23b88ba-b3fd-429b-9c33-dfac0d685c47] 17944 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Using search date: 2025-06-29
2025-06-29 17:14:30.695  INFO [e23b88ba-b3fd-429b-9c33-dfac0d685c47] 17944 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Cache key: OTP-2025-06-29
2025-06-29 17:14:30.695  INFO [e23b88ba-b3fd-429b-9c33-dfac0d685c47] 17944 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Returning cached nearby flights for origin: OTP, found 6 flights
2025-06-29 17:14:30.697 DEBUG [e23b88ba-b3fd-429b-9c33-dfac0d685c47] 17944 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=83E96401700F68EDE8B6A7F4F474F375], Granted Authorities=[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]]]
2025-06-29 17:14:30.912 DEBUG [f73333d7-b7ff-4075-9df1-3266a1906197] 17944 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 17:14:30.931 DEBUG [f73333d7-b7ff-4075-9df1-3266a1906197] 17944 --- [nio-8080-exec-2] o.s.s.core.session.SessionRegistryImpl   : Registering session 9E03A205F924D9EC99DC7801CD4E8F95, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[])
2025-06-29 17:14:30.932 DEBUG [f73333d7-b7ff-4075-9df1-3266a1906197] 17944 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@2dd1b2ee]
2025-06-29 17:14:30.935 DEBUG [f73333d7-b7ff-4075-9df1-3266a1906197] 17944 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me
2025-06-29 17:14:30.937  INFO [f73333d7-b7ff-4075-9df1-3266a1906197] 17944 --- [nio-8080-exec-2] o.e.x.controllers.UserController         : Request received for current user details: ****@****.***
2025-06-29 17:14:30.945  INFO [f73333d7-b7ff-4075-9df1-3266a1906197] 17944 --- [nio-8080-exec-2] o.e.x.controllers.UserController         : Returning details for user: ****@****.***
2025-06-29 17:14:30.980 DEBUG [5c5c8ed1-967b-4714-bfef-b430d97624be] 17944 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 17:14:30.985 DEBUG [d40df035-a816-43b9-ad9f-310acae3d8e9] 17944 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:14:31.005 DEBUG [5c5c8ed1-967b-4714-bfef-b430d97624be] 17944 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=83E96401700F68EDE8B6A7F4F474F375], Granted Authorities=[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]]]
2025-06-29 17:14:31.011 DEBUG [d40df035-a816-43b9-ad9f-310acae3d8e9] 17944 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:14:31.013 DEBUG [5c5c8ed1-967b-4714-bfef-b430d97624be] 17944 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 17:14:31.016 DEBUG [d40df035-a816-43b9-ad9f-310acae3d8e9] 17944 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:14:31.017  INFO [d40df035-a816-43b9-ad9f-310acae3d8e9] 17944 --- [nio-8080-exec-4] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:14:31.031  WARN [5c5c8ed1-967b-4714-bfef-b430d97624be] 17944 --- [nio-8080-exec-3] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 17:14:31.036  INFO [d40df035-a816-43b9-ad9f-310acae3d8e9] 17944 --- [nio-8080-exec-4] o.e.xlr8travel.services.CartServiceImpl  : No existing cart found for user ****@****.*** with ID 4, creating a new one.
2025-06-29 17:14:31.044  WARN [5c5c8ed1-967b-4714-bfef-b430d97624be] 17944 --- [nio-8080-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 17:14:31.059  INFO [d40df035-a816-43b9-ad9f-310acae3d8e9] 17944 --- [nio-8080-exec-4] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 17:14:31.208 DEBUG [c9da5f89-1be4-4530-af4e-f8f51cff15cd] 17944 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 17:14:31.222 DEBUG [c9da5f89-1be4-4530-af4e-f8f51cff15cd] 17944 --- [nio-8080-exec-5] o.s.s.core.session.SessionRegistryImpl   : Registering session 2DF886C39276775B0888E0D9B0822617, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[])
2025-06-29 17:14:31.223 DEBUG [c9da5f89-1be4-4530-af4e-f8f51cff15cd] 17944 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@6f32fb71]
2025-06-29 17:14:31.225 DEBUG [c9da5f89-1be4-4530-af4e-f8f51cff15cd] 17944 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me
2025-06-29 17:14:31.226  INFO [c9da5f89-1be4-4530-af4e-f8f51cff15cd] 17944 --- [nio-8080-exec-5] o.e.x.controllers.UserController         : Request received for current user details: ****@****.***
2025-06-29 17:14:31.234  INFO [c9da5f89-1be4-4530-af4e-f8f51cff15cd] 17944 --- [nio-8080-exec-5] o.e.x.controllers.UserController         : Returning details for user: ****@****.***
2025-06-29 17:14:34.583 DEBUG [d5bc0012-1504-4812-a683-c5b6431bd52b] 17944 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-29 17:14:34.585 DEBUG [d5bc0012-1504-4812-a683-c5b6431bd52b] 17944 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-29 17:14:34.589  INFO [d5bc0012-1504-4812-a683-c5b6431bd52b] 17944 --- [nio-8080-exec-6] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris
2025-06-29 17:14:34.590  INFO [d5bc0012-1504-4812-a683-c5b6431bd52b] 17944 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-29 17:14:34.590  INFO [d5bc0012-1504-4812-a683-c5b6431bd52b] 17944 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-29 17:14:34.593 DEBUG [d5bc0012-1504-4812-a683-c5b6431bd52b] 17944 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-29).    For example, if today is 2025-06-29, a good departure date would be between 2025-07-06 and 2025-07-13, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris";
2025-06-29 17:14:34.595  INFO [d5bc0012-1504-4812-a683-c5b6431bd52b] 17944 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-29 17:14:34.595  INFO [d5bc0012-1504-4812-a683-c5b6431bd52b] 17944 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-29 17:14:34.595  INFO [d5bc0012-1504-4812-a683-c5b6431bd52b] 17944 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-29 17:14:34.596  INFO [d5bc0012-1504-4812-a683-c5b6431bd52b] 17944 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 17:14:34.596  INFO [d5bc0012-1504-4812-a683-c5b6431bd52b] 17944 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-29 17:14:34.643  INFO [d5bc0012-1504-4812-a683-c5b6431bd52b] 17944 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-29 17:14:34.645  INFO [d5bc0012-1504-4812-a683-c5b6431bd52b] 17944 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-29 17:14:34.647  INFO [d5bc0012-1504-4812-a683-c5b6431bd52b] 17944 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-29 17:14:34.669  INFO [d5bc0012-1504-4812-a683-c5b6431bd52b] 17944 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-29 17:14:37.370  INFO [d5bc0012-1504-4812-a683-c5b6431bd52b] 17944 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-29 17:14:37.371  INFO [d5bc0012-1504-4812-a683-c5b6431bd52b] 17944 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Response length: 195 characters
2025-06-29 17:14:37.373 DEBUG [d5bc0012-1504-4812-a683-c5b6431bd52b] 17944 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-06",
  "returnDate": "2025-07-08",
  "tripType": "roundTrip",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-29 17:14:37.374 DEBUG [d5bc0012-1504-4812-a683-c5b6431bd52b] 17944 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-29 17:14:37.378 DEBUG [d5bc0012-1504-4812-a683-c5b6431bd52b] 17944 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-29 17:14:37.379 DEBUG [d5bc0012-1504-4812-a683-c5b6431bd52b] 17944 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-29 17:14:37.380 DEBUG [d5bc0012-1504-4812-a683-c5b6431bd52b] 17944 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 17:14:37.380  INFO [d5bc0012-1504-4812-a683-c5b6431bd52b] 17944 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 17:14:37.380  INFO [d5bc0012-1504-4812-a683-c5b6431bd52b] 17944 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-06, returnDate=2025-07-08, tripType=roundTrip, adults=1, children=0, infants=0
2025-06-29 17:14:37.380  INFO [d5bc0012-1504-4812-a683-c5b6431bd52b] 17944 --- [nio-8080-exec-6] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-29 17:14:37.385 DEBUG [d5bc0012-1504-4812-a683-c5b6431bd52b] 17944 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:14:38.958 DEBUG [d5931cbc-cba7-40d1-ade3-1bfc4be6bbae] 17944 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-29 17:14:38.961 DEBUG [d5931cbc-cba7-40d1-ade3-1bfc4be6bbae] 17944 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-29 17:14:38.962  INFO [d5931cbc-cba7-40d1-ade3-1bfc4be6bbae] 17944 --- [nio-8080-exec-7] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris one way
2025-06-29 17:14:38.963  INFO [d5931cbc-cba7-40d1-ade3-1bfc4be6bbae] 17944 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-29 17:14:38.963  INFO [d5931cbc-cba7-40d1-ade3-1bfc4be6bbae] 17944 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-29 17:14:38.963 DEBUG [d5931cbc-cba7-40d1-ade3-1bfc4be6bbae] 17944 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-29).    For example, if today is 2025-06-29, a good departure date would be between 2025-07-06 and 2025-07-13, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris one way";
2025-06-29 17:14:38.965  INFO [d5931cbc-cba7-40d1-ade3-1bfc4be6bbae] 17944 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-29 17:14:38.966  INFO [d5931cbc-cba7-40d1-ade3-1bfc4be6bbae] 17944 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-29 17:14:38.966  INFO [d5931cbc-cba7-40d1-ade3-1bfc4be6bbae] 17944 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-29 17:14:38.966  INFO [d5931cbc-cba7-40d1-ade3-1bfc4be6bbae] 17944 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 17:14:38.967  INFO [d5931cbc-cba7-40d1-ade3-1bfc4be6bbae] 17944 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-29 17:14:38.976  INFO [d5931cbc-cba7-40d1-ade3-1bfc4be6bbae] 17944 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-29 17:14:38.977  INFO [d5931cbc-cba7-40d1-ade3-1bfc4be6bbae] 17944 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-29 17:14:38.977  INFO [d5931cbc-cba7-40d1-ade3-1bfc4be6bbae] 17944 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-29 17:14:38.977  INFO [d5931cbc-cba7-40d1-ade3-1bfc4be6bbae] 17944 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-29 17:14:40.642  INFO [d5931cbc-cba7-40d1-ade3-1bfc4be6bbae] 17944 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-29 17:14:40.643  INFO [d5931cbc-cba7-40d1-ade3-1bfc4be6bbae] 17944 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Response length: 184 characters
2025-06-29 17:14:40.643 DEBUG [d5931cbc-cba7-40d1-ade3-1bfc4be6bbae] 17944 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-06",
  "returnDate": null,
  "tripType": "oneWay",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-29 17:14:40.644 DEBUG [d5931cbc-cba7-40d1-ade3-1bfc4be6bbae] 17944 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-29 17:14:40.644 DEBUG [d5931cbc-cba7-40d1-ade3-1bfc4be6bbae] 17944 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-29 17:14:40.645 DEBUG [d5931cbc-cba7-40d1-ade3-1bfc4be6bbae] 17944 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-29 17:14:40.645 DEBUG [d5931cbc-cba7-40d1-ade3-1bfc4be6bbae] 17944 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 17:14:40.645  INFO [d5931cbc-cba7-40d1-ade3-1bfc4be6bbae] 17944 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 17:14:40.645  INFO [d5931cbc-cba7-40d1-ade3-1bfc4be6bbae] 17944 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-06, returnDate=null, tripType=oneWay, adults=1, children=0, infants=0
2025-06-29 17:14:40.646  INFO [d5931cbc-cba7-40d1-ade3-1bfc4be6bbae] 17944 --- [nio-8080-exec-7] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-29 17:14:40.647 DEBUG [d5931cbc-cba7-40d1-ade3-1bfc4be6bbae] 17944 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:14:42.319 DEBUG [2cd7673d-2b12-49f4-9231-8e2d57881e80] 17944 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 17:14:42.333 DEBUG [2cd7673d-2b12-49f4-9231-8e2d57881e80] 17944 --- [nio-8080-exec-8] o.s.s.core.session.SessionRegistryImpl   : Registering session E4A5319BAEB2C521B59C55D1C23B8F1E, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[])
2025-06-29 17:14:42.334 DEBUG [2cd7673d-2b12-49f4-9231-8e2d57881e80] 17944 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@6e2ff93b]
2025-06-29 17:14:42.336 DEBUG [2cd7673d-2b12-49f4-9231-8e2d57881e80] 17944 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me
2025-06-29 17:14:42.337  INFO [2cd7673d-2b12-49f4-9231-8e2d57881e80] 17944 --- [nio-8080-exec-8] o.e.x.controllers.UserController         : Request received for current user details: ****@****.***
2025-06-29 17:14:42.344  INFO [2cd7673d-2b12-49f4-9231-8e2d57881e80] 17944 --- [nio-8080-exec-8] o.e.x.controllers.UserController         : Returning details for user: ****@****.***
2025-06-29 17:14:42.402 DEBUG [3ea1f6d4-2016-472f-9613-0ab7a284dc7b] 17944 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:14:42.402 DEBUG [5fbdfb1d-20bc-4ef0-91ab-34e46a476451] 17944 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 17:14:42.402 DEBUG [db080303-0766-4a59-ac0f-de748fe93f08] 17944 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 17:14:42.405 DEBUG [db080303-0766-4a59-ac0f-de748fe93f08] 17944 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 17:14:42.415  INFO [db080303-0766-4a59-ac0f-de748fe93f08] 17944 --- [nio-8080-exec-9] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 17:14:42.422  INFO [db080303-0766-4a59-ac0f-de748fe93f08] 17944 --- [nio-8080-exec-9] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 17:14:42.428 DEBUG [3ea1f6d4-2016-472f-9613-0ab7a284dc7b] 17944 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:14:42.430 DEBUG [5fbdfb1d-20bc-4ef0-91ab-34e46a476451] 17944 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:14:42.431 DEBUG [3ea1f6d4-2016-472f-9613-0ab7a284dc7b] 17944 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:14:42.433  INFO [3ea1f6d4-2016-472f-9613-0ab7a284dc7b] 17944 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:14:42.434 DEBUG [5fbdfb1d-20bc-4ef0-91ab-34e46a476451] 17944 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 17:14:42.442  WARN [5fbdfb1d-20bc-4ef0-91ab-34e46a476451] 17944 --- [io-8080-exec-10] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 17:14:42.444  WARN [5fbdfb1d-20bc-4ef0-91ab-34e46a476451] 17944 --- [io-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 17:14:42.451 DEBUG [44ca4f2f-9b4e-4838-9928-2a71ba4bac47] 17944 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 17:14:42.452  INFO [3ea1f6d4-2016-472f-9613-0ab7a284dc7b] 17944 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 17:14:42.463 DEBUG [44ca4f2f-9b4e-4838-9928-2a71ba4bac47] 17944 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:14:42.466 DEBUG [44ca4f2f-9b4e-4838-9928-2a71ba4bac47] 17944 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 17:14:42.477  WARN [44ca4f2f-9b4e-4838-9928-2a71ba4bac47] 17944 --- [nio-8080-exec-2] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 17:14:42.478  WARN [44ca4f2f-9b4e-4838-9928-2a71ba4bac47] 17944 --- [nio-8080-exec-2] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 17:14:42.510  INFO [db080303-0766-4a59-ac0f-de748fe93f08] 17944 --- [nio-8080-exec-9] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 17:14:42.512 DEBUG [db080303-0766-4a59-ac0f-de748fe93f08] 17944 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:14:42.517 DEBUG [88acbd57-24cf-4302-8948-c47cd9613c23] 17944 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 17:14:42.519 DEBUG [88acbd57-24cf-4302-8948-c47cd9613c23] 17944 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 17:14:42.521  INFO [88acbd57-24cf-4302-8948-c47cd9613c23] 17944 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 17:14:42.521  INFO [88acbd57-24cf-4302-8948-c47cd9613c23] 17944 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 17:14:42.557 DEBUG [227ead64-74bd-4884-830e-fc412a7f39cb] 17944 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 17:14:42.558 DEBUG [227ead64-74bd-4884-830e-fc412a7f39cb] 17944 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 17:14:42.560  INFO [227ead64-74bd-4884-830e-fc412a7f39cb] 17944 --- [nio-8080-exec-4] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 17:14:42.581  INFO [88acbd57-24cf-4302-8948-c47cd9613c23] 17944 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 17:14:42.582 DEBUG [88acbd57-24cf-4302-8948-c47cd9613c23] 17944 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:14:42.741  INFO [227ead64-74bd-4884-830e-fc412a7f39cb] 17944 --- [nio-8080-exec-4] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 17:14:42.746 DEBUG [227ead64-74bd-4884-830e-fc412a7f39cb] 17944 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:14:42.754 DEBUG [5a87a9af-3007-4f76-a7d3-ae241044ba36] 17944 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 17:14:42.755 DEBUG [5a87a9af-3007-4f76-a7d3-ae241044ba36] 17944 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 17:14:42.756  INFO [5a87a9af-3007-4f76-a7d3-ae241044ba36] 17944 --- [nio-8080-exec-5] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 17:14:42.757 DEBUG [ae0d07c7-2b60-4a17-8dd5-278e60ce69b8] 17944 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 17:14:42.758 DEBUG [ae0d07c7-2b60-4a17-8dd5-278e60ce69b8] 17944 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 17:14:42.759  INFO [ae0d07c7-2b60-4a17-8dd5-278e60ce69b8] 17944 --- [nio-8080-exec-6] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 17:14:42.800  INFO [5a87a9af-3007-4f76-a7d3-ae241044ba36] 17944 --- [nio-8080-exec-5] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 17:14:42.801 DEBUG [5a87a9af-3007-4f76-a7d3-ae241044ba36] 17944 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:14:42.967  INFO [ae0d07c7-2b60-4a17-8dd5-278e60ce69b8] 17944 --- [nio-8080-exec-6] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 17:14:42.968 DEBUG [ae0d07c7-2b60-4a17-8dd5-278e60ce69b8] 17944 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:14:42.975 DEBUG [87eb9af7-7eae-4306-840c-18dddf5dc6b4] 17944 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 17:14:42.976 DEBUG [87eb9af7-7eae-4306-840c-18dddf5dc6b4] 17944 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 17:14:42.977  INFO [87eb9af7-7eae-4306-840c-18dddf5dc6b4] 17944 --- [nio-8080-exec-7] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 17:14:43.027  INFO [87eb9af7-7eae-4306-840c-18dddf5dc6b4] 17944 --- [nio-8080-exec-7] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 17:14:43.029 DEBUG [87eb9af7-7eae-4306-840c-18dddf5dc6b4] 17944 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:14:47.698 DEBUG [41cb3438-91e0-4439-b949-cab7f0590f0a] 17944 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 17:14:47.708 DEBUG [41cb3438-91e0-4439-b949-cab7f0590f0a] 17944 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:14:47.712 DEBUG [41cb3438-91e0-4439-b949-cab7f0590f0a] 17944 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 17:14:47.714  INFO [41cb3438-91e0-4439-b949-cab7f0590f0a] 17944 --- [nio-8080-exec-8] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 17:14:47.714  INFO [41cb3438-91e0-4439-b949-cab7f0590f0a] 17944 --- [nio-8080-exec-8] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 17:14:47.724 DEBUG [b7297e28-adb0-40a8-8271-f50fbcc45a6e] 17944 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 17:14:47.735 DEBUG [b7297e28-adb0-40a8-8271-f50fbcc45a6e] 17944 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:14:47.739 DEBUG [b7297e28-adb0-40a8-8271-f50fbcc45a6e] 17944 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 17:14:47.740  INFO [b7297e28-adb0-40a8-8271-f50fbcc45a6e] 17944 --- [io-8080-exec-10] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 17:14:47.740  INFO [b7297e28-adb0-40a8-8271-f50fbcc45a6e] 17944 --- [io-8080-exec-10] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 17:14:47.891 DEBUG [81adfa7f-f9ab-4b23-aa64-f3645c2cc62f] 17944 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 17:14:47.902 DEBUG [81adfa7f-f9ab-4b23-aa64-f3645c2cc62f] 17944 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:14:47.904 DEBUG [81adfa7f-f9ab-4b23-aa64-f3645c2cc62f] 17944 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 17:14:47.905  INFO [81adfa7f-f9ab-4b23-aa64-f3645c2cc62f] 17944 --- [nio-8080-exec-1] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 17:14:47.906  INFO [81adfa7f-f9ab-4b23-aa64-f3645c2cc62f] 17944 --- [nio-8080-exec-1] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 17:14:51.953 DEBUG [4cb103cd-aae2-472f-a869-473c31016113] 17944 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/cart/add
2025-06-29 17:14:51.965 DEBUG [4cb103cd-aae2-472f-a869-473c31016113] 17944 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:14:51.967 DEBUG [4cb103cd-aae2-472f-a869-473c31016113] 17944 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /api/cart/add
2025-06-29 17:14:52.017  INFO [4cb103cd-aae2-472f-a869-473c31016113] 17944 --- [nio-8080-exec-2] o.e.x.controllers.CartController         : User ****@****.*** request to add flight ID 16 to persistent cart
2025-06-29 17:14:52.079  INFO [4cb103cd-aae2-472f-a869-473c31016113] 17944 --- [nio-8080-exec-2] o.e.xlr8travel.services.CartServiceImpl  : Added new flight ID 16 to cart for user ****@****.***
2025-06-29 17:14:52.108  INFO [4cb103cd-aae2-472f-a869-473c31016113] 17944 --- [nio-8080-exec-2] o.e.x.controllers.CartController         : Flight ID 16 added/incremented in persistent cart for user ****@****.***.
2025-06-29 17:14:52.120 DEBUG [8dffa3ae-a896-401b-9d49-2ae39958eb06] 17944 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:14:52.134 DEBUG [8dffa3ae-a896-401b-9d49-2ae39958eb06] 17944 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:14:52.136 DEBUG [8dffa3ae-a896-401b-9d49-2ae39958eb06] 17944 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:14:52.137  INFO [8dffa3ae-a896-401b-9d49-2ae39958eb06] 17944 --- [nio-8080-exec-9] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:14:52.201  INFO [8dffa3ae-a896-401b-9d49-2ae39958eb06] 17944 --- [nio-8080-exec-9] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 17:14:52.678 DEBUG [8ea61fb3-dfda-436f-a894-e3c27af35e4d] 17944 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:14:52.691 DEBUG [8ea61fb3-dfda-436f-a894-e3c27af35e4d] 17944 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:14:52.694 DEBUG [8ea61fb3-dfda-436f-a894-e3c27af35e4d] 17944 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:14:52.695  INFO [8ea61fb3-dfda-436f-a894-e3c27af35e4d] 17944 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:14:52.765  INFO [8ea61fb3-dfda-436f-a894-e3c27af35e4d] 17944 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 17:14:52.771 DEBUG [24049afb-b128-4b77-8b9c-5950353ad940] 17944 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:14:52.781 DEBUG [24049afb-b128-4b77-8b9c-5950353ad940] 17944 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:14:52.784 DEBUG [24049afb-b128-4b77-8b9c-5950353ad940] 17944 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:14:52.785  INFO [24049afb-b128-4b77-8b9c-5950353ad940] 17944 --- [nio-8080-exec-4] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:14:52.837  INFO [24049afb-b128-4b77-8b9c-5950353ad940] 17944 --- [nio-8080-exec-4] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 17:14:54.495 DEBUG [581a9ca7-3c7c-45fc-8984-5e9de0061d21] 17944 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:14:54.508 DEBUG [581a9ca7-3c7c-45fc-8984-5e9de0061d21] 17944 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:14:54.510 DEBUG [581a9ca7-3c7c-45fc-8984-5e9de0061d21] 17944 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:14:54.511  INFO [581a9ca7-3c7c-45fc-8984-5e9de0061d21] 17944 --- [nio-8080-exec-5] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:14:54.560  INFO [581a9ca7-3c7c-45fc-8984-5e9de0061d21] 17944 --- [nio-8080-exec-5] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 17:14:54.567 DEBUG [2590d2ac-acf0-4c41-b53d-13810f3cc6e5] 17944 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:14:54.577 DEBUG [2590d2ac-acf0-4c41-b53d-13810f3cc6e5] 17944 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:14:54.579 DEBUG [2590d2ac-acf0-4c41-b53d-13810f3cc6e5] 17944 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:14:54.580  INFO [2590d2ac-acf0-4c41-b53d-13810f3cc6e5] 17944 --- [nio-8080-exec-6] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:14:54.631  INFO [2590d2ac-acf0-4c41-b53d-13810f3cc6e5] 17944 --- [nio-8080-exec-6] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 17:15:01.374 DEBUG [19a64568-aff8-43c9-9f61-7c969eb3c755] 17944 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/checkout/create-payment-intent
2025-06-29 17:15:01.375 DEBUG [19a64568-aff8-43c9-9f61-7c969eb3c755] 17944 --- [nio-8080-exec-7] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 17:15:01.376 DEBUG [19a64568-aff8-43c9-9f61-7c969eb3c755] 17944 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/checkout/create-payment-intent
2025-06-29 17:15:01.395  INFO [19a64568-aff8-43c9-9f61-7c969eb3c755] 17944 --- [nio-8080-exec-7] o.e.x.controllers.PaymentController      : Creating payment intent for amount: 23995 ron
2025-06-29 17:15:02.095  INFO [19a64568-aff8-43c9-9f61-7c969eb3c755] 17944 --- [nio-8080-exec-7] o.e.x.controllers.PaymentController      : Payment intent created successfully: pi_3RfM0XGf8s1WZJnq1s5HU234
2025-06-29 17:15:03.315 DEBUG [bc0a014c-4f5d-4a34-bd9a-ae9d3a21b061] 17944 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /api/checkout/confirm
2025-06-29 17:15:03.325 DEBUG [bc0a014c-4f5d-4a34-bd9a-ae9d3a21b061] 17944 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:15:03.328 DEBUG [bc0a014c-4f5d-4a34-bd9a-ae9d3a21b061] 17944 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured POST /api/checkout/confirm
2025-06-29 17:15:03.329  INFO [bc0a014c-4f5d-4a34-bd9a-ae9d3a21b061] 17944 --- [nio-8080-exec-8] o.e.x.controllers.CheckoutController     : Received purchase confirmation request.
2025-06-29 17:15:03.335  INFO [bc0a014c-4f5d-4a34-bd9a-ae9d3a21b061] 17944 --- [nio-8080-exec-8] o.e.x.controllers.CheckoutController     : Processing purchase for user: ****@****.***
2025-06-29 17:15:03.376  INFO [bc0a014c-4f5d-4a34-bd9a-ae9d3a21b061] 17944 --- [nio-8080-exec-8] o.e.x.controllers.CheckoutController     : User ****@****.*** persistent cart has 1 items.
2025-06-29 17:15:03.376  WARN [bc0a014c-4f5d-4a34-bd9a-ae9d3a21b061] 17944 --- [nio-8080-exec-8] o.e.x.controllers.CheckoutController     : !!! SIMULATING successful payment processing for user ****@****.*** !!!
2025-06-29 17:15:03.378  INFO [bc0a014c-4f5d-4a34-bd9a-ae9d3a21b061] 17944 --- [nio-8080-exec-8] o.e.x.services.OrderServiceImpl          : Creating order from persistent cart for user: ****@****.***
2025-06-29 17:15:03.382  INFO [bc0a014c-4f5d-4a34-bd9a-ae9d3a21b061] 17944 --- [nio-8080-exec-8] o.e.x.services.OrderServiceImpl          : Order 1 created for user ****@****.***, status: PENDING_PAYMENT. Total: 37.99
2025-06-29 17:15:03.383  INFO [bc0a014c-4f5d-4a34-bd9a-ae9d3a21b061] 17944 --- [nio-8080-exec-8] o.e.x.services.OrderServiceImpl          : Created ticket with deferred seat selection (fallback) for flight XT-OTP-CDG-2 for user ****@****.***
2025-06-29 17:15:04.643  INFO [bc0a014c-4f5d-4a34-bd9a-ae9d3a21b061] 17944 --- [nio-8080-exec-8] o.e.x.services.EmailServiceImpl          : Purchase confirmation email sent to ****@****.***
2025-06-29 17:15:04.643  INFO [bc0a014c-4f5d-4a34-bd9a-ae9d3a21b061] 17944 --- [nio-8080-exec-8] o.e.x.services.OrderServiceImpl          : Purchase confirmation email sent to user: ****@****.***
2025-06-29 17:15:04.656  INFO [bc0a014c-4f5d-4a34-bd9a-ae9d3a21b061] 17944 --- [nio-8080-exec-8] o.e.x.controllers.CheckoutController     : Order successfully created for user ****@****.***. Confirmation: 1
2025-06-29 17:15:04.660  INFO [bc0a014c-4f5d-4a34-bd9a-ae9d3a21b061] 17944 --- [nio-8080-exec-8] o.e.xlr8travel.services.CartServiceImpl  : Clearing 1 items from cart for user ****@****.***
2025-06-29 17:15:04.683  INFO [bc0a014c-4f5d-4a34-bd9a-ae9d3a21b061] 17944 --- [nio-8080-exec-8] o.e.x.controllers.CheckoutController     : Persistent cart cleared for user ****@****.***.
2025-06-29 17:15:04.693 DEBUG [9a46479b-eddd-49bc-9227-c33d53523d2d] 17944 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing DELETE /api/cart/remove/16
2025-06-29 17:15:04.796 DEBUG [9a46479b-eddd-49bc-9227-c33d53523d2d] 17944 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:15:04.797 DEBUG [9a46479b-eddd-49bc-9227-c33d53523d2d] 17944 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured DELETE /api/cart/remove/16
2025-06-29 17:15:04.882  INFO [9a46479b-eddd-49bc-9227-c33d53523d2d] 17944 --- [io-8080-exec-10] o.e.x.controllers.CartController         : User ****@****.*** request to remove flight ID 16 from persistent cart
2025-06-29 17:15:04.893  WARN [9a46479b-eddd-49bc-9227-c33d53523d2d] 17944 --- [io-8080-exec-10] o.e.xlr8travel.services.CartServiceImpl  : Attempted to remove flight ID 16 not found in cart for user ****@****.***
2025-06-29 17:15:04.895  WARN [9a46479b-eddd-49bc-9227-c33d53523d2d] 17944 --- [io-8080-exec-10] o.e.x.controllers.CartController         : Attempted to remove flight ID 16 not found in persistent cart for user ****@****.***
2025-06-29 17:15:04.905 DEBUG [4a06c3aa-8e4d-40aa-8226-669effe2726c] 17944 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:15:05.000 DEBUG [4a06c3aa-8e4d-40aa-8226-669effe2726c] 17944 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:15:05.001 DEBUG [4a06c3aa-8e4d-40aa-8226-669effe2726c] 17944 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:15:05.002  INFO [4a06c3aa-8e4d-40aa-8226-669effe2726c] 17944 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:15:05.094  INFO [4a06c3aa-8e4d-40aa-8226-669effe2726c] 17944 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 17:15:06.334 DEBUG [f607109c-e8ee-4836-a1de-fe7ad2133d2a] 17944 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 17:15:06.434 DEBUG [f607109c-e8ee-4836-a1de-fe7ad2133d2a] 17944 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:15:06.436 DEBUG [f607109c-e8ee-4836-a1de-fe7ad2133d2a] 17944 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 17:15:06.522  INFO [f607109c-e8ee-4836-a1de-fe7ad2133d2a] 17944 --- [nio-8080-exec-2] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 17:15:06.523  INFO [f607109c-e8ee-4836-a1de-fe7ad2133d2a] 17944 --- [nio-8080-exec-2] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 17:15:06.528  INFO [f607109c-e8ee-4836-a1de-fe7ad2133d2a] 17944 --- [nio-8080-exec-2] o.e.x.services.TicketServiceImpl         : Found 1 tickets eligible for check-in for user 4
2025-06-29 17:15:06.548 DEBUG [ace20cf5-6f37-49cf-b674-6c510e316890] 17944 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 17:15:06.642 DEBUG [ace20cf5-6f37-49cf-b674-6c510e316890] 17944 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:15:06.644 DEBUG [ace20cf5-6f37-49cf-b674-6c510e316890] 17944 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 17:15:06.728  INFO [ace20cf5-6f37-49cf-b674-6c510e316890] 17944 --- [nio-8080-exec-9] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 17:15:06.729  INFO [ace20cf5-6f37-49cf-b674-6c510e316890] 17944 --- [nio-8080-exec-9] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 17:15:06.733  INFO [ace20cf5-6f37-49cf-b674-6c510e316890] 17944 --- [nio-8080-exec-9] o.e.x.services.TicketServiceImpl         : Found 1 tickets eligible for check-in for user 4
2025-06-29 17:15:09.665 DEBUG [0e615202-538a-4b81-9730-2632d16fc386] 17944 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 17:15:09.766 DEBUG [0e615202-538a-4b81-9730-2632d16fc386] 17944 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:15:09.768 DEBUG [0e615202-538a-4b81-9730-2632d16fc386] 17944 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 17:15:09.769  INFO [0e615202-538a-4b81-9730-2632d16fc386] 17944 --- [nio-8080-exec-3] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 17:15:09.769  INFO [0e615202-538a-4b81-9730-2632d16fc386] 17944 --- [nio-8080-exec-3] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 17:15:09.818 DEBUG [2161da30-65b6-4079-85d2-40a6843baf96] 17944 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 17:15:09.916 DEBUG [2161da30-65b6-4079-85d2-40a6843baf96] 17944 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:15:09.918 DEBUG [2161da30-65b6-4079-85d2-40a6843baf96] 17944 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 17:15:09.919  INFO [2161da30-65b6-4079-85d2-40a6843baf96] 17944 --- [nio-8080-exec-4] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 17:15:09.919  INFO [2161da30-65b6-4079-85d2-40a6843baf96] 17944 --- [nio-8080-exec-4] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 17:15:15.560 DEBUG [2a1c6b79-4497-4676-a73c-abaeb6f0ad3b] 17944 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /api/check-in/3/with-seat
2025-06-29 17:15:15.652 DEBUG [2a1c6b79-4497-4676-a73c-abaeb6f0ad3b] 17944 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:15:15.655 DEBUG [2a1c6b79-4497-4676-a73c-abaeb6f0ad3b] 17944 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured POST /api/check-in/3/with-seat
2025-06-29 17:15:15.751  INFO [2a1c6b79-4497-4676-a73c-abaeb6f0ad3b] 17944 --- [nio-8080-exec-5] o.e.x.controllers.CheckinController      : Checking in ticket 3 with seat for user: ****@****.***
2025-06-29 17:15:15.755  INFO [2a1c6b79-4497-4676-a73c-abaeb6f0ad3b] 17944 --- [nio-8080-exec-5] o.e.x.services.TicketServiceImpl         : Checking in ticket 3 with seat 1D of type SEAT_TYPE_UPFRONT
2025-06-29 17:15:15.756  INFO [2a1c6b79-4497-4676-a73c-abaeb6f0ad3b] 17944 --- [nio-8080-exec-5] o.e.x.services.TicketServiceImpl         : Checking if seat 1D is booked for flight 16
2025-06-29 17:15:15.763  INFO [2a1c6b79-4497-4676-a73c-abaeb6f0ad3b] 17944 --- [nio-8080-exec-5] o.e.x.services.TicketServiceImpl         : Successfully checked in ticket 3 with seat 1D
2025-06-29 17:15:24.812 DEBUG [667e449e-7211-4f97-8a21-ddff4a8bf826] 17944 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/check-in/boarding-passes
2025-06-29 17:15:24.812 DEBUG [cbae14b6-e51a-4f92-81b4-72ef741962de] 17944 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/check-in/boarding-passes
2025-06-29 17:15:24.824 DEBUG [62ee74a1-3114-460e-b782-b1d5128b19b7] 17944 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/boarding-passes
2025-06-29 17:15:24.919 DEBUG [62ee74a1-3114-460e-b782-b1d5128b19b7] 17944 --- [nio-8080-exec-8] o.s.s.core.session.SessionRegistryImpl   : Registering session 2556F10D0982EC2D27E0B1CA4850638A, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}])
2025-06-29 17:15:24.919 DEBUG [62ee74a1-3114-460e-b782-b1d5128b19b7] 17944 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@3b306b50]
2025-06-29 17:15:24.921 DEBUG [62ee74a1-3114-460e-b782-b1d5128b19b7] 17944 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/boarding-passes
2025-06-29 17:15:25.005  INFO [62ee74a1-3114-460e-b782-b1d5128b19b7] 17944 --- [nio-8080-exec-8] o.e.x.services.TicketServiceImpl         : Finding checked-in tickets for user 4
2025-06-29 17:15:25.012 DEBUG [81ac96d8-986e-4465-8f17-217362cf5fe4] 17944 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/boarding-passes
2025-06-29 17:15:25.099 DEBUG [81ac96d8-986e-4465-8f17-217362cf5fe4] 17944 --- [io-8080-exec-10] o.s.s.core.session.SessionRegistryImpl   : Registering session 5181366C713500BE494A07D20DEF20C7, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}])
2025-06-29 17:15:25.100 DEBUG [81ac96d8-986e-4465-8f17-217362cf5fe4] 17944 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@6ede24d7]
2025-06-29 17:15:25.101 DEBUG [81ac96d8-986e-4465-8f17-217362cf5fe4] 17944 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/boarding-passes
2025-06-29 17:15:25.184  INFO [81ac96d8-986e-4465-8f17-217362cf5fe4] 17944 --- [io-8080-exec-10] o.e.x.services.TicketServiceImpl         : Finding checked-in tickets for user 4
2025-06-29 17:19:06.517 DEBUG [526740f1-8f2f-40ff-abff-cbb1f6dbc95d] 17944 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/nearby?origin=OTP
2025-06-29 17:19:06.520 DEBUG [526740f1-8f2f-40ff-abff-cbb1f6dbc95d] 17944 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/nearby?origin=OTP
2025-06-29 17:19:06.522  INFO [526740f1-8f2f-40ff-abff-cbb1f6dbc95d] 17944 --- [nio-8080-exec-5] o.e.x.controllers.FlightController       : Received request for nearby flights from origin: OTP, departureDate: null
2025-06-29 17:19:06.523  INFO [526740f1-8f2f-40ff-abff-cbb1f6dbc95d] 17944 --- [nio-8080-exec-5] o.e.x.controllers.FlightController       : Using search date: 2025-06-29
2025-06-29 17:19:06.523  INFO [526740f1-8f2f-40ff-abff-cbb1f6dbc95d] 17944 --- [nio-8080-exec-5] o.e.x.controllers.FlightController       : Cache key: OTP-2025-06-29
2025-06-29 17:19:06.523  INFO [526740f1-8f2f-40ff-abff-cbb1f6dbc95d] 17944 --- [nio-8080-exec-5] o.e.x.controllers.FlightController       : Returning cached nearby flights for origin: OTP, found 6 flights
2025-06-29 17:19:06.525 DEBUG [526740f1-8f2f-40ff-abff-cbb1f6dbc95d] 17944 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:19:11.196 DEBUG [100a7872-3b89-4b0a-adf6-0d6ed869ab0c] 17944 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-29 17:19:11.197 DEBUG [100a7872-3b89-4b0a-adf6-0d6ed869ab0c] 17944 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-29 17:19:11.199  INFO [100a7872-3b89-4b0a-adf6-0d6ed869ab0c] 17944 --- [nio-8080-exec-6] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris
2025-06-29 17:19:11.199  INFO [100a7872-3b89-4b0a-adf6-0d6ed869ab0c] 17944 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-29 17:19:11.199  INFO [100a7872-3b89-4b0a-adf6-0d6ed869ab0c] 17944 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-29 17:19:11.199 DEBUG [100a7872-3b89-4b0a-adf6-0d6ed869ab0c] 17944 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-29).    For example, if today is 2025-06-29, a good departure date would be between 2025-07-06 and 2025-07-13, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris";
2025-06-29 17:19:11.202  INFO [100a7872-3b89-4b0a-adf6-0d6ed869ab0c] 17944 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-29 17:19:11.202  INFO [100a7872-3b89-4b0a-adf6-0d6ed869ab0c] 17944 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-29 17:19:11.202  INFO [100a7872-3b89-4b0a-adf6-0d6ed869ab0c] 17944 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-29 17:19:11.202  INFO [100a7872-3b89-4b0a-adf6-0d6ed869ab0c] 17944 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 17:19:11.202  INFO [100a7872-3b89-4b0a-adf6-0d6ed869ab0c] 17944 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-29 17:19:11.208  INFO [100a7872-3b89-4b0a-adf6-0d6ed869ab0c] 17944 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-29 17:19:11.208  INFO [100a7872-3b89-4b0a-adf6-0d6ed869ab0c] 17944 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-29 17:19:11.209  INFO [100a7872-3b89-4b0a-adf6-0d6ed869ab0c] 17944 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-29 17:19:11.209  INFO [100a7872-3b89-4b0a-adf6-0d6ed869ab0c] 17944 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-29 17:19:13.260  INFO [100a7872-3b89-4b0a-adf6-0d6ed869ab0c] 17944 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-29 17:19:13.260  INFO [100a7872-3b89-4b0a-adf6-0d6ed869ab0c] 17944 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Response length: 195 characters
2025-06-29 17:19:13.260 DEBUG [100a7872-3b89-4b0a-adf6-0d6ed869ab0c] 17944 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-06",
  "returnDate": "2025-07-08",
  "tripType": "roundTrip",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-29 17:19:13.261 DEBUG [100a7872-3b89-4b0a-adf6-0d6ed869ab0c] 17944 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-29 17:19:13.261 DEBUG [100a7872-3b89-4b0a-adf6-0d6ed869ab0c] 17944 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-29 17:19:13.261 DEBUG [100a7872-3b89-4b0a-adf6-0d6ed869ab0c] 17944 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-29 17:19:13.261 DEBUG [100a7872-3b89-4b0a-adf6-0d6ed869ab0c] 17944 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 17:19:13.262  INFO [100a7872-3b89-4b0a-adf6-0d6ed869ab0c] 17944 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 17:19:13.262  INFO [100a7872-3b89-4b0a-adf6-0d6ed869ab0c] 17944 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-06, returnDate=2025-07-08, tripType=roundTrip, adults=1, children=0, infants=0
2025-06-29 17:19:13.262  INFO [100a7872-3b89-4b0a-adf6-0d6ed869ab0c] 17944 --- [nio-8080-exec-6] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-29 17:19:13.263 DEBUG [100a7872-3b89-4b0a-adf6-0d6ed869ab0c] 17944 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:19:14.666 DEBUG [2f68c271-d1c1-4d04-83bc-34970137b9e0] 17944 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-29 17:19:14.667 DEBUG [2f68c271-d1c1-4d04-83bc-34970137b9e0] 17944 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-29 17:19:14.668  INFO [2f68c271-d1c1-4d04-83bc-34970137b9e0] 17944 --- [nio-8080-exec-7] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris one way
2025-06-29 17:19:14.668  INFO [2f68c271-d1c1-4d04-83bc-34970137b9e0] 17944 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-29 17:19:14.669  INFO [2f68c271-d1c1-4d04-83bc-34970137b9e0] 17944 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-29 17:19:14.669 DEBUG [2f68c271-d1c1-4d04-83bc-34970137b9e0] 17944 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-29).    For example, if today is 2025-06-29, a good departure date would be between 2025-07-06 and 2025-07-13, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris one way";
2025-06-29 17:19:14.671  INFO [2f68c271-d1c1-4d04-83bc-34970137b9e0] 17944 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-29 17:19:14.671  INFO [2f68c271-d1c1-4d04-83bc-34970137b9e0] 17944 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-29 17:19:14.672  INFO [2f68c271-d1c1-4d04-83bc-34970137b9e0] 17944 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-29 17:19:14.672  INFO [2f68c271-d1c1-4d04-83bc-34970137b9e0] 17944 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 17:19:14.672  INFO [2f68c271-d1c1-4d04-83bc-34970137b9e0] 17944 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-29 17:19:14.673  INFO [2f68c271-d1c1-4d04-83bc-34970137b9e0] 17944 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-29 17:19:14.673  INFO [2f68c271-d1c1-4d04-83bc-34970137b9e0] 17944 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-29 17:19:14.673  INFO [2f68c271-d1c1-4d04-83bc-34970137b9e0] 17944 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-29 17:19:14.674  INFO [2f68c271-d1c1-4d04-83bc-34970137b9e0] 17944 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-29 17:19:16.376  INFO [2f68c271-d1c1-4d04-83bc-34970137b9e0] 17944 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-29 17:19:16.377  INFO [2f68c271-d1c1-4d04-83bc-34970137b9e0] 17944 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Response length: 184 characters
2025-06-29 17:19:16.377 DEBUG [2f68c271-d1c1-4d04-83bc-34970137b9e0] 17944 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-06",
  "returnDate": null,
  "tripType": "oneWay",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-29 17:19:16.377 DEBUG [2f68c271-d1c1-4d04-83bc-34970137b9e0] 17944 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-29 17:19:16.378 DEBUG [2f68c271-d1c1-4d04-83bc-34970137b9e0] 17944 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-29 17:19:16.378 DEBUG [2f68c271-d1c1-4d04-83bc-34970137b9e0] 17944 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-29 17:19:16.378 DEBUG [2f68c271-d1c1-4d04-83bc-34970137b9e0] 17944 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 17:19:16.378  INFO [2f68c271-d1c1-4d04-83bc-34970137b9e0] 17944 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 17:19:16.378  INFO [2f68c271-d1c1-4d04-83bc-34970137b9e0] 17944 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-06, returnDate=null, tripType=oneWay, adults=1, children=0, infants=0
2025-06-29 17:19:16.378  INFO [2f68c271-d1c1-4d04-83bc-34970137b9e0] 17944 --- [nio-8080-exec-7] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-29 17:19:16.379 DEBUG [2f68c271-d1c1-4d04-83bc-34970137b9e0] 17944 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:19:18.125 DEBUG [17e226e0-e61d-43e7-9a08-139e4fb95d0b] 17944 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 17:19:18.224 DEBUG [17e226e0-e61d-43e7-9a08-139e4fb95d0b] 17944 --- [nio-8080-exec-8] o.s.s.core.session.SessionRegistryImpl   : Registering session 2BEEA4C3063B55A2AE9CAF76AB967E60, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}])
2025-06-29 17:19:18.225 DEBUG [17e226e0-e61d-43e7-9a08-139e4fb95d0b] 17944 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@63b72f05]
2025-06-29 17:19:18.227 DEBUG [17e226e0-e61d-43e7-9a08-139e4fb95d0b] 17944 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me
2025-06-29 17:19:18.227  INFO [17e226e0-e61d-43e7-9a08-139e4fb95d0b] 17944 --- [nio-8080-exec-8] o.e.x.controllers.UserController         : Request received for current user details: ****@****.***
2025-06-29 17:19:18.326  INFO [17e226e0-e61d-43e7-9a08-139e4fb95d0b] 17944 --- [nio-8080-exec-8] o.e.x.controllers.UserController         : Returning details for user: ****@****.***
2025-06-29 17:19:18.380 DEBUG [7a56cf9a-e9c1-424c-b21b-ce22f8519974] 17944 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 17:19:18.384 DEBUG [5c79d2f1-1aa5-4da5-86d6-07da36a7c458] 17944 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 17:19:18.385 DEBUG [d329b805-ee73-4b5f-8e29-04d4d87f77c6] 17944 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:19:18.386 DEBUG [5c79d2f1-1aa5-4da5-86d6-07da36a7c458] 17944 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 17:19:18.388  INFO [5c79d2f1-1aa5-4da5-86d6-07da36a7c458] 17944 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 17:19:18.389  INFO [5c79d2f1-1aa5-4da5-86d6-07da36a7c458] 17944 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 17:19:18.475  INFO [5c79d2f1-1aa5-4da5-86d6-07da36a7c458] 17944 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 17:19:18.477 DEBUG [5c79d2f1-1aa5-4da5-86d6-07da36a7c458] 17944 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:19:18.483 DEBUG [1eef71d9-3c9f-41d5-a460-86963970e7bb] 17944 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 17:19:18.484 DEBUG [1eef71d9-3c9f-41d5-a460-86963970e7bb] 17944 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 17:19:18.485  INFO [1eef71d9-3c9f-41d5-a460-86963970e7bb] 17944 --- [nio-8080-exec-9] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 17:19:18.486  INFO [1eef71d9-3c9f-41d5-a460-86963970e7bb] 17944 --- [nio-8080-exec-9] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 17:19:18.513 DEBUG [69a01786-7943-4920-b2c2-bcf2a685c08a] 17944 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 17:19:18.515 DEBUG [69a01786-7943-4920-b2c2-bcf2a685c08a] 17944 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 17:19:18.517  INFO [69a01786-7943-4920-b2c2-bcf2a685c08a] 17944 --- [nio-8080-exec-3] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 17:19:18.533 DEBUG [7a56cf9a-e9c1-424c-b21b-ce22f8519974] 17944 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:19:18.536 DEBUG [7a56cf9a-e9c1-424c-b21b-ce22f8519974] 17944 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 17:19:18.538 DEBUG [d329b805-ee73-4b5f-8e29-04d4d87f77c6] 17944 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:19:18.539 DEBUG [d329b805-ee73-4b5f-8e29-04d4d87f77c6] 17944 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:19:18.540  INFO [d329b805-ee73-4b5f-8e29-04d4d87f77c6] 17944 --- [nio-8080-exec-2] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:19:18.542  INFO [1eef71d9-3c9f-41d5-a460-86963970e7bb] 17944 --- [nio-8080-exec-9] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 17:19:18.543 DEBUG [1eef71d9-3c9f-41d5-a460-86963970e7bb] 17944 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:19:18.631  WARN [7a56cf9a-e9c1-424c-b21b-ce22f8519974] 17944 --- [io-8080-exec-10] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 17:19:18.633  WARN [7a56cf9a-e9c1-424c-b21b-ce22f8519974] 17944 --- [io-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 17:19:18.639 DEBUG [bd2a8c60-b065-4907-9a8f-688fcbfb66c1] 17944 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 17:19:18.641  INFO [d329b805-ee73-4b5f-8e29-04d4d87f77c6] 17944 --- [nio-8080-exec-2] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 17:19:18.707  INFO [69a01786-7943-4920-b2c2-bcf2a685c08a] 17944 --- [nio-8080-exec-3] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 17:19:18.708 DEBUG [69a01786-7943-4920-b2c2-bcf2a685c08a] 17944 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:19:18.715 DEBUG [0441d00a-ce00-4139-9819-5ff7255b3436] 17944 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 17:19:18.716 DEBUG [0441d00a-ce00-4139-9819-5ff7255b3436] 17944 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 17:19:18.717  INFO [0441d00a-ce00-4139-9819-5ff7255b3436] 17944 --- [nio-8080-exec-5] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 17:19:18.718 DEBUG [b77ffae0-2d6a-41e9-9fd3-162dff844e20] 17944 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 17:19:18.720 DEBUG [b77ffae0-2d6a-41e9-9fd3-162dff844e20] 17944 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 17:19:18.721  INFO [b77ffae0-2d6a-41e9-9fd3-162dff844e20] 17944 --- [nio-8080-exec-6] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 17:19:18.743 DEBUG [bd2a8c60-b065-4907-9a8f-688fcbfb66c1] 17944 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:19:18.744 DEBUG [bd2a8c60-b065-4907-9a8f-688fcbfb66c1] 17944 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 17:19:18.768  INFO [0441d00a-ce00-4139-9819-5ff7255b3436] 17944 --- [nio-8080-exec-5] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 17:19:18.769 DEBUG [0441d00a-ce00-4139-9819-5ff7255b3436] 17944 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:19:18.856  WARN [bd2a8c60-b065-4907-9a8f-688fcbfb66c1] 17944 --- [nio-8080-exec-4] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 17:19:18.857  WARN [bd2a8c60-b065-4907-9a8f-688fcbfb66c1] 17944 --- [nio-8080-exec-4] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 17:19:18.921  INFO [b77ffae0-2d6a-41e9-9fd3-162dff844e20] 17944 --- [nio-8080-exec-6] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 17:19:18.922 DEBUG [b77ffae0-2d6a-41e9-9fd3-162dff844e20] 17944 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:19:18.930 DEBUG [64d2e255-d95a-4d4a-a5b6-ebf6c88d71ce] 17944 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 17:19:18.932 DEBUG [64d2e255-d95a-4d4a-a5b6-ebf6c88d71ce] 17944 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 17:19:18.933  INFO [64d2e255-d95a-4d4a-a5b6-ebf6c88d71ce] 17944 --- [nio-8080-exec-7] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 17:19:18.979  INFO [64d2e255-d95a-4d4a-a5b6-ebf6c88d71ce] 17944 --- [nio-8080-exec-7] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 17:19:18.982 DEBUG [64d2e255-d95a-4d4a-a5b6-ebf6c88d71ce] 17944 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:19:25.672 DEBUG [aaa8a6f2-7aa7-4764-aa54-0bae992fe86b] 17944 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 17:19:25.772 DEBUG [aaa8a6f2-7aa7-4764-aa54-0bae992fe86b] 17944 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:19:25.774 DEBUG [aaa8a6f2-7aa7-4764-aa54-0bae992fe86b] 17944 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 17:19:25.775  INFO [aaa8a6f2-7aa7-4764-aa54-0bae992fe86b] 17944 --- [nio-8080-exec-8] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 17:19:25.775  INFO [aaa8a6f2-7aa7-4764-aa54-0bae992fe86b] 17944 --- [nio-8080-exec-8] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 17:19:25.819 DEBUG [aa2c0571-73cd-4c53-89d2-032266b5242d] 17944 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 17:19:25.915 DEBUG [aa2c0571-73cd-4c53-89d2-032266b5242d] 17944 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:19:25.917 DEBUG [aa2c0571-73cd-4c53-89d2-032266b5242d] 17944 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 17:19:25.918  INFO [aa2c0571-73cd-4c53-89d2-032266b5242d] 17944 --- [nio-8080-exec-1] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 17:19:25.918  INFO [aa2c0571-73cd-4c53-89d2-032266b5242d] 17944 --- [nio-8080-exec-1] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 17:19:25.968 DEBUG [a2d07085-fbea-4192-a98a-be8b18b4c5e1] 17944 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 17:19:26.079 DEBUG [a2d07085-fbea-4192-a98a-be8b18b4c5e1] 17944 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:19:26.082 DEBUG [a2d07085-fbea-4192-a98a-be8b18b4c5e1] 17944 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 17:19:26.083  INFO [a2d07085-fbea-4192-a98a-be8b18b4c5e1] 17944 --- [nio-8080-exec-9] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 17:19:26.083  INFO [a2d07085-fbea-4192-a98a-be8b18b4c5e1] 17944 --- [nio-8080-exec-9] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 17:19:30.397 DEBUG [df868c79-a59e-42c6-8db7-e9c6f9d410f4] 17944 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing POST /api/cart/add
2025-06-29 17:19:30.497 DEBUG [df868c79-a59e-42c6-8db7-e9c6f9d410f4] 17944 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:19:30.498 DEBUG [df868c79-a59e-42c6-8db7-e9c6f9d410f4] 17944 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured POST /api/cart/add
2025-06-29 17:19:30.599  INFO [df868c79-a59e-42c6-8db7-e9c6f9d410f4] 17944 --- [io-8080-exec-10] o.e.x.controllers.CartController         : User ****@****.*** request to add flight ID 16 to persistent cart
2025-06-29 17:19:30.609  INFO [df868c79-a59e-42c6-8db7-e9c6f9d410f4] 17944 --- [io-8080-exec-10] o.e.xlr8travel.services.CartServiceImpl  : Added new flight ID 16 to cart for user ****@****.***
2025-06-29 17:19:30.634  INFO [df868c79-a59e-42c6-8db7-e9c6f9d410f4] 17944 --- [io-8080-exec-10] o.e.x.controllers.CartController         : Flight ID 16 added/incremented in persistent cart for user ****@****.***.
2025-06-29 17:19:30.648 DEBUG [5fa8a498-f931-4d0f-beca-6e17312a1dd3] 17944 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:19:30.757 DEBUG [5fa8a498-f931-4d0f-beca-6e17312a1dd3] 17944 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:19:30.759 DEBUG [5fa8a498-f931-4d0f-beca-6e17312a1dd3] 17944 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:19:30.759  INFO [5fa8a498-f931-4d0f-beca-6e17312a1dd3] 17944 --- [nio-8080-exec-2] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:19:30.887  INFO [5fa8a498-f931-4d0f-beca-6e17312a1dd3] 17944 --- [nio-8080-exec-2] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 17:19:31.228 DEBUG [15ac5a00-fea1-404e-b119-2dd9e1d0d525] 17944 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:19:31.320 DEBUG [15ac5a00-fea1-404e-b119-2dd9e1d0d525] 17944 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:19:31.321 DEBUG [15ac5a00-fea1-404e-b119-2dd9e1d0d525] 17944 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:19:31.322  INFO [15ac5a00-fea1-404e-b119-2dd9e1d0d525] 17944 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:19:31.419  INFO [15ac5a00-fea1-404e-b119-2dd9e1d0d525] 17944 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 17:19:31.426 DEBUG [bec60c64-2285-4814-83dc-650107ea0657] 17944 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:19:31.523 DEBUG [bec60c64-2285-4814-83dc-650107ea0657] 17944 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:19:31.524 DEBUG [bec60c64-2285-4814-83dc-650107ea0657] 17944 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:19:31.525  INFO [bec60c64-2285-4814-83dc-650107ea0657] 17944 --- [nio-8080-exec-5] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:19:31.626  INFO [bec60c64-2285-4814-83dc-650107ea0657] 17944 --- [nio-8080-exec-5] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 17:19:32.864 DEBUG [add790a8-f2f1-4baf-b104-21c6b1bec919] 17944 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:19:32.981 DEBUG [add790a8-f2f1-4baf-b104-21c6b1bec919] 17944 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:19:32.982 DEBUG [add790a8-f2f1-4baf-b104-21c6b1bec919] 17944 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:19:32.983  INFO [add790a8-f2f1-4baf-b104-21c6b1bec919] 17944 --- [nio-8080-exec-4] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:19:33.075  INFO [add790a8-f2f1-4baf-b104-21c6b1bec919] 17944 --- [nio-8080-exec-4] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 17:19:33.081 DEBUG [3fcd36a8-fded-46e7-8155-c74509b23cdf] 17944 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:19:33.186 DEBUG [3fcd36a8-fded-46e7-8155-c74509b23cdf] 17944 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:19:33.188 DEBUG [3fcd36a8-fded-46e7-8155-c74509b23cdf] 17944 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:19:33.189  INFO [3fcd36a8-fded-46e7-8155-c74509b23cdf] 17944 --- [nio-8080-exec-6] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:19:33.297  INFO [3fcd36a8-fded-46e7-8155-c74509b23cdf] 17944 --- [nio-8080-exec-6] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 17:19:40.804 DEBUG [af6df268-7599-48b6-a127-0650f895b916] 17944 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/checkout/create-payment-intent
2025-06-29 17:19:40.805 DEBUG [af6df268-7599-48b6-a127-0650f895b916] 17944 --- [nio-8080-exec-7] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 17:19:40.805 DEBUG [af6df268-7599-48b6-a127-0650f895b916] 17944 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/checkout/create-payment-intent
2025-06-29 17:19:40.806  INFO [af6df268-7599-48b6-a127-0650f895b916] 17944 --- [nio-8080-exec-7] o.e.x.controllers.PaymentController      : Creating payment intent for amount: 23995 ron
2025-06-29 17:19:41.288  INFO [af6df268-7599-48b6-a127-0650f895b916] 17944 --- [nio-8080-exec-7] o.e.x.controllers.PaymentController      : Payment intent created successfully: pi_3RfM53Gf8s1WZJnq1AE11hNd
2025-06-29 17:19:42.564 DEBUG [f9775f03-fc4c-48cc-9935-150d22c7db72] 17944 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /api/checkout/confirm
2025-06-29 17:19:42.649 DEBUG [f9775f03-fc4c-48cc-9935-150d22c7db72] 17944 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:19:42.650 DEBUG [f9775f03-fc4c-48cc-9935-150d22c7db72] 17944 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured POST /api/checkout/confirm
2025-06-29 17:19:42.652  INFO [f9775f03-fc4c-48cc-9935-150d22c7db72] 17944 --- [nio-8080-exec-8] o.e.x.controllers.CheckoutController     : Received purchase confirmation request.
2025-06-29 17:19:42.732  INFO [f9775f03-fc4c-48cc-9935-150d22c7db72] 17944 --- [nio-8080-exec-8] o.e.x.controllers.CheckoutController     : Processing purchase for user: ****@****.***
2025-06-29 17:19:42.739  INFO [f9775f03-fc4c-48cc-9935-150d22c7db72] 17944 --- [nio-8080-exec-8] o.e.x.controllers.CheckoutController     : User ****@****.*** persistent cart has 1 items.
2025-06-29 17:19:42.739  WARN [f9775f03-fc4c-48cc-9935-150d22c7db72] 17944 --- [nio-8080-exec-8] o.e.x.controllers.CheckoutController     : !!! SIMULATING successful payment processing for user ****@****.*** !!!
2025-06-29 17:19:42.740  INFO [f9775f03-fc4c-48cc-9935-150d22c7db72] 17944 --- [nio-8080-exec-8] o.e.x.services.OrderServiceImpl          : Creating order from persistent cart for user: ****@****.***
2025-06-29 17:19:42.744  INFO [f9775f03-fc4c-48cc-9935-150d22c7db72] 17944 --- [nio-8080-exec-8] o.e.x.services.OrderServiceImpl          : Order 2 created for user ****@****.***, status: PENDING_PAYMENT. Total: 37.99
2025-06-29 17:19:42.745  INFO [f9775f03-fc4c-48cc-9935-150d22c7db72] 17944 --- [nio-8080-exec-8] o.e.x.services.OrderServiceImpl          : Created ticket with deferred seat selection (fallback) for flight XT-OTP-CDG-2 for user ****@****.***
2025-06-29 17:19:43.963  INFO [f9775f03-fc4c-48cc-9935-150d22c7db72] 17944 --- [nio-8080-exec-8] o.e.x.services.EmailServiceImpl          : Purchase confirmation email sent to ****@****.***
2025-06-29 17:19:43.963  INFO [f9775f03-fc4c-48cc-9935-150d22c7db72] 17944 --- [nio-8080-exec-8] o.e.x.services.OrderServiceImpl          : Purchase confirmation email sent to user: ****@****.***
2025-06-29 17:19:43.977  INFO [f9775f03-fc4c-48cc-9935-150d22c7db72] 17944 --- [nio-8080-exec-8] o.e.x.controllers.CheckoutController     : Order successfully created for user ****@****.***. Confirmation: 2
2025-06-29 17:19:43.981  INFO [f9775f03-fc4c-48cc-9935-150d22c7db72] 17944 --- [nio-8080-exec-8] o.e.xlr8travel.services.CartServiceImpl  : Clearing 1 items from cart for user ****@****.***
2025-06-29 17:19:43.996  INFO [f9775f03-fc4c-48cc-9935-150d22c7db72] 17944 --- [nio-8080-exec-8] o.e.x.controllers.CheckoutController     : Persistent cart cleared for user ****@****.***.
2025-06-29 17:19:44.004 DEBUG [c0ddb3de-5799-4755-89cb-b93a1059bbdd] 17944 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing DELETE /api/cart/remove/16
2025-06-29 17:19:44.088 DEBUG [c0ddb3de-5799-4755-89cb-b93a1059bbdd] 17944 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:19:44.089 DEBUG [c0ddb3de-5799-4755-89cb-b93a1059bbdd] 17944 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured DELETE /api/cart/remove/16
2025-06-29 17:19:44.168  INFO [c0ddb3de-5799-4755-89cb-b93a1059bbdd] 17944 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : User ****@****.*** request to remove flight ID 16 from persistent cart
2025-06-29 17:19:44.176  WARN [c0ddb3de-5799-4755-89cb-b93a1059bbdd] 17944 --- [nio-8080-exec-1] o.e.xlr8travel.services.CartServiceImpl  : Attempted to remove flight ID 16 not found in cart for user ****@****.***
2025-06-29 17:19:44.177  WARN [c0ddb3de-5799-4755-89cb-b93a1059bbdd] 17944 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Attempted to remove flight ID 16 not found in persistent cart for user ****@****.***
2025-06-29 17:19:44.186 DEBUG [68c74bd4-9548-42e9-b88a-2c7f9dff0b55] 17944 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:19:44.270 DEBUG [68c74bd4-9548-42e9-b88a-2c7f9dff0b55] 17944 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:19:44.272 DEBUG [68c74bd4-9548-42e9-b88a-2c7f9dff0b55] 17944 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:19:44.272  INFO [68c74bd4-9548-42e9-b88a-2c7f9dff0b55] 17944 --- [nio-8080-exec-9] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:19:44.361  INFO [68c74bd4-9548-42e9-b88a-2c7f9dff0b55] 17944 --- [nio-8080-exec-9] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 17:19:45.936 DEBUG [54205db6-9ee0-4b47-bffd-4d2f0e864d93] 17944 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 17:19:46.032 DEBUG [54205db6-9ee0-4b47-bffd-4d2f0e864d93] 17944 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:19:46.033 DEBUG [54205db6-9ee0-4b47-bffd-4d2f0e864d93] 17944 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 17:19:46.116  INFO [54205db6-9ee0-4b47-bffd-4d2f0e864d93] 17944 --- [io-8080-exec-10] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 17:19:46.116  INFO [54205db6-9ee0-4b47-bffd-4d2f0e864d93] 17944 --- [io-8080-exec-10] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 17:19:46.121  INFO [54205db6-9ee0-4b47-bffd-4d2f0e864d93] 17944 --- [io-8080-exec-10] o.e.x.services.TicketServiceImpl         : Found 1 tickets eligible for check-in for user 4
2025-06-29 17:19:46.128 DEBUG [d8d158f2-fa32-441a-962b-1847a8da0893] 17944 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 17:19:46.210 DEBUG [d8d158f2-fa32-441a-962b-1847a8da0893] 17944 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:19:46.212 DEBUG [d8d158f2-fa32-441a-962b-1847a8da0893] 17944 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 17:19:46.292  INFO [d8d158f2-fa32-441a-962b-1847a8da0893] 17944 --- [nio-8080-exec-2] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 17:19:46.292  INFO [d8d158f2-fa32-441a-962b-1847a8da0893] 17944 --- [nio-8080-exec-2] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 17:19:46.297  INFO [d8d158f2-fa32-441a-962b-1847a8da0893] 17944 --- [nio-8080-exec-2] o.e.x.services.TicketServiceImpl         : Found 1 tickets eligible for check-in for user 4
2025-06-29 17:19:48.852 DEBUG [3c1316f3-239a-4443-bf35-6a15e5b5c062] 17944 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 17:19:48.940 DEBUG [3c1316f3-239a-4443-bf35-6a15e5b5c062] 17944 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:19:48.943 DEBUG [3c1316f3-239a-4443-bf35-6a15e5b5c062] 17944 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 17:19:48.943  INFO [3c1316f3-239a-4443-bf35-6a15e5b5c062] 17944 --- [nio-8080-exec-3] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 17:19:48.944  INFO [3c1316f3-239a-4443-bf35-6a15e5b5c062] 17944 --- [nio-8080-exec-3] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 17:19:48.997 DEBUG [5f6768cc-fdb9-4f2e-9652-053a30da99a1] 17944 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 17:19:49.095 DEBUG [5f6768cc-fdb9-4f2e-9652-053a30da99a1] 17944 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:19:49.098 DEBUG [5f6768cc-fdb9-4f2e-9652-053a30da99a1] 17944 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 17:19:49.098  INFO [5f6768cc-fdb9-4f2e-9652-053a30da99a1] 17944 --- [nio-8080-exec-5] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 17:19:49.099  INFO [5f6768cc-fdb9-4f2e-9652-053a30da99a1] 17944 --- [nio-8080-exec-5] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 17:19:56.765 DEBUG [a612e591-7c1d-45a9-9178-a3093fbc5514] 17944 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 17:19:56.864 DEBUG [a612e591-7c1d-45a9-9178-a3093fbc5514] 17944 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:19:56.866 DEBUG [a612e591-7c1d-45a9-9178-a3093fbc5514] 17944 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 17:19:56.867  INFO [a612e591-7c1d-45a9-9178-a3093fbc5514] 17944 --- [nio-8080-exec-4] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 17:19:56.867  INFO [a612e591-7c1d-45a9-9178-a3093fbc5514] 17944 --- [nio-8080-exec-4] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 17:19:56.910 DEBUG [75b79e81-bcae-4bb0-9257-e2d52da81359] 17944 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 17:19:57.004 DEBUG [75b79e81-bcae-4bb0-9257-e2d52da81359] 17944 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:19:57.006 DEBUG [75b79e81-bcae-4bb0-9257-e2d52da81359] 17944 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 17:19:57.007  INFO [75b79e81-bcae-4bb0-9257-e2d52da81359] 17944 --- [nio-8080-exec-6] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 17:19:57.007  INFO [75b79e81-bcae-4bb0-9257-e2d52da81359] 17944 --- [nio-8080-exec-6] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 17:23:15.787 DEBUG [e11b6346-09d9-4e29-8ff0-6989e176d793] 17944 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/nearby?origin=OTP
2025-06-29 17:23:15.790 DEBUG [e11b6346-09d9-4e29-8ff0-6989e176d793] 17944 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/nearby?origin=OTP
2025-06-29 17:23:15.792  INFO [e11b6346-09d9-4e29-8ff0-6989e176d793] 17944 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Received request for nearby flights from origin: OTP, departureDate: null
2025-06-29 17:23:15.792  INFO [e11b6346-09d9-4e29-8ff0-6989e176d793] 17944 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Using search date: 2025-06-29
2025-06-29 17:23:15.793  INFO [e11b6346-09d9-4e29-8ff0-6989e176d793] 17944 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Cache key: OTP-2025-06-29
2025-06-29 17:23:15.793  INFO [e11b6346-09d9-4e29-8ff0-6989e176d793] 17944 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : No valid cache found. Searching nearby flights from origin: OTP, after date: 2025-06-29
2025-06-29 17:23:15.794  INFO [e11b6346-09d9-4e29-8ff0-6989e176d793] 17944 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Calling flightService.findByOriginAndDepartureDateAfter for origin: OTP, date: 2025-06-29
2025-06-29 17:23:15.844  INFO [e11b6346-09d9-4e29-8ff0-6989e176d793] 17944 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Database query completed, found 16 flights
2025-06-29 17:23:15.844  INFO [e11b6346-09d9-4e29-8ff0-6989e176d793] 17944 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Converting 16 Flight entities to FlightDTOs
2025-06-29 17:23:15.845  INFO [e11b6346-09d9-4e29-8ff0-6989e176d793] 17944 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Converted to 16 FlightDTOs
2025-06-29 17:23:15.845  INFO [e11b6346-09d9-4e29-8ff0-6989e176d793] 17944 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Grouping flights by destination country
2025-06-29 17:23:15.845  INFO [e11b6346-09d9-4e29-8ff0-6989e176d793] 17944 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Grouped flights into 7 countries
2025-06-29 17:23:15.845  INFO [e11b6346-09d9-4e29-8ff0-6989e176d793] 17944 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Selecting diverse flights - one from each country first
2025-06-29 17:23:15.845  INFO [e11b6346-09d9-4e29-8ff0-6989e176d793] 17944 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Adding first flight from Greece (has 2 flights)
2025-06-29 17:23:15.845  INFO [e11b6346-09d9-4e29-8ff0-6989e176d793] 17944 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Adding first flight from Netherlands (has 2 flights)
2025-06-29 17:23:15.846  INFO [e11b6346-09d9-4e29-8ff0-6989e176d793] 17944 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Adding first flight from Italy (has 2 flights)
2025-06-29 17:23:15.846  INFO [e11b6346-09d9-4e29-8ff0-6989e176d793] 17944 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Adding first flight from United Kingdom (has 2 flights)
2025-06-29 17:23:15.846  INFO [e11b6346-09d9-4e29-8ff0-6989e176d793] 17944 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Adding first flight from France (has 2 flights)
2025-06-29 17:23:15.846  INFO [e11b6346-09d9-4e29-8ff0-6989e176d793] 17944 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Adding first flight from Switzerland (has 2 flights)
2025-06-29 17:23:15.846  INFO [e11b6346-09d9-4e29-8ff0-6989e176d793] 17944 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Reached 6 flights after first pass, stopping
2025-06-29 17:23:15.847  INFO [e11b6346-09d9-4e29-8ff0-6989e176d793] 17944 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Caching 6 diverse flights with key: OTP-2025-06-29
2025-06-29 17:23:15.847  INFO [e11b6346-09d9-4e29-8ff0-6989e176d793] 17944 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Returning 6 diverse nearby flights from: OTP
2025-06-29 17:23:15.848 DEBUG [e11b6346-09d9-4e29-8ff0-6989e176d793] 17944 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:23:21.929 DEBUG [f740c089-0a6a-46f0-87a9-8f3d5538e2d1] 17944 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-29 17:23:21.930 DEBUG [f740c089-0a6a-46f0-87a9-8f3d5538e2d1] 17944 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-29 17:23:21.931  INFO [f740c089-0a6a-46f0-87a9-8f3d5538e2d1] 17944 --- [nio-8080-exec-1] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris
2025-06-29 17:23:21.931  INFO [f740c089-0a6a-46f0-87a9-8f3d5538e2d1] 17944 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-29 17:23:21.932  INFO [f740c089-0a6a-46f0-87a9-8f3d5538e2d1] 17944 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-29 17:23:21.932 DEBUG [f740c089-0a6a-46f0-87a9-8f3d5538e2d1] 17944 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-29).    For example, if today is 2025-06-29, a good departure date would be between 2025-07-06 and 2025-07-13, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris";
2025-06-29 17:23:21.935  INFO [f740c089-0a6a-46f0-87a9-8f3d5538e2d1] 17944 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-29 17:23:21.935  INFO [f740c089-0a6a-46f0-87a9-8f3d5538e2d1] 17944 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-29 17:23:21.935  INFO [f740c089-0a6a-46f0-87a9-8f3d5538e2d1] 17944 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-29 17:23:21.935  INFO [f740c089-0a6a-46f0-87a9-8f3d5538e2d1] 17944 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 17:23:21.935  INFO [f740c089-0a6a-46f0-87a9-8f3d5538e2d1] 17944 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-29 17:23:21.937  INFO [f740c089-0a6a-46f0-87a9-8f3d5538e2d1] 17944 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-29 17:23:21.937  INFO [f740c089-0a6a-46f0-87a9-8f3d5538e2d1] 17944 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-29 17:23:21.937  INFO [f740c089-0a6a-46f0-87a9-8f3d5538e2d1] 17944 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-29 17:23:21.937  INFO [f740c089-0a6a-46f0-87a9-8f3d5538e2d1] 17944 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-29 17:23:23.711  INFO [f740c089-0a6a-46f0-87a9-8f3d5538e2d1] 17944 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-29 17:23:23.712  INFO [f740c089-0a6a-46f0-87a9-8f3d5538e2d1] 17944 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Response length: 195 characters
2025-06-29 17:23:23.712 DEBUG [f740c089-0a6a-46f0-87a9-8f3d5538e2d1] 17944 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-06",
  "returnDate": "2025-07-08",
  "tripType": "roundTrip",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-29 17:23:23.713 DEBUG [f740c089-0a6a-46f0-87a9-8f3d5538e2d1] 17944 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-29 17:23:23.713 DEBUG [f740c089-0a6a-46f0-87a9-8f3d5538e2d1] 17944 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-29 17:23:23.713 DEBUG [f740c089-0a6a-46f0-87a9-8f3d5538e2d1] 17944 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-29 17:23:23.714 DEBUG [f740c089-0a6a-46f0-87a9-8f3d5538e2d1] 17944 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 17:23:23.714  INFO [f740c089-0a6a-46f0-87a9-8f3d5538e2d1] 17944 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 17:23:23.714  INFO [f740c089-0a6a-46f0-87a9-8f3d5538e2d1] 17944 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-06, returnDate=2025-07-08, tripType=roundTrip, adults=1, children=0, infants=0
2025-06-29 17:23:23.714  INFO [f740c089-0a6a-46f0-87a9-8f3d5538e2d1] 17944 --- [nio-8080-exec-1] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-29 17:23:23.715 DEBUG [f740c089-0a6a-46f0-87a9-8f3d5538e2d1] 17944 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:23:27.034 DEBUG [d1d32569-01c8-4ac0-9434-05cb2863a575] 17944 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-29 17:23:27.036 DEBUG [d1d32569-01c8-4ac0-9434-05cb2863a575] 17944 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-29 17:23:27.037  INFO [d1d32569-01c8-4ac0-9434-05cb2863a575] 17944 --- [nio-8080-exec-9] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris one way
2025-06-29 17:23:27.037  INFO [d1d32569-01c8-4ac0-9434-05cb2863a575] 17944 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-29 17:23:27.038  INFO [d1d32569-01c8-4ac0-9434-05cb2863a575] 17944 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-29 17:23:27.038 DEBUG [d1d32569-01c8-4ac0-9434-05cb2863a575] 17944 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-29).    For example, if today is 2025-06-29, a good departure date would be between 2025-07-06 and 2025-07-13, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris one way";
2025-06-29 17:23:27.040  INFO [d1d32569-01c8-4ac0-9434-05cb2863a575] 17944 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-29 17:23:27.040  INFO [d1d32569-01c8-4ac0-9434-05cb2863a575] 17944 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-29 17:23:27.040  INFO [d1d32569-01c8-4ac0-9434-05cb2863a575] 17944 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-29 17:23:27.041  INFO [d1d32569-01c8-4ac0-9434-05cb2863a575] 17944 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 17:23:27.041  INFO [d1d32569-01c8-4ac0-9434-05cb2863a575] 17944 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-29 17:23:27.043  INFO [d1d32569-01c8-4ac0-9434-05cb2863a575] 17944 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-29 17:23:27.043  INFO [d1d32569-01c8-4ac0-9434-05cb2863a575] 17944 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-29 17:23:27.043  INFO [d1d32569-01c8-4ac0-9434-05cb2863a575] 17944 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-29 17:23:27.043  INFO [d1d32569-01c8-4ac0-9434-05cb2863a575] 17944 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-29 17:23:28.740  INFO [d1d32569-01c8-4ac0-9434-05cb2863a575] 17944 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-29 17:23:28.740  INFO [d1d32569-01c8-4ac0-9434-05cb2863a575] 17944 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Response length: 184 characters
2025-06-29 17:23:28.740 DEBUG [d1d32569-01c8-4ac0-9434-05cb2863a575] 17944 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-06",
  "returnDate": null,
  "tripType": "oneWay",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-29 17:23:28.741 DEBUG [d1d32569-01c8-4ac0-9434-05cb2863a575] 17944 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-29 17:23:28.741 DEBUG [d1d32569-01c8-4ac0-9434-05cb2863a575] 17944 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-29 17:23:28.742 DEBUG [d1d32569-01c8-4ac0-9434-05cb2863a575] 17944 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-29 17:23:28.742 DEBUG [d1d32569-01c8-4ac0-9434-05cb2863a575] 17944 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 17:23:28.742  INFO [d1d32569-01c8-4ac0-9434-05cb2863a575] 17944 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 17:23:28.742  INFO [d1d32569-01c8-4ac0-9434-05cb2863a575] 17944 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-06, returnDate=null, tripType=oneWay, adults=1, children=0, infants=0
2025-06-29 17:23:28.742  INFO [d1d32569-01c8-4ac0-9434-05cb2863a575] 17944 --- [nio-8080-exec-9] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-29 17:23:28.743 DEBUG [d1d32569-01c8-4ac0-9434-05cb2863a575] 17944 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:23:30.348 DEBUG [e2fdfd73-e188-4196-a8ca-69c67a3c5f96] 17944 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 17:23:30.459 DEBUG [e2fdfd73-e188-4196-a8ca-69c67a3c5f96] 17944 --- [io-8080-exec-10] o.s.s.core.session.SessionRegistryImpl   : Registering session 447857A9679A6731D24D54BE8E2CF613, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}])
2025-06-29 17:23:30.460 DEBUG [e2fdfd73-e188-4196-a8ca-69c67a3c5f96] 17944 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@5b0dd194]
2025-06-29 17:23:30.462 DEBUG [e2fdfd73-e188-4196-a8ca-69c67a3c5f96] 17944 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me
2025-06-29 17:23:30.463  INFO [e2fdfd73-e188-4196-a8ca-69c67a3c5f96] 17944 --- [io-8080-exec-10] o.e.x.controllers.UserController         : Request received for current user details: ****@****.***
2025-06-29 17:23:30.559  INFO [e2fdfd73-e188-4196-a8ca-69c67a3c5f96] 17944 --- [io-8080-exec-10] o.e.x.controllers.UserController         : Returning details for user: ****@****.***
2025-06-29 17:23:30.620 DEBUG [e43cce49-662e-48b6-9b81-cd7dc8f4f496] 17944 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 17:23:30.622 DEBUG [19965ef1-892f-4c99-8e23-71223156a2f1] 17944 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 17:23:30.622 DEBUG [bb343a97-4d71-478e-9b6e-f0cc79a6df15] 17944 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:23:30.625 DEBUG [e43cce49-662e-48b6-9b81-cd7dc8f4f496] 17944 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 17:23:30.662  INFO [e43cce49-662e-48b6-9b81-cd7dc8f4f496] 17944 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 17:23:30.663  INFO [e43cce49-662e-48b6-9b81-cd7dc8f4f496] 17944 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 17:23:30.732  INFO [e43cce49-662e-48b6-9b81-cd7dc8f4f496] 17944 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 17:23:30.734 DEBUG [e43cce49-662e-48b6-9b81-cd7dc8f4f496] 17944 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:23:30.742 DEBUG [96fab088-5b32-4a63-a0aa-d2aadb99d016] 17944 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 17:23:30.743 DEBUG [96fab088-5b32-4a63-a0aa-d2aadb99d016] 17944 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 17:23:30.745  INFO [96fab088-5b32-4a63-a0aa-d2aadb99d016] 17944 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 17:23:30.745  INFO [96fab088-5b32-4a63-a0aa-d2aadb99d016] 17944 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 17:23:30.775 DEBUG [e7845826-23fe-423a-bf3f-0cec13ccd508] 17944 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 17:23:30.778 DEBUG [e7845826-23fe-423a-bf3f-0cec13ccd508] 17944 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 17:23:30.779  INFO [e7845826-23fe-423a-bf3f-0cec13ccd508] 17944 --- [nio-8080-exec-6] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 17:23:30.825 DEBUG [bb343a97-4d71-478e-9b6e-f0cc79a6df15] 17944 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:23:30.826 DEBUG [19965ef1-892f-4c99-8e23-71223156a2f1] 17944 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:23:30.827 DEBUG [bb343a97-4d71-478e-9b6e-f0cc79a6df15] 17944 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:23:30.827  INFO [bb343a97-4d71-478e-9b6e-f0cc79a6df15] 17944 --- [nio-8080-exec-5] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:23:30.829 DEBUG [19965ef1-892f-4c99-8e23-71223156a2f1] 17944 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 17:23:30.834  INFO [96fab088-5b32-4a63-a0aa-d2aadb99d016] 17944 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 17:23:30.836 DEBUG [96fab088-5b32-4a63-a0aa-d2aadb99d016] 17944 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:23:30.938  INFO [e7845826-23fe-423a-bf3f-0cec13ccd508] 17944 --- [nio-8080-exec-6] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 17:23:30.939 DEBUG [e7845826-23fe-423a-bf3f-0cec13ccd508] 17944 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:23:30.946 DEBUG [c34299e3-c16e-409f-be4d-04e96d8109fd] 17944 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 17:23:30.947  WARN [19965ef1-892f-4c99-8e23-71223156a2f1] 17944 --- [nio-8080-exec-2] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 17:23:30.947 DEBUG [c34299e3-c16e-409f-be4d-04e96d8109fd] 17944 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 17:23:30.948  WARN [19965ef1-892f-4c99-8e23-71223156a2f1] 17944 --- [nio-8080-exec-2] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 17:23:30.948  INFO [c34299e3-c16e-409f-be4d-04e96d8109fd] 17944 --- [nio-8080-exec-7] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 17:23:30.950 DEBUG [160f6579-5b2b-4d81-8e01-8eb3f69df7d1] 17944 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 17:23:30.951 DEBUG [160f6579-5b2b-4d81-8e01-8eb3f69df7d1] 17944 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 17:23:30.953  INFO [160f6579-5b2b-4d81-8e01-8eb3f69df7d1] 17944 --- [nio-8080-exec-8] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 17:23:30.954  INFO [bb343a97-4d71-478e-9b6e-f0cc79a6df15] 17944 --- [nio-8080-exec-5] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 17:23:30.955 DEBUG [be71cfe6-0083-4536-a074-2183f1b3cb3a] 17944 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 17:23:30.990  INFO [c34299e3-c16e-409f-be4d-04e96d8109fd] 17944 --- [nio-8080-exec-7] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 17:23:30.992 DEBUG [c34299e3-c16e-409f-be4d-04e96d8109fd] 17944 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:23:31.056 DEBUG [be71cfe6-0083-4536-a074-2183f1b3cb3a] 17944 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:23:31.058 DEBUG [be71cfe6-0083-4536-a074-2183f1b3cb3a] 17944 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 17:23:31.133  INFO [160f6579-5b2b-4d81-8e01-8eb3f69df7d1] 17944 --- [nio-8080-exec-8] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 17:23:31.134 DEBUG [160f6579-5b2b-4d81-8e01-8eb3f69df7d1] 17944 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:23:31.140 DEBUG [80f49eb5-5032-4589-a5fd-7f98e4ed7be1] 17944 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 17:23:31.141 DEBUG [80f49eb5-5032-4589-a5fd-7f98e4ed7be1] 17944 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 17:23:31.141  INFO [80f49eb5-5032-4589-a5fd-7f98e4ed7be1] 17944 --- [nio-8080-exec-9] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 17:23:31.144  WARN [be71cfe6-0083-4536-a074-2183f1b3cb3a] 17944 --- [nio-8080-exec-1] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 17:23:31.145  WARN [be71cfe6-0083-4536-a074-2183f1b3cb3a] 17944 --- [nio-8080-exec-1] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 17:23:31.183  INFO [80f49eb5-5032-4589-a5fd-7f98e4ed7be1] 17944 --- [nio-8080-exec-9] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 17:23:31.184 DEBUG [80f49eb5-5032-4589-a5fd-7f98e4ed7be1] 17944 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:23:40.309 DEBUG [380406d4-3fbd-4de2-ad43-ed264987bc69] 17944 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 17:23:40.415 DEBUG [380406d4-3fbd-4de2-ad43-ed264987bc69] 17944 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:23:40.417 DEBUG [380406d4-3fbd-4de2-ad43-ed264987bc69] 17944 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 17:23:40.418  INFO [380406d4-3fbd-4de2-ad43-ed264987bc69] 17944 --- [io-8080-exec-10] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 17:23:40.418  INFO [380406d4-3fbd-4de2-ad43-ed264987bc69] 17944 --- [io-8080-exec-10] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 17:23:40.475 DEBUG [09edd7d8-29f5-47d9-b81b-2e8768a79da5] 17944 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 17:23:40.576 DEBUG [09edd7d8-29f5-47d9-b81b-2e8768a79da5] 17944 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:23:40.577 DEBUG [09edd7d8-29f5-47d9-b81b-2e8768a79da5] 17944 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 17:23:40.578  INFO [09edd7d8-29f5-47d9-b81b-2e8768a79da5] 17944 --- [nio-8080-exec-3] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 17:23:40.578  INFO [09edd7d8-29f5-47d9-b81b-2e8768a79da5] 17944 --- [nio-8080-exec-3] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 17:23:40.620 DEBUG [83cd7a2f-9bd5-47d2-8d83-72b16fcc8424] 17944 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 17:23:40.727 DEBUG [83cd7a2f-9bd5-47d2-8d83-72b16fcc8424] 17944 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:23:40.729 DEBUG [83cd7a2f-9bd5-47d2-8d83-72b16fcc8424] 17944 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 17:23:40.730  INFO [83cd7a2f-9bd5-47d2-8d83-72b16fcc8424] 17944 --- [nio-8080-exec-4] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 17:23:40.730  INFO [83cd7a2f-9bd5-47d2-8d83-72b16fcc8424] 17944 --- [nio-8080-exec-4] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 17:23:44.532 DEBUG [1d5e9720-df28-40ea-81c7-a580185ef5f7] 17944 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/cart/add
2025-06-29 17:23:44.623 DEBUG [1d5e9720-df28-40ea-81c7-a580185ef5f7] 17944 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:23:44.625 DEBUG [1d5e9720-df28-40ea-81c7-a580185ef5f7] 17944 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/cart/add
2025-06-29 17:23:44.711  INFO [1d5e9720-df28-40ea-81c7-a580185ef5f7] 17944 --- [nio-8080-exec-6] o.e.x.controllers.CartController         : User ****@****.*** request to add flight ID 16 to persistent cart
2025-06-29 17:23:44.719  INFO [1d5e9720-df28-40ea-81c7-a580185ef5f7] 17944 --- [nio-8080-exec-6] o.e.xlr8travel.services.CartServiceImpl  : Added new flight ID 16 to cart for user ****@****.***
2025-06-29 17:23:44.737  INFO [1d5e9720-df28-40ea-81c7-a580185ef5f7] 17944 --- [nio-8080-exec-6] o.e.x.controllers.CartController         : Flight ID 16 added/incremented in persistent cart for user ****@****.***.
2025-06-29 17:23:44.749 DEBUG [523f6211-0e5d-43fc-8f23-19bb3527aa42] 17944 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:23:44.865 DEBUG [523f6211-0e5d-43fc-8f23-19bb3527aa42] 17944 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:23:44.867 DEBUG [523f6211-0e5d-43fc-8f23-19bb3527aa42] 17944 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:23:44.868  INFO [523f6211-0e5d-43fc-8f23-19bb3527aa42] 17944 --- [nio-8080-exec-2] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:23:44.985  INFO [523f6211-0e5d-43fc-8f23-19bb3527aa42] 17944 --- [nio-8080-exec-2] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 17:23:45.260 DEBUG [c8d52105-9d3d-4b7c-88d1-d1a38800a380] 17944 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:23:45.353 DEBUG [c8d52105-9d3d-4b7c-88d1-d1a38800a380] 17944 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:23:45.354 DEBUG [c8d52105-9d3d-4b7c-88d1-d1a38800a380] 17944 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:23:45.355  INFO [c8d52105-9d3d-4b7c-88d1-d1a38800a380] 17944 --- [nio-8080-exec-5] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:23:45.446  INFO [c8d52105-9d3d-4b7c-88d1-d1a38800a380] 17944 --- [nio-8080-exec-5] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 17:23:45.453 DEBUG [93279b6e-4cc7-458d-a5c2-041f560b7c80] 17944 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:23:45.540 DEBUG [93279b6e-4cc7-458d-a5c2-041f560b7c80] 17944 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:23:45.541 DEBUG [93279b6e-4cc7-458d-a5c2-041f560b7c80] 17944 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:23:45.542  INFO [93279b6e-4cc7-458d-a5c2-041f560b7c80] 17944 --- [nio-8080-exec-7] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:23:45.629  INFO [93279b6e-4cc7-458d-a5c2-041f560b7c80] 17944 --- [nio-8080-exec-7] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 17:23:48.005 DEBUG [5a659211-cf5b-4030-b8b9-1053144ce1f2] 17944 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:23:48.102 DEBUG [5a659211-cf5b-4030-b8b9-1053144ce1f2] 17944 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:23:48.103 DEBUG [5a659211-cf5b-4030-b8b9-1053144ce1f2] 17944 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:23:48.104  INFO [5a659211-cf5b-4030-b8b9-1053144ce1f2] 17944 --- [nio-8080-exec-8] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:23:48.196  INFO [5a659211-cf5b-4030-b8b9-1053144ce1f2] 17944 --- [nio-8080-exec-8] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 17:23:48.202 DEBUG [4e7d2aed-e65b-42a0-9579-df63b99da06c] 17944 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:23:48.306 DEBUG [4e7d2aed-e65b-42a0-9579-df63b99da06c] 17944 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:23:48.308 DEBUG [4e7d2aed-e65b-42a0-9579-df63b99da06c] 17944 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:23:48.308  INFO [4e7d2aed-e65b-42a0-9579-df63b99da06c] 17944 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:23:48.412  INFO [4e7d2aed-e65b-42a0-9579-df63b99da06c] 17944 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 17:23:56.411 DEBUG [004b25c0-1752-4a55-828c-5e8ef6549048] 17944 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing POST /api/checkout/create-payment-intent
2025-06-29 17:23:56.412 DEBUG [004b25c0-1752-4a55-828c-5e8ef6549048] 17944 --- [nio-8080-exec-9] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 17:23:56.413 DEBUG [004b25c0-1752-4a55-828c-5e8ef6549048] 17944 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured POST /api/checkout/create-payment-intent
2025-06-29 17:23:56.414  INFO [004b25c0-1752-4a55-828c-5e8ef6549048] 17944 --- [nio-8080-exec-9] o.e.x.controllers.PaymentController      : Creating payment intent for amount: 23995 ron
2025-06-29 17:23:56.941  INFO [004b25c0-1752-4a55-828c-5e8ef6549048] 17944 --- [nio-8080-exec-9] o.e.x.controllers.PaymentController      : Payment intent created successfully: pi_3RfM9AGf8s1WZJnq1BcG334e
2025-06-29 17:23:58.173 DEBUG [d87184d3-7868-4386-835c-93ef0586515f] 17944 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing POST /api/checkout/confirm
2025-06-29 17:23:58.257 DEBUG [d87184d3-7868-4386-835c-93ef0586515f] 17944 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:23:58.258 DEBUG [d87184d3-7868-4386-835c-93ef0586515f] 17944 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured POST /api/checkout/confirm
2025-06-29 17:23:58.259  INFO [d87184d3-7868-4386-835c-93ef0586515f] 17944 --- [io-8080-exec-10] o.e.x.controllers.CheckoutController     : Received purchase confirmation request.
2025-06-29 17:23:58.337  INFO [d87184d3-7868-4386-835c-93ef0586515f] 17944 --- [io-8080-exec-10] o.e.x.controllers.CheckoutController     : Processing purchase for user: ****@****.***
2025-06-29 17:23:58.343  INFO [d87184d3-7868-4386-835c-93ef0586515f] 17944 --- [io-8080-exec-10] o.e.x.controllers.CheckoutController     : User ****@****.*** persistent cart has 1 items.
2025-06-29 17:23:58.343  WARN [d87184d3-7868-4386-835c-93ef0586515f] 17944 --- [io-8080-exec-10] o.e.x.controllers.CheckoutController     : !!! SIMULATING successful payment processing for user ****@****.*** !!!
2025-06-29 17:23:58.345  INFO [d87184d3-7868-4386-835c-93ef0586515f] 17944 --- [io-8080-exec-10] o.e.x.services.OrderServiceImpl          : Creating order from persistent cart for user: ****@****.***
2025-06-29 17:23:58.347  INFO [d87184d3-7868-4386-835c-93ef0586515f] 17944 --- [io-8080-exec-10] o.e.x.services.OrderServiceImpl          : Order 3 created for user ****@****.***, status: PENDING_PAYMENT. Total: 37.99
2025-06-29 17:23:58.348  INFO [d87184d3-7868-4386-835c-93ef0586515f] 17944 --- [io-8080-exec-10] o.e.x.services.OrderServiceImpl          : Created ticket with deferred seat selection (fallback) for flight XT-OTP-CDG-2 for user ****@****.***
2025-06-29 17:23:59.460  INFO [d87184d3-7868-4386-835c-93ef0586515f] 17944 --- [io-8080-exec-10] o.e.x.services.EmailServiceImpl          : Purchase confirmation email sent to ****@****.***
2025-06-29 17:23:59.460  INFO [d87184d3-7868-4386-835c-93ef0586515f] 17944 --- [io-8080-exec-10] o.e.x.services.OrderServiceImpl          : Purchase confirmation email sent to user: ****@****.***
2025-06-29 17:23:59.474  INFO [d87184d3-7868-4386-835c-93ef0586515f] 17944 --- [io-8080-exec-10] o.e.x.controllers.CheckoutController     : Order successfully created for user ****@****.***. Confirmation: 3
2025-06-29 17:23:59.479  INFO [d87184d3-7868-4386-835c-93ef0586515f] 17944 --- [io-8080-exec-10] o.e.xlr8travel.services.CartServiceImpl  : Clearing 1 items from cart for user ****@****.***
2025-06-29 17:23:59.493  INFO [d87184d3-7868-4386-835c-93ef0586515f] 17944 --- [io-8080-exec-10] o.e.x.controllers.CheckoutController     : Persistent cart cleared for user ****@****.***.
2025-06-29 17:23:59.502 DEBUG [64abdc0c-592c-4b92-b9e9-72f860025a0a] 17944 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing DELETE /api/cart/remove/16
2025-06-29 17:23:59.585 DEBUG [64abdc0c-592c-4b92-b9e9-72f860025a0a] 17944 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:23:59.587 DEBUG [64abdc0c-592c-4b92-b9e9-72f860025a0a] 17944 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured DELETE /api/cart/remove/16
2025-06-29 17:23:59.665  INFO [64abdc0c-592c-4b92-b9e9-72f860025a0a] 17944 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : User ****@****.*** request to remove flight ID 16 from persistent cart
2025-06-29 17:23:59.673  WARN [64abdc0c-592c-4b92-b9e9-72f860025a0a] 17944 --- [nio-8080-exec-3] o.e.xlr8travel.services.CartServiceImpl  : Attempted to remove flight ID 16 not found in cart for user ****@****.***
2025-06-29 17:23:59.674  WARN [64abdc0c-592c-4b92-b9e9-72f860025a0a] 17944 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : Attempted to remove flight ID 16 not found in persistent cart for user ****@****.***
2025-06-29 17:23:59.684 DEBUG [7ce95fe1-281e-435d-aeff-86cec30beaef] 17944 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:23:59.785 DEBUG [7ce95fe1-281e-435d-aeff-86cec30beaef] 17944 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:23:59.788 DEBUG [7ce95fe1-281e-435d-aeff-86cec30beaef] 17944 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:23:59.789  INFO [7ce95fe1-281e-435d-aeff-86cec30beaef] 17944 --- [nio-8080-exec-4] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:23:59.909  INFO [7ce95fe1-281e-435d-aeff-86cec30beaef] 17944 --- [nio-8080-exec-4] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 17:24:00.965 DEBUG [60f27dce-37de-4a22-acce-8460515f18d2] 17944 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 17:24:01.082 DEBUG [60f27dce-37de-4a22-acce-8460515f18d2] 17944 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:24:01.084 DEBUG [60f27dce-37de-4a22-acce-8460515f18d2] 17944 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 17:24:01.177  INFO [60f27dce-37de-4a22-acce-8460515f18d2] 17944 --- [nio-8080-exec-6] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 17:24:01.177  INFO [60f27dce-37de-4a22-acce-8460515f18d2] 17944 --- [nio-8080-exec-6] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 17:24:01.183  INFO [60f27dce-37de-4a22-acce-8460515f18d2] 17944 --- [nio-8080-exec-6] o.e.x.services.TicketServiceImpl         : Found 2 tickets eligible for check-in for user 4
2025-06-29 17:24:01.190 DEBUG [c9772b74-6a0c-4d7f-96df-f0bc707fea43] 17944 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 17:24:01.288 DEBUG [c9772b74-6a0c-4d7f-96df-f0bc707fea43] 17944 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:24:01.290 DEBUG [c9772b74-6a0c-4d7f-96df-f0bc707fea43] 17944 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 17:24:01.374  INFO [c9772b74-6a0c-4d7f-96df-f0bc707fea43] 17944 --- [nio-8080-exec-2] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 17:24:01.374  INFO [c9772b74-6a0c-4d7f-96df-f0bc707fea43] 17944 --- [nio-8080-exec-2] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 17:24:01.379  INFO [c9772b74-6a0c-4d7f-96df-f0bc707fea43] 17944 --- [nio-8080-exec-2] o.e.x.services.TicketServiceImpl         : Found 2 tickets eligible for check-in for user 4
2025-06-29 17:24:07.345 DEBUG [632aa1d8-c410-42b0-ad22-5c5a126e536b] 17944 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 17:24:07.439 DEBUG [632aa1d8-c410-42b0-ad22-5c5a126e536b] 17944 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:24:07.441 DEBUG [632aa1d8-c410-42b0-ad22-5c5a126e536b] 17944 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 17:24:07.442  INFO [632aa1d8-c410-42b0-ad22-5c5a126e536b] 17944 --- [nio-8080-exec-5] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 17:24:07.442  INFO [632aa1d8-c410-42b0-ad22-5c5a126e536b] 17944 --- [nio-8080-exec-5] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 17:24:07.484 DEBUG [3d3a3054-7dc6-4b7e-be28-886efb2d2d35] 17944 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 17:24:07.571 DEBUG [3d3a3054-7dc6-4b7e-be28-886efb2d2d35] 17944 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:24:07.573 DEBUG [3d3a3054-7dc6-4b7e-be28-886efb2d2d35] 17944 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 17:24:07.574  INFO [3d3a3054-7dc6-4b7e-be28-886efb2d2d35] 17944 --- [nio-8080-exec-7] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 17:24:07.574  INFO [3d3a3054-7dc6-4b7e-be28-886efb2d2d35] 17944 --- [nio-8080-exec-7] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 17:24:12.393 DEBUG [66a63bc9-5285-45b9-89c0-b2b6e52e1380] 17944 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /api/check-in/4/without-seat
2025-06-29 17:24:12.481 DEBUG [66a63bc9-5285-45b9-89c0-b2b6e52e1380] 17944 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:24:12.483 DEBUG [66a63bc9-5285-45b9-89c0-b2b6e52e1380] 17944 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured POST /api/check-in/4/without-seat
2025-06-29 17:24:12.570  INFO [66a63bc9-5285-45b9-89c0-b2b6e52e1380] 17944 --- [nio-8080-exec-8] o.e.x.controllers.CheckinController      : Checking in ticket 4 without seat for user: ****@****.***
2025-06-29 17:24:12.574  INFO [66a63bc9-5285-45b9-89c0-b2b6e52e1380] 17944 --- [nio-8080-exec-8] o.e.x.services.TicketServiceImpl         : Checking in ticket 4 without seat selection
2025-06-29 17:24:12.574  INFO [66a63bc9-5285-45b9-89c0-b2b6e52e1380] 17944 --- [nio-8080-exec-8] o.e.x.services.TicketServiceImpl         : Successfully checked in ticket 4 without seat selection
2025-06-29 17:24:15.680 DEBUG [90957985-23e2-4740-af87-53fc0afa4bf7] 17944 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/check-in/boarding-passes
2025-06-29 17:24:15.680 DEBUG [a19579b3-c5a7-4bed-a11a-1adec16d9b12] 17944 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/check-in/boarding-passes
2025-06-29 17:24:15.690 DEBUG [8953127a-0e5d-499f-8134-7f09f7d3694c] 17944 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/boarding-passes
2025-06-29 17:24:15.788 DEBUG [8953127a-0e5d-499f-8134-7f09f7d3694c] 17944 --- [io-8080-exec-10] o.s.s.core.session.SessionRegistryImpl   : Registering session 93A5E9FA51381288A9E6CA959F19D37F, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}])
2025-06-29 17:24:15.788 DEBUG [8953127a-0e5d-499f-8134-7f09f7d3694c] 17944 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@39b5f61]
2025-06-29 17:24:15.790 DEBUG [8953127a-0e5d-499f-8134-7f09f7d3694c] 17944 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/boarding-passes
2025-06-29 17:24:15.875  INFO [8953127a-0e5d-499f-8134-7f09f7d3694c] 17944 --- [io-8080-exec-10] o.e.x.services.TicketServiceImpl         : Finding checked-in tickets for user 4
2025-06-29 17:24:15.879 DEBUG [fa3677c4-a118-458c-99f4-3c9176480a65] 17944 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/boarding-passes
2025-06-29 17:24:15.971 DEBUG [fa3677c4-a118-458c-99f4-3c9176480a65] 17944 --- [nio-8080-exec-3] o.s.s.core.session.SessionRegistryImpl   : Registering session B627EE70A59CC56390C790A9E0CB9435, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}])
2025-06-29 17:24:15.972 DEBUG [fa3677c4-a118-458c-99f4-3c9176480a65] 17944 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@5b2672ca]
2025-06-29 17:24:15.973 DEBUG [fa3677c4-a118-458c-99f4-3c9176480a65] 17944 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/boarding-passes
2025-06-29 17:24:16.064  INFO [fa3677c4-a118-458c-99f4-3c9176480a65] 17944 --- [nio-8080-exec-3] o.e.x.services.TicketServiceImpl         : Finding checked-in tickets for user 4
2025-06-29 17:24:30.740 DEBUG [5e937f45-e349-4c01-839c-77ad06cc7f74] 17944 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/logout
2025-06-29 17:24:30.740 DEBUG [5e937f45-e349-4c01-839c-77ad06cc7f74] 17944 --- [nio-8080-exec-6] o.s.s.w.a.logout.LogoutFilter            : Logging out [null]
2025-06-29 17:24:33.590 DEBUG [9717f3e9-2675-4591-a70a-9562b883f00a] 17944 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /oauth2/authorization/google
2025-06-29 17:24:33.591 DEBUG [9717f3e9-2675-4591-a70a-9562b883f00a] 17944 --- [nio-8080-exec-2] o.s.s.web.DefaultRedirectStrategy        : Redirecting to https://accounts.google.com/o/oauth2/v2/auth?response_type=code&client_id=280181287068-i92p696f0ja6qv5lecrhi4dmn2hsrvie.apps.googleusercontent.com&scope=email%20profile&state=ArgsngOYTl975IPaShZp2dMKOxggOgeq9LJkLqS2Fp8%3D&redirect_uri=http://localhost:8080/login/oauth2/code/google
2025-06-29 17:24:35.673 DEBUG [e512a839-0415-4c39-a20f-aff4f15a678b] 17944 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /login/oauth2/code/google?state=ArgsngOYTl975IPaShZp2dMKOxggOgeq9LJkLqS2Fp8%3D&code=4%2F0AVMBsJjqGA5bq4vdV6dLZ_W6_8e9XMHsi5C-x6TL_zApNlzWKq8X4-DGh5RslLKFPSJ4BA&scope=email+profile+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile+openid&authuser=1&prompt=none
2025-06-29 17:24:36.031  INFO [e512a839-0415-4c39-a20f-aff4f15a678b] 17944 --- [nio-8080-exec-5] o.e.x.security.CustomOAuth2UserService   : User already exists: ****@****.***
2025-06-29 17:24:36.088 DEBUG [e512a839-0415-4c39-a20f-aff4f15a678b] 17944 --- [nio-8080-exec-5] .s.ChangeSessionIdAuthenticationStrategy : Changed session id from 11C415A9E127A492387E2C00704E2DDC
2025-06-29 17:24:36.089 DEBUG [e512a839-0415-4c39-a20f-aff4f15a678b] 17944 --- [nio-8080-exec-5] o.s.s.core.session.SessionRegistryImpl   : Registering session 9A5ADB73AC0BD39B32F6EABF96AE3232, for principal Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}]
2025-06-29 17:24:36.090 DEBUG [e512a839-0415-4c39-a20f-aff4f15a678b] 17944 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@766acb88]
2025-06-29 17:24:36.090 DEBUG [e512a839-0415-4c39-a20f-aff4f15a678b] 17944 --- [nio-8080-exec-5] .s.o.c.w.OAuth2LoginAuthenticationFilter : Set SecurityContextHolder to OAuth2AuthenticationToken [Principal=Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]]
2025-06-29 17:24:36.091  INFO [e512a839-0415-4c39-a20f-aff4f15a678b] 17944 --- [nio-8080-exec-5] e.x.s.OAuth2AuthenticationSuccessHandler : Extracting username from authentication: 104658082982173093135
2025-06-29 17:24:36.091  INFO [e512a839-0415-4c39-a20f-aff4f15a678b] 17944 --- [nio-8080-exec-5] e.x.s.OAuth2AuthenticationSuccessHandler : Principal class: org.springframework.security.oauth2.core.user.DefaultOAuth2User
2025-06-29 17:24:36.092  INFO [e512a839-0415-4c39-a20f-aff4f15a678b] 17944 --- [nio-8080-exec-5] e.x.s.OAuth2AuthenticationSuccessHandler : Principal is DefaultOAuth2User
2025-06-29 17:24:36.092  INFO [e512a839-0415-4c39-a20f-aff4f15a678b] 17944 --- [nio-8080-exec-5] e.x.s.OAuth2AuthenticationSuccessHandler : OAuth2User attributes: {sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}
2025-06-29 17:24:36.092  INFO [e512a839-0415-4c39-a20f-aff4f15a678b] 17944 --- [nio-8080-exec-5] e.x.s.OAuth2AuthenticationSuccessHandler : Using email as username: ****@****.***
2025-06-29 17:24:36.092  INFO [e512a839-0415-4c39-a20f-aff4f15a678b] 17944 --- [nio-8080-exec-5] e.x.s.OAuth2AuthenticationSuccessHandler : Extracting username from authentication: 104658082982173093135
2025-06-29 17:24:36.093  INFO [e512a839-0415-4c39-a20f-aff4f15a678b] 17944 --- [nio-8080-exec-5] e.x.s.OAuth2AuthenticationSuccessHandler : Principal class: org.springframework.security.oauth2.core.user.DefaultOAuth2User
2025-06-29 17:24:36.093  INFO [e512a839-0415-4c39-a20f-aff4f15a678b] 17944 --- [nio-8080-exec-5] e.x.s.OAuth2AuthenticationSuccessHandler : Principal is DefaultOAuth2User
2025-06-29 17:24:36.093  INFO [e512a839-0415-4c39-a20f-aff4f15a678b] 17944 --- [nio-8080-exec-5] e.x.s.OAuth2AuthenticationSuccessHandler : OAuth2User attributes: {sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}
2025-06-29 17:24:36.093  INFO [e512a839-0415-4c39-a20f-aff4f15a678b] 17944 --- [nio-8080-exec-5] e.x.s.OAuth2AuthenticationSuccessHandler : Using email as username: ****@****.***
2025-06-29 17:24:36.093  INFO [e512a839-0415-4c39-a20f-aff4f15a678b] 17944 --- [nio-8080-exec-5] e.x.s.OAuth2AuthenticationSuccessHandler : OAuth tokens stored in session for user: ****@****.***
2025-06-29 17:24:36.093 DEBUG [e512a839-0415-4c39-a20f-aff4f15a678b] 17944 --- [nio-8080-exec-5] o.s.s.web.DefaultRedirectStrategy        : Redirecting to http://localhost:3000?oauth=success
2025-06-29 17:24:36.927 DEBUG [91aff234-843a-4fd9-92ea-f98afed66503] 17944 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/oauth/complete
2025-06-29 17:24:36.931 DEBUG [db87fffc-1270-4381-95ea-1e5a0cda824d] 17944 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/oauth/complete
2025-06-29 17:24:36.931 DEBUG [5e9f8cc1-c27b-4255-9fbe-327242c480d7] 17944 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing POST /api/oauth/complete
2025-06-29 17:24:36.932 DEBUG [5e9f8cc1-c27b-4255-9fbe-327242c480d7] 17944 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured POST /api/oauth/complete
2025-06-29 17:24:36.934  INFO [5e9f8cc1-c27b-4255-9fbe-327242c480d7] 17944 --- [nio-8080-exec-9] o.e.x.controllers.OAuthController        : OAuth tokens retrieved and cleared from session for user: ****@****.***
2025-06-29 17:24:36.934 DEBUG [b1454961-85a0-4bff-86b9-e88d56c4ab2c] 17944 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/oauth/complete
2025-06-29 17:24:36.935 DEBUG [5e9f8cc1-c27b-4255-9fbe-327242c480d7] 17944 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]]]
2025-06-29 17:24:36.936 DEBUG [b1454961-85a0-4bff-86b9-e88d56c4ab2c] 17944 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/oauth/complete
2025-06-29 17:24:36.938 DEBUG [b1454961-85a0-4bff-86b9-e88d56c4ab2c] 17944 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]]]
2025-06-29 17:24:37.161 DEBUG [d428f343-b58a-467c-975b-14dd037ccb35] 17944 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/nearby?origin=OTP
2025-06-29 17:24:37.164 DEBUG [d428f343-b58a-467c-975b-14dd037ccb35] 17944 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/nearby?origin=OTP
2025-06-29 17:24:37.165  INFO [d428f343-b58a-467c-975b-14dd037ccb35] 17944 --- [io-8080-exec-10] o.e.x.controllers.FlightController       : Received request for nearby flights from origin: OTP, departureDate: null
2025-06-29 17:24:37.165  INFO [d428f343-b58a-467c-975b-14dd037ccb35] 17944 --- [io-8080-exec-10] o.e.x.controllers.FlightController       : Using search date: 2025-06-29
2025-06-29 17:24:37.165  INFO [d428f343-b58a-467c-975b-14dd037ccb35] 17944 --- [io-8080-exec-10] o.e.x.controllers.FlightController       : Cache key: OTP-2025-06-29
2025-06-29 17:24:37.165  INFO [d428f343-b58a-467c-975b-14dd037ccb35] 17944 --- [io-8080-exec-10] o.e.x.controllers.FlightController       : Returning cached nearby flights for origin: OTP, found 6 flights
2025-06-29 17:24:37.166 DEBUG [d428f343-b58a-467c-975b-14dd037ccb35] 17944 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]]]
2025-06-29 17:24:37.682 DEBUG [abcec2e8-bd3d-46c6-8dba-e85cd09c6545] 17944 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 17:24:37.772 DEBUG [abcec2e8-bd3d-46c6-8dba-e85cd09c6545] 17944 --- [nio-8080-exec-3] o.s.s.core.session.SessionRegistryImpl   : Registering session 15A90D3CE8D2613C057175CF43AB4620, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=2025-06-29T17:24:36.031595, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}])
2025-06-29 17:24:37.773 DEBUG [abcec2e8-bd3d-46c6-8dba-e85cd09c6545] 17944 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=2025-06-29T17:24:36.031595, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@2bac72f5]
2025-06-29 17:24:37.775 DEBUG [abcec2e8-bd3d-46c6-8dba-e85cd09c6545] 17944 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me
2025-06-29 17:24:37.775  INFO [abcec2e8-bd3d-46c6-8dba-e85cd09c6545] 17944 --- [nio-8080-exec-3] o.e.x.controllers.UserController         : Request received for current user details: ****@****.***
2025-06-29 17:24:37.860  INFO [abcec2e8-bd3d-46c6-8dba-e85cd09c6545] 17944 --- [nio-8080-exec-3] o.e.x.controllers.UserController         : Returning details for user: ****@****.***
2025-06-29 17:24:37.888 DEBUG [c9c1dded-578d-4ec8-b4a3-0374679927ea] 17944 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 17:24:37.888 DEBUG [0def31f1-10be-4a14-9e44-232c544015ba] 17944 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:24:37.980 DEBUG [c9c1dded-578d-4ec8-b4a3-0374679927ea] 17944 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=11C415A9E127A492387E2C00704E2DDC], Granted Authorities=[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]]]
2025-06-29 17:24:37.981 DEBUG [0def31f1-10be-4a14-9e44-232c544015ba] 17944 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=2025-06-29T17:24:36.031595, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9A5ADB73AC0BD39B32F6EABF96AE3232], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:24:37.982 DEBUG [c9c1dded-578d-4ec8-b4a3-0374679927ea] 17944 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 17:24:37.982 DEBUG [0def31f1-10be-4a14-9e44-232c544015ba] 17944 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:24:37.983  INFO [0def31f1-10be-4a14-9e44-232c544015ba] 17944 --- [nio-8080-exec-6] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:24:38.069  WARN [c9c1dded-578d-4ec8-b4a3-0374679927ea] 17944 --- [nio-8080-exec-4] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 17:24:38.070  WARN [c9c1dded-578d-4ec8-b4a3-0374679927ea] 17944 --- [nio-8080-exec-4] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 17:24:38.075  INFO [0def31f1-10be-4a14-9e44-232c544015ba] 17944 --- [nio-8080-exec-6] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 17:24:40.626 DEBUG [3d02c9b7-beea-4443-beb9-e1fde2c6db39] 17944 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-29 17:24:40.628 DEBUG [3d02c9b7-beea-4443-beb9-e1fde2c6db39] 17944 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-29 17:24:40.629  INFO [3d02c9b7-beea-4443-beb9-e1fde2c6db39] 17944 --- [nio-8080-exec-2] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris
2025-06-29 17:24:40.630  INFO [3d02c9b7-beea-4443-beb9-e1fde2c6db39] 17944 --- [nio-8080-exec-2] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-29 17:24:40.630  INFO [3d02c9b7-beea-4443-beb9-e1fde2c6db39] 17944 --- [nio-8080-exec-2] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-29 17:24:40.630 DEBUG [3d02c9b7-beea-4443-beb9-e1fde2c6db39] 17944 --- [nio-8080-exec-2] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-29).    For example, if today is 2025-06-29, a good departure date would be between 2025-07-06 and 2025-07-13, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris";
2025-06-29 17:24:40.632  INFO [3d02c9b7-beea-4443-beb9-e1fde2c6db39] 17944 --- [nio-8080-exec-2] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-29 17:24:40.632  INFO [3d02c9b7-beea-4443-beb9-e1fde2c6db39] 17944 --- [nio-8080-exec-2] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-29 17:24:40.632  INFO [3d02c9b7-beea-4443-beb9-e1fde2c6db39] 17944 --- [nio-8080-exec-2] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-29 17:24:40.632  INFO [3d02c9b7-beea-4443-beb9-e1fde2c6db39] 17944 --- [nio-8080-exec-2] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 17:24:40.632  INFO [3d02c9b7-beea-4443-beb9-e1fde2c6db39] 17944 --- [nio-8080-exec-2] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-29 17:24:40.634  INFO [3d02c9b7-beea-4443-beb9-e1fde2c6db39] 17944 --- [nio-8080-exec-2] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-29 17:24:40.634  INFO [3d02c9b7-beea-4443-beb9-e1fde2c6db39] 17944 --- [nio-8080-exec-2] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-29 17:24:40.634  INFO [3d02c9b7-beea-4443-beb9-e1fde2c6db39] 17944 --- [nio-8080-exec-2] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-29 17:24:40.635  INFO [3d02c9b7-beea-4443-beb9-e1fde2c6db39] 17944 --- [nio-8080-exec-2] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-29 17:24:42.561  INFO [3d02c9b7-beea-4443-beb9-e1fde2c6db39] 17944 --- [nio-8080-exec-2] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-29 17:24:42.562  INFO [3d02c9b7-beea-4443-beb9-e1fde2c6db39] 17944 --- [nio-8080-exec-2] o.e.x.services.GeminiServiceImpl         : Response length: 195 characters
2025-06-29 17:24:42.562 DEBUG [3d02c9b7-beea-4443-beb9-e1fde2c6db39] 17944 --- [nio-8080-exec-2] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-06",
  "returnDate": "2025-07-08",
  "tripType": "roundTrip",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-29 17:24:42.563 DEBUG [3d02c9b7-beea-4443-beb9-e1fde2c6db39] 17944 --- [nio-8080-exec-2] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-29 17:24:42.563 DEBUG [3d02c9b7-beea-4443-beb9-e1fde2c6db39] 17944 --- [nio-8080-exec-2] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-29 17:24:42.563 DEBUG [3d02c9b7-beea-4443-beb9-e1fde2c6db39] 17944 --- [nio-8080-exec-2] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-29 17:24:42.563 DEBUG [3d02c9b7-beea-4443-beb9-e1fde2c6db39] 17944 --- [nio-8080-exec-2] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 17:24:42.564  INFO [3d02c9b7-beea-4443-beb9-e1fde2c6db39] 17944 --- [nio-8080-exec-2] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 17:24:42.564  INFO [3d02c9b7-beea-4443-beb9-e1fde2c6db39] 17944 --- [nio-8080-exec-2] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-06, returnDate=2025-07-08, tripType=roundTrip, adults=1, children=0, infants=0
2025-06-29 17:24:42.564  INFO [3d02c9b7-beea-4443-beb9-e1fde2c6db39] 17944 --- [nio-8080-exec-2] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-29 17:24:42.565 DEBUG [3d02c9b7-beea-4443-beb9-e1fde2c6db39] 17944 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=2025-06-29T17:24:36.031595, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9A5ADB73AC0BD39B32F6EABF96AE3232], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:24:44.378 DEBUG [4bf11d6f-ae85-4422-b825-b5323e4b2125] 17944 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-29 17:24:44.379 DEBUG [4bf11d6f-ae85-4422-b825-b5323e4b2125] 17944 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-29 17:24:44.380  INFO [4bf11d6f-ae85-4422-b825-b5323e4b2125] 17944 --- [nio-8080-exec-5] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris one way
2025-06-29 17:24:44.380  INFO [4bf11d6f-ae85-4422-b825-b5323e4b2125] 17944 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-29 17:24:44.381  INFO [4bf11d6f-ae85-4422-b825-b5323e4b2125] 17944 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-29 17:24:44.381 DEBUG [4bf11d6f-ae85-4422-b825-b5323e4b2125] 17944 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-29).    For example, if today is 2025-06-29, a good departure date would be between 2025-07-06 and 2025-07-13, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris one way";
2025-06-29 17:24:44.382  INFO [4bf11d6f-ae85-4422-b825-b5323e4b2125] 17944 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-29 17:24:44.382  INFO [4bf11d6f-ae85-4422-b825-b5323e4b2125] 17944 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-29 17:24:44.383  INFO [4bf11d6f-ae85-4422-b825-b5323e4b2125] 17944 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-29 17:24:44.383  INFO [4bf11d6f-ae85-4422-b825-b5323e4b2125] 17944 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 17:24:44.383  INFO [4bf11d6f-ae85-4422-b825-b5323e4b2125] 17944 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-29 17:24:44.384  INFO [4bf11d6f-ae85-4422-b825-b5323e4b2125] 17944 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-29 17:24:44.385  INFO [4bf11d6f-ae85-4422-b825-b5323e4b2125] 17944 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-29 17:24:44.385  INFO [4bf11d6f-ae85-4422-b825-b5323e4b2125] 17944 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-29 17:24:44.385  INFO [4bf11d6f-ae85-4422-b825-b5323e4b2125] 17944 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-29 17:24:45.986  INFO [4bf11d6f-ae85-4422-b825-b5323e4b2125] 17944 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-29 17:24:45.986  INFO [4bf11d6f-ae85-4422-b825-b5323e4b2125] 17944 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Response length: 184 characters
2025-06-29 17:24:45.986 DEBUG [4bf11d6f-ae85-4422-b825-b5323e4b2125] 17944 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-06",
  "returnDate": null,
  "tripType": "oneWay",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-29 17:24:45.987 DEBUG [4bf11d6f-ae85-4422-b825-b5323e4b2125] 17944 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-29 17:24:45.988 DEBUG [4bf11d6f-ae85-4422-b825-b5323e4b2125] 17944 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-29 17:24:45.988 DEBUG [4bf11d6f-ae85-4422-b825-b5323e4b2125] 17944 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-29 17:24:45.988 DEBUG [4bf11d6f-ae85-4422-b825-b5323e4b2125] 17944 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 17:24:45.988  INFO [4bf11d6f-ae85-4422-b825-b5323e4b2125] 17944 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 17:24:45.988  INFO [4bf11d6f-ae85-4422-b825-b5323e4b2125] 17944 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-06, returnDate=null, tripType=oneWay, adults=1, children=0, infants=0
2025-06-29 17:24:45.988  INFO [4bf11d6f-ae85-4422-b825-b5323e4b2125] 17944 --- [nio-8080-exec-5] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-29 17:24:45.989 DEBUG [4bf11d6f-ae85-4422-b825-b5323e4b2125] 17944 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=2025-06-29T17:24:36.031595, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9A5ADB73AC0BD39B32F6EABF96AE3232], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:24:49.492 DEBUG [b6e2583a-741f-4a60-940e-e5a328c26e85] 17944 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 17:24:49.581 DEBUG [b6e2583a-741f-4a60-940e-e5a328c26e85] 17944 --- [nio-8080-exec-7] o.s.s.core.session.SessionRegistryImpl   : Registering session 28DA68EB3DB5250ADD8F978358AED730, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=2025-06-29T17:24:36.031595, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}])
2025-06-29 17:24:49.581 DEBUG [b6e2583a-741f-4a60-940e-e5a328c26e85] 17944 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=2025-06-29T17:24:36.031595, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@73d2493b]
2025-06-29 17:24:49.582 DEBUG [b6e2583a-741f-4a60-940e-e5a328c26e85] 17944 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me
2025-06-29 17:24:49.583  INFO [b6e2583a-741f-4a60-940e-e5a328c26e85] 17944 --- [nio-8080-exec-7] o.e.x.controllers.UserController         : Request received for current user details: ****@****.***
2025-06-29 17:24:49.667  INFO [b6e2583a-741f-4a60-940e-e5a328c26e85] 17944 --- [nio-8080-exec-7] o.e.x.controllers.UserController         : Returning details for user: ****@****.***
2025-06-29 17:24:49.718 DEBUG [4b759055-78f4-47dd-a4f7-a456b1dd96b0] 17944 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 17:24:49.727 DEBUG [169590a4-cfb0-4007-8106-5d84184c85de] 17944 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 17:24:49.728 DEBUG [86e41d9f-c892-4298-8557-725794aab7c9] 17944 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:24:49.729 DEBUG [169590a4-cfb0-4007-8106-5d84184c85de] 17944 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 17:24:49.731  INFO [169590a4-cfb0-4007-8106-5d84184c85de] 17944 --- [nio-8080-exec-9] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 17:24:49.731  INFO [169590a4-cfb0-4007-8106-5d84184c85de] 17944 --- [nio-8080-exec-9] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 17:24:49.790  INFO [169590a4-cfb0-4007-8106-5d84184c85de] 17944 --- [nio-8080-exec-9] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 17:24:49.791 DEBUG [169590a4-cfb0-4007-8106-5d84184c85de] 17944 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=2025-06-29T17:24:36.031595, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9A5ADB73AC0BD39B32F6EABF96AE3232], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:24:49.797 DEBUG [4dec39bf-9d1b-4c3d-9e3a-358bf6806fab] 17944 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 17:24:49.798 DEBUG [4dec39bf-9d1b-4c3d-9e3a-358bf6806fab] 17944 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 17:24:49.799  INFO [4dec39bf-9d1b-4c3d-9e3a-358bf6806fab] 17944 --- [io-8080-exec-10] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 17:24:49.799  INFO [4dec39bf-9d1b-4c3d-9e3a-358bf6806fab] 17944 --- [io-8080-exec-10] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 17:24:49.827 DEBUG [0dd4c5a7-1c07-4fc0-8b54-f3315e4f8299] 17944 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 17:24:49.829 DEBUG [0dd4c5a7-1c07-4fc0-8b54-f3315e4f8299] 17944 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 17:24:49.830  INFO [0dd4c5a7-1c07-4fc0-8b54-f3315e4f8299] 17944 --- [nio-8080-exec-3] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 17:24:49.840 DEBUG [4b759055-78f4-47dd-a4f7-a456b1dd96b0] 17944 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=2025-06-29T17:24:36.031595, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9A5ADB73AC0BD39B32F6EABF96AE3232], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:24:49.842 DEBUG [4b759055-78f4-47dd-a4f7-a456b1dd96b0] 17944 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 17:24:49.842 DEBUG [86e41d9f-c892-4298-8557-725794aab7c9] 17944 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=2025-06-29T17:24:36.031595, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9A5ADB73AC0BD39B32F6EABF96AE3232], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:24:49.843 DEBUG [86e41d9f-c892-4298-8557-725794aab7c9] 17944 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:24:49.844  INFO [86e41d9f-c892-4298-8557-725794aab7c9] 17944 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:24:49.850  INFO [4dec39bf-9d1b-4c3d-9e3a-358bf6806fab] 17944 --- [io-8080-exec-10] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 17:24:49.851 DEBUG [4dec39bf-9d1b-4c3d-9e3a-358bf6806fab] 17944 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=2025-06-29T17:24:36.031595, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9A5ADB73AC0BD39B32F6EABF96AE3232], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:24:49.932  WARN [4b759055-78f4-47dd-a4f7-a456b1dd96b0] 17944 --- [nio-8080-exec-8] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 17:24:49.933  WARN [4b759055-78f4-47dd-a4f7-a456b1dd96b0] 17944 --- [nio-8080-exec-8] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 17:24:49.938 DEBUG [1867dd1b-be4c-4adf-907a-95efb963731f] 17944 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 17:24:49.939  INFO [86e41d9f-c892-4298-8557-725794aab7c9] 17944 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 17:24:49.994  INFO [0dd4c5a7-1c07-4fc0-8b54-f3315e4f8299] 17944 --- [nio-8080-exec-3] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 17:24:49.995 DEBUG [0dd4c5a7-1c07-4fc0-8b54-f3315e4f8299] 17944 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=2025-06-29T17:24:36.031595, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9A5ADB73AC0BD39B32F6EABF96AE3232], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:24:50.000 DEBUG [b46e6b58-a1fa-480f-b973-b90a9540fbaa] 17944 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 17:24:50.001 DEBUG [b46e6b58-a1fa-480f-b973-b90a9540fbaa] 17944 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 17:24:50.002 DEBUG [5a3803f3-e9cf-4738-9e55-029362196946] 17944 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 17:24:50.002  INFO [b46e6b58-a1fa-480f-b973-b90a9540fbaa] 17944 --- [nio-8080-exec-6] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 17:24:50.003 DEBUG [5a3803f3-e9cf-4738-9e55-029362196946] 17944 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 17:24:50.004  INFO [5a3803f3-e9cf-4738-9e55-029362196946] 17944 --- [nio-8080-exec-2] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 17:24:50.029 DEBUG [1867dd1b-be4c-4adf-907a-95efb963731f] 17944 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=2025-06-29T17:24:36.031595, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9A5ADB73AC0BD39B32F6EABF96AE3232], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:24:50.030 DEBUG [1867dd1b-be4c-4adf-907a-95efb963731f] 17944 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 17:24:50.052  INFO [b46e6b58-a1fa-480f-b973-b90a9540fbaa] 17944 --- [nio-8080-exec-6] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 17:24:50.053 DEBUG [b46e6b58-a1fa-480f-b973-b90a9540fbaa] 17944 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=2025-06-29T17:24:36.031595, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9A5ADB73AC0BD39B32F6EABF96AE3232], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:24:50.121  WARN [1867dd1b-be4c-4adf-907a-95efb963731f] 17944 --- [nio-8080-exec-4] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 17:24:50.122  WARN [1867dd1b-be4c-4adf-907a-95efb963731f] 17944 --- [nio-8080-exec-4] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 17:24:50.203  INFO [5a3803f3-e9cf-4738-9e55-029362196946] 17944 --- [nio-8080-exec-2] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 17:24:50.204 DEBUG [5a3803f3-e9cf-4738-9e55-029362196946] 17944 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=2025-06-29T17:24:36.031595, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9A5ADB73AC0BD39B32F6EABF96AE3232], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:24:50.212 DEBUG [5d3c2652-adaa-4e93-a7bf-8ea1b65f2f00] 17944 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 17:24:50.213 DEBUG [5d3c2652-adaa-4e93-a7bf-8ea1b65f2f00] 17944 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 17:24:50.213  INFO [5d3c2652-adaa-4e93-a7bf-8ea1b65f2f00] 17944 --- [nio-8080-exec-5] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 17:24:50.262  INFO [5d3c2652-adaa-4e93-a7bf-8ea1b65f2f00] 17944 --- [nio-8080-exec-5] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 17:24:50.263 DEBUG [5d3c2652-adaa-4e93-a7bf-8ea1b65f2f00] 17944 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=2025-06-29T17:24:36.031595, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9A5ADB73AC0BD39B32F6EABF96AE3232], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:24:55.033 DEBUG [a419d4bc-4bb3-4d2f-b05f-16549ed389d1] 17944 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 17:24:55.125 DEBUG [a419d4bc-4bb3-4d2f-b05f-16549ed389d1] 17944 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=2025-06-29T17:24:36.031595, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9A5ADB73AC0BD39B32F6EABF96AE3232], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:24:55.126 DEBUG [a419d4bc-4bb3-4d2f-b05f-16549ed389d1] 17944 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 17:24:55.127  INFO [a419d4bc-4bb3-4d2f-b05f-16549ed389d1] 17944 --- [nio-8080-exec-7] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 17:24:55.127  INFO [a419d4bc-4bb3-4d2f-b05f-16549ed389d1] 17944 --- [nio-8080-exec-7] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 17:24:55.167 DEBUG [254e77a0-db0a-44bc-979f-c0f0374ac21b] 17944 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 17:24:55.255 DEBUG [254e77a0-db0a-44bc-979f-c0f0374ac21b] 17944 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=2025-06-29T17:24:36.031595, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9A5ADB73AC0BD39B32F6EABF96AE3232], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:24:55.258 DEBUG [254e77a0-db0a-44bc-979f-c0f0374ac21b] 17944 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 17:24:55.258  INFO [254e77a0-db0a-44bc-979f-c0f0374ac21b] 17944 --- [nio-8080-exec-9] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 17:24:55.258  INFO [254e77a0-db0a-44bc-979f-c0f0374ac21b] 17944 --- [nio-8080-exec-9] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 17:24:55.305 DEBUG [871b8c84-ebbe-4c23-bc3c-6303365c5a8f] 17944 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 17:24:55.405 DEBUG [871b8c84-ebbe-4c23-bc3c-6303365c5a8f] 17944 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=2025-06-29T17:24:36.031595, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9A5ADB73AC0BD39B32F6EABF96AE3232], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:24:55.408 DEBUG [871b8c84-ebbe-4c23-bc3c-6303365c5a8f] 17944 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 17:24:55.409  INFO [871b8c84-ebbe-4c23-bc3c-6303365c5a8f] 17944 --- [io-8080-exec-10] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 17:24:55.409  INFO [871b8c84-ebbe-4c23-bc3c-6303365c5a8f] 17944 --- [io-8080-exec-10] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 17:24:57.845 DEBUG [d01d47cb-1ac6-4274-b44c-f1151bce887d] 17944 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /api/cart/add
2025-06-29 17:24:57.938 DEBUG [d01d47cb-1ac6-4274-b44c-f1151bce887d] 17944 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=2025-06-29T17:24:36.031595, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9A5ADB73AC0BD39B32F6EABF96AE3232], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:24:57.940 DEBUG [d01d47cb-1ac6-4274-b44c-f1151bce887d] 17944 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured POST /api/cart/add
2025-06-29 17:24:58.024  INFO [d01d47cb-1ac6-4274-b44c-f1151bce887d] 17944 --- [nio-8080-exec-8] o.e.x.controllers.CartController         : User ****@****.*** request to add flight ID 16 to persistent cart
2025-06-29 17:24:58.032  INFO [d01d47cb-1ac6-4274-b44c-f1151bce887d] 17944 --- [nio-8080-exec-8] o.e.xlr8travel.services.CartServiceImpl  : Added new flight ID 16 to cart for user ****@****.***
2025-06-29 17:24:58.051  INFO [d01d47cb-1ac6-4274-b44c-f1151bce887d] 17944 --- [nio-8080-exec-8] o.e.x.controllers.CartController         : Flight ID 16 added/incremented in persistent cart for user ****@****.***.
2025-06-29 17:24:58.061 DEBUG [575ed2e5-eaaf-4114-b1e9-1fba8879861e] 17944 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:24:58.170 DEBUG [575ed2e5-eaaf-4114-b1e9-1fba8879861e] 17944 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=2025-06-29T17:24:36.031595, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9A5ADB73AC0BD39B32F6EABF96AE3232], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:24:58.171 DEBUG [575ed2e5-eaaf-4114-b1e9-1fba8879861e] 17944 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:24:58.172  INFO [575ed2e5-eaaf-4114-b1e9-1fba8879861e] 17944 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:24:58.331  INFO [575ed2e5-eaaf-4114-b1e9-1fba8879861e] 17944 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 17:24:59.371 DEBUG [dadf4aba-8ec2-46d3-86ca-86f821931d40] 17944 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:24:59.464 DEBUG [dadf4aba-8ec2-46d3-86ca-86f821931d40] 17944 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=2025-06-29T17:24:36.031595, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9A5ADB73AC0BD39B32F6EABF96AE3232], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:24:59.465 DEBUG [dadf4aba-8ec2-46d3-86ca-86f821931d40] 17944 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:24:59.465  INFO [dadf4aba-8ec2-46d3-86ca-86f821931d40] 17944 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:24:59.556  INFO [dadf4aba-8ec2-46d3-86ca-86f821931d40] 17944 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 17:24:59.563 DEBUG [20ae5153-2bda-46a8-818b-9472d39cd399] 17944 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:24:59.649 DEBUG [20ae5153-2bda-46a8-818b-9472d39cd399] 17944 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=2025-06-29T17:24:36.031595, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9A5ADB73AC0BD39B32F6EABF96AE3232], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:24:59.651 DEBUG [20ae5153-2bda-46a8-818b-9472d39cd399] 17944 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:24:59.651  INFO [20ae5153-2bda-46a8-818b-9472d39cd399] 17944 --- [nio-8080-exec-6] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:24:59.744  INFO [20ae5153-2bda-46a8-818b-9472d39cd399] 17944 --- [nio-8080-exec-6] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 17:25:05.191 DEBUG [63936096-747f-466e-89a5-313225abd976] 17944 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:25:05.317 DEBUG [63936096-747f-466e-89a5-313225abd976] 17944 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=2025-06-29T17:24:36.031595, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9A5ADB73AC0BD39B32F6EABF96AE3232], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:25:05.318 DEBUG [63936096-747f-466e-89a5-313225abd976] 17944 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:25:05.319  INFO [63936096-747f-466e-89a5-313225abd976] 17944 --- [nio-8080-exec-4] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:25:05.428  INFO [63936096-747f-466e-89a5-313225abd976] 17944 --- [nio-8080-exec-4] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 17:25:05.435 DEBUG [c5e151ac-c1b1-4ee8-a801-48dcda93f11b] 17944 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:25:05.600 DEBUG [c5e151ac-c1b1-4ee8-a801-48dcda93f11b] 17944 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=2025-06-29T17:24:36.031595, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9A5ADB73AC0BD39B32F6EABF96AE3232], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:25:05.602 DEBUG [c5e151ac-c1b1-4ee8-a801-48dcda93f11b] 17944 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:25:05.603  INFO [c5e151ac-c1b1-4ee8-a801-48dcda93f11b] 17944 --- [nio-8080-exec-2] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:25:05.784  INFO [c5e151ac-c1b1-4ee8-a801-48dcda93f11b] 17944 --- [nio-8080-exec-2] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 17:25:11.482 DEBUG [0065c1fd-1c98-41c8-884c-93461954ccdb] 17944 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /api/checkout/create-payment-intent
2025-06-29 17:25:11.483 DEBUG [0065c1fd-1c98-41c8-884c-93461954ccdb] 17944 --- [nio-8080-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 17:25:11.484 DEBUG [0065c1fd-1c98-41c8-884c-93461954ccdb] 17944 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured POST /api/checkout/create-payment-intent
2025-06-29 17:25:11.486  INFO [0065c1fd-1c98-41c8-884c-93461954ccdb] 17944 --- [nio-8080-exec-5] o.e.x.controllers.PaymentController      : Creating payment intent for amount: 23995 ron
2025-06-29 17:25:11.981  INFO [0065c1fd-1c98-41c8-884c-93461954ccdb] 17944 --- [nio-8080-exec-5] o.e.x.controllers.PaymentController      : Payment intent created successfully: pi_3RfMANGf8s1WZJnq1F8lY8J0
2025-06-29 17:25:13.029 DEBUG [b370c734-aebe-41f9-9ad3-2825fa01a5a6] 17944 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/checkout/confirm
2025-06-29 17:25:13.120 DEBUG [b370c734-aebe-41f9-9ad3-2825fa01a5a6] 17944 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=2025-06-29T17:24:36.031595, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9A5ADB73AC0BD39B32F6EABF96AE3232], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:25:13.122 DEBUG [b370c734-aebe-41f9-9ad3-2825fa01a5a6] 17944 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/checkout/confirm
2025-06-29 17:25:13.123  INFO [b370c734-aebe-41f9-9ad3-2825fa01a5a6] 17944 --- [nio-8080-exec-7] o.e.x.controllers.CheckoutController     : Received purchase confirmation request.
2025-06-29 17:25:13.212  INFO [b370c734-aebe-41f9-9ad3-2825fa01a5a6] 17944 --- [nio-8080-exec-7] o.e.x.controllers.CheckoutController     : Processing purchase for user: ****@****.***
2025-06-29 17:25:13.219  INFO [b370c734-aebe-41f9-9ad3-2825fa01a5a6] 17944 --- [nio-8080-exec-7] o.e.x.controllers.CheckoutController     : User ****@****.*** persistent cart has 1 items.
2025-06-29 17:25:13.219  WARN [b370c734-aebe-41f9-9ad3-2825fa01a5a6] 17944 --- [nio-8080-exec-7] o.e.x.controllers.CheckoutController     : !!! SIMULATING successful payment processing for user ****@****.*** !!!
2025-06-29 17:25:13.220  INFO [b370c734-aebe-41f9-9ad3-2825fa01a5a6] 17944 --- [nio-8080-exec-7] o.e.x.services.OrderServiceImpl          : Creating order from persistent cart for user: ****@****.***
2025-06-29 17:25:13.223  INFO [b370c734-aebe-41f9-9ad3-2825fa01a5a6] 17944 --- [nio-8080-exec-7] o.e.x.services.OrderServiceImpl          : Order 4 created for user ****@****.***, status: PENDING_PAYMENT. Total: 37.99
2025-06-29 17:25:13.223  INFO [b370c734-aebe-41f9-9ad3-2825fa01a5a6] 17944 --- [nio-8080-exec-7] o.e.x.services.OrderServiceImpl          : Created ticket with deferred seat selection (fallback) for flight XT-OTP-CDG-2 for user ****@****.***
2025-06-29 17:25:14.258  INFO [b370c734-aebe-41f9-9ad3-2825fa01a5a6] 17944 --- [nio-8080-exec-7] o.e.x.services.EmailServiceImpl          : Purchase confirmation email sent to ****@****.***
2025-06-29 17:25:14.258  INFO [b370c734-aebe-41f9-9ad3-2825fa01a5a6] 17944 --- [nio-8080-exec-7] o.e.x.services.OrderServiceImpl          : Purchase confirmation email sent to user: ****@****.***
2025-06-29 17:25:14.272  INFO [b370c734-aebe-41f9-9ad3-2825fa01a5a6] 17944 --- [nio-8080-exec-7] o.e.x.controllers.CheckoutController     : Order successfully created for user ****@****.***. Confirmation: 4
2025-06-29 17:25:14.277  INFO [b370c734-aebe-41f9-9ad3-2825fa01a5a6] 17944 --- [nio-8080-exec-7] o.e.xlr8travel.services.CartServiceImpl  : Clearing 1 items from cart for user ****@****.***
2025-06-29 17:25:14.293  INFO [b370c734-aebe-41f9-9ad3-2825fa01a5a6] 17944 --- [nio-8080-exec-7] o.e.x.controllers.CheckoutController     : Persistent cart cleared for user ****@****.***.
2025-06-29 17:25:14.304 DEBUG [b50b3335-a20b-4e25-8f32-6f00344eef19] 17944 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing DELETE /api/cart/remove/16
2025-06-29 17:25:14.395 DEBUG [b50b3335-a20b-4e25-8f32-6f00344eef19] 17944 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=2025-06-29T17:24:36.031595, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9A5ADB73AC0BD39B32F6EABF96AE3232], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:25:14.397 DEBUG [b50b3335-a20b-4e25-8f32-6f00344eef19] 17944 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured DELETE /api/cart/remove/16
2025-06-29 17:25:14.475  INFO [b50b3335-a20b-4e25-8f32-6f00344eef19] 17944 --- [nio-8080-exec-9] o.e.x.controllers.CartController         : User ****@****.*** request to remove flight ID 16 from persistent cart
2025-06-29 17:25:14.482  WARN [b50b3335-a20b-4e25-8f32-6f00344eef19] 17944 --- [nio-8080-exec-9] o.e.xlr8travel.services.CartServiceImpl  : Attempted to remove flight ID 16 not found in cart for user ****@****.***
2025-06-29 17:25:14.484  WARN [b50b3335-a20b-4e25-8f32-6f00344eef19] 17944 --- [nio-8080-exec-9] o.e.x.controllers.CartController         : Attempted to remove flight ID 16 not found in persistent cart for user ****@****.***
2025-06-29 17:25:14.493 DEBUG [bc32dce8-f204-4228-9e2d-6a2562f95251] 17944 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:25:14.577 DEBUG [bc32dce8-f204-4228-9e2d-6a2562f95251] 17944 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=2025-06-29T17:24:36.031595, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9A5ADB73AC0BD39B32F6EABF96AE3232], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:25:14.579 DEBUG [bc32dce8-f204-4228-9e2d-6a2562f95251] 17944 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:25:14.579  INFO [bc32dce8-f204-4228-9e2d-6a2562f95251] 17944 --- [io-8080-exec-10] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:25:14.665  INFO [bc32dce8-f204-4228-9e2d-6a2562f95251] 17944 --- [io-8080-exec-10] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 17:25:16.344 DEBUG [b39c8c0e-3bfc-454a-b9ed-61c79f610bf8] 17944 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 17:25:16.433 DEBUG [b39c8c0e-3bfc-454a-b9ed-61c79f610bf8] 17944 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=2025-06-29T17:24:36.031595, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9A5ADB73AC0BD39B32F6EABF96AE3232], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:25:16.435 DEBUG [b39c8c0e-3bfc-454a-b9ed-61c79f610bf8] 17944 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 17:25:16.519  INFO [b39c8c0e-3bfc-454a-b9ed-61c79f610bf8] 17944 --- [nio-8080-exec-8] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 17:25:16.519  INFO [b39c8c0e-3bfc-454a-b9ed-61c79f610bf8] 17944 --- [nio-8080-exec-8] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 17:25:16.524  INFO [b39c8c0e-3bfc-454a-b9ed-61c79f610bf8] 17944 --- [nio-8080-exec-8] o.e.x.services.TicketServiceImpl         : Found 2 tickets eligible for check-in for user 4
2025-06-29 17:25:16.531 DEBUG [57155213-f81c-4dcb-a75b-05160de44eaa] 17944 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 17:25:16.618 DEBUG [57155213-f81c-4dcb-a75b-05160de44eaa] 17944 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:14:29.939276, lastLogin=2025-06-29T17:24:36.031595, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9A5ADB73AC0BD39B32F6EABF96AE3232], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:25:16.619 DEBUG [57155213-f81c-4dcb-a75b-05160de44eaa] 17944 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 17:25:16.700  INFO [57155213-f81c-4dcb-a75b-05160de44eaa] 17944 --- [nio-8080-exec-3] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 17:25:16.701  INFO [57155213-f81c-4dcb-a75b-05160de44eaa] 17944 --- [nio-8080-exec-3] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 17:25:16.705  INFO [57155213-f81c-4dcb-a75b-05160de44eaa] 17944 --- [nio-8080-exec-3] o.e.x.services.TicketServiceImpl         : Found 2 tickets eligible for check-in for user 4
2025-06-29 17:43:20.389  INFO [NONE] 17944 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-29 17:43:20.392  INFO [NONE] 17944 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-06-29 17:43:20.396  INFO [NONE] 17944 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-06-29 17:43:41.865  INFO [NONE] 12092 --- [  restartedMain] o.e.xlr8travel.Xlr8travelApplication     : Starting Xlr8travelApplication using Java 21.0.5 with PID 12092 (C:\Users\razvi\Desktop\Licenta\backend\target\classes started by razvi in C:\Users\razvi\Desktop\Licenta\backend)
2025-06-29 17:43:41.872 DEBUG [NONE] 12092 --- [  restartedMain] o.e.xlr8travel.Xlr8travelApplication     : Running with Spring Boot v3.2.4, Spring v6.1.5
2025-06-29 17:43:41.873  INFO [NONE] 12092 --- [  restartedMain] o.e.xlr8travel.Xlr8travelApplication     : The following 1 profile is active: "local"
2025-06-29 17:43:41.915  INFO [NONE] 12092 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-29 17:43:41.916  INFO [NONE] 12092 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-29 17:43:43.263  INFO [NONE] 12092 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-29 17:43:43.362  INFO [NONE] 12092 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 91 ms. Found 9 JPA repository interfaces.
2025-06-29 17:43:44.262  INFO [NONE] 12092 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-29 17:43:44.274  INFO [NONE] 12092 --- [  restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-29 17:43:44.275  INFO [NONE] 12092 --- [  restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.19]
2025-06-29 17:43:44.402  INFO [NONE] 12092 --- [  restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-06-29 17:43:44.404  INFO [NONE] 12092 --- [  restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2485 ms
2025-06-29 17:43:44.685  INFO [NONE] 12092 --- [  restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-29 17:43:44.752  INFO [NONE] 12092 --- [  restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.4.Final
2025-06-29 17:43:44.789  INFO [NONE] 12092 --- [  restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-06-29 17:43:45.028  INFO [NONE] 12092 --- [  restartedMain] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-29 17:43:45.056  INFO [NONE] 12092 --- [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-06-29 17:43:45.225  INFO [NONE] 12092 --- [  restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@312d45e1
2025-06-29 17:43:45.227  INFO [NONE] 12092 --- [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-06-29 17:43:45.272  WARN [NONE] 12092 --- [  restartedMain] org.hibernate.orm.deprecation            : HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-29 17:43:46.609  INFO [NONE] 12092 --- [  restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-29 17:43:55.673  INFO [NONE] 12092 --- [  restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-29 17:43:56.048  INFO [NONE] 12092 --- [  restartedMain] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-29 17:43:56.565  WARN [NONE] 12092 --- [  restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Cannot deserialize session attribute [SPRING_SECURITY_CONTEXT] for session [447857A9679A6731D24D54BE8E2CF613]
2025-06-29 17:43:56.567 ERROR [NONE] 12092 --- [  restartedMain] o.a.catalina.session.StandardManager     : Exception loading sessions from persistent storage

java.io.StreamCorruptedException: invalid type code: 00
	at java.base/java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1793)
	at java.base/java.io.ObjectInputStream$FieldValues.<init>(ObjectInputStream.java:2618)
	at java.base/java.io.ObjectInputStream.defaultReadObject(ObjectInputStream.java:678)
	at java.base/java.lang.Throwable.readObject(Throwable.java:936)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1102)
	at java.base/java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2444)
	at java.base/java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2284)
	at java.base/java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1762)
	at java.base/java.io.ObjectInputStream.readObject(ObjectInputStream.java:540)
	at java.base/java.io.ObjectInputStream.readObject(ObjectInputStream.java:498)
	at org.apache.catalina.session.StandardSession.doReadObject(StandardSession.java:1348)
	at org.apache.catalina.session.StandardSession.readObjectData(StandardSession.java:985)
	at org.apache.catalina.session.StandardManager.doLoad(StandardManager.java:210)
	at org.apache.catalina.session.StandardManager.load(StandardManager.java:156)
	at org.apache.catalina.session.StandardManager.startInternal(StandardManager.java:346)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4893)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1332)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1322)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:866)
	at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:845)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1332)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1322)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:866)
	at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:240)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.StandardService.startInternal(StandardService.java:433)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:921)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.startup.Tomcat.start(Tomcat.java:437)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:126)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.<init>(TomcatWebServer.java:105)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getTomcatWebServer(TomcatServletWebServerFactory.java:499)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getWebServer(TomcatServletWebServerFactory.java:218)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.createWebServer(ServletWebServerApplicationContext.java:188)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:162)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:618)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at org.example.xlr8travel.Xlr8travelApplication.main(Xlr8travelApplication.java:10)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)

2025-06-29 17:43:56.576 DEBUG [NONE] 12092 --- [  restartedMain] o.e.x.security.JwtAuthenticationFilter   : Filter 'jwtAuthenticationFilter' configured for use
2025-06-29 17:43:56.578 DEBUG [NONE] 12092 --- [  restartedMain] o.e.x.security.RateLimitingFilter        : Filter 'rateLimitingFilter' configured for use
2025-06-29 17:43:56.819  INFO [NONE] 12092 --- [  restartedMain] o.e.x.config.LocalPropertiesConfig       : Loaded application-local.properties
2025-06-29 17:43:57.213  INFO [NONE] 12092 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : === GEMINI SERVICE CONFIGURATION ===
2025-06-29 17:43:57.213  INFO [NONE] 12092 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : Project ID: xlr8travel
2025-06-29 17:43:57.213  INFO [NONE] 12092 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : Location ID: us-east1
2025-06-29 17:43:57.214  INFO [NONE] 12092 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : Model: gemini-2.0-flash-001
2025-06-29 17:43:57.214  INFO [NONE] 12092 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : Credentials Path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 17:43:57.214  INFO [NONE] 12092 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : API Key: ***SET***
2025-06-29 17:43:57.215  INFO [NONE] 12092 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : ✅ Credentials file exists: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 17:43:57.215  INFO [NONE] 12092 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : ✅ Credentials file size: 2376 bytes
2025-06-29 17:43:57.215  INFO [NONE] 12092 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : ✅ GOOGLE_APPLICATION_CREDENTIALS env var is set: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 17:43:57.216  INFO [NONE] 12092 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : =====================================
2025-06-29 17:43:57.239  INFO [NONE] 12092 --- [  restartedMain] o.e.x.config.SensitiveDataConfig         : Validating sensitive data configuration for profile: local
2025-06-29 17:43:57.240  WARN [NONE] 12092 --- [  restartedMain] o.e.x.config.SensitiveDataConfig         : Environment variable SPRING_DATASOURCE_URL is not set
2025-06-29 17:43:57.240  WARN [NONE] 12092 --- [  restartedMain] o.e.x.config.SensitiveDataConfig         : Environment variable SPRING_DATASOURCE_USERNAME is not set
2025-06-29 17:43:57.240  WARN [NONE] 12092 --- [  restartedMain] o.e.x.config.SensitiveDataConfig         : Environment variable SPRING_DATASOURCE_PASSWORD is not set
2025-06-29 17:43:57.240  WARN [NONE] 12092 --- [  restartedMain] o.e.x.config.SensitiveDataConfig         : Environment variable STRIPE_SECRET_KEY is not set
2025-06-29 17:43:57.286  WARN [NONE] 12092 --- [  restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-29 17:43:57.397  INFO [NONE] 12092 --- [  restartedMain] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2025-06-29 17:43:57.683  INFO [NONE] 12092 --- [  restartedMain] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 4 endpoint(s) beneath base path '/actuator'
2025-06-29 17:43:57.777  INFO [NONE] 12092 --- [  restartedMain] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6f257d6, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@121607bd, org.springframework.security.web.context.SecurityContextHolderFilter@134cb30d, org.springframework.security.web.header.HeaderWriterFilter@4809c526, org.springframework.web.filter.CorsFilter@3a953ae7, org.springframework.security.web.authentication.logout.LogoutFilter@7dab628e, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@53041d86, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@37646f1a, org.example.xlr8travel.security.JwtAuthenticationFilter@279ca80b, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@14b00815, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@599b8649, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@512d15bb, org.springframework.security.web.session.ConcurrentSessionFilter@4f4d3e69, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@23bcfdfb, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2bfd960, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@a42c6c4, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@45f5b4af, org.springframework.security.web.session.SessionManagementFilter@79913962, org.springframework.security.web.access.ExceptionTranslationFilter@202dde8d, org.springframework.security.web.access.intercept.AuthorizationFilter@2427dded]
2025-06-29 17:43:58.296  INFO [NONE] 12092 --- [  restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2025-06-29 17:43:58.378  INFO [NONE] 12092 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path ''
2025-06-29 17:43:58.389  INFO [NONE] 12092 --- [  restartedMain] o.e.xlr8travel.Xlr8travelApplication     : Started Xlr8travelApplication in 17.123 seconds (process running for 17.821)
2025-06-29 17:43:59.668  INFO [NONE] 12092 --- [  restartedMain] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-06-29 17:43:59.691 ERROR [NONE] 12092 --- [  restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.dao.InvalidDataAccessApiUsageException: org.hibernate.TransientPropertyValueException: object references an unsaved transient instance - save the transient instance before flushing : org.example.xlr8travel.models.Ticket.seat -> org.example.xlr8travel.models.Seat
	at org.springframework.orm.jpa.EntityManagerFactoryUtils.convertJpaAccessExceptionIfPossible(EntityManagerFactoryUtils.java:368)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:246)
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:565)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:794)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:757)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:676)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:426)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:164)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy4/jdk.proxy4.$Proxy169.save(Unknown Source)
	at org.example.xlr8travel.services.TicketServiceImpl.save(TicketServiceImpl.java:27)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:713)
	at org.example.xlr8travel.services.TicketServiceImpl$$SpringCGLIB$$0.save(<generated>)
	at org.example.xlr8travel.bootloader.DataLoader.run(DataLoader.java:538)
	at org.springframework.boot.SpringApplication.lambda$callRunner$5(SpringApplication.java:790)
	at org.springframework.util.function.ThrowingConsumer$1.acceptWithException(ThrowingConsumer.java:83)
	at org.springframework.util.function.ThrowingConsumer.accept(ThrowingConsumer.java:60)
	at org.springframework.util.function.ThrowingConsumer$1.accept(ThrowingConsumer.java:88)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:798)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:789)
	at org.springframework.boot.SpringApplication.lambda$callRunners$3(SpringApplication.java:774)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:774)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:341)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at org.example.xlr8travel.Xlr8travelApplication.main(Xlr8travelApplication.java:10)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: java.lang.IllegalStateException: org.hibernate.TransientPropertyValueException: object references an unsaved transient instance - save the transient instance before flushing : org.example.xlr8travel.models.Ticket.seat -> org.example.xlr8travel.models.Seat
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:157)
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:167)
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:173)
	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1407)
	at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:484)
	at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2319)
	at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1976)
	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:169)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:267)
	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:561)
	... 44 common frames omitted
Caused by: org.hibernate.TransientPropertyValueException: object references an unsaved transient instance - save the transient instance before flushing : org.example.xlr8travel.models.Ticket.seat -> org.example.xlr8travel.models.Seat
	at org.hibernate.engine.spi.CascadingActions$8.noCascade(CascadingActions.java:372)
	at org.hibernate.engine.internal.Cascade.cascade(Cascade.java:173)
	at org.hibernate.event.internal.AbstractSaveEventListener.cascadeBeforeSave(AbstractSaveEventListener.java:482)
	at org.hibernate.event.internal.DefaultPersistEventListener.justCascade(DefaultPersistEventListener.java:160)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsPersistent(DefaultPersistEventListener.java:154)
	at org.hibernate.event.internal.DefaultPersistEventListener.persist(DefaultPersistEventListener.java:90)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:77)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:138)
	at org.hibernate.internal.SessionImpl.persistOnFlush(SessionImpl.java:818)
	at org.hibernate.engine.spi.CascadingActions$8.cascade(CascadingActions.java:333)
	at org.hibernate.engine.spi.CascadingActions$8.cascade(CascadingActions.java:323)
	at org.hibernate.engine.internal.Cascade.cascadeToOne(Cascade.java:517)
	at org.hibernate.engine.internal.Cascade.cascadeAssociation(Cascade.java:439)
	at org.hibernate.engine.internal.Cascade.cascadeProperty(Cascade.java:224)
	at org.hibernate.engine.internal.Cascade.cascadeCollectionElements(Cascade.java:551)
	at org.hibernate.engine.internal.Cascade.cascadeCollection(Cascade.java:481)
	at org.hibernate.engine.internal.Cascade.cascadeAssociation(Cascade.java:442)
	at org.hibernate.engine.internal.Cascade.cascadeProperty(Cascade.java:224)
	at org.hibernate.engine.internal.Cascade.cascade(Cascade.java:157)
	at org.hibernate.event.internal.AbstractSaveEventListener.cascadeAfterSave(AbstractSaveEventListener.java:513)
	at org.hibernate.event.internal.DefaultPersistEventListener.justCascade(DefaultPersistEventListener.java:161)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsPersistent(DefaultPersistEventListener.java:154)
	at org.hibernate.event.internal.DefaultPersistEventListener.persist(DefaultPersistEventListener.java:90)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:77)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:138)
	at org.hibernate.internal.SessionImpl.persistOnFlush(SessionImpl.java:818)
	at org.hibernate.engine.spi.CascadingActions$8.cascade(CascadingActions.java:333)
	at org.hibernate.engine.spi.CascadingActions$8.cascade(CascadingActions.java:323)
	at org.hibernate.engine.internal.Cascade.cascadeToOne(Cascade.java:517)
	at org.hibernate.engine.internal.Cascade.cascadeAssociation(Cascade.java:439)
	at org.hibernate.engine.internal.Cascade.cascadeProperty(Cascade.java:224)
	at org.hibernate.engine.internal.Cascade.cascadeCollectionElements(Cascade.java:551)
	at org.hibernate.engine.internal.Cascade.cascadeCollection(Cascade.java:481)
	at org.hibernate.engine.internal.Cascade.cascadeAssociation(Cascade.java:442)
	at org.hibernate.engine.internal.Cascade.cascadeProperty(Cascade.java:224)
	at org.hibernate.engine.internal.Cascade.cascade(Cascade.java:157)
	at org.hibernate.event.internal.AbstractFlushingEventListener.cascadeOnFlush(AbstractFlushingEventListener.java:161)
	at org.hibernate.event.internal.AbstractFlushingEventListener.prepareEntityFlushes(AbstractFlushingEventListener.java:144)
	at org.hibernate.event.internal.AbstractFlushingEventListener.flushEverythingToExecutions(AbstractFlushingEventListener.java:79)
	at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:40)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)
	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1403)
	... 52 common frames omitted

2025-06-29 17:43:59.723  INFO [NONE] 12092 --- [  restartedMain] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-29 17:43:59.726  INFO [NONE] 12092 --- [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-06-29 17:43:59.735  INFO [NONE] 12092 --- [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-06-29 17:44:17.963  INFO [NONE] 3232 --- [  restartedMain] o.e.xlr8travel.Xlr8travelApplication     : Starting Xlr8travelApplication using Java 21.0.5 with PID 3232 (C:\Users\razvi\Desktop\Licenta\backend\target\classes started by razvi in C:\Users\razvi\Desktop\Licenta\backend)
2025-06-29 17:44:17.969 DEBUG [NONE] 3232 --- [  restartedMain] o.e.xlr8travel.Xlr8travelApplication     : Running with Spring Boot v3.2.4, Spring v6.1.5
2025-06-29 17:44:17.970  INFO [NONE] 3232 --- [  restartedMain] o.e.xlr8travel.Xlr8travelApplication     : The following 1 profile is active: "local"
2025-06-29 17:44:18.006  INFO [NONE] 3232 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-29 17:44:18.006  INFO [NONE] 3232 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-29 17:44:21.196  INFO [NONE] 3232 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-29 17:44:21.337  INFO [NONE] 3232 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 121 ms. Found 9 JPA repository interfaces.
2025-06-29 17:44:22.335  INFO [NONE] 3232 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-29 17:44:22.349  INFO [NONE] 3232 --- [  restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-29 17:44:22.349  INFO [NONE] 3232 --- [  restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.19]
2025-06-29 17:44:22.477  INFO [NONE] 3232 --- [  restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-06-29 17:44:22.479  INFO [NONE] 3232 --- [  restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4471 ms
2025-06-29 17:44:22.844  INFO [NONE] 3232 --- [  restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-29 17:44:22.902  INFO [NONE] 3232 --- [  restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.4.Final
2025-06-29 17:44:22.938  INFO [NONE] 3232 --- [  restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-06-29 17:44:23.161  INFO [NONE] 3232 --- [  restartedMain] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-29 17:44:23.185  INFO [NONE] 3232 --- [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-06-29 17:44:23.358  INFO [NONE] 3232 --- [  restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@1908641f
2025-06-29 17:44:23.361  INFO [NONE] 3232 --- [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-06-29 17:44:23.404  WARN [NONE] 3232 --- [  restartedMain] org.hibernate.orm.deprecation            : HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-29 17:44:24.921  INFO [NONE] 3232 --- [  restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-29 17:44:31.657  INFO [NONE] 3232 --- [  restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-29 17:44:31.943  INFO [NONE] 3232 --- [  restartedMain] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-29 17:44:32.337 DEBUG [NONE] 3232 --- [  restartedMain] o.e.x.security.JwtAuthenticationFilter   : Filter 'jwtAuthenticationFilter' configured for use
2025-06-29 17:44:32.339 DEBUG [NONE] 3232 --- [  restartedMain] o.e.x.security.RateLimitingFilter        : Filter 'rateLimitingFilter' configured for use
2025-06-29 17:44:32.534  INFO [NONE] 3232 --- [  restartedMain] o.e.x.config.LocalPropertiesConfig       : Loaded application-local.properties
2025-06-29 17:44:32.835  INFO [NONE] 3232 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : === GEMINI SERVICE CONFIGURATION ===
2025-06-29 17:44:32.836  INFO [NONE] 3232 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : Project ID: xlr8travel
2025-06-29 17:44:32.836  INFO [NONE] 3232 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : Location ID: us-east1
2025-06-29 17:44:32.836  INFO [NONE] 3232 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : Model: gemini-2.0-flash-001
2025-06-29 17:44:32.836  INFO [NONE] 3232 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : Credentials Path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 17:44:32.837  INFO [NONE] 3232 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : API Key: ***SET***
2025-06-29 17:44:32.838  INFO [NONE] 3232 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : ✅ Credentials file exists: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 17:44:32.838  INFO [NONE] 3232 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : ✅ Credentials file size: 2376 bytes
2025-06-29 17:44:32.838  INFO [NONE] 3232 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : ✅ GOOGLE_APPLICATION_CREDENTIALS env var is set: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 17:44:32.839  INFO [NONE] 3232 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : =====================================
2025-06-29 17:44:32.862  INFO [NONE] 3232 --- [  restartedMain] o.e.x.config.SensitiveDataConfig         : Validating sensitive data configuration for profile: local
2025-06-29 17:44:32.863  WARN [NONE] 3232 --- [  restartedMain] o.e.x.config.SensitiveDataConfig         : Environment variable SPRING_DATASOURCE_URL is not set
2025-06-29 17:44:32.863  WARN [NONE] 3232 --- [  restartedMain] o.e.x.config.SensitiveDataConfig         : Environment variable SPRING_DATASOURCE_USERNAME is not set
2025-06-29 17:44:32.863  WARN [NONE] 3232 --- [  restartedMain] o.e.x.config.SensitiveDataConfig         : Environment variable SPRING_DATASOURCE_PASSWORD is not set
2025-06-29 17:44:32.863  WARN [NONE] 3232 --- [  restartedMain] o.e.x.config.SensitiveDataConfig         : Environment variable STRIPE_SECRET_KEY is not set
2025-06-29 17:44:32.912  WARN [NONE] 3232 --- [  restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-29 17:44:33.037  INFO [NONE] 3232 --- [  restartedMain] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2025-06-29 17:44:33.295  INFO [NONE] 3232 --- [  restartedMain] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 4 endpoint(s) beneath base path '/actuator'
2025-06-29 17:44:33.384  INFO [NONE] 3232 --- [  restartedMain] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6f09d805, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@19669d27, org.springframework.security.web.context.SecurityContextHolderFilter@6b6fbf8c, org.springframework.security.web.header.HeaderWriterFilter@4ba402a5, org.springframework.web.filter.CorsFilter@6fd5f2a7, org.springframework.security.web.authentication.logout.LogoutFilter@5ceaea9f, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@7203ffab, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@6c1348, org.example.xlr8travel.security.JwtAuthenticationFilter@622e134b, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@5c955182, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@20161d8a, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@4a6dec08, org.springframework.security.web.session.ConcurrentSessionFilter@34f0e14, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@52eaca6d, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1c378557, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3e63e6ef, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6b05ccb0, org.springframework.security.web.session.SessionManagementFilter@16f42186, org.springframework.security.web.access.ExceptionTranslationFilter@567b8b5d, org.springframework.security.web.access.intercept.AuthorizationFilter@bb69c63]
2025-06-29 17:44:33.842  INFO [NONE] 3232 --- [  restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2025-06-29 17:44:33.907  INFO [NONE] 3232 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path ''
2025-06-29 17:44:33.917  INFO [NONE] 3232 --- [  restartedMain] o.e.xlr8travel.Xlr8travelApplication     : Started Xlr8travelApplication in 16.364 seconds (process running for 16.921)
2025-06-29 17:44:35.111  INFO [NONE] 3232 --- [  restartedMain] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-06-29 17:44:35.132 ERROR [NONE] 3232 --- [  restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.dao.InvalidDataAccessApiUsageException: org.hibernate.TransientPropertyValueException: object references an unsaved transient instance - save the transient instance before flushing : org.example.xlr8travel.models.Ticket.seat -> org.example.xlr8travel.models.Seat
	at org.springframework.orm.jpa.EntityManagerFactoryUtils.convertJpaAccessExceptionIfPossible(EntityManagerFactoryUtils.java:368)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:246)
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:565)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:794)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:757)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:676)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:426)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:164)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy4/jdk.proxy4.$Proxy169.save(Unknown Source)
	at org.example.xlr8travel.services.TicketServiceImpl.save(TicketServiceImpl.java:27)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:713)
	at org.example.xlr8travel.services.TicketServiceImpl$$SpringCGLIB$$0.save(<generated>)
	at org.example.xlr8travel.bootloader.DataLoader.run(DataLoader.java:538)
	at org.springframework.boot.SpringApplication.lambda$callRunner$5(SpringApplication.java:790)
	at org.springframework.util.function.ThrowingConsumer$1.acceptWithException(ThrowingConsumer.java:83)
	at org.springframework.util.function.ThrowingConsumer.accept(ThrowingConsumer.java:60)
	at org.springframework.util.function.ThrowingConsumer$1.accept(ThrowingConsumer.java:88)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:798)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:789)
	at org.springframework.boot.SpringApplication.lambda$callRunners$3(SpringApplication.java:774)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:774)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:341)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at org.example.xlr8travel.Xlr8travelApplication.main(Xlr8travelApplication.java:10)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: java.lang.IllegalStateException: org.hibernate.TransientPropertyValueException: object references an unsaved transient instance - save the transient instance before flushing : org.example.xlr8travel.models.Ticket.seat -> org.example.xlr8travel.models.Seat
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:157)
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:167)
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:173)
	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1407)
	at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:484)
	at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2319)
	at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1976)
	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:169)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:267)
	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:561)
	... 44 common frames omitted
Caused by: org.hibernate.TransientPropertyValueException: object references an unsaved transient instance - save the transient instance before flushing : org.example.xlr8travel.models.Ticket.seat -> org.example.xlr8travel.models.Seat
	at org.hibernate.engine.spi.CascadingActions$8.noCascade(CascadingActions.java:372)
	at org.hibernate.engine.internal.Cascade.cascade(Cascade.java:173)
	at org.hibernate.event.internal.AbstractSaveEventListener.cascadeBeforeSave(AbstractSaveEventListener.java:482)
	at org.hibernate.event.internal.DefaultPersistEventListener.justCascade(DefaultPersistEventListener.java:160)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsPersistent(DefaultPersistEventListener.java:154)
	at org.hibernate.event.internal.DefaultPersistEventListener.persist(DefaultPersistEventListener.java:90)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:77)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:138)
	at org.hibernate.internal.SessionImpl.persistOnFlush(SessionImpl.java:818)
	at org.hibernate.engine.spi.CascadingActions$8.cascade(CascadingActions.java:333)
	at org.hibernate.engine.spi.CascadingActions$8.cascade(CascadingActions.java:323)
	at org.hibernate.engine.internal.Cascade.cascadeToOne(Cascade.java:517)
	at org.hibernate.engine.internal.Cascade.cascadeAssociation(Cascade.java:439)
	at org.hibernate.engine.internal.Cascade.cascadeProperty(Cascade.java:224)
	at org.hibernate.engine.internal.Cascade.cascadeCollectionElements(Cascade.java:551)
	at org.hibernate.engine.internal.Cascade.cascadeCollection(Cascade.java:481)
	at org.hibernate.engine.internal.Cascade.cascadeAssociation(Cascade.java:442)
	at org.hibernate.engine.internal.Cascade.cascadeProperty(Cascade.java:224)
	at org.hibernate.engine.internal.Cascade.cascade(Cascade.java:157)
	at org.hibernate.event.internal.AbstractSaveEventListener.cascadeAfterSave(AbstractSaveEventListener.java:513)
	at org.hibernate.event.internal.DefaultPersistEventListener.justCascade(DefaultPersistEventListener.java:161)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsPersistent(DefaultPersistEventListener.java:154)
	at org.hibernate.event.internal.DefaultPersistEventListener.persist(DefaultPersistEventListener.java:90)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:77)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:138)
	at org.hibernate.internal.SessionImpl.persistOnFlush(SessionImpl.java:818)
	at org.hibernate.engine.spi.CascadingActions$8.cascade(CascadingActions.java:333)
	at org.hibernate.engine.spi.CascadingActions$8.cascade(CascadingActions.java:323)
	at org.hibernate.engine.internal.Cascade.cascadeToOne(Cascade.java:517)
	at org.hibernate.engine.internal.Cascade.cascadeAssociation(Cascade.java:439)
	at org.hibernate.engine.internal.Cascade.cascadeProperty(Cascade.java:224)
	at org.hibernate.engine.internal.Cascade.cascadeCollectionElements(Cascade.java:551)
	at org.hibernate.engine.internal.Cascade.cascadeCollection(Cascade.java:481)
	at org.hibernate.engine.internal.Cascade.cascadeAssociation(Cascade.java:442)
	at org.hibernate.engine.internal.Cascade.cascadeProperty(Cascade.java:224)
	at org.hibernate.engine.internal.Cascade.cascade(Cascade.java:157)
	at org.hibernate.event.internal.AbstractFlushingEventListener.cascadeOnFlush(AbstractFlushingEventListener.java:161)
	at org.hibernate.event.internal.AbstractFlushingEventListener.prepareEntityFlushes(AbstractFlushingEventListener.java:144)
	at org.hibernate.event.internal.AbstractFlushingEventListener.flushEverythingToExecutions(AbstractFlushingEventListener.java:79)
	at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:40)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)
	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1403)
	... 52 common frames omitted

2025-06-29 17:44:35.162  INFO [NONE] 3232 --- [  restartedMain] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-29 17:44:35.165  INFO [NONE] 3232 --- [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-06-29 17:44:35.172  INFO [NONE] 3232 --- [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-06-29 17:46:10.734  INFO [NONE] 16844 --- [  restartedMain] o.e.xlr8travel.Xlr8travelApplication     : Starting Xlr8travelApplication using Java 21.0.5 with PID 16844 (C:\Users\razvi\Desktop\Licenta\backend\target\classes started by razvi in C:\Users\razvi\Desktop\Licenta\backend)
2025-06-29 17:46:10.740 DEBUG [NONE] 16844 --- [  restartedMain] o.e.xlr8travel.Xlr8travelApplication     : Running with Spring Boot v3.2.4, Spring v6.1.5
2025-06-29 17:46:10.741  INFO [NONE] 16844 --- [  restartedMain] o.e.xlr8travel.Xlr8travelApplication     : The following 1 profile is active: "local"
2025-06-29 17:46:10.783  INFO [NONE] 16844 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-29 17:46:10.783  INFO [NONE] 16844 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-29 17:46:11.831  INFO [NONE] 16844 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-29 17:46:11.924  INFO [NONE] 16844 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 85 ms. Found 9 JPA repository interfaces.
2025-06-29 17:46:12.874  INFO [NONE] 16844 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-29 17:46:12.887  INFO [NONE] 16844 --- [  restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-29 17:46:12.888  INFO [NONE] 16844 --- [  restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.19]
2025-06-29 17:46:12.971  INFO [NONE] 16844 --- [  restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-06-29 17:46:12.972  INFO [NONE] 16844 --- [  restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2188 ms
2025-06-29 17:46:13.234  INFO [NONE] 16844 --- [  restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-29 17:46:13.286  INFO [NONE] 16844 --- [  restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.4.Final
2025-06-29 17:46:13.316  INFO [NONE] 16844 --- [  restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-06-29 17:46:13.518  INFO [NONE] 16844 --- [  restartedMain] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-29 17:46:13.545  INFO [NONE] 16844 --- [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-06-29 17:46:13.733  INFO [NONE] 16844 --- [  restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@1d7f6721
2025-06-29 17:46:13.735  INFO [NONE] 16844 --- [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-06-29 17:46:13.779  WARN [NONE] 16844 --- [  restartedMain] org.hibernate.orm.deprecation            : HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-29 17:46:15.050  INFO [NONE] 16844 --- [  restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-29 17:46:24.356  INFO [NONE] 16844 --- [  restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-29 17:46:24.706  INFO [NONE] 16844 --- [  restartedMain] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-29 17:46:25.142 DEBUG [NONE] 16844 --- [  restartedMain] o.e.x.security.JwtAuthenticationFilter   : Filter 'jwtAuthenticationFilter' configured for use
2025-06-29 17:46:25.143 DEBUG [NONE] 16844 --- [  restartedMain] o.e.x.security.RateLimitingFilter        : Filter 'rateLimitingFilter' configured for use
2025-06-29 17:46:25.400  INFO [NONE] 16844 --- [  restartedMain] o.e.x.config.LocalPropertiesConfig       : Loaded application-local.properties
2025-06-29 17:46:25.860  INFO [NONE] 16844 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : === GEMINI SERVICE CONFIGURATION ===
2025-06-29 17:46:25.861  INFO [NONE] 16844 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : Project ID: xlr8travel
2025-06-29 17:46:25.861  INFO [NONE] 16844 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : Location ID: us-east1
2025-06-29 17:46:25.861  INFO [NONE] 16844 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : Model: gemini-2.0-flash-001
2025-06-29 17:46:25.862  INFO [NONE] 16844 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : Credentials Path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 17:46:25.862  INFO [NONE] 16844 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : API Key: ***SET***
2025-06-29 17:46:25.863  INFO [NONE] 16844 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : ✅ Credentials file exists: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 17:46:25.863  INFO [NONE] 16844 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : ✅ Credentials file size: 2376 bytes
2025-06-29 17:46:25.864  INFO [NONE] 16844 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : ✅ GOOGLE_APPLICATION_CREDENTIALS env var is set: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 17:46:25.864  INFO [NONE] 16844 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : =====================================
2025-06-29 17:46:25.898  INFO [NONE] 16844 --- [  restartedMain] o.e.x.config.SensitiveDataConfig         : Validating sensitive data configuration for profile: local
2025-06-29 17:46:25.899  WARN [NONE] 16844 --- [  restartedMain] o.e.x.config.SensitiveDataConfig         : Environment variable SPRING_DATASOURCE_URL is not set
2025-06-29 17:46:25.899  WARN [NONE] 16844 --- [  restartedMain] o.e.x.config.SensitiveDataConfig         : Environment variable SPRING_DATASOURCE_USERNAME is not set
2025-06-29 17:46:25.899  WARN [NONE] 16844 --- [  restartedMain] o.e.x.config.SensitiveDataConfig         : Environment variable SPRING_DATASOURCE_PASSWORD is not set
2025-06-29 17:46:25.900  WARN [NONE] 16844 --- [  restartedMain] o.e.x.config.SensitiveDataConfig         : Environment variable STRIPE_SECRET_KEY is not set
2025-06-29 17:46:25.977  WARN [NONE] 16844 --- [  restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-29 17:46:26.162  INFO [NONE] 16844 --- [  restartedMain] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2025-06-29 17:46:26.546  INFO [NONE] 16844 --- [  restartedMain] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 4 endpoint(s) beneath base path '/actuator'
2025-06-29 17:46:26.673  INFO [NONE] 16844 --- [  restartedMain] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@3767c8e1, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3ef3ee45, org.springframework.security.web.context.SecurityContextHolderFilter@29871695, org.springframework.security.web.header.HeaderWriterFilter@7898c007, org.springframework.web.filter.CorsFilter@7203ffab, org.springframework.security.web.authentication.logout.LogoutFilter@20161d8a, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@c24c311, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@53f11654, org.example.xlr8travel.security.JwtAuthenticationFilter@1e8adc4b, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@39360565, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@1c378557, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@28e5a5df, org.springframework.security.web.session.ConcurrentSessionFilter@2192c81e, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@546f0710, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@604075b5, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@d029b5d, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@214c50e2, org.springframework.security.web.session.SessionManagementFilter@567b8b5d, org.springframework.security.web.access.ExceptionTranslationFilter@6c599eb4, org.springframework.security.web.access.intercept.AuthorizationFilter@618d621f]
2025-06-29 17:46:27.351  INFO [NONE] 16844 --- [  restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2025-06-29 17:46:27.440  INFO [NONE] 16844 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path ''
2025-06-29 17:46:27.453  INFO [NONE] 16844 --- [  restartedMain] o.e.xlr8travel.Xlr8travelApplication     : Started Xlr8travelApplication in 17.181 seconds (process running for 17.927)
2025-06-29 17:46:33.610  INFO [NONE] 16844 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-29 17:46:33.610  INFO [NONE] 16844 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-06-29 17:46:33.612  INFO [NONE] 16844 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-06-29 17:46:33.635 DEBUG [17287dc8-16b6-49c3-afce-050047144f7b] 16844 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/logout
2025-06-29 17:46:33.652 DEBUG [17287dc8-16b6-49c3-afce-050047144f7b] 16844 --- [nio-8080-exec-1] o.s.s.w.a.logout.LogoutFilter            : Logging out [null]
2025-06-29 17:46:37.518 DEBUG [db124c50-5381-40a4-a19e-2a21963beacf] 16844 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /oauth2/authorization/google
2025-06-29 17:46:37.545 DEBUG [db124c50-5381-40a4-a19e-2a21963beacf] 16844 --- [nio-8080-exec-2] o.s.s.web.DefaultRedirectStrategy        : Redirecting to https://accounts.google.com/o/oauth2/v2/auth?response_type=code&client_id=280181287068-i92p696f0ja6qv5lecrhi4dmn2hsrvie.apps.googleusercontent.com&scope=email%20profile&state=DMURgAd0zfmvpxzRCb3NA7N8piLAp5A7GcXq7_vRPZQ%3D&redirect_uri=http://localhost:8080/login/oauth2/code/google
2025-06-29 17:46:40.639 DEBUG [ca3d2c10-9961-4964-b497-f7fce89ec07b] 16844 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /login/oauth2/code/google?state=DMURgAd0zfmvpxzRCb3NA7N8piLAp5A7GcXq7_vRPZQ%3D&code=4%2F0AVMBsJh00J6S_CbQcUNQRP3wt89r_6PM4oYzS_-AbJEVgCRJdJPmXJs0XuTu8Rw1YTD-8g&scope=email+profile+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile+openid+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email&authuser=1&prompt=none
2025-06-29 17:46:41.253  INFO [ca3d2c10-9961-4964-b497-f7fce89ec07b] 16844 --- [nio-8080-exec-3] o.e.x.security.CustomOAuth2UserService   : Creating new user from OAuth2 login: ****@****.***
2025-06-29 17:46:41.330  INFO [ca3d2c10-9961-4964-b497-f7fce89ec07b] 16844 --- [nio-8080-exec-3] o.e.x.security.CustomOAuth2UserService   : Successfully created new user from OAuth2 login: ****@****.***
2025-06-29 17:46:41.332 DEBUG [ca3d2c10-9961-4964-b497-f7fce89ec07b] 16844 --- [nio-8080-exec-3] .s.ChangeSessionIdAuthenticationStrategy : Changed session id from 91DC1A58B0F49F0DF695C44A270D4F3E
2025-06-29 17:46:41.333 DEBUG [ca3d2c10-9961-4964-b497-f7fce89ec07b] 16844 --- [nio-8080-exec-3] o.s.s.core.session.SessionRegistryImpl   : Registering session 9B3B0E4A0923B29A600D43BE6F92A480, for principal Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}]
2025-06-29 17:46:41.334 DEBUG [ca3d2c10-9961-4964-b497-f7fce89ec07b] 16844 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=91DC1A58B0F49F0DF695C44A270D4F3E], Granted Authorities=[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@6cc309fd]
2025-06-29 17:46:41.335 DEBUG [ca3d2c10-9961-4964-b497-f7fce89ec07b] 16844 --- [nio-8080-exec-3] .s.o.c.w.OAuth2LoginAuthenticationFilter : Set SecurityContextHolder to OAuth2AuthenticationToken [Principal=Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=91DC1A58B0F49F0DF695C44A270D4F3E], Granted Authorities=[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]]
2025-06-29 17:46:41.377  INFO [ca3d2c10-9961-4964-b497-f7fce89ec07b] 16844 --- [nio-8080-exec-3] e.x.s.OAuth2AuthenticationSuccessHandler : Extracting username from authentication: 104658082982173093135
2025-06-29 17:46:41.377  INFO [ca3d2c10-9961-4964-b497-f7fce89ec07b] 16844 --- [nio-8080-exec-3] e.x.s.OAuth2AuthenticationSuccessHandler : Principal class: org.springframework.security.oauth2.core.user.DefaultOAuth2User
2025-06-29 17:46:41.377  INFO [ca3d2c10-9961-4964-b497-f7fce89ec07b] 16844 --- [nio-8080-exec-3] e.x.s.OAuth2AuthenticationSuccessHandler : Principal is DefaultOAuth2User
2025-06-29 17:46:41.378  INFO [ca3d2c10-9961-4964-b497-f7fce89ec07b] 16844 --- [nio-8080-exec-3] e.x.s.OAuth2AuthenticationSuccessHandler : OAuth2User attributes: {sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}
2025-06-29 17:46:41.378  INFO [ca3d2c10-9961-4964-b497-f7fce89ec07b] 16844 --- [nio-8080-exec-3] e.x.s.OAuth2AuthenticationSuccessHandler : Using email as username: ****@****.***
2025-06-29 17:46:41.379  INFO [ca3d2c10-9961-4964-b497-f7fce89ec07b] 16844 --- [nio-8080-exec-3] e.x.s.OAuth2AuthenticationSuccessHandler : Extracting username from authentication: 104658082982173093135
2025-06-29 17:46:41.379  INFO [ca3d2c10-9961-4964-b497-f7fce89ec07b] 16844 --- [nio-8080-exec-3] e.x.s.OAuth2AuthenticationSuccessHandler : Principal class: org.springframework.security.oauth2.core.user.DefaultOAuth2User
2025-06-29 17:46:41.379  INFO [ca3d2c10-9961-4964-b497-f7fce89ec07b] 16844 --- [nio-8080-exec-3] e.x.s.OAuth2AuthenticationSuccessHandler : Principal is DefaultOAuth2User
2025-06-29 17:46:41.380  INFO [ca3d2c10-9961-4964-b497-f7fce89ec07b] 16844 --- [nio-8080-exec-3] e.x.s.OAuth2AuthenticationSuccessHandler : OAuth2User attributes: {sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}
2025-06-29 17:46:41.380  INFO [ca3d2c10-9961-4964-b497-f7fce89ec07b] 16844 --- [nio-8080-exec-3] e.x.s.OAuth2AuthenticationSuccessHandler : Using email as username: ****@****.***
2025-06-29 17:46:41.380  INFO [ca3d2c10-9961-4964-b497-f7fce89ec07b] 16844 --- [nio-8080-exec-3] e.x.s.OAuth2AuthenticationSuccessHandler : OAuth tokens stored in session for user: ****@****.***
2025-06-29 17:46:41.381 DEBUG [ca3d2c10-9961-4964-b497-f7fce89ec07b] 16844 --- [nio-8080-exec-3] o.s.s.web.DefaultRedirectStrategy        : Redirecting to http://localhost:3000?oauth=success
2025-06-29 17:46:41.919 DEBUG [ccffef76-aa7d-41dd-8b94-fd05530b9034] 16844 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/oauth/complete
2025-06-29 17:46:41.921 DEBUG [63d7a0b7-de53-4b97-a6c9-370b4ef8230e] 16844 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/oauth/complete
2025-06-29 17:46:41.929 DEBUG [fbf909fc-0128-45b3-a38c-3ac3a5dfc292] 16844 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/oauth/complete
2025-06-29 17:46:41.930 DEBUG [efe11780-b4f6-4c50-a111-92893f77d141] 16844 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/oauth/complete
2025-06-29 17:46:41.939  WARN [fbf909fc-0128-45b3-a38c-3ac3a5dfc292] 16844 --- [nio-8080-exec-6] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/api/oauth/complete' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2025-06-29 17:46:41.947 DEBUG [efe11780-b4f6-4c50-a111-92893f77d141] 16844 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/oauth/complete
2025-06-29 17:46:41.947 DEBUG [fbf909fc-0128-45b3-a38c-3ac3a5dfc292] 16844 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/oauth/complete
2025-06-29 17:46:41.964  INFO [fbf909fc-0128-45b3-a38c-3ac3a5dfc292] 16844 --- [nio-8080-exec-6] o.e.x.controllers.OAuthController        : OAuth tokens retrieved and cleared from session for user: ****@****.***
2025-06-29 17:46:41.964  INFO [efe11780-b4f6-4c50-a111-92893f77d141] 16844 --- [nio-8080-exec-7] o.e.x.controllers.OAuthController        : OAuth tokens retrieved and cleared from session for user: ****@****.***
2025-06-29 17:46:41.986 DEBUG [fbf909fc-0128-45b3-a38c-3ac3a5dfc292] 16844 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=91DC1A58B0F49F0DF695C44A270D4F3E], Granted Authorities=[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]]]
2025-06-29 17:46:41.986 DEBUG [efe11780-b4f6-4c50-a111-92893f77d141] 16844 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=91DC1A58B0F49F0DF695C44A270D4F3E], Granted Authorities=[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]]]
2025-06-29 17:46:42.068 DEBUG [16f4d836-107d-4f07-b077-e5c5b20db31e] 16844 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/nearby?origin=OTP
2025-06-29 17:46:42.072 DEBUG [16f4d836-107d-4f07-b077-e5c5b20db31e] 16844 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/nearby?origin=OTP
2025-06-29 17:46:42.087  INFO [16f4d836-107d-4f07-b077-e5c5b20db31e] 16844 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Received request for nearby flights from origin: OTP, departureDate: null
2025-06-29 17:46:42.087  INFO [16f4d836-107d-4f07-b077-e5c5b20db31e] 16844 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Using search date: 2025-06-29
2025-06-29 17:46:42.088  INFO [16f4d836-107d-4f07-b077-e5c5b20db31e] 16844 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Cache key: OTP-2025-06-29
2025-06-29 17:46:42.089  INFO [16f4d836-107d-4f07-b077-e5c5b20db31e] 16844 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : No valid cache found. Searching nearby flights from origin: OTP, after date: 2025-06-29
2025-06-29 17:46:42.089  INFO [16f4d836-107d-4f07-b077-e5c5b20db31e] 16844 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Calling flightService.findByOriginAndDepartureDateAfter for origin: OTP, date: 2025-06-29
2025-06-29 17:46:42.186  INFO [16f4d836-107d-4f07-b077-e5c5b20db31e] 16844 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Database query completed, found 16 flights
2025-06-29 17:46:42.187  INFO [16f4d836-107d-4f07-b077-e5c5b20db31e] 16844 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Converting 16 Flight entities to FlightDTOs
2025-06-29 17:46:42.188  INFO [16f4d836-107d-4f07-b077-e5c5b20db31e] 16844 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Converted to 16 FlightDTOs
2025-06-29 17:46:42.188  INFO [16f4d836-107d-4f07-b077-e5c5b20db31e] 16844 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Grouping flights by destination country
2025-06-29 17:46:42.189  INFO [16f4d836-107d-4f07-b077-e5c5b20db31e] 16844 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Grouped flights into 7 countries
2025-06-29 17:46:42.189  INFO [16f4d836-107d-4f07-b077-e5c5b20db31e] 16844 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Selecting diverse flights - one from each country first
2025-06-29 17:46:42.190  INFO [16f4d836-107d-4f07-b077-e5c5b20db31e] 16844 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Adding first flight from Greece (has 2 flights)
2025-06-29 17:46:42.190  INFO [16f4d836-107d-4f07-b077-e5c5b20db31e] 16844 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Adding first flight from Netherlands (has 2 flights)
2025-06-29 17:46:42.191  INFO [16f4d836-107d-4f07-b077-e5c5b20db31e] 16844 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Adding first flight from Italy (has 2 flights)
2025-06-29 17:46:42.191  INFO [16f4d836-107d-4f07-b077-e5c5b20db31e] 16844 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Adding first flight from United Kingdom (has 2 flights)
2025-06-29 17:46:42.191  INFO [16f4d836-107d-4f07-b077-e5c5b20db31e] 16844 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Adding first flight from France (has 2 flights)
2025-06-29 17:46:42.192  INFO [16f4d836-107d-4f07-b077-e5c5b20db31e] 16844 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Adding first flight from Switzerland (has 2 flights)
2025-06-29 17:46:42.192  INFO [16f4d836-107d-4f07-b077-e5c5b20db31e] 16844 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Reached 6 flights after first pass, stopping
2025-06-29 17:46:42.192  INFO [16f4d836-107d-4f07-b077-e5c5b20db31e] 16844 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Caching 6 diverse flights with key: OTP-2025-06-29
2025-06-29 17:46:42.194  INFO [16f4d836-107d-4f07-b077-e5c5b20db31e] 16844 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Returning 6 diverse nearby flights from: OTP
2025-06-29 17:46:42.205 DEBUG [16f4d836-107d-4f07-b077-e5c5b20db31e] 16844 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=91DC1A58B0F49F0DF695C44A270D4F3E], Granted Authorities=[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]]]
2025-06-29 17:46:42.310 DEBUG [05146be8-f5e2-4f80-8744-3d7179282a9b] 16844 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 17:46:42.351 DEBUG [05146be8-f5e2-4f80-8744-3d7179282a9b] 16844 --- [nio-8080-exec-9] o.s.s.core.session.SessionRegistryImpl   : Registering session 9BA8A551AF6E193FCB974544C30CFDB3, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[])
2025-06-29 17:46:42.352 DEBUG [05146be8-f5e2-4f80-8744-3d7179282a9b] 16844 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@6ac921b8]
2025-06-29 17:46:42.357 DEBUG [05146be8-f5e2-4f80-8744-3d7179282a9b] 16844 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me
2025-06-29 17:46:42.360  INFO [05146be8-f5e2-4f80-8744-3d7179282a9b] 16844 --- [nio-8080-exec-9] o.e.x.controllers.UserController         : Request received for current user details: ****@****.***
2025-06-29 17:46:42.381  INFO [05146be8-f5e2-4f80-8744-3d7179282a9b] 16844 --- [nio-8080-exec-9] o.e.x.controllers.UserController         : Returning details for user: ****@****.***
2025-06-29 17:46:42.428 DEBUG [332c4654-4a4a-4fe4-a5d1-670a181f5b6a] 16844 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:46:42.428 DEBUG [87b4141f-6624-4de8-8a12-7bd82529e6c0] 16844 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 17:46:42.449 DEBUG [332c4654-4a4a-4fe4-a5d1-670a181f5b6a] 16844 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=91DC1A58B0F49F0DF695C44A270D4F3E], Granted Authorities=[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]]]
2025-06-29 17:46:42.450 DEBUG [87b4141f-6624-4de8-8a12-7bd82529e6c0] 16844 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=91DC1A58B0F49F0DF695C44A270D4F3E], Granted Authorities=[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]]]
2025-06-29 17:46:42.455 DEBUG [332c4654-4a4a-4fe4-a5d1-670a181f5b6a] 16844 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:46:42.455 DEBUG [87b4141f-6624-4de8-8a12-7bd82529e6c0] 16844 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 17:46:42.457  INFO [332c4654-4a4a-4fe4-a5d1-670a181f5b6a] 16844 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:46:42.472  WARN [87b4141f-6624-4de8-8a12-7bd82529e6c0] 16844 --- [io-8080-exec-10] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 17:46:42.475  INFO [332c4654-4a4a-4fe4-a5d1-670a181f5b6a] 16844 --- [nio-8080-exec-1] o.e.xlr8travel.services.CartServiceImpl  : No existing cart found for user ****@****.*** with ID 4, creating a new one.
2025-06-29 17:46:42.483  WARN [87b4141f-6624-4de8-8a12-7bd82529e6c0] 16844 --- [io-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 17:46:42.493  INFO [332c4654-4a4a-4fe4-a5d1-670a181f5b6a] 16844 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 17:46:42.620 DEBUG [949f368e-b121-4f09-b04c-34783b0936a4] 16844 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 17:46:42.633 DEBUG [949f368e-b121-4f09-b04c-34783b0936a4] 16844 --- [nio-8080-exec-2] o.s.s.core.session.SessionRegistryImpl   : Registering session 52497EF235EB515562F025770E6CF1C8, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[])
2025-06-29 17:46:42.634 DEBUG [949f368e-b121-4f09-b04c-34783b0936a4] 16844 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@3594adb]
2025-06-29 17:46:42.637 DEBUG [949f368e-b121-4f09-b04c-34783b0936a4] 16844 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me
2025-06-29 17:46:42.639  INFO [949f368e-b121-4f09-b04c-34783b0936a4] 16844 --- [nio-8080-exec-2] o.e.x.controllers.UserController         : Request received for current user details: ****@****.***
2025-06-29 17:46:42.647  INFO [949f368e-b121-4f09-b04c-34783b0936a4] 16844 --- [nio-8080-exec-2] o.e.x.controllers.UserController         : Returning details for user: ****@****.***
2025-06-29 17:46:44.927 DEBUG [95d7bfc9-2015-4cac-a9cb-4b35d5fdad40] 16844 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-29 17:46:44.929 DEBUG [95d7bfc9-2015-4cac-a9cb-4b35d5fdad40] 16844 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-29 17:46:44.951  INFO [95d7bfc9-2015-4cac-a9cb-4b35d5fdad40] 16844 --- [nio-8080-exec-3] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris
2025-06-29 17:46:44.951  INFO [95d7bfc9-2015-4cac-a9cb-4b35d5fdad40] 16844 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-29 17:46:44.952  INFO [95d7bfc9-2015-4cac-a9cb-4b35d5fdad40] 16844 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-29 17:46:44.954 DEBUG [95d7bfc9-2015-4cac-a9cb-4b35d5fdad40] 16844 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-29).    For example, if today is 2025-06-29, a good departure date would be between 2025-07-06 and 2025-07-13, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris";
2025-06-29 17:46:44.957  INFO [95d7bfc9-2015-4cac-a9cb-4b35d5fdad40] 16844 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-29 17:46:44.957  INFO [95d7bfc9-2015-4cac-a9cb-4b35d5fdad40] 16844 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-29 17:46:44.958  INFO [95d7bfc9-2015-4cac-a9cb-4b35d5fdad40] 16844 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-29 17:46:44.958  INFO [95d7bfc9-2015-4cac-a9cb-4b35d5fdad40] 16844 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 17:46:44.958  INFO [95d7bfc9-2015-4cac-a9cb-4b35d5fdad40] 16844 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-29 17:46:45.021  INFO [95d7bfc9-2015-4cac-a9cb-4b35d5fdad40] 16844 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-29 17:46:45.023  INFO [95d7bfc9-2015-4cac-a9cb-4b35d5fdad40] 16844 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-29 17:46:45.026  INFO [95d7bfc9-2015-4cac-a9cb-4b35d5fdad40] 16844 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-29 17:46:45.048  INFO [95d7bfc9-2015-4cac-a9cb-4b35d5fdad40] 16844 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-29 17:46:47.704  INFO [95d7bfc9-2015-4cac-a9cb-4b35d5fdad40] 16844 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-29 17:46:47.705  INFO [95d7bfc9-2015-4cac-a9cb-4b35d5fdad40] 16844 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Response length: 195 characters
2025-06-29 17:46:47.707 DEBUG [95d7bfc9-2015-4cac-a9cb-4b35d5fdad40] 16844 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-06",
  "returnDate": "2025-07-08",
  "tripType": "roundTrip",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-29 17:46:47.707 DEBUG [95d7bfc9-2015-4cac-a9cb-4b35d5fdad40] 16844 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-29 17:46:47.713 DEBUG [95d7bfc9-2015-4cac-a9cb-4b35d5fdad40] 16844 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-29 17:46:47.713 DEBUG [95d7bfc9-2015-4cac-a9cb-4b35d5fdad40] 16844 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-29 17:46:47.714 DEBUG [95d7bfc9-2015-4cac-a9cb-4b35d5fdad40] 16844 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 17:46:47.714  INFO [95d7bfc9-2015-4cac-a9cb-4b35d5fdad40] 16844 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 17:46:47.714  INFO [95d7bfc9-2015-4cac-a9cb-4b35d5fdad40] 16844 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-06, returnDate=2025-07-08, tripType=roundTrip, adults=1, children=0, infants=0
2025-06-29 17:46:47.715  INFO [95d7bfc9-2015-4cac-a9cb-4b35d5fdad40] 16844 --- [nio-8080-exec-3] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-29 17:46:47.719 DEBUG [95d7bfc9-2015-4cac-a9cb-4b35d5fdad40] 16844 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:46:49.196 DEBUG [fc5a0986-9adf-496a-a723-850e3977f359] 16844 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-29 17:46:49.199 DEBUG [fc5a0986-9adf-496a-a723-850e3977f359] 16844 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-29 17:46:49.202  INFO [fc5a0986-9adf-496a-a723-850e3977f359] 16844 --- [nio-8080-exec-4] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris one way
2025-06-29 17:46:49.202  INFO [fc5a0986-9adf-496a-a723-850e3977f359] 16844 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-29 17:46:49.202  INFO [fc5a0986-9adf-496a-a723-850e3977f359] 16844 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-29 17:46:49.202 DEBUG [fc5a0986-9adf-496a-a723-850e3977f359] 16844 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-29).    For example, if today is 2025-06-29, a good departure date would be between 2025-07-06 and 2025-07-13, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris one way";
2025-06-29 17:46:49.204  INFO [fc5a0986-9adf-496a-a723-850e3977f359] 16844 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-29 17:46:49.204  INFO [fc5a0986-9adf-496a-a723-850e3977f359] 16844 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-29 17:46:49.205  INFO [fc5a0986-9adf-496a-a723-850e3977f359] 16844 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-29 17:46:49.205  INFO [fc5a0986-9adf-496a-a723-850e3977f359] 16844 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 17:46:49.205  INFO [fc5a0986-9adf-496a-a723-850e3977f359] 16844 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-29 17:46:49.206  INFO [fc5a0986-9adf-496a-a723-850e3977f359] 16844 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-29 17:46:49.206  INFO [fc5a0986-9adf-496a-a723-850e3977f359] 16844 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-29 17:46:49.207  INFO [fc5a0986-9adf-496a-a723-850e3977f359] 16844 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-29 17:46:49.207  INFO [fc5a0986-9adf-496a-a723-850e3977f359] 16844 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-29 17:46:50.901  INFO [fc5a0986-9adf-496a-a723-850e3977f359] 16844 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-29 17:46:50.901  INFO [fc5a0986-9adf-496a-a723-850e3977f359] 16844 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Response length: 184 characters
2025-06-29 17:46:50.902 DEBUG [fc5a0986-9adf-496a-a723-850e3977f359] 16844 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-06",
  "returnDate": null,
  "tripType": "oneWay",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-29 17:46:50.903 DEBUG [fc5a0986-9adf-496a-a723-850e3977f359] 16844 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-29 17:46:50.903 DEBUG [fc5a0986-9adf-496a-a723-850e3977f359] 16844 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-29 17:46:50.903 DEBUG [fc5a0986-9adf-496a-a723-850e3977f359] 16844 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-29 17:46:50.904 DEBUG [fc5a0986-9adf-496a-a723-850e3977f359] 16844 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 17:46:50.904  INFO [fc5a0986-9adf-496a-a723-850e3977f359] 16844 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 17:46:50.904  INFO [fc5a0986-9adf-496a-a723-850e3977f359] 16844 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-06, returnDate=null, tripType=oneWay, adults=1, children=0, infants=0
2025-06-29 17:46:50.904  INFO [fc5a0986-9adf-496a-a723-850e3977f359] 16844 --- [nio-8080-exec-4] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-29 17:46:50.906 DEBUG [fc5a0986-9adf-496a-a723-850e3977f359] 16844 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:46:52.519 DEBUG [9fb9b9ad-92b0-4e9a-a6bb-0680cd59777e] 16844 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 17:46:52.533 DEBUG [9fb9b9ad-92b0-4e9a-a6bb-0680cd59777e] 16844 --- [nio-8080-exec-5] o.s.s.core.session.SessionRegistryImpl   : Registering session 2B1B41BA400F2EC9055FDA279D56CF3B, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[])
2025-06-29 17:46:52.534 DEBUG [9fb9b9ad-92b0-4e9a-a6bb-0680cd59777e] 16844 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@60ba86f9]
2025-06-29 17:46:52.536 DEBUG [9fb9b9ad-92b0-4e9a-a6bb-0680cd59777e] 16844 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me
2025-06-29 17:46:52.538  INFO [9fb9b9ad-92b0-4e9a-a6bb-0680cd59777e] 16844 --- [nio-8080-exec-5] o.e.x.controllers.UserController         : Request received for current user details: ****@****.***
2025-06-29 17:46:52.544  INFO [9fb9b9ad-92b0-4e9a-a6bb-0680cd59777e] 16844 --- [nio-8080-exec-5] o.e.x.controllers.UserController         : Returning details for user: ****@****.***
2025-06-29 17:46:52.607 DEBUG [bb14e68f-e2b4-435d-b6a6-9c91caea1f8f] 16844 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 17:46:52.609 DEBUG [bf8b2bd8-83ca-44a9-a08c-8a6f89062dcd] 16844 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 17:46:52.611 DEBUG [6028ff82-8a50-4d55-bf72-5d18a504764a] 16844 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:46:52.612 DEBUG [bf8b2bd8-83ca-44a9-a08c-8a6f89062dcd] 16844 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 17:46:52.630  INFO [bf8b2bd8-83ca-44a9-a08c-8a6f89062dcd] 16844 --- [nio-8080-exec-6] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 17:46:52.636  INFO [bf8b2bd8-83ca-44a9-a08c-8a6f89062dcd] 16844 --- [nio-8080-exec-6] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 17:46:52.649 DEBUG [bb14e68f-e2b4-435d-b6a6-9c91caea1f8f] 16844 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:46:52.652 DEBUG [6028ff82-8a50-4d55-bf72-5d18a504764a] 16844 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:46:52.654 DEBUG [bb14e68f-e2b4-435d-b6a6-9c91caea1f8f] 16844 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 17:46:52.655 DEBUG [6028ff82-8a50-4d55-bf72-5d18a504764a] 16844 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:46:52.655  INFO [6028ff82-8a50-4d55-bf72-5d18a504764a] 16844 --- [nio-8080-exec-8] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:46:52.663  WARN [bb14e68f-e2b4-435d-b6a6-9c91caea1f8f] 16844 --- [nio-8080-exec-7] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 17:46:52.665  WARN [bb14e68f-e2b4-435d-b6a6-9c91caea1f8f] 16844 --- [nio-8080-exec-7] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 17:46:52.672 DEBUG [e585dfff-7a50-41f5-9bb8-a35e830d59f9] 16844 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 17:46:52.673  INFO [6028ff82-8a50-4d55-bf72-5d18a504764a] 16844 --- [nio-8080-exec-8] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 17:46:52.686 DEBUG [e585dfff-7a50-41f5-9bb8-a35e830d59f9] 16844 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:46:52.688 DEBUG [e585dfff-7a50-41f5-9bb8-a35e830d59f9] 16844 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 17:46:52.697  WARN [e585dfff-7a50-41f5-9bb8-a35e830d59f9] 16844 --- [nio-8080-exec-9] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 17:46:52.698  WARN [e585dfff-7a50-41f5-9bb8-a35e830d59f9] 16844 --- [nio-8080-exec-9] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 17:46:52.724  INFO [bf8b2bd8-83ca-44a9-a08c-8a6f89062dcd] 16844 --- [nio-8080-exec-6] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 17:46:52.725 DEBUG [bf8b2bd8-83ca-44a9-a08c-8a6f89062dcd] 16844 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:46:52.731 DEBUG [67830f47-86a9-410c-90ef-4c490b5354e8] 16844 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 17:46:52.733 DEBUG [67830f47-86a9-410c-90ef-4c490b5354e8] 16844 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 17:46:52.734  INFO [67830f47-86a9-410c-90ef-4c490b5354e8] 16844 --- [io-8080-exec-10] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 17:46:52.734  INFO [67830f47-86a9-410c-90ef-4c490b5354e8] 16844 --- [io-8080-exec-10] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 17:46:52.771 DEBUG [e12073f3-ce2f-461e-a3f0-e05f7434671e] 16844 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 17:46:52.773 DEBUG [e12073f3-ce2f-461e-a3f0-e05f7434671e] 16844 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 17:46:52.774  INFO [e12073f3-ce2f-461e-a3f0-e05f7434671e] 16844 --- [nio-8080-exec-1] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 17:46:52.796  INFO [67830f47-86a9-410c-90ef-4c490b5354e8] 16844 --- [io-8080-exec-10] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 17:46:52.798 DEBUG [67830f47-86a9-410c-90ef-4c490b5354e8] 16844 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:46:52.963  INFO [e12073f3-ce2f-461e-a3f0-e05f7434671e] 16844 --- [nio-8080-exec-1] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 17:46:52.967 DEBUG [e12073f3-ce2f-461e-a3f0-e05f7434671e] 16844 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:46:52.975 DEBUG [e41ae356-8fc1-4d10-8fdd-da2b9fac7df9] 16844 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 17:46:52.976 DEBUG [e41ae356-8fc1-4d10-8fdd-da2b9fac7df9] 16844 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 17:46:52.977 DEBUG [5eeab215-924b-4e05-a441-e04722b9378f] 16844 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 17:46:52.977  INFO [e41ae356-8fc1-4d10-8fdd-da2b9fac7df9] 16844 --- [nio-8080-exec-2] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 17:46:52.978 DEBUG [5eeab215-924b-4e05-a441-e04722b9378f] 16844 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 17:46:52.979  INFO [5eeab215-924b-4e05-a441-e04722b9378f] 16844 --- [nio-8080-exec-3] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 17:46:53.024  INFO [e41ae356-8fc1-4d10-8fdd-da2b9fac7df9] 16844 --- [nio-8080-exec-2] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 17:46:53.025 DEBUG [e41ae356-8fc1-4d10-8fdd-da2b9fac7df9] 16844 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:46:53.185  INFO [5eeab215-924b-4e05-a441-e04722b9378f] 16844 --- [nio-8080-exec-3] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 17:46:53.187 DEBUG [5eeab215-924b-4e05-a441-e04722b9378f] 16844 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:46:53.193 DEBUG [ed60a895-4ca8-41d1-8544-a79acba23026] 16844 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 17:46:53.194 DEBUG [ed60a895-4ca8-41d1-8544-a79acba23026] 16844 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 17:46:53.196  INFO [ed60a895-4ca8-41d1-8544-a79acba23026] 16844 --- [nio-8080-exec-4] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 17:46:53.244  INFO [ed60a895-4ca8-41d1-8544-a79acba23026] 16844 --- [nio-8080-exec-4] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 17:46:53.245 DEBUG [ed60a895-4ca8-41d1-8544-a79acba23026] 16844 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:46:58.287 DEBUG [2991e4e0-b2ed-47ba-9216-6daf52d18c15] 16844 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 17:46:58.302 DEBUG [2991e4e0-b2ed-47ba-9216-6daf52d18c15] 16844 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:46:58.309 DEBUG [2991e4e0-b2ed-47ba-9216-6daf52d18c15] 16844 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 17:46:58.310  INFO [2991e4e0-b2ed-47ba-9216-6daf52d18c15] 16844 --- [nio-8080-exec-5] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 17:46:58.310  INFO [2991e4e0-b2ed-47ba-9216-6daf52d18c15] 16844 --- [nio-8080-exec-5] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 17:46:58.322 DEBUG [2aa616f7-ae26-4244-97b4-4f48b45453a8] 16844 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 17:46:58.333 DEBUG [2aa616f7-ae26-4244-97b4-4f48b45453a8] 16844 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:46:58.337 DEBUG [2aa616f7-ae26-4244-97b4-4f48b45453a8] 16844 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 17:46:58.337  INFO [2aa616f7-ae26-4244-97b4-4f48b45453a8] 16844 --- [nio-8080-exec-7] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 17:46:58.338  INFO [2aa616f7-ae26-4244-97b4-4f48b45453a8] 16844 --- [nio-8080-exec-7] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 17:46:58.558 DEBUG [708ce777-6c42-477a-accd-3b20b2235dbf] 16844 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 17:46:58.578 DEBUG [708ce777-6c42-477a-accd-3b20b2235dbf] 16844 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:46:58.583 DEBUG [708ce777-6c42-477a-accd-3b20b2235dbf] 16844 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 17:46:58.584  INFO [708ce777-6c42-477a-accd-3b20b2235dbf] 16844 --- [nio-8080-exec-8] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 17:46:58.584  INFO [708ce777-6c42-477a-accd-3b20b2235dbf] 16844 --- [nio-8080-exec-8] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 17:47:03.242 DEBUG [4692cab2-1448-4af2-ac80-ebcaa40eab06] 16844 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing POST /api/cart/add
2025-06-29 17:47:03.255 DEBUG [4692cab2-1448-4af2-ac80-ebcaa40eab06] 16844 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:47:03.257 DEBUG [4692cab2-1448-4af2-ac80-ebcaa40eab06] 16844 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured POST /api/cart/add
2025-06-29 17:47:03.305  INFO [4692cab2-1448-4af2-ac80-ebcaa40eab06] 16844 --- [nio-8080-exec-9] o.e.x.controllers.CartController         : User ****@****.*** request to add flight ID 16 to persistent cart
2025-06-29 17:47:03.377  INFO [4692cab2-1448-4af2-ac80-ebcaa40eab06] 16844 --- [nio-8080-exec-9] o.e.xlr8travel.services.CartServiceImpl  : Added new flight ID 16 to cart for user ****@****.***
2025-06-29 17:47:03.406  INFO [4692cab2-1448-4af2-ac80-ebcaa40eab06] 16844 --- [nio-8080-exec-9] o.e.x.controllers.CartController         : Flight ID 16 added/incremented in persistent cart for user ****@****.***.
2025-06-29 17:47:03.422 DEBUG [894c8875-2b66-4806-8826-5738db05141f] 16844 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:47:03.433 DEBUG [894c8875-2b66-4806-8826-5738db05141f] 16844 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:47:03.436 DEBUG [894c8875-2b66-4806-8826-5738db05141f] 16844 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:47:03.437  INFO [894c8875-2b66-4806-8826-5738db05141f] 16844 --- [nio-8080-exec-6] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:47:03.517  INFO [894c8875-2b66-4806-8826-5738db05141f] 16844 --- [nio-8080-exec-6] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 17:47:04.020 DEBUG [42c5af11-0dca-4579-85e2-04f830f48e40] 16844 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:47:04.036 DEBUG [42c5af11-0dca-4579-85e2-04f830f48e40] 16844 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:47:04.038 DEBUG [42c5af11-0dca-4579-85e2-04f830f48e40] 16844 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:47:04.039  INFO [42c5af11-0dca-4579-85e2-04f830f48e40] 16844 --- [io-8080-exec-10] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:47:04.099  INFO [42c5af11-0dca-4579-85e2-04f830f48e40] 16844 --- [io-8080-exec-10] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 17:47:04.106 DEBUG [1cc26547-f395-4017-9f15-192f188f8303] 16844 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:47:04.118 DEBUG [1cc26547-f395-4017-9f15-192f188f8303] 16844 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:47:04.120 DEBUG [1cc26547-f395-4017-9f15-192f188f8303] 16844 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:47:04.121  INFO [1cc26547-f395-4017-9f15-192f188f8303] 16844 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:47:04.169  INFO [1cc26547-f395-4017-9f15-192f188f8303] 16844 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 17:47:06.033 DEBUG [7d2a0f55-7a2c-48f2-aa33-2edf5634fa88] 16844 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:47:06.047 DEBUG [7d2a0f55-7a2c-48f2-aa33-2edf5634fa88] 16844 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:47:06.049 DEBUG [7d2a0f55-7a2c-48f2-aa33-2edf5634fa88] 16844 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:47:06.050  INFO [7d2a0f55-7a2c-48f2-aa33-2edf5634fa88] 16844 --- [nio-8080-exec-2] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:47:06.095  INFO [7d2a0f55-7a2c-48f2-aa33-2edf5634fa88] 16844 --- [nio-8080-exec-2] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 17:47:06.103 DEBUG [ddaad808-7b89-4cee-b00c-1b4f5f913995] 16844 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:47:06.112 DEBUG [ddaad808-7b89-4cee-b00c-1b4f5f913995] 16844 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:47:06.115 DEBUG [ddaad808-7b89-4cee-b00c-1b4f5f913995] 16844 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:47:06.116  INFO [ddaad808-7b89-4cee-b00c-1b4f5f913995] 16844 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:47:06.183  INFO [ddaad808-7b89-4cee-b00c-1b4f5f913995] 16844 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 17:47:13.582 DEBUG [0dfc6645-8921-44b2-839d-ee276514f972] 16844 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing POST /api/checkout/create-payment-intent
2025-06-29 17:47:13.583 DEBUG [0dfc6645-8921-44b2-839d-ee276514f972] 16844 --- [nio-8080-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 17:47:13.584 DEBUG [0dfc6645-8921-44b2-839d-ee276514f972] 16844 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured POST /api/checkout/create-payment-intent
2025-06-29 17:47:13.600  INFO [0dfc6645-8921-44b2-839d-ee276514f972] 16844 --- [nio-8080-exec-4] o.e.x.controllers.PaymentController      : Creating payment intent for amount: 23995 ron
2025-06-29 17:47:14.276  INFO [0dfc6645-8921-44b2-839d-ee276514f972] 16844 --- [nio-8080-exec-4] o.e.x.controllers.PaymentController      : Payment intent created successfully: pi_3RfMViGf8s1WZJnq0a5tQZ04
2025-06-29 17:47:15.534 DEBUG [519938fe-1c57-4f66-bb2e-c61d7f6676fe] 16844 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /api/checkout/confirm
2025-06-29 17:47:15.546 DEBUG [519938fe-1c57-4f66-bb2e-c61d7f6676fe] 16844 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:47:15.547 DEBUG [519938fe-1c57-4f66-bb2e-c61d7f6676fe] 16844 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured POST /api/checkout/confirm
2025-06-29 17:47:15.549  INFO [519938fe-1c57-4f66-bb2e-c61d7f6676fe] 16844 --- [nio-8080-exec-5] o.e.x.controllers.CheckoutController     : Received purchase confirmation request.
2025-06-29 17:47:15.555  INFO [519938fe-1c57-4f66-bb2e-c61d7f6676fe] 16844 --- [nio-8080-exec-5] o.e.x.controllers.CheckoutController     : Processing purchase for user: ****@****.***
2025-06-29 17:47:15.593  INFO [519938fe-1c57-4f66-bb2e-c61d7f6676fe] 16844 --- [nio-8080-exec-5] o.e.x.controllers.CheckoutController     : User ****@****.*** persistent cart has 1 items.
2025-06-29 17:47:15.593  WARN [519938fe-1c57-4f66-bb2e-c61d7f6676fe] 16844 --- [nio-8080-exec-5] o.e.x.controllers.CheckoutController     : !!! SIMULATING successful payment processing for user ****@****.*** !!!
2025-06-29 17:47:15.594  INFO [519938fe-1c57-4f66-bb2e-c61d7f6676fe] 16844 --- [nio-8080-exec-5] o.e.x.services.OrderServiceImpl          : Creating order from persistent cart for user: ****@****.***
2025-06-29 17:47:15.599  INFO [519938fe-1c57-4f66-bb2e-c61d7f6676fe] 16844 --- [nio-8080-exec-5] o.e.x.services.OrderServiceImpl          : Order 1 created for user ****@****.***, status: PENDING_PAYMENT. Total: 37.99
2025-06-29 17:47:15.599  INFO [519938fe-1c57-4f66-bb2e-c61d7f6676fe] 16844 --- [nio-8080-exec-5] o.e.x.services.OrderServiceImpl          : Ticket has baggage type: BAGGAGE_TYPE_WEIGHT_CARRY_ON_0
2025-06-29 17:47:16.818  INFO [519938fe-1c57-4f66-bb2e-c61d7f6676fe] 16844 --- [nio-8080-exec-5] o.e.x.services.EmailServiceImpl          : Purchase confirmation email sent to ****@****.***
2025-06-29 17:47:16.819  INFO [519938fe-1c57-4f66-bb2e-c61d7f6676fe] 16844 --- [nio-8080-exec-5] o.e.x.services.OrderServiceImpl          : Purchase confirmation email sent to user: ****@****.***
2025-06-29 17:47:16.832  INFO [519938fe-1c57-4f66-bb2e-c61d7f6676fe] 16844 --- [nio-8080-exec-5] o.e.x.controllers.CheckoutController     : Order successfully created for user ****@****.***. Confirmation: 1
2025-06-29 17:47:16.837  INFO [519938fe-1c57-4f66-bb2e-c61d7f6676fe] 16844 --- [nio-8080-exec-5] o.e.xlr8travel.services.CartServiceImpl  : Clearing 1 items from cart for user ****@****.***
2025-06-29 17:47:16.859  INFO [519938fe-1c57-4f66-bb2e-c61d7f6676fe] 16844 --- [nio-8080-exec-5] o.e.x.controllers.CheckoutController     : Persistent cart cleared for user ****@****.***.
2025-06-29 17:47:16.869 DEBUG [cf41d716-d2ea-4143-8901-f9709c71272f] 16844 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing DELETE /api/cart/remove/16
2025-06-29 17:47:16.958 DEBUG [cf41d716-d2ea-4143-8901-f9709c71272f] 16844 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:47:16.960 DEBUG [cf41d716-d2ea-4143-8901-f9709c71272f] 16844 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured DELETE /api/cart/remove/16
2025-06-29 17:47:17.047  INFO [cf41d716-d2ea-4143-8901-f9709c71272f] 16844 --- [nio-8080-exec-7] o.e.x.controllers.CartController         : User ****@****.*** request to remove flight ID 16 from persistent cart
2025-06-29 17:47:17.057  WARN [cf41d716-d2ea-4143-8901-f9709c71272f] 16844 --- [nio-8080-exec-7] o.e.xlr8travel.services.CartServiceImpl  : Attempted to remove flight ID 16 not found in cart for user ****@****.***
2025-06-29 17:47:17.060  WARN [cf41d716-d2ea-4143-8901-f9709c71272f] 16844 --- [nio-8080-exec-7] o.e.x.controllers.CartController         : Attempted to remove flight ID 16 not found in persistent cart for user ****@****.***
2025-06-29 17:47:17.070 DEBUG [925dcb2d-cc05-4f2c-89f2-b90d52f574a4] 16844 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:47:17.172 DEBUG [925dcb2d-cc05-4f2c-89f2-b90d52f574a4] 16844 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:47:17.174 DEBUG [925dcb2d-cc05-4f2c-89f2-b90d52f574a4] 16844 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:47:17.174  INFO [925dcb2d-cc05-4f2c-89f2-b90d52f574a4] 16844 --- [nio-8080-exec-8] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:47:17.274  INFO [925dcb2d-cc05-4f2c-89f2-b90d52f574a4] 16844 --- [nio-8080-exec-8] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 17:47:18.643 DEBUG [11861345-a0f7-44bc-a059-d89fab8df4bd] 16844 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 17:47:18.766 DEBUG [11861345-a0f7-44bc-a059-d89fab8df4bd] 16844 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:47:18.769 DEBUG [11861345-a0f7-44bc-a059-d89fab8df4bd] 16844 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 17:47:18.874  INFO [11861345-a0f7-44bc-a059-d89fab8df4bd] 16844 --- [nio-8080-exec-9] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 17:47:18.875  INFO [11861345-a0f7-44bc-a059-d89fab8df4bd] 16844 --- [nio-8080-exec-9] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 17:47:18.884  INFO [11861345-a0f7-44bc-a059-d89fab8df4bd] 16844 --- [nio-8080-exec-9] o.e.x.services.TicketServiceImpl         : Found 1 tickets eligible for check-in for user 4
2025-06-29 17:47:18.906 DEBUG [ed193f2f-fb15-45ef-916e-392af24d544c] 16844 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 17:47:19.003 DEBUG [ed193f2f-fb15-45ef-916e-392af24d544c] 16844 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:47:19.005 DEBUG [ed193f2f-fb15-45ef-916e-392af24d544c] 16844 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 17:47:19.106  INFO [ed193f2f-fb15-45ef-916e-392af24d544c] 16844 --- [nio-8080-exec-6] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 17:47:19.106  INFO [ed193f2f-fb15-45ef-916e-392af24d544c] 16844 --- [nio-8080-exec-6] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 17:47:19.112  INFO [ed193f2f-fb15-45ef-916e-392af24d544c] 16844 --- [nio-8080-exec-6] o.e.x.services.TicketServiceImpl         : Found 1 tickets eligible for check-in for user 4
2025-06-29 17:47:21.524 DEBUG [7d7c6275-0b08-4e94-b66d-0ff42944527b] 16844 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 17:47:21.640 DEBUG [7d7c6275-0b08-4e94-b66d-0ff42944527b] 16844 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:47:21.642 DEBUG [7d7c6275-0b08-4e94-b66d-0ff42944527b] 16844 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 17:47:21.643  INFO [7d7c6275-0b08-4e94-b66d-0ff42944527b] 16844 --- [io-8080-exec-10] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 17:47:21.643  INFO [7d7c6275-0b08-4e94-b66d-0ff42944527b] 16844 --- [io-8080-exec-10] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 17:47:21.697 DEBUG [e2ea92e7-e24f-41b7-b3e5-5fc22187b7d2] 16844 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 17:47:21.788 DEBUG [e2ea92e7-e24f-41b7-b3e5-5fc22187b7d2] 16844 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:47:21.791 DEBUG [e2ea92e7-e24f-41b7-b3e5-5fc22187b7d2] 16844 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 17:47:21.792  INFO [e2ea92e7-e24f-41b7-b3e5-5fc22187b7d2] 16844 --- [nio-8080-exec-1] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 17:47:21.792  INFO [e2ea92e7-e24f-41b7-b3e5-5fc22187b7d2] 16844 --- [nio-8080-exec-1] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 17:49:32.311 DEBUG [fa68110e-dd65-4953-ab76-6f25688eeeed] 16844 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 17:49:32.444 DEBUG [fa68110e-dd65-4953-ab76-6f25688eeeed] 16844 --- [nio-8080-exec-8] o.s.s.core.session.SessionRegistryImpl   : Registering session 7F730D5BF9D6B4EE3992CF64364525B0, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}])
2025-06-29 17:49:32.445 DEBUG [fa68110e-dd65-4953-ab76-6f25688eeeed] 16844 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@263aecb5]
2025-06-29 17:49:32.447 DEBUG [fa68110e-dd65-4953-ab76-6f25688eeeed] 16844 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me
2025-06-29 17:49:32.449  INFO [fa68110e-dd65-4953-ab76-6f25688eeeed] 16844 --- [nio-8080-exec-8] o.e.x.controllers.UserController         : Request received for current user details: ****@****.***
2025-06-29 17:49:32.648  INFO [fa68110e-dd65-4953-ab76-6f25688eeeed] 16844 --- [nio-8080-exec-8] o.e.x.controllers.UserController         : Returning details for user: ****@****.***
2025-06-29 17:49:32.705 DEBUG [87dbdc83-6b87-4960-b382-51dbb731100f] 16844 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 17:49:32.708 DEBUG [50f298c1-0f8a-400b-b15a-e0ca6cad754c] 16844 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:49:32.708 DEBUG [721bbd86-9882-4ffc-a3a2-9ad31be36d8c] 16844 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 17:49:32.858 DEBUG [721bbd86-9882-4ffc-a3a2-9ad31be36d8c] 16844 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:49:32.858 DEBUG [87dbdc83-6b87-4960-b382-51dbb731100f] 16844 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:49:32.858 DEBUG [50f298c1-0f8a-400b-b15a-e0ca6cad754c] 16844 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:49:32.860 DEBUG [50f298c1-0f8a-400b-b15a-e0ca6cad754c] 16844 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:49:32.861 DEBUG [721bbd86-9882-4ffc-a3a2-9ad31be36d8c] 16844 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 17:49:32.861 DEBUG [87dbdc83-6b87-4960-b382-51dbb731100f] 16844 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 17:49:32.861  INFO [50f298c1-0f8a-400b-b15a-e0ca6cad754c] 16844 --- [io-8080-exec-10] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:49:32.992  INFO [721bbd86-9882-4ffc-a3a2-9ad31be36d8c] 16844 --- [nio-8080-exec-6] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 17:49:32.993  WARN [87dbdc83-6b87-4960-b382-51dbb731100f] 16844 --- [nio-8080-exec-9] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 17:49:32.993  INFO [721bbd86-9882-4ffc-a3a2-9ad31be36d8c] 16844 --- [nio-8080-exec-6] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 17:49:32.994  WARN [87dbdc83-6b87-4960-b382-51dbb731100f] 16844 --- [nio-8080-exec-9] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 17:49:32.999  INFO [50f298c1-0f8a-400b-b15a-e0ca6cad754c] 16844 --- [io-8080-exec-10] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 17:49:33.001  INFO [721bbd86-9882-4ffc-a3a2-9ad31be36d8c] 16844 --- [nio-8080-exec-6] o.e.x.services.TicketServiceImpl         : Found 1 tickets eligible for check-in for user 4
2025-06-29 17:49:33.008 DEBUG [fe89fbdb-217f-4f48-b08d-e0600f95fab3] 16844 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 17:49:33.020 DEBUG [31922c4b-de70-4061-9cad-1d240c495d79] 16844 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 17:49:33.150 DEBUG [fe89fbdb-217f-4f48-b08d-e0600f95fab3] 16844 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:49:33.154 DEBUG [fe89fbdb-217f-4f48-b08d-e0600f95fab3] 16844 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 17:49:33.161 DEBUG [31922c4b-de70-4061-9cad-1d240c495d79] 16844 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:49:33.164 DEBUG [31922c4b-de70-4061-9cad-1d240c495d79] 16844 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 17:49:33.308  WARN [fe89fbdb-217f-4f48-b08d-e0600f95fab3] 16844 --- [nio-8080-exec-1] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 17:49:33.309  WARN [fe89fbdb-217f-4f48-b08d-e0600f95fab3] 16844 --- [nio-8080-exec-1] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 17:49:33.313  INFO [31922c4b-de70-4061-9cad-1d240c495d79] 16844 --- [nio-8080-exec-3] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 17:49:33.313  INFO [31922c4b-de70-4061-9cad-1d240c495d79] 16844 --- [nio-8080-exec-3] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 17:49:33.332  INFO [31922c4b-de70-4061-9cad-1d240c495d79] 16844 --- [nio-8080-exec-3] o.e.x.services.TicketServiceImpl         : Found 1 tickets eligible for check-in for user 4
2025-06-29 17:49:45.142 DEBUG [3440479c-fcd2-4acb-b0e3-afa36bc5049c] 16844 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 17:49:45.176 DEBUG [2a934e6d-915c-4b53-8983-bddd3410f7db] 16844 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 17:49:45.319 DEBUG [3440479c-fcd2-4acb-b0e3-afa36bc5049c] 16844 --- [nio-8080-exec-4] o.s.s.core.session.SessionRegistryImpl   : Registering session DA55B437135CC5BB708CA5CA931BEC5F, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}])
2025-06-29 17:49:45.320 DEBUG [3440479c-fcd2-4acb-b0e3-afa36bc5049c] 16844 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@240bced0]
2025-06-29 17:49:45.322 DEBUG [3440479c-fcd2-4acb-b0e3-afa36bc5049c] 16844 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me
2025-06-29 17:49:45.323  INFO [3440479c-fcd2-4acb-b0e3-afa36bc5049c] 16844 --- [nio-8080-exec-4] o.e.x.controllers.UserController         : Request received for current user details: ****@****.***
2025-06-29 17:49:45.342 DEBUG [2a934e6d-915c-4b53-8983-bddd3410f7db] 16844 --- [nio-8080-exec-2] o.s.s.core.session.SessionRegistryImpl   : Registering session 1F863D1B8E1DFC010A20644CE5F49D21, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}])
2025-06-29 17:49:45.343 DEBUG [2a934e6d-915c-4b53-8983-bddd3410f7db] 16844 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@595e0995]
2025-06-29 17:49:45.345 DEBUG [2a934e6d-915c-4b53-8983-bddd3410f7db] 16844 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me
2025-06-29 17:49:45.346  INFO [2a934e6d-915c-4b53-8983-bddd3410f7db] 16844 --- [nio-8080-exec-2] o.e.x.controllers.UserController         : Request received for current user details: ****@****.***
2025-06-29 17:49:45.458  INFO [3440479c-fcd2-4acb-b0e3-afa36bc5049c] 16844 --- [nio-8080-exec-4] o.e.x.controllers.UserController         : Returning details for user: ****@****.***
2025-06-29 17:49:45.479  INFO [2a934e6d-915c-4b53-8983-bddd3410f7db] 16844 --- [nio-8080-exec-2] o.e.x.controllers.UserController         : Returning details for user: ****@****.***
2025-06-29 17:49:45.547 DEBUG [e538273d-be32-46ce-a9af-d4a0f9bdedd8] 16844 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 17:49:45.553 DEBUG [96aa8703-6c79-4774-8ca4-c2b6ddcb79f7] 16844 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:49:45.553 DEBUG [baa885f2-3663-492b-954e-1f36edbd237b] 16844 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 17:49:45.556 DEBUG [55abed30-52c1-4a29-9b2a-d58e951f0557] 16844 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 17:49:45.560 DEBUG [d1b88261-65f5-4156-96c7-404e2e0d9c08] 16844 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 17:49:45.747 DEBUG [e538273d-be32-46ce-a9af-d4a0f9bdedd8] 16844 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:49:45.750 DEBUG [e538273d-be32-46ce-a9af-d4a0f9bdedd8] 16844 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 17:49:45.749 DEBUG [baa885f2-3663-492b-954e-1f36edbd237b] 16844 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:49:45.752 DEBUG [baa885f2-3663-492b-954e-1f36edbd237b] 16844 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 17:49:45.756 DEBUG [96aa8703-6c79-4774-8ca4-c2b6ddcb79f7] 16844 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:49:45.759 DEBUG [96aa8703-6c79-4774-8ca4-c2b6ddcb79f7] 16844 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:49:45.761  INFO [96aa8703-6c79-4774-8ca4-c2b6ddcb79f7] 16844 --- [nio-8080-exec-8] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:49:45.766 DEBUG [d1b88261-65f5-4156-96c7-404e2e0d9c08] 16844 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:49:45.769 DEBUG [d1b88261-65f5-4156-96c7-404e2e0d9c08] 16844 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 17:49:45.773 DEBUG [55abed30-52c1-4a29-9b2a-d58e951f0557] 16844 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:49:45.776 DEBUG [55abed30-52c1-4a29-9b2a-d58e951f0557] 16844 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 17:49:45.938  INFO [baa885f2-3663-492b-954e-1f36edbd237b] 16844 --- [nio-8080-exec-7] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 17:49:45.942  INFO [baa885f2-3663-492b-954e-1f36edbd237b] 16844 --- [nio-8080-exec-7] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 17:49:45.948  WARN [e538273d-be32-46ce-a9af-d4a0f9bdedd8] 16844 --- [nio-8080-exec-5] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 17:49:45.959  WARN [e538273d-be32-46ce-a9af-d4a0f9bdedd8] 16844 --- [nio-8080-exec-5] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 17:49:46.059  INFO [baa885f2-3663-492b-954e-1f36edbd237b] 16844 --- [nio-8080-exec-7] o.e.x.services.TicketServiceImpl         : Found 1 tickets eligible for check-in for user 4
2025-06-29 17:49:46.059  INFO [d1b88261-65f5-4156-96c7-404e2e0d9c08] 16844 --- [io-8080-exec-10] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 17:49:46.060  INFO [d1b88261-65f5-4156-96c7-404e2e0d9c08] 16844 --- [io-8080-exec-10] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 17:49:46.068  INFO [96aa8703-6c79-4774-8ca4-c2b6ddcb79f7] 16844 --- [nio-8080-exec-8] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 17:49:46.071  WARN [55abed30-52c1-4a29-9b2a-d58e951f0557] 16844 --- [nio-8080-exec-9] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 17:49:46.071  WARN [55abed30-52c1-4a29-9b2a-d58e951f0557] 16844 --- [nio-8080-exec-9] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 17:49:46.072  INFO [d1b88261-65f5-4156-96c7-404e2e0d9c08] 16844 --- [io-8080-exec-10] o.e.x.services.TicketServiceImpl         : Found 1 tickets eligible for check-in for user 4
2025-06-29 17:50:36.254 DEBUG [8ac59c68-573a-4a96-8fa2-e4d9acee2450] 16844 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/nearby?origin=OTP
2025-06-29 17:50:36.257 DEBUG [8ac59c68-573a-4a96-8fa2-e4d9acee2450] 16844 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/nearby?origin=OTP
2025-06-29 17:50:36.259  INFO [8ac59c68-573a-4a96-8fa2-e4d9acee2450] 16844 --- [nio-8080-exec-6] o.e.x.controllers.FlightController       : Received request for nearby flights from origin: OTP, departureDate: null
2025-06-29 17:50:36.259  INFO [8ac59c68-573a-4a96-8fa2-e4d9acee2450] 16844 --- [nio-8080-exec-6] o.e.x.controllers.FlightController       : Using search date: 2025-06-29
2025-06-29 17:50:36.260  INFO [8ac59c68-573a-4a96-8fa2-e4d9acee2450] 16844 --- [nio-8080-exec-6] o.e.x.controllers.FlightController       : Cache key: OTP-2025-06-29
2025-06-29 17:50:36.260  INFO [8ac59c68-573a-4a96-8fa2-e4d9acee2450] 16844 --- [nio-8080-exec-6] o.e.x.controllers.FlightController       : Returning cached nearby flights for origin: OTP, found 6 flights
2025-06-29 17:50:36.261 DEBUG [8ac59c68-573a-4a96-8fa2-e4d9acee2450] 16844 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:50:39.955 DEBUG [48b52a44-4ad9-45ce-815b-ee94b3ce1639] 16844 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-29 17:50:39.957 DEBUG [48b52a44-4ad9-45ce-815b-ee94b3ce1639] 16844 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-29 17:50:39.958  INFO [48b52a44-4ad9-45ce-815b-ee94b3ce1639] 16844 --- [nio-8080-exec-1] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris
2025-06-29 17:50:39.958  INFO [48b52a44-4ad9-45ce-815b-ee94b3ce1639] 16844 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-29 17:50:39.959  INFO [48b52a44-4ad9-45ce-815b-ee94b3ce1639] 16844 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-29 17:50:39.959 DEBUG [48b52a44-4ad9-45ce-815b-ee94b3ce1639] 16844 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-29).    For example, if today is 2025-06-29, a good departure date would be between 2025-07-06 and 2025-07-13, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris";
2025-06-29 17:50:39.961  INFO [48b52a44-4ad9-45ce-815b-ee94b3ce1639] 16844 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-29 17:50:39.961  INFO [48b52a44-4ad9-45ce-815b-ee94b3ce1639] 16844 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-29 17:50:39.961  INFO [48b52a44-4ad9-45ce-815b-ee94b3ce1639] 16844 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-29 17:50:39.962  INFO [48b52a44-4ad9-45ce-815b-ee94b3ce1639] 16844 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 17:50:39.962  INFO [48b52a44-4ad9-45ce-815b-ee94b3ce1639] 16844 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-29 17:50:39.964  INFO [48b52a44-4ad9-45ce-815b-ee94b3ce1639] 16844 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-29 17:50:39.964  INFO [48b52a44-4ad9-45ce-815b-ee94b3ce1639] 16844 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-29 17:50:39.964  INFO [48b52a44-4ad9-45ce-815b-ee94b3ce1639] 16844 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-29 17:50:39.964  INFO [48b52a44-4ad9-45ce-815b-ee94b3ce1639] 16844 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-29 17:50:41.849  INFO [48b52a44-4ad9-45ce-815b-ee94b3ce1639] 16844 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-29 17:50:41.849  INFO [48b52a44-4ad9-45ce-815b-ee94b3ce1639] 16844 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Response length: 195 characters
2025-06-29 17:50:41.850 DEBUG [48b52a44-4ad9-45ce-815b-ee94b3ce1639] 16844 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-06",
  "returnDate": "2025-07-08",
  "tripType": "roundTrip",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-29 17:50:41.851 DEBUG [48b52a44-4ad9-45ce-815b-ee94b3ce1639] 16844 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-29 17:50:41.851 DEBUG [48b52a44-4ad9-45ce-815b-ee94b3ce1639] 16844 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-29 17:50:41.851 DEBUG [48b52a44-4ad9-45ce-815b-ee94b3ce1639] 16844 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-29 17:50:41.852 DEBUG [48b52a44-4ad9-45ce-815b-ee94b3ce1639] 16844 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 17:50:41.852  INFO [48b52a44-4ad9-45ce-815b-ee94b3ce1639] 16844 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 17:50:41.852  INFO [48b52a44-4ad9-45ce-815b-ee94b3ce1639] 16844 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-06, returnDate=2025-07-08, tripType=roundTrip, adults=1, children=0, infants=0
2025-06-29 17:50:41.852  INFO [48b52a44-4ad9-45ce-815b-ee94b3ce1639] 16844 --- [nio-8080-exec-1] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-29 17:50:41.854 DEBUG [48b52a44-4ad9-45ce-815b-ee94b3ce1639] 16844 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:50:44.221 DEBUG [7f24dbc3-cf9c-4423-b48f-f289c750ad77] 16844 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-29 17:50:44.222 DEBUG [7f24dbc3-cf9c-4423-b48f-f289c750ad77] 16844 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-29 17:50:44.223  INFO [7f24dbc3-cf9c-4423-b48f-f289c750ad77] 16844 --- [nio-8080-exec-2] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris one way
2025-06-29 17:50:44.224  INFO [7f24dbc3-cf9c-4423-b48f-f289c750ad77] 16844 --- [nio-8080-exec-2] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-29 17:50:44.224  INFO [7f24dbc3-cf9c-4423-b48f-f289c750ad77] 16844 --- [nio-8080-exec-2] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-29 17:50:44.225 DEBUG [7f24dbc3-cf9c-4423-b48f-f289c750ad77] 16844 --- [nio-8080-exec-2] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-29).    For example, if today is 2025-06-29, a good departure date would be between 2025-07-06 and 2025-07-13, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris one way";
2025-06-29 17:50:44.226  INFO [7f24dbc3-cf9c-4423-b48f-f289c750ad77] 16844 --- [nio-8080-exec-2] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-29 17:50:44.227  INFO [7f24dbc3-cf9c-4423-b48f-f289c750ad77] 16844 --- [nio-8080-exec-2] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-29 17:50:44.227  INFO [7f24dbc3-cf9c-4423-b48f-f289c750ad77] 16844 --- [nio-8080-exec-2] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-29 17:50:44.227  INFO [7f24dbc3-cf9c-4423-b48f-f289c750ad77] 16844 --- [nio-8080-exec-2] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 17:50:44.227  INFO [7f24dbc3-cf9c-4423-b48f-f289c750ad77] 16844 --- [nio-8080-exec-2] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-29 17:50:44.228  INFO [7f24dbc3-cf9c-4423-b48f-f289c750ad77] 16844 --- [nio-8080-exec-2] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-29 17:50:44.228  INFO [7f24dbc3-cf9c-4423-b48f-f289c750ad77] 16844 --- [nio-8080-exec-2] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-29 17:50:44.228  INFO [7f24dbc3-cf9c-4423-b48f-f289c750ad77] 16844 --- [nio-8080-exec-2] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-29 17:50:44.229  INFO [7f24dbc3-cf9c-4423-b48f-f289c750ad77] 16844 --- [nio-8080-exec-2] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-29 17:50:45.866  INFO [7f24dbc3-cf9c-4423-b48f-f289c750ad77] 16844 --- [nio-8080-exec-2] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-29 17:50:45.866  INFO [7f24dbc3-cf9c-4423-b48f-f289c750ad77] 16844 --- [nio-8080-exec-2] o.e.x.services.GeminiServiceImpl         : Response length: 184 characters
2025-06-29 17:50:45.867 DEBUG [7f24dbc3-cf9c-4423-b48f-f289c750ad77] 16844 --- [nio-8080-exec-2] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-06",
  "returnDate": null,
  "tripType": "oneWay",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-29 17:50:45.867 DEBUG [7f24dbc3-cf9c-4423-b48f-f289c750ad77] 16844 --- [nio-8080-exec-2] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-29 17:50:45.868 DEBUG [7f24dbc3-cf9c-4423-b48f-f289c750ad77] 16844 --- [nio-8080-exec-2] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-29 17:50:45.868 DEBUG [7f24dbc3-cf9c-4423-b48f-f289c750ad77] 16844 --- [nio-8080-exec-2] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-29 17:50:45.868 DEBUG [7f24dbc3-cf9c-4423-b48f-f289c750ad77] 16844 --- [nio-8080-exec-2] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 17:50:45.868  INFO [7f24dbc3-cf9c-4423-b48f-f289c750ad77] 16844 --- [nio-8080-exec-2] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 17:50:45.868  INFO [7f24dbc3-cf9c-4423-b48f-f289c750ad77] 16844 --- [nio-8080-exec-2] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-06, returnDate=null, tripType=oneWay, adults=1, children=0, infants=0
2025-06-29 17:50:45.869  INFO [7f24dbc3-cf9c-4423-b48f-f289c750ad77] 16844 --- [nio-8080-exec-2] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-29 17:50:45.870 DEBUG [7f24dbc3-cf9c-4423-b48f-f289c750ad77] 16844 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:50:47.481 DEBUG [95c895a5-70be-4ab1-b656-796b0aa859ff] 16844 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 17:50:47.597 DEBUG [95c895a5-70be-4ab1-b656-796b0aa859ff] 16844 --- [nio-8080-exec-5] o.s.s.core.session.SessionRegistryImpl   : Registering session 49D4BEC45BBCBB6DC7A72B220083BF4A, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}])
2025-06-29 17:50:47.598 DEBUG [95c895a5-70be-4ab1-b656-796b0aa859ff] 16844 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@32a7aba6]
2025-06-29 17:50:47.599 DEBUG [95c895a5-70be-4ab1-b656-796b0aa859ff] 16844 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me
2025-06-29 17:50:47.600  INFO [95c895a5-70be-4ab1-b656-796b0aa859ff] 16844 --- [nio-8080-exec-5] o.e.x.controllers.UserController         : Request received for current user details: ****@****.***
2025-06-29 17:50:47.704  INFO [95c895a5-70be-4ab1-b656-796b0aa859ff] 16844 --- [nio-8080-exec-5] o.e.x.controllers.UserController         : Returning details for user: ****@****.***
2025-06-29 17:50:47.767 DEBUG [af3c91c6-ddd8-424d-b23f-261b4bd56997] 16844 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 17:50:47.772 DEBUG [b4a1c51b-6656-44ff-b956-075a3c337caa] 16844 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:50:47.772 DEBUG [27a3be65-925e-4399-b690-1e22aac5dca4] 16844 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 17:50:47.774 DEBUG [27a3be65-925e-4399-b690-1e22aac5dca4] 16844 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 17:50:47.777  INFO [27a3be65-925e-4399-b690-1e22aac5dca4] 16844 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 17:50:47.783  INFO [27a3be65-925e-4399-b690-1e22aac5dca4] 16844 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 17:50:47.846  INFO [27a3be65-925e-4399-b690-1e22aac5dca4] 16844 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 17:50:47.847 DEBUG [27a3be65-925e-4399-b690-1e22aac5dca4] 16844 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:50:47.854 DEBUG [c6be11f9-e5ff-4381-b680-81c814f4bc5b] 16844 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 17:50:47.855 DEBUG [c6be11f9-e5ff-4381-b680-81c814f4bc5b] 16844 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 17:50:47.856  INFO [c6be11f9-e5ff-4381-b680-81c814f4bc5b] 16844 --- [io-8080-exec-10] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 17:50:47.856  INFO [c6be11f9-e5ff-4381-b680-81c814f4bc5b] 16844 --- [io-8080-exec-10] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 17:50:47.888 DEBUG [d66a0af6-5c7b-4b7b-9d01-6c05b34c3a55] 16844 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 17:50:47.890 DEBUG [d66a0af6-5c7b-4b7b-9d01-6c05b34c3a55] 16844 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 17:50:47.891  INFO [d66a0af6-5c7b-4b7b-9d01-6c05b34c3a55] 16844 --- [nio-8080-exec-6] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 17:50:47.913 DEBUG [af3c91c6-ddd8-424d-b23f-261b4bd56997] 16844 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:50:47.915 DEBUG [af3c91c6-ddd8-424d-b23f-261b4bd56997] 16844 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 17:50:47.922  INFO [c6be11f9-e5ff-4381-b680-81c814f4bc5b] 16844 --- [io-8080-exec-10] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 17:50:47.922 DEBUG [b4a1c51b-6656-44ff-b956-075a3c337caa] 16844 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:50:47.924 DEBUG [b4a1c51b-6656-44ff-b956-075a3c337caa] 16844 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:50:47.924 DEBUG [c6be11f9-e5ff-4381-b680-81c814f4bc5b] 16844 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:50:47.924  INFO [b4a1c51b-6656-44ff-b956-075a3c337caa] 16844 --- [nio-8080-exec-9] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:50:48.021  WARN [af3c91c6-ddd8-424d-b23f-261b4bd56997] 16844 --- [nio-8080-exec-7] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 17:50:48.021  WARN [af3c91c6-ddd8-424d-b23f-261b4bd56997] 16844 --- [nio-8080-exec-7] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 17:50:48.030 DEBUG [90dbac9b-06e9-4ae4-b6c8-728c2758b835] 16844 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 17:50:48.039  INFO [b4a1c51b-6656-44ff-b956-075a3c337caa] 16844 --- [nio-8080-exec-9] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 17:50:48.083  INFO [d66a0af6-5c7b-4b7b-9d01-6c05b34c3a55] 16844 --- [nio-8080-exec-6] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 17:50:48.085 DEBUG [d66a0af6-5c7b-4b7b-9d01-6c05b34c3a55] 16844 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:50:48.093 DEBUG [d56917fd-2b86-4ff1-aa43-5d3e4e55fc34] 16844 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 17:50:48.095 DEBUG [d56917fd-2b86-4ff1-aa43-5d3e4e55fc34] 16844 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 17:50:48.096  INFO [d56917fd-2b86-4ff1-aa43-5d3e4e55fc34] 16844 --- [nio-8080-exec-3] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 17:50:48.107 DEBUG [7cc8cf6b-ff4a-4b5f-8b9d-958e9cd782d4] 16844 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 17:50:48.108 DEBUG [7cc8cf6b-ff4a-4b5f-8b9d-958e9cd782d4] 16844 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 17:50:48.109  INFO [7cc8cf6b-ff4a-4b5f-8b9d-958e9cd782d4] 16844 --- [nio-8080-exec-4] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 17:50:48.144  INFO [d56917fd-2b86-4ff1-aa43-5d3e4e55fc34] 16844 --- [nio-8080-exec-3] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 17:50:48.147 DEBUG [d56917fd-2b86-4ff1-aa43-5d3e4e55fc34] 16844 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:50:48.155 DEBUG [90dbac9b-06e9-4ae4-b6c8-728c2758b835] 16844 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:50:48.157 DEBUG [90dbac9b-06e9-4ae4-b6c8-728c2758b835] 16844 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 17:50:48.278  WARN [90dbac9b-06e9-4ae4-b6c8-728c2758b835] 16844 --- [nio-8080-exec-1] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 17:50:48.279  WARN [90dbac9b-06e9-4ae4-b6c8-728c2758b835] 16844 --- [nio-8080-exec-1] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 17:50:48.306  INFO [7cc8cf6b-ff4a-4b5f-8b9d-958e9cd782d4] 16844 --- [nio-8080-exec-4] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 17:50:48.307 DEBUG [7cc8cf6b-ff4a-4b5f-8b9d-958e9cd782d4] 16844 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:50:48.314 DEBUG [011d0439-8dba-49c5-a4af-ddb6977d5414] 16844 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 17:50:48.315 DEBUG [011d0439-8dba-49c5-a4af-ddb6977d5414] 16844 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 17:50:48.316  INFO [011d0439-8dba-49c5-a4af-ddb6977d5414] 16844 --- [nio-8080-exec-2] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 17:50:48.362  INFO [011d0439-8dba-49c5-a4af-ddb6977d5414] 16844 --- [nio-8080-exec-2] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 17:50:48.364 DEBUG [011d0439-8dba-49c5-a4af-ddb6977d5414] 16844 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:50:51.964 DEBUG [a81575cb-382c-47aa-b24d-15a61926a5e3] 16844 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 17:50:52.056 DEBUG [a81575cb-382c-47aa-b24d-15a61926a5e3] 16844 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:50:52.059 DEBUG [a81575cb-382c-47aa-b24d-15a61926a5e3] 16844 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 17:50:52.060  INFO [a81575cb-382c-47aa-b24d-15a61926a5e3] 16844 --- [nio-8080-exec-5] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 17:50:52.060  INFO [a81575cb-382c-47aa-b24d-15a61926a5e3] 16844 --- [nio-8080-exec-5] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 17:50:52.102 DEBUG [729c663a-667f-47ae-ac90-886c14e816e3] 16844 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 17:50:52.195 DEBUG [729c663a-667f-47ae-ac90-886c14e816e3] 16844 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:50:52.197 DEBUG [729c663a-667f-47ae-ac90-886c14e816e3] 16844 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 17:50:52.198  INFO [729c663a-667f-47ae-ac90-886c14e816e3] 16844 --- [nio-8080-exec-8] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 17:50:52.198  INFO [729c663a-667f-47ae-ac90-886c14e816e3] 16844 --- [nio-8080-exec-8] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 17:50:52.242 DEBUG [d4a68cab-4465-482a-884e-cb0ebe6f7e19] 16844 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 17:50:52.347 DEBUG [d4a68cab-4465-482a-884e-cb0ebe6f7e19] 16844 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:50:52.350 DEBUG [d4a68cab-4465-482a-884e-cb0ebe6f7e19] 16844 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 17:50:52.351  INFO [d4a68cab-4465-482a-884e-cb0ebe6f7e19] 16844 --- [io-8080-exec-10] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 17:50:52.351  INFO [d4a68cab-4465-482a-884e-cb0ebe6f7e19] 16844 --- [io-8080-exec-10] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 17:50:56.610 DEBUG [ce8426be-ca2a-4065-80d2-ff8880e79b81] 16844 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/cart/add
2025-06-29 17:50:56.705 DEBUG [ce8426be-ca2a-4065-80d2-ff8880e79b81] 16844 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:50:56.707 DEBUG [ce8426be-ca2a-4065-80d2-ff8880e79b81] 16844 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/cart/add
2025-06-29 17:50:56.797  INFO [ce8426be-ca2a-4065-80d2-ff8880e79b81] 16844 --- [nio-8080-exec-7] o.e.x.controllers.CartController         : User ****@****.*** request to add flight ID 16 to persistent cart
2025-06-29 17:50:56.807  INFO [ce8426be-ca2a-4065-80d2-ff8880e79b81] 16844 --- [nio-8080-exec-7] o.e.xlr8travel.services.CartServiceImpl  : Added new flight ID 16 to cart for user ****@****.***
2025-06-29 17:50:56.827  INFO [ce8426be-ca2a-4065-80d2-ff8880e79b81] 16844 --- [nio-8080-exec-7] o.e.x.controllers.CartController         : Flight ID 16 added/incremented in persistent cart for user ****@****.***.
2025-06-29 17:50:56.838 DEBUG [f7c67a97-c9c0-4097-84e7-6f795c406ac0] 16844 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:50:56.951 DEBUG [f7c67a97-c9c0-4097-84e7-6f795c406ac0] 16844 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:50:56.953 DEBUG [f7c67a97-c9c0-4097-84e7-6f795c406ac0] 16844 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:50:56.953  INFO [f7c67a97-c9c0-4097-84e7-6f795c406ac0] 16844 --- [nio-8080-exec-9] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:50:57.063  INFO [f7c67a97-c9c0-4097-84e7-6f795c406ac0] 16844 --- [nio-8080-exec-9] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 17:50:57.142 DEBUG [6b80a171-9e01-497c-b7d2-f9f3060fb0a5] 16844 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:50:57.245 DEBUG [6b80a171-9e01-497c-b7d2-f9f3060fb0a5] 16844 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:50:57.247 DEBUG [6b80a171-9e01-497c-b7d2-f9f3060fb0a5] 16844 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:50:57.247  INFO [6b80a171-9e01-497c-b7d2-f9f3060fb0a5] 16844 --- [nio-8080-exec-6] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:50:57.343  INFO [6b80a171-9e01-497c-b7d2-f9f3060fb0a5] 16844 --- [nio-8080-exec-6] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 17:50:57.350 DEBUG [e079ccc0-4425-419f-9d8d-a66b46d93cf3] 16844 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:50:57.449 DEBUG [e079ccc0-4425-419f-9d8d-a66b46d93cf3] 16844 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:50:57.451 DEBUG [e079ccc0-4425-419f-9d8d-a66b46d93cf3] 16844 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:50:57.452  INFO [e079ccc0-4425-419f-9d8d-a66b46d93cf3] 16844 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:50:57.555  INFO [e079ccc0-4425-419f-9d8d-a66b46d93cf3] 16844 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 17:50:59.244 DEBUG [4f8b5e86-bb67-4161-9eb6-2f2e701fce4f] 16844 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:50:59.364 DEBUG [4f8b5e86-bb67-4161-9eb6-2f2e701fce4f] 16844 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:50:59.366 DEBUG [4f8b5e86-bb67-4161-9eb6-2f2e701fce4f] 16844 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:50:59.366  INFO [4f8b5e86-bb67-4161-9eb6-2f2e701fce4f] 16844 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:50:59.469  INFO [4f8b5e86-bb67-4161-9eb6-2f2e701fce4f] 16844 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 17:50:59.476 DEBUG [b05f690a-3b12-4def-b382-82c97c448956] 16844 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:50:59.593 DEBUG [b05f690a-3b12-4def-b382-82c97c448956] 16844 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:50:59.595 DEBUG [b05f690a-3b12-4def-b382-82c97c448956] 16844 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:50:59.595  INFO [b05f690a-3b12-4def-b382-82c97c448956] 16844 --- [nio-8080-exec-4] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:50:59.726  INFO [b05f690a-3b12-4def-b382-82c97c448956] 16844 --- [nio-8080-exec-4] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 17:51:07.028 DEBUG [5927d9a3-dc60-43e9-9a79-3620de4fa24c] 16844 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/checkout/create-payment-intent
2025-06-29 17:51:07.029 DEBUG [5927d9a3-dc60-43e9-9a79-3620de4fa24c] 16844 --- [nio-8080-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 17:51:07.030 DEBUG [5927d9a3-dc60-43e9-9a79-3620de4fa24c] 16844 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /api/checkout/create-payment-intent
2025-06-29 17:51:07.034  INFO [5927d9a3-dc60-43e9-9a79-3620de4fa24c] 16844 --- [nio-8080-exec-2] o.e.x.controllers.PaymentController      : Creating payment intent for amount: 23995 ron
2025-06-29 17:51:07.520  INFO [5927d9a3-dc60-43e9-9a79-3620de4fa24c] 16844 --- [nio-8080-exec-2] o.e.x.controllers.PaymentController      : Payment intent created successfully: pi_3RfMZTGf8s1WZJnq1Ox0W0zN
2025-06-29 17:51:08.685 DEBUG [39f3054c-3dc8-4054-b175-8d808b19a78c] 16844 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /api/checkout/confirm
2025-06-29 17:51:08.778 DEBUG [39f3054c-3dc8-4054-b175-8d808b19a78c] 16844 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:51:08.780 DEBUG [39f3054c-3dc8-4054-b175-8d808b19a78c] 16844 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured POST /api/checkout/confirm
2025-06-29 17:51:08.781  INFO [39f3054c-3dc8-4054-b175-8d808b19a78c] 16844 --- [nio-8080-exec-5] o.e.x.controllers.CheckoutController     : Received purchase confirmation request.
2025-06-29 17:51:08.868  INFO [39f3054c-3dc8-4054-b175-8d808b19a78c] 16844 --- [nio-8080-exec-5] o.e.x.controllers.CheckoutController     : Processing purchase for user: ****@****.***
2025-06-29 17:51:08.875  INFO [39f3054c-3dc8-4054-b175-8d808b19a78c] 16844 --- [nio-8080-exec-5] o.e.x.controllers.CheckoutController     : User ****@****.*** persistent cart has 1 items.
2025-06-29 17:51:08.875  WARN [39f3054c-3dc8-4054-b175-8d808b19a78c] 16844 --- [nio-8080-exec-5] o.e.x.controllers.CheckoutController     : !!! SIMULATING successful payment processing for user ****@****.*** !!!
2025-06-29 17:51:08.876  INFO [39f3054c-3dc8-4054-b175-8d808b19a78c] 16844 --- [nio-8080-exec-5] o.e.x.services.OrderServiceImpl          : Creating order from persistent cart for user: ****@****.***
2025-06-29 17:51:08.881  INFO [39f3054c-3dc8-4054-b175-8d808b19a78c] 16844 --- [nio-8080-exec-5] o.e.x.services.OrderServiceImpl          : Order 2 created for user ****@****.***, status: PENDING_PAYMENT. Total: 37.99
2025-06-29 17:51:08.881  INFO [39f3054c-3dc8-4054-b175-8d808b19a78c] 16844 --- [nio-8080-exec-5] o.e.x.services.OrderServiceImpl          : Ticket has baggage type: BAGGAGE_TYPE_WEIGHT_CARRY_ON_0
2025-06-29 17:51:10.088  INFO [39f3054c-3dc8-4054-b175-8d808b19a78c] 16844 --- [nio-8080-exec-5] o.e.x.services.EmailServiceImpl          : Purchase confirmation email sent to ****@****.***
2025-06-29 17:51:10.089  INFO [39f3054c-3dc8-4054-b175-8d808b19a78c] 16844 --- [nio-8080-exec-5] o.e.x.services.OrderServiceImpl          : Purchase confirmation email sent to user: ****@****.***
2025-06-29 17:51:10.105  INFO [39f3054c-3dc8-4054-b175-8d808b19a78c] 16844 --- [nio-8080-exec-5] o.e.x.controllers.CheckoutController     : Order successfully created for user ****@****.***. Confirmation: 2
2025-06-29 17:51:10.112  INFO [39f3054c-3dc8-4054-b175-8d808b19a78c] 16844 --- [nio-8080-exec-5] o.e.xlr8travel.services.CartServiceImpl  : Clearing 1 items from cart for user ****@****.***
2025-06-29 17:51:10.139  INFO [39f3054c-3dc8-4054-b175-8d808b19a78c] 16844 --- [nio-8080-exec-5] o.e.x.controllers.CheckoutController     : Persistent cart cleared for user ****@****.***.
2025-06-29 17:51:10.151 DEBUG [6542323e-675c-4e5d-9949-edc3ada9a70a] 16844 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing DELETE /api/cart/remove/16
2025-06-29 17:51:10.257 DEBUG [6542323e-675c-4e5d-9949-edc3ada9a70a] 16844 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:51:10.258 DEBUG [6542323e-675c-4e5d-9949-edc3ada9a70a] 16844 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured DELETE /api/cart/remove/16
2025-06-29 17:51:10.356  INFO [6542323e-675c-4e5d-9949-edc3ada9a70a] 16844 --- [nio-8080-exec-8] o.e.x.controllers.CartController         : User ****@****.*** request to remove flight ID 16 from persistent cart
2025-06-29 17:51:10.365  WARN [6542323e-675c-4e5d-9949-edc3ada9a70a] 16844 --- [nio-8080-exec-8] o.e.xlr8travel.services.CartServiceImpl  : Attempted to remove flight ID 16 not found in cart for user ****@****.***
2025-06-29 17:51:10.368  WARN [6542323e-675c-4e5d-9949-edc3ada9a70a] 16844 --- [nio-8080-exec-8] o.e.x.controllers.CartController         : Attempted to remove flight ID 16 not found in persistent cart for user ****@****.***
2025-06-29 17:51:10.379 DEBUG [2db02b3e-0f59-4b25-ad68-b5dba16df456] 16844 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:51:10.482 DEBUG [2db02b3e-0f59-4b25-ad68-b5dba16df456] 16844 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:51:10.484 DEBUG [2db02b3e-0f59-4b25-ad68-b5dba16df456] 16844 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:51:10.484  INFO [2db02b3e-0f59-4b25-ad68-b5dba16df456] 16844 --- [io-8080-exec-10] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:51:10.581  INFO [2db02b3e-0f59-4b25-ad68-b5dba16df456] 16844 --- [io-8080-exec-10] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 17:51:12.452 DEBUG [5ad2d624-9058-408e-b413-4b9f8c343874] 16844 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 17:51:12.580 DEBUG [5ad2d624-9058-408e-b413-4b9f8c343874] 16844 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:51:12.583 DEBUG [5ad2d624-9058-408e-b413-4b9f8c343874] 16844 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 17:51:12.681  INFO [5ad2d624-9058-408e-b413-4b9f8c343874] 16844 --- [nio-8080-exec-7] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 17:51:12.682  INFO [5ad2d624-9058-408e-b413-4b9f8c343874] 16844 --- [nio-8080-exec-7] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 17:51:12.687  INFO [5ad2d624-9058-408e-b413-4b9f8c343874] 16844 --- [nio-8080-exec-7] o.e.x.services.TicketServiceImpl         : Found 2 tickets eligible for check-in for user 4
2025-06-29 17:51:12.695 DEBUG [79e977a4-6815-4912-a9cc-237a6e52cf85] 16844 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 17:51:12.813 DEBUG [79e977a4-6815-4912-a9cc-237a6e52cf85] 16844 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:51:12.815 DEBUG [79e977a4-6815-4912-a9cc-237a6e52cf85] 16844 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 17:51:12.905  INFO [79e977a4-6815-4912-a9cc-237a6e52cf85] 16844 --- [nio-8080-exec-9] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 17:51:12.906  INFO [79e977a4-6815-4912-a9cc-237a6e52cf85] 16844 --- [nio-8080-exec-9] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 17:51:12.911  INFO [79e977a4-6815-4912-a9cc-237a6e52cf85] 16844 --- [nio-8080-exec-9] o.e.x.services.TicketServiceImpl         : Found 2 tickets eligible for check-in for user 4
2025-06-29 17:51:16.459 DEBUG [28139a56-bad2-4835-82dc-17aee8f76ca3] 16844 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 17:51:16.556 DEBUG [28139a56-bad2-4835-82dc-17aee8f76ca3] 16844 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:51:16.558 DEBUG [28139a56-bad2-4835-82dc-17aee8f76ca3] 16844 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 17:51:16.558  INFO [28139a56-bad2-4835-82dc-17aee8f76ca3] 16844 --- [nio-8080-exec-6] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 17:51:16.559  INFO [28139a56-bad2-4835-82dc-17aee8f76ca3] 16844 --- [nio-8080-exec-6] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 17:51:16.605 DEBUG [c504b6e4-cf4d-4060-8c6c-24037a8460b4] 16844 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 17:51:16.708 DEBUG [c504b6e4-cf4d-4060-8c6c-24037a8460b4] 16844 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:51:16.709 DEBUG [c504b6e4-cf4d-4060-8c6c-24037a8460b4] 16844 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 17:51:16.710  INFO [c504b6e4-cf4d-4060-8c6c-24037a8460b4] 16844 --- [nio-8080-exec-3] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 17:51:16.710  INFO [c504b6e4-cf4d-4060-8c6c-24037a8460b4] 16844 --- [nio-8080-exec-3] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 17:51:18.707 DEBUG [fd14890e-e68f-43ce-a5d9-8a9675e8e7c4] 16844 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/check-in/3/with-seat
2025-06-29 17:51:18.793 DEBUG [fd14890e-e68f-43ce-a5d9-8a9675e8e7c4] 16844 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:51:18.795 DEBUG [fd14890e-e68f-43ce-a5d9-8a9675e8e7c4] 16844 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/check-in/3/with-seat
2025-06-29 17:51:18.890  INFO [fd14890e-e68f-43ce-a5d9-8a9675e8e7c4] 16844 --- [nio-8080-exec-1] o.e.x.controllers.CheckinController      : Checking in ticket 3 with seat for user: ****@****.***
2025-06-29 17:51:18.897  INFO [fd14890e-e68f-43ce-a5d9-8a9675e8e7c4] 16844 --- [nio-8080-exec-1] o.e.x.services.TicketServiceImpl         : Checking in ticket 3 with seat 1D of type SEAT_TYPE_UPFRONT
2025-06-29 17:51:18.897  INFO [fd14890e-e68f-43ce-a5d9-8a9675e8e7c4] 16844 --- [nio-8080-exec-1] o.e.x.services.TicketServiceImpl         : Checking if seat 1D is booked for flight 16
2025-06-29 17:51:18.904  INFO [fd14890e-e68f-43ce-a5d9-8a9675e8e7c4] 16844 --- [nio-8080-exec-1] o.e.x.services.TicketServiceImpl         : Successfully checked in ticket 3 with seat 1D
2025-06-29 17:51:25.219 DEBUG [dd06db03-0609-46d5-90b9-5bf1f14c0711] 16844 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/check-in/boarding-passes
2025-06-29 17:51:25.219 DEBUG [dca2d3ad-7a4b-4e30-b61d-50a94b738441] 16844 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/check-in/boarding-passes
2025-06-29 17:51:25.228 DEBUG [f35a4846-448f-47ee-abf0-3ef0fab3280c] 16844 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/boarding-passes
2025-06-29 17:51:25.426 DEBUG [f35a4846-448f-47ee-abf0-3ef0fab3280c] 16844 --- [nio-8080-exec-5] o.s.s.core.session.SessionRegistryImpl   : Registering session 97D7E338EE3403482EAF169C5116FEB4, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}])
2025-06-29 17:51:25.427 DEBUG [f35a4846-448f-47ee-abf0-3ef0fab3280c] 16844 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@5f18c0b8]
2025-06-29 17:51:25.432 DEBUG [f35a4846-448f-47ee-abf0-3ef0fab3280c] 16844 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/boarding-passes
2025-06-29 17:51:25.544  INFO [f35a4846-448f-47ee-abf0-3ef0fab3280c] 16844 --- [nio-8080-exec-5] o.e.x.services.TicketServiceImpl         : Finding checked-in tickets for user 4
2025-06-29 17:51:25.552 DEBUG [dead5457-4347-425e-b705-0fa20565afee] 16844 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/boarding-passes
2025-06-29 17:51:25.673 DEBUG [dead5457-4347-425e-b705-0fa20565afee] 16844 --- [nio-8080-exec-8] o.s.s.core.session.SessionRegistryImpl   : Registering session 196D9410F2BDC7CD45513A55B0CB2A8B, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}])
2025-06-29 17:51:25.674 DEBUG [dead5457-4347-425e-b705-0fa20565afee] 16844 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@3f6f5738]
2025-06-29 17:51:25.675 DEBUG [dead5457-4347-425e-b705-0fa20565afee] 16844 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/boarding-passes
2025-06-29 17:51:25.806  INFO [dead5457-4347-425e-b705-0fa20565afee] 16844 --- [nio-8080-exec-8] o.e.x.services.TicketServiceImpl         : Finding checked-in tickets for user 4
2025-06-29 17:52:41.040 DEBUG [912d46c4-6e12-480e-b09b-772ffbd0625a] 16844 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 17:52:41.040 DEBUG [2295cd5c-c83d-4e23-90a4-2cbaab7fcc70] 16844 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 17:52:41.186 DEBUG [2295cd5c-c83d-4e23-90a4-2cbaab7fcc70] 16844 --- [nio-8080-exec-6] o.s.s.core.session.SessionRegistryImpl   : Registering session 3922E48A492D241F517950449B909314, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}])
2025-06-29 17:52:41.186 DEBUG [912d46c4-6e12-480e-b09b-772ffbd0625a] 16844 --- [nio-8080-exec-3] o.s.s.core.session.SessionRegistryImpl   : Registering session CC0FA25532CF15156BD167C853511AFD, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}])
2025-06-29 17:52:41.186 DEBUG [2295cd5c-c83d-4e23-90a4-2cbaab7fcc70] 16844 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@1f276346]
2025-06-29 17:52:41.187 DEBUG [912d46c4-6e12-480e-b09b-772ffbd0625a] 16844 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@260d8f01]
2025-06-29 17:52:41.188 DEBUG [2295cd5c-c83d-4e23-90a4-2cbaab7fcc70] 16844 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me
2025-06-29 17:52:41.188 DEBUG [912d46c4-6e12-480e-b09b-772ffbd0625a] 16844 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me
2025-06-29 17:52:41.188  INFO [2295cd5c-c83d-4e23-90a4-2cbaab7fcc70] 16844 --- [nio-8080-exec-6] o.e.x.controllers.UserController         : Request received for current user details: ****@****.***
2025-06-29 17:52:41.189  INFO [912d46c4-6e12-480e-b09b-772ffbd0625a] 16844 --- [nio-8080-exec-3] o.e.x.controllers.UserController         : Request received for current user details: ****@****.***
2025-06-29 17:52:41.325  INFO [2295cd5c-c83d-4e23-90a4-2cbaab7fcc70] 16844 --- [nio-8080-exec-6] o.e.x.controllers.UserController         : Returning details for user: ****@****.***
2025-06-29 17:52:41.327  INFO [912d46c4-6e12-480e-b09b-772ffbd0625a] 16844 --- [nio-8080-exec-3] o.e.x.controllers.UserController         : Returning details for user: ****@****.***
2025-06-29 17:52:41.404 DEBUG [374e654c-0d4b-4c79-a61b-cce81b70bc35] 16844 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/check-in/boarding-passes
2025-06-29 17:52:41.405 DEBUG [e1e87916-2054-4373-8e2c-7c13574f264a] 16844 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 17:52:41.406 DEBUG [fe490599-2d39-4ca8-bc4b-2507d0d2197d] 16844 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/check-in/boarding-passes
2025-06-29 17:52:41.411 DEBUG [6c55a428-5f76-49b6-8f9b-5c68d194613e] 16844 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/boarding-passes
2025-06-29 17:52:41.411 DEBUG [0a236917-ee80-44ff-ad10-0b3184a734cf] 16844 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:52:41.411 DEBUG [f5652f88-a493-4f4a-a93b-b4583227a25c] 16844 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 17:52:41.424 DEBUG [a40e7f5f-4702-4f5b-9975-4fdef6773f5c] 16844 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/boarding-passes
2025-06-29 17:52:41.780 DEBUG [e1e87916-2054-4373-8e2c-7c13574f264a] 16844 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:52:41.783 DEBUG [e1e87916-2054-4373-8e2c-7c13574f264a] 16844 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 17:52:41.786 DEBUG [0a236917-ee80-44ff-ad10-0b3184a734cf] 16844 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:52:41.788 DEBUG [0a236917-ee80-44ff-ad10-0b3184a734cf] 16844 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:52:41.790  INFO [0a236917-ee80-44ff-ad10-0b3184a734cf] 16844 --- [nio-8080-exec-8] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:52:41.803 DEBUG [6c55a428-5f76-49b6-8f9b-5c68d194613e] 16844 --- [nio-8080-exec-5] o.s.s.core.session.SessionRegistryImpl   : Registering session 5BF76E41929B0FB553DBAFA8296C5621, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}])
2025-06-29 17:52:41.804 DEBUG [6c55a428-5f76-49b6-8f9b-5c68d194613e] 16844 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@4f8d4bdc]
2025-06-29 17:52:41.805 DEBUG [f5652f88-a493-4f4a-a93b-b4583227a25c] 16844 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:52:41.807 DEBUG [6c55a428-5f76-49b6-8f9b-5c68d194613e] 16844 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/boarding-passes
2025-06-29 17:52:41.808 DEBUG [f5652f88-a493-4f4a-a93b-b4583227a25c] 16844 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 17:52:41.827 DEBUG [a40e7f5f-4702-4f5b-9975-4fdef6773f5c] 16844 --- [nio-8080-exec-7] o.s.s.core.session.SessionRegistryImpl   : Registering session A147CCA17B8180328E94EB23E243B919, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}])
2025-06-29 17:52:41.829 DEBUG [a40e7f5f-4702-4f5b-9975-4fdef6773f5c] 16844 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@d4ac448]
2025-06-29 17:52:41.831 DEBUG [a40e7f5f-4702-4f5b-9975-4fdef6773f5c] 16844 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/boarding-passes
2025-06-29 17:52:41.970  WARN [e1e87916-2054-4373-8e2c-7c13574f264a] 16844 --- [nio-8080-exec-2] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 17:52:41.971  WARN [e1e87916-2054-4373-8e2c-7c13574f264a] 16844 --- [nio-8080-exec-2] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 17:52:41.975  INFO [6c55a428-5f76-49b6-8f9b-5c68d194613e] 16844 --- [nio-8080-exec-5] o.e.x.services.TicketServiceImpl         : Finding checked-in tickets for user 4
2025-06-29 17:52:41.976  WARN [f5652f88-a493-4f4a-a93b-b4583227a25c] 16844 --- [io-8080-exec-10] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 17:52:41.977  WARN [f5652f88-a493-4f4a-a93b-b4583227a25c] 16844 --- [io-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 17:52:41.981  INFO [0a236917-ee80-44ff-ad10-0b3184a734cf] 16844 --- [nio-8080-exec-8] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 17:52:41.994  INFO [a40e7f5f-4702-4f5b-9975-4fdef6773f5c] 16844 --- [nio-8080-exec-7] o.e.x.services.TicketServiceImpl         : Finding checked-in tickets for user 4
2025-06-29 17:52:46.405 DEBUG [d14713e1-1691-4512-8a95-63f9ca29f0c4] 16844 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 17:52:46.405 DEBUG [9c4caa92-a7bb-40e5-8d81-8189a70bde6d] 16844 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 17:52:46.518 DEBUG [d14713e1-1691-4512-8a95-63f9ca29f0c4] 16844 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:52:46.518 DEBUG [9c4caa92-a7bb-40e5-8d81-8189a70bde6d] 16844 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:46:41.316888, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9B3B0E4A0923B29A600D43BE6F92A480], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:52:46.520 DEBUG [9c4caa92-a7bb-40e5-8d81-8189a70bde6d] 16844 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 17:52:46.520 DEBUG [d14713e1-1691-4512-8a95-63f9ca29f0c4] 16844 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 17:52:46.612  INFO [d14713e1-1691-4512-8a95-63f9ca29f0c4] 16844 --- [nio-8080-exec-9] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 17:52:46.612  INFO [d14713e1-1691-4512-8a95-63f9ca29f0c4] 16844 --- [nio-8080-exec-9] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 17:52:46.613  INFO [9c4caa92-a7bb-40e5-8d81-8189a70bde6d] 16844 --- [nio-8080-exec-6] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 17:52:46.613  INFO [9c4caa92-a7bb-40e5-8d81-8189a70bde6d] 16844 --- [nio-8080-exec-6] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 17:52:46.616  INFO [d14713e1-1691-4512-8a95-63f9ca29f0c4] 16844 --- [nio-8080-exec-9] o.e.x.services.TicketServiceImpl         : Found 1 tickets eligible for check-in for user 4
2025-06-29 17:52:46.617  INFO [9c4caa92-a7bb-40e5-8d81-8189a70bde6d] 16844 --- [nio-8080-exec-6] o.e.x.services.TicketServiceImpl         : Found 1 tickets eligible for check-in for user 4
2025-06-29 17:53:39.683  INFO [NONE] 16844 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-29 17:53:39.686  INFO [NONE] 16844 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-06-29 17:53:39.692  INFO [NONE] 16844 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-06-29 17:53:55.707  INFO [NONE] 14492 --- [  restartedMain] o.e.xlr8travel.Xlr8travelApplication     : Starting Xlr8travelApplication using Java 21.0.5 with PID 14492 (C:\Users\razvi\Desktop\Licenta\backend\target\classes started by razvi in C:\Users\razvi\Desktop\Licenta\backend)
2025-06-29 17:53:55.714 DEBUG [NONE] 14492 --- [  restartedMain] o.e.xlr8travel.Xlr8travelApplication     : Running with Spring Boot v3.2.4, Spring v6.1.5
2025-06-29 17:53:55.715  INFO [NONE] 14492 --- [  restartedMain] o.e.xlr8travel.Xlr8travelApplication     : The following 1 profile is active: "local"
2025-06-29 17:53:55.755  INFO [NONE] 14492 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-29 17:53:55.756  INFO [NONE] 14492 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-29 17:53:56.974  INFO [NONE] 14492 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-29 17:53:57.066  INFO [NONE] 14492 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 85 ms. Found 9 JPA repository interfaces.
2025-06-29 17:53:57.872  INFO [NONE] 14492 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-29 17:53:57.883  INFO [NONE] 14492 --- [  restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-29 17:53:57.884  INFO [NONE] 14492 --- [  restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.19]
2025-06-29 17:53:57.963  INFO [NONE] 14492 --- [  restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-06-29 17:53:57.965  INFO [NONE] 14492 --- [  restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2207 ms
2025-06-29 17:53:58.248  INFO [NONE] 14492 --- [  restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-29 17:53:58.309  INFO [NONE] 14492 --- [  restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.4.Final
2025-06-29 17:53:58.346  INFO [NONE] 14492 --- [  restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-06-29 17:53:58.555  INFO [NONE] 14492 --- [  restartedMain] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-29 17:53:58.580  INFO [NONE] 14492 --- [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-06-29 17:53:58.758  INFO [NONE] 14492 --- [  restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@1edc3339
2025-06-29 17:53:58.760  INFO [NONE] 14492 --- [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-06-29 17:53:58.803  WARN [NONE] 14492 --- [  restartedMain] org.hibernate.orm.deprecation            : HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-29 17:53:59.921  INFO [NONE] 14492 --- [  restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-29 17:54:08.129  INFO [NONE] 14492 --- [  restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-29 17:54:08.442  INFO [NONE] 14492 --- [  restartedMain] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-29 17:54:08.886  WARN [NONE] 14492 --- [  restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Cannot deserialize session attribute [SPRING_SECURITY_CONTEXT] for session [97D7E338EE3403482EAF169C5116FEB4]
2025-06-29 17:54:08.889 ERROR [NONE] 14492 --- [  restartedMain] o.a.catalina.session.StandardManager     : Exception loading sessions from persistent storage

java.io.StreamCorruptedException: invalid type code: 00
	at java.base/java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1793)
	at java.base/java.io.ObjectInputStream$FieldValues.<init>(ObjectInputStream.java:2618)
	at java.base/java.io.ObjectInputStream.defaultReadObject(ObjectInputStream.java:678)
	at java.base/java.lang.Throwable.readObject(Throwable.java:936)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1102)
	at java.base/java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2444)
	at java.base/java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2284)
	at java.base/java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1762)
	at java.base/java.io.ObjectInputStream.readObject(ObjectInputStream.java:540)
	at java.base/java.io.ObjectInputStream.readObject(ObjectInputStream.java:498)
	at org.apache.catalina.session.StandardSession.doReadObject(StandardSession.java:1348)
	at org.apache.catalina.session.StandardSession.readObjectData(StandardSession.java:985)
	at org.apache.catalina.session.StandardManager.doLoad(StandardManager.java:210)
	at org.apache.catalina.session.StandardManager.load(StandardManager.java:156)
	at org.apache.catalina.session.StandardManager.startInternal(StandardManager.java:346)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4893)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1332)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1322)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:866)
	at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:845)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1332)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1322)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:866)
	at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:240)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.StandardService.startInternal(StandardService.java:433)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:921)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.startup.Tomcat.start(Tomcat.java:437)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:126)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.<init>(TomcatWebServer.java:105)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getTomcatWebServer(TomcatServletWebServerFactory.java:499)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getWebServer(TomcatServletWebServerFactory.java:218)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.createWebServer(ServletWebServerApplicationContext.java:188)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:162)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:618)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at org.example.xlr8travel.Xlr8travelApplication.main(Xlr8travelApplication.java:10)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)

2025-06-29 17:54:08.903 DEBUG [NONE] 14492 --- [  restartedMain] o.e.x.security.JwtAuthenticationFilter   : Filter 'jwtAuthenticationFilter' configured for use
2025-06-29 17:54:08.908 DEBUG [NONE] 14492 --- [  restartedMain] o.e.x.security.RateLimitingFilter        : Filter 'rateLimitingFilter' configured for use
2025-06-29 17:54:09.141  INFO [NONE] 14492 --- [  restartedMain] o.e.x.config.LocalPropertiesConfig       : Loaded application-local.properties
2025-06-29 17:54:09.483  INFO [NONE] 14492 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : === GEMINI SERVICE CONFIGURATION ===
2025-06-29 17:54:09.483  INFO [NONE] 14492 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : Project ID: xlr8travel
2025-06-29 17:54:09.483  INFO [NONE] 14492 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : Location ID: us-east1
2025-06-29 17:54:09.483  INFO [NONE] 14492 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : Model: gemini-2.0-flash-001
2025-06-29 17:54:09.484  INFO [NONE] 14492 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : Credentials Path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 17:54:09.484  INFO [NONE] 14492 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : API Key: ***SET***
2025-06-29 17:54:09.484  INFO [NONE] 14492 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : ✅ Credentials file exists: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 17:54:09.485  INFO [NONE] 14492 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : ✅ Credentials file size: 2376 bytes
2025-06-29 17:54:09.485  INFO [NONE] 14492 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : ✅ GOOGLE_APPLICATION_CREDENTIALS env var is set: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 17:54:09.485  INFO [NONE] 14492 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : =====================================
2025-06-29 17:54:09.509  INFO [NONE] 14492 --- [  restartedMain] o.e.x.config.SensitiveDataConfig         : Validating sensitive data configuration for profile: local
2025-06-29 17:54:09.509  WARN [NONE] 14492 --- [  restartedMain] o.e.x.config.SensitiveDataConfig         : Environment variable SPRING_DATASOURCE_URL is not set
2025-06-29 17:54:09.510  WARN [NONE] 14492 --- [  restartedMain] o.e.x.config.SensitiveDataConfig         : Environment variable SPRING_DATASOURCE_USERNAME is not set
2025-06-29 17:54:09.510  WARN [NONE] 14492 --- [  restartedMain] o.e.x.config.SensitiveDataConfig         : Environment variable SPRING_DATASOURCE_PASSWORD is not set
2025-06-29 17:54:09.510  WARN [NONE] 14492 --- [  restartedMain] o.e.x.config.SensitiveDataConfig         : Environment variable STRIPE_SECRET_KEY is not set
2025-06-29 17:54:09.552  WARN [NONE] 14492 --- [  restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-29 17:54:09.668  INFO [NONE] 14492 --- [  restartedMain] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2025-06-29 17:54:09.985  INFO [NONE] 14492 --- [  restartedMain] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 4 endpoint(s) beneath base path '/actuator'
2025-06-29 17:54:10.081  INFO [NONE] 14492 --- [  restartedMain] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@5c22263, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@11b21186, org.springframework.security.web.context.SecurityContextHolderFilter@79ce9d18, org.springframework.security.web.header.HeaderWriterFilter@5aab8b4d, org.springframework.web.filter.CorsFilter@732864e0, org.springframework.security.web.authentication.logout.LogoutFilter@48e35622, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@48c890d2, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@2b44d255, org.example.xlr8travel.security.JwtAuthenticationFilter@2098c9d8, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@70dc971a, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@721a213, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@4d28dafe, org.springframework.security.web.session.ConcurrentSessionFilter@70828683, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@7f51679d, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@a6a5a69, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@40fb57c9, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@596d3802, org.springframework.security.web.session.SessionManagementFilter@41df0a1b, org.springframework.security.web.access.ExceptionTranslationFilter@158fb629, org.springframework.security.web.access.intercept.AuthorizationFilter@73a8538d]
2025-06-29 17:54:10.750  INFO [NONE] 14492 --- [  restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2025-06-29 17:54:10.846  INFO [NONE] 14492 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path ''
2025-06-29 17:54:10.864  INFO [NONE] 14492 --- [  restartedMain] o.e.xlr8travel.Xlr8travelApplication     : Started Xlr8travelApplication in 15.591 seconds (process running for 16.251)
2025-06-29 17:54:19.176  INFO [NONE] 14492 --- [nio-8080-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-29 17:54:19.178  INFO [NONE] 14492 --- [nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-06-29 17:54:19.182  INFO [NONE] 14492 --- [nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2025-06-29 17:54:19.204 DEBUG [40711b2d-e545-462e-b560-f97513f22738] 14492 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/nearby?origin=OTP
2025-06-29 17:54:19.304 DEBUG [40711b2d-e545-462e-b560-f97513f22738] 14492 --- [nio-8080-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 17:54:19.324 DEBUG [40711b2d-e545-462e-b560-f97513f22738] 14492 --- [nio-8080-exec-2] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 9B3B0E4A0923B29A600D43BE6F92A480
2025-06-29 17:54:19.439  WARN [40711b2d-e545-462e-b560-f97513f22738] 14492 --- [nio-8080-exec-2] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/api/flights/nearby' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2025-06-29 17:54:19.701 DEBUG [40711b2d-e545-462e-b560-f97513f22738] 14492 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/nearby?origin=OTP
2025-06-29 17:54:20.222  INFO [40711b2d-e545-462e-b560-f97513f22738] 14492 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Received request for nearby flights from origin: OTP, departureDate: null
2025-06-29 17:54:20.442  INFO [40711b2d-e545-462e-b560-f97513f22738] 14492 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Using search date: 2025-06-29
2025-06-29 17:54:20.445  INFO [40711b2d-e545-462e-b560-f97513f22738] 14492 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Cache key: OTP-2025-06-29
2025-06-29 17:54:20.448  INFO [40711b2d-e545-462e-b560-f97513f22738] 14492 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : No valid cache found. Searching nearby flights from origin: OTP, after date: 2025-06-29
2025-06-29 17:54:20.449  INFO [40711b2d-e545-462e-b560-f97513f22738] 14492 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Calling flightService.findByOriginAndDepartureDateAfter for origin: OTP, date: 2025-06-29
2025-06-29 17:54:22.018  INFO [40711b2d-e545-462e-b560-f97513f22738] 14492 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Database query completed, found 16 flights
2025-06-29 17:54:22.023  INFO [40711b2d-e545-462e-b560-f97513f22738] 14492 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Converting 16 Flight entities to FlightDTOs
2025-06-29 17:54:22.024  INFO [40711b2d-e545-462e-b560-f97513f22738] 14492 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Converted to 16 FlightDTOs
2025-06-29 17:54:22.025  INFO [40711b2d-e545-462e-b560-f97513f22738] 14492 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Grouping flights by destination country
2025-06-29 17:54:22.032  INFO [40711b2d-e545-462e-b560-f97513f22738] 14492 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Grouped flights into 7 countries
2025-06-29 17:54:22.033  INFO [40711b2d-e545-462e-b560-f97513f22738] 14492 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Selecting diverse flights - one from each country first
2025-06-29 17:54:22.035  INFO [40711b2d-e545-462e-b560-f97513f22738] 14492 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Adding first flight from Greece (has 2 flights)
2025-06-29 17:54:22.035  INFO [40711b2d-e545-462e-b560-f97513f22738] 14492 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Adding first flight from Netherlands (has 2 flights)
2025-06-29 17:54:22.036  INFO [40711b2d-e545-462e-b560-f97513f22738] 14492 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Adding first flight from Italy (has 2 flights)
2025-06-29 17:54:22.036  INFO [40711b2d-e545-462e-b560-f97513f22738] 14492 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Adding first flight from United Kingdom (has 2 flights)
2025-06-29 17:54:22.036  INFO [40711b2d-e545-462e-b560-f97513f22738] 14492 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Adding first flight from France (has 2 flights)
2025-06-29 17:54:22.036  INFO [40711b2d-e545-462e-b560-f97513f22738] 14492 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Adding first flight from Switzerland (has 2 flights)
2025-06-29 17:54:22.037  INFO [40711b2d-e545-462e-b560-f97513f22738] 14492 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Reached 6 flights after first pass, stopping
2025-06-29 17:54:22.038  INFO [40711b2d-e545-462e-b560-f97513f22738] 14492 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Caching 6 diverse flights with key: OTP-2025-06-29
2025-06-29 17:54:22.042  INFO [40711b2d-e545-462e-b560-f97513f22738] 14492 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Returning 6 diverse nearby flights from: OTP
2025-06-29 17:54:22.400 DEBUG [7882857f-10de-4503-8d0b-74326941802d] 14492 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-29 17:54:22.409 DEBUG [7882857f-10de-4503-8d0b-74326941802d] 14492 --- [nio-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 17:54:22.411 DEBUG [7882857f-10de-4503-8d0b-74326941802d] 14492 --- [nio-8080-exec-1] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 9B3B0E4A0923B29A600D43BE6F92A480
2025-06-29 17:54:22.414 DEBUG [7882857f-10de-4503-8d0b-74326941802d] 14492 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-29 17:54:22.517  INFO [7882857f-10de-4503-8d0b-74326941802d] 14492 --- [nio-8080-exec-1] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris
2025-06-29 17:54:22.523  INFO [7882857f-10de-4503-8d0b-74326941802d] 14492 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-29 17:54:22.529  INFO [7882857f-10de-4503-8d0b-74326941802d] 14492 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-29 17:54:22.539 DEBUG [7882857f-10de-4503-8d0b-74326941802d] 14492 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-29).    For example, if today is 2025-06-29, a good departure date would be between 2025-07-06 and 2025-07-13, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris";
2025-06-29 17:54:22.543  INFO [7882857f-10de-4503-8d0b-74326941802d] 14492 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-29 17:54:22.544  INFO [7882857f-10de-4503-8d0b-74326941802d] 14492 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-29 17:54:22.545  INFO [7882857f-10de-4503-8d0b-74326941802d] 14492 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-29 17:54:22.548  INFO [7882857f-10de-4503-8d0b-74326941802d] 14492 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 17:54:22.549  INFO [7882857f-10de-4503-8d0b-74326941802d] 14492 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-29 17:54:22.625  INFO [7882857f-10de-4503-8d0b-74326941802d] 14492 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-29 17:54:22.629  INFO [7882857f-10de-4503-8d0b-74326941802d] 14492 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-29 17:54:22.631  INFO [7882857f-10de-4503-8d0b-74326941802d] 14492 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-29 17:54:22.665  INFO [7882857f-10de-4503-8d0b-74326941802d] 14492 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-29 17:54:25.999  INFO [7882857f-10de-4503-8d0b-74326941802d] 14492 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-29 17:54:26.000  INFO [7882857f-10de-4503-8d0b-74326941802d] 14492 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Response length: 195 characters
2025-06-29 17:54:26.003 DEBUG [7882857f-10de-4503-8d0b-74326941802d] 14492 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-06",
  "returnDate": "2025-07-08",
  "tripType": "roundTrip",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-29 17:54:26.004 DEBUG [7882857f-10de-4503-8d0b-74326941802d] 14492 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-29 17:54:26.010 DEBUG [7882857f-10de-4503-8d0b-74326941802d] 14492 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-29 17:54:26.011 DEBUG [7882857f-10de-4503-8d0b-74326941802d] 14492 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-29 17:54:26.012 DEBUG [7882857f-10de-4503-8d0b-74326941802d] 14492 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 17:54:26.013  INFO [7882857f-10de-4503-8d0b-74326941802d] 14492 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 17:54:26.013  INFO [7882857f-10de-4503-8d0b-74326941802d] 14492 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-06, returnDate=2025-07-08, tripType=roundTrip, adults=1, children=0, infants=0
2025-06-29 17:54:26.013  INFO [7882857f-10de-4503-8d0b-74326941802d] 14492 --- [nio-8080-exec-1] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-29 17:54:28.195 DEBUG [92d0640a-9bf9-408a-a9c6-9719208acd5b] 14492 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-29 17:54:28.197 DEBUG [92d0640a-9bf9-408a-a9c6-9719208acd5b] 14492 --- [nio-8080-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 17:54:28.197 DEBUG [92d0640a-9bf9-408a-a9c6-9719208acd5b] 14492 --- [nio-8080-exec-3] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 9B3B0E4A0923B29A600D43BE6F92A480
2025-06-29 17:54:28.199 DEBUG [92d0640a-9bf9-408a-a9c6-9719208acd5b] 14492 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-29 17:54:28.202  INFO [92d0640a-9bf9-408a-a9c6-9719208acd5b] 14492 --- [nio-8080-exec-3] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris one way
2025-06-29 17:54:28.202  INFO [92d0640a-9bf9-408a-a9c6-9719208acd5b] 14492 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-29 17:54:28.202  INFO [92d0640a-9bf9-408a-a9c6-9719208acd5b] 14492 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-29 17:54:28.202 DEBUG [92d0640a-9bf9-408a-a9c6-9719208acd5b] 14492 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-29).    For example, if today is 2025-06-29, a good departure date would be between 2025-07-06 and 2025-07-13, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris one way";
2025-06-29 17:54:28.204  INFO [92d0640a-9bf9-408a-a9c6-9719208acd5b] 14492 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-29 17:54:28.204  INFO [92d0640a-9bf9-408a-a9c6-9719208acd5b] 14492 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-29 17:54:28.204  INFO [92d0640a-9bf9-408a-a9c6-9719208acd5b] 14492 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-29 17:54:28.205  INFO [92d0640a-9bf9-408a-a9c6-9719208acd5b] 14492 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 17:54:28.205  INFO [92d0640a-9bf9-408a-a9c6-9719208acd5b] 14492 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-29 17:54:28.215  INFO [92d0640a-9bf9-408a-a9c6-9719208acd5b] 14492 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-29 17:54:28.217  INFO [92d0640a-9bf9-408a-a9c6-9719208acd5b] 14492 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-29 17:54:28.217  INFO [92d0640a-9bf9-408a-a9c6-9719208acd5b] 14492 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-29 17:54:28.217  INFO [92d0640a-9bf9-408a-a9c6-9719208acd5b] 14492 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-29 17:54:29.784  INFO [92d0640a-9bf9-408a-a9c6-9719208acd5b] 14492 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-29 17:54:29.785  INFO [92d0640a-9bf9-408a-a9c6-9719208acd5b] 14492 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Response length: 184 characters
2025-06-29 17:54:29.785 DEBUG [92d0640a-9bf9-408a-a9c6-9719208acd5b] 14492 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-06",
  "returnDate": null,
  "tripType": "oneWay",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-29 17:54:29.786 DEBUG [92d0640a-9bf9-408a-a9c6-9719208acd5b] 14492 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-29 17:54:29.786 DEBUG [92d0640a-9bf9-408a-a9c6-9719208acd5b] 14492 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-29 17:54:29.787 DEBUG [92d0640a-9bf9-408a-a9c6-9719208acd5b] 14492 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-29 17:54:29.787 DEBUG [92d0640a-9bf9-408a-a9c6-9719208acd5b] 14492 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 17:54:29.787  INFO [92d0640a-9bf9-408a-a9c6-9719208acd5b] 14492 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 17:54:29.787  INFO [92d0640a-9bf9-408a-a9c6-9719208acd5b] 14492 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-06, returnDate=null, tripType=oneWay, adults=1, children=0, infants=0
2025-06-29 17:54:29.788  INFO [92d0640a-9bf9-408a-a9c6-9719208acd5b] 14492 --- [nio-8080-exec-3] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-29 17:54:31.495 DEBUG [f8d3625e-ba51-4d02-9826-563137a3a408] 14492 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 17:54:31.582 ERROR [f8d3625e-ba51-4d02-9826-563137a3a408] 14492 --- [nio-8080-exec-4] o.e.x.security.JwtAuthenticationFilter   : Cannot set user authentication: User ****@****.*** not found
2025-06-29 17:54:31.584 DEBUG [f8d3625e-ba51-4d02-9826-563137a3a408] 14492 --- [nio-8080-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 17:54:31.604 DEBUG [f8d3625e-ba51-4d02-9826-563137a3a408] 14492 --- [nio-8080-exec-4] o.s.s.w.s.HttpSessionRequestCache        : Saved request http://localhost:8080/api/user/me?continue to session
2025-06-29 17:54:31.604 DEBUG [f8d3625e-ba51-4d02-9826-563137a3a408] 14492 --- [nio-8080-exec-4] s.w.a.DelegatingAuthenticationEntryPoint : Trying to match using Ant [pattern='/api/**']
2025-06-29 17:54:31.604 DEBUG [f8d3625e-ba51-4d02-9826-563137a3a408] 14492 --- [nio-8080-exec-4] s.w.a.DelegatingAuthenticationEntryPoint : Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@7b9ab4e4
2025-06-29 17:54:33.413 DEBUG [6469edb2-d98c-42d0-a6f7-372ec7272e4c] 14492 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /api/token/refresh
2025-06-29 17:54:33.414 DEBUG [6469edb2-d98c-42d0-a6f7-372ec7272e4c] 14492 --- [nio-8080-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 17:54:33.416 DEBUG [6469edb2-d98c-42d0-a6f7-372ec7272e4c] 14492 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured POST /api/token/refresh
2025-06-29 17:54:33.436  INFO [6469edb2-d98c-42d0-a6f7-372ec7272e4c] 14492 --- [nio-8080-exec-5] o.e.x.controllers.TokenController        : Generated new access token for user: ****@****.***
2025-06-29 17:54:33.617 DEBUG [9cbe6a73-98ca-408d-a3df-bf14750f714d] 14492 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 17:54:33.629 ERROR [9cbe6a73-98ca-408d-a3df-bf14750f714d] 14492 --- [nio-8080-exec-6] o.e.x.security.JwtAuthenticationFilter   : Cannot set user authentication: User ****@****.*** not found
2025-06-29 17:54:33.629 DEBUG [9cbe6a73-98ca-408d-a3df-bf14750f714d] 14492 --- [nio-8080-exec-6] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 17:54:33.633 DEBUG [9cbe6a73-98ca-408d-a3df-bf14750f714d] 14492 --- [nio-8080-exec-6] o.s.s.w.s.HttpSessionRequestCache        : Saved request http://localhost:8080/api/user/me?continue to session
2025-06-29 17:54:33.634 DEBUG [9cbe6a73-98ca-408d-a3df-bf14750f714d] 14492 --- [nio-8080-exec-6] s.w.a.DelegatingAuthenticationEntryPoint : Trying to match using Ant [pattern='/api/**']
2025-06-29 17:54:33.634 DEBUG [9cbe6a73-98ca-408d-a3df-bf14750f714d] 14492 --- [nio-8080-exec-6] s.w.a.DelegatingAuthenticationEntryPoint : Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@7b9ab4e4
2025-06-29 17:54:33.705 DEBUG [eee38894-f062-4dde-992d-28130ce642f2] 14492 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 17:54:33.707 DEBUG [eee38894-f062-4dde-992d-28130ce642f2] 14492 --- [nio-8080-exec-9] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 17:54:33.708 DEBUG [eee38894-f062-4dde-992d-28130ce642f2] 14492 --- [nio-8080-exec-9] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 9B3B0E4A0923B29A600D43BE6F92A480
2025-06-29 17:54:33.709 DEBUG [eee38894-f062-4dde-992d-28130ce642f2] 14492 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 17:54:33.716  INFO [eee38894-f062-4dde-992d-28130ce642f2] 14492 --- [nio-8080-exec-9] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 17:54:33.716  INFO [eee38894-f062-4dde-992d-28130ce642f2] 14492 --- [nio-8080-exec-9] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 17:54:33.787  INFO [eee38894-f062-4dde-992d-28130ce642f2] 14492 --- [nio-8080-exec-9] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 17:54:33.795 DEBUG [d47a27b7-2f78-4f99-a852-2ecc62a969ca] 14492 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 17:54:33.796 DEBUG [d47a27b7-2f78-4f99-a852-2ecc62a969ca] 14492 --- [nio-8080-exec-7] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 17:54:33.796 DEBUG [d47a27b7-2f78-4f99-a852-2ecc62a969ca] 14492 --- [nio-8080-exec-7] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 9B3B0E4A0923B29A600D43BE6F92A480
2025-06-29 17:54:33.797 DEBUG [d47a27b7-2f78-4f99-a852-2ecc62a969ca] 14492 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 17:54:33.799  INFO [d47a27b7-2f78-4f99-a852-2ecc62a969ca] 14492 --- [nio-8080-exec-7] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 17:54:33.800  INFO [d47a27b7-2f78-4f99-a852-2ecc62a969ca] 14492 --- [nio-8080-exec-7] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 17:54:33.820 DEBUG [fa479ca7-c2bc-4125-bab4-7124964c93c2] 14492 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 17:54:33.821 DEBUG [fa479ca7-c2bc-4125-bab4-7124964c93c2] 14492 --- [io-8080-exec-10] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 17:54:33.821 DEBUG [fa479ca7-c2bc-4125-bab4-7124964c93c2] 14492 --- [io-8080-exec-10] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 9B3B0E4A0923B29A600D43BE6F92A480
2025-06-29 17:54:33.823 DEBUG [fa479ca7-c2bc-4125-bab4-7124964c93c2] 14492 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 17:54:33.824  INFO [fa479ca7-c2bc-4125-bab4-7124964c93c2] 14492 --- [io-8080-exec-10] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 17:54:33.865  INFO [d47a27b7-2f78-4f99-a852-2ecc62a969ca] 14492 --- [nio-8080-exec-7] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 17:54:34.013  INFO [fa479ca7-c2bc-4125-bab4-7124964c93c2] 14492 --- [io-8080-exec-10] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 17:54:34.024 DEBUG [08027286-fa28-4f4d-b3a2-8dae5e5569ae] 14492 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 17:54:34.025 DEBUG [08027286-fa28-4f4d-b3a2-8dae5e5569ae] 14492 --- [nio-8080-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 17:54:34.025 DEBUG [08027286-fa28-4f4d-b3a2-8dae5e5569ae] 14492 --- [nio-8080-exec-8] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 9B3B0E4A0923B29A600D43BE6F92A480
2025-06-29 17:54:34.027 DEBUG [08027286-fa28-4f4d-b3a2-8dae5e5569ae] 14492 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 17:54:34.028  INFO [08027286-fa28-4f4d-b3a2-8dae5e5569ae] 14492 --- [nio-8080-exec-8] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 17:54:34.029 DEBUG [14fe7cdc-0bba-4cca-b76c-342c1d4924d3] 14492 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 17:54:34.030 DEBUG [14fe7cdc-0bba-4cca-b76c-342c1d4924d3] 14492 --- [nio-8080-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 17:54:34.030 DEBUG [14fe7cdc-0bba-4cca-b76c-342c1d4924d3] 14492 --- [nio-8080-exec-2] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 9B3B0E4A0923B29A600D43BE6F92A480
2025-06-29 17:54:34.031 DEBUG [14fe7cdc-0bba-4cca-b76c-342c1d4924d3] 14492 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 17:54:34.032  INFO [14fe7cdc-0bba-4cca-b76c-342c1d4924d3] 14492 --- [nio-8080-exec-2] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 17:54:34.067  INFO [08027286-fa28-4f4d-b3a2-8dae5e5569ae] 14492 --- [nio-8080-exec-8] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 17:54:34.278  INFO [14fe7cdc-0bba-4cca-b76c-342c1d4924d3] 14492 --- [nio-8080-exec-2] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 17:54:35.311 DEBUG [eaed263a-f2bd-46d6-8be3-19a02829af8b] 14492 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 17:54:35.343 DEBUG [eaed263a-f2bd-46d6-8be3-19a02829af8b] 14492 --- [nio-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 17:54:35.640 DEBUG [eaed263a-f2bd-46d6-8be3-19a02829af8b] 14492 --- [nio-8080-exec-1] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 9B3B0E4A0923B29A600D43BE6F92A480
2025-06-29 17:54:35.653 DEBUG [eaed263a-f2bd-46d6-8be3-19a02829af8b] 14492 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 17:54:35.657  INFO [eaed263a-f2bd-46d6-8be3-19a02829af8b] 14492 --- [nio-8080-exec-1] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 17:54:35.763  INFO [eaed263a-f2bd-46d6-8be3-19a02829af8b] 14492 --- [nio-8080-exec-1] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 17:54:39.116 DEBUG [c8a40d67-c7ce-4495-81f9-5aadd5e6c033] 14492 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 17:54:39.119 ERROR [c8a40d67-c7ce-4495-81f9-5aadd5e6c033] 14492 --- [nio-8080-exec-3] o.example.xlr8travel.security.JwtUtils   : Invalid JWT token: JWT strings must contain exactly 2 period characters. Found: 0
2025-06-29 17:54:39.120 DEBUG [c8a40d67-c7ce-4495-81f9-5aadd5e6c033] 14492 --- [nio-8080-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 17:54:39.122 DEBUG [c8a40d67-c7ce-4495-81f9-5aadd5e6c033] 14492 --- [nio-8080-exec-3] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 9B3B0E4A0923B29A600D43BE6F92A480
2025-06-29 17:54:39.136 DEBUG [c8a40d67-c7ce-4495-81f9-5aadd5e6c033] 14492 --- [nio-8080-exec-3] o.s.s.w.s.HttpSessionRequestCache        : Saved request http://localhost:8080/api/check-in/flights/16/booked-seats?continue to session
2025-06-29 17:54:39.137 DEBUG [c8a40d67-c7ce-4495-81f9-5aadd5e6c033] 14492 --- [nio-8080-exec-3] s.w.a.DelegatingAuthenticationEntryPoint : Trying to match using Ant [pattern='/api/**']
2025-06-29 17:54:39.137 DEBUG [c8a40d67-c7ce-4495-81f9-5aadd5e6c033] 14492 --- [nio-8080-exec-3] s.w.a.DelegatingAuthenticationEntryPoint : Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@7b9ab4e4
2025-06-29 17:54:39.146 DEBUG [bcac2c88-0d30-47d9-8e22-540188d76ce0] 14492 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 17:54:39.149 ERROR [bcac2c88-0d30-47d9-8e22-540188d76ce0] 14492 --- [nio-8080-exec-4] o.example.xlr8travel.security.JwtUtils   : Invalid JWT token: JWT strings must contain exactly 2 period characters. Found: 0
2025-06-29 17:54:39.151 DEBUG [bcac2c88-0d30-47d9-8e22-540188d76ce0] 14492 --- [nio-8080-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 17:54:39.151 DEBUG [bcac2c88-0d30-47d9-8e22-540188d76ce0] 14492 --- [nio-8080-exec-4] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 9B3B0E4A0923B29A600D43BE6F92A480
2025-06-29 17:54:39.158 DEBUG [bcac2c88-0d30-47d9-8e22-540188d76ce0] 14492 --- [nio-8080-exec-4] o.s.s.w.s.HttpSessionRequestCache        : Saved request http://localhost:8080/api/check-in/flights/16/booked-seats?continue to session
2025-06-29 17:54:39.158 DEBUG [bcac2c88-0d30-47d9-8e22-540188d76ce0] 14492 --- [nio-8080-exec-4] s.w.a.DelegatingAuthenticationEntryPoint : Trying to match using Ant [pattern='/api/**']
2025-06-29 17:54:39.158 DEBUG [bcac2c88-0d30-47d9-8e22-540188d76ce0] 14492 --- [nio-8080-exec-4] s.w.a.DelegatingAuthenticationEntryPoint : Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@7b9ab4e4
2025-06-29 17:54:39.491 DEBUG [428b3a72-6a94-4942-b85e-53dcd93e3a5d] 14492 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 17:54:39.494 ERROR [428b3a72-6a94-4942-b85e-53dcd93e3a5d] 14492 --- [nio-8080-exec-5] o.example.xlr8travel.security.JwtUtils   : Invalid JWT token: JWT strings must contain exactly 2 period characters. Found: 0
2025-06-29 17:54:39.495 DEBUG [428b3a72-6a94-4942-b85e-53dcd93e3a5d] 14492 --- [nio-8080-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 17:54:39.503 DEBUG [428b3a72-6a94-4942-b85e-53dcd93e3a5d] 14492 --- [nio-8080-exec-5] o.s.s.w.s.HttpSessionRequestCache        : Saved request http://localhost:8080/api/check-in/flights/16/booked-seats?continue to session
2025-06-29 17:54:39.504 DEBUG [428b3a72-6a94-4942-b85e-53dcd93e3a5d] 14492 --- [nio-8080-exec-5] s.w.a.DelegatingAuthenticationEntryPoint : Trying to match using Ant [pattern='/api/**']
2025-06-29 17:54:39.505 DEBUG [428b3a72-6a94-4942-b85e-53dcd93e3a5d] 14492 --- [nio-8080-exec-5] s.w.a.DelegatingAuthenticationEntryPoint : Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@7b9ab4e4
2025-06-29 17:54:43.379 DEBUG [2963b143-1449-4a97-af5b-9162065742ee] 14492 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /oauth2/authorization/google
2025-06-29 17:54:43.383 DEBUG [2963b143-1449-4a97-af5b-9162065742ee] 14492 --- [nio-8080-exec-6] o.s.s.web.DefaultRedirectStrategy        : Redirecting to https://accounts.google.com/o/oauth2/v2/auth?response_type=code&client_id=280181287068-i92p696f0ja6qv5lecrhi4dmn2hsrvie.apps.googleusercontent.com&scope=email%20profile&state=Oc3JO4ItGpdnVaBLYGGAhcCEaNba12Vq6O7lF5tq7DM%3D&redirect_uri=http://localhost:8080/login/oauth2/code/google
2025-06-29 17:54:45.283 DEBUG [150807b4-6349-40fa-92aa-5aeeefdd1e87] 14492 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /login/oauth2/code/google?state=Oc3JO4ItGpdnVaBLYGGAhcCEaNba12Vq6O7lF5tq7DM%3D&code=4%2F0AVMBsJjM42epjoPJyV_U9W2n1ZcPyP5XtPdV4tH4FAvuH5KWpy_0qajTuWfxTHKAE_4CRw&scope=email+profile+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+openid&authuser=1&prompt=none
2025-06-29 17:54:45.651  INFO [150807b4-6349-40fa-92aa-5aeeefdd1e87] 14492 --- [nio-8080-exec-9] o.e.x.security.CustomOAuth2UserService   : Creating new user from OAuth2 login: ****@****.***
2025-06-29 17:54:45.730  INFO [150807b4-6349-40fa-92aa-5aeeefdd1e87] 14492 --- [nio-8080-exec-9] o.e.x.security.CustomOAuth2UserService   : Successfully created new user from OAuth2 login: ****@****.***
2025-06-29 17:54:45.733 DEBUG [150807b4-6349-40fa-92aa-5aeeefdd1e87] 14492 --- [nio-8080-exec-9] .s.ChangeSessionIdAuthenticationStrategy : Changed session id from 1D25B5198EF75FD6AC57539BB44A18FA
2025-06-29 17:54:45.733 DEBUG [150807b4-6349-40fa-92aa-5aeeefdd1e87] 14492 --- [nio-8080-exec-9] o.s.s.core.session.SessionRegistryImpl   : Registering session 131AECF3C53000E87D6D5F0A59832A84, for principal Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}]
2025-06-29 17:54:45.735 DEBUG [150807b4-6349-40fa-92aa-5aeeefdd1e87] 14492 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=1D25B5198EF75FD6AC57539BB44A18FA], Granted Authorities=[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@34ea39f]
2025-06-29 17:54:45.736 DEBUG [150807b4-6349-40fa-92aa-5aeeefdd1e87] 14492 --- [nio-8080-exec-9] .s.o.c.w.OAuth2LoginAuthenticationFilter : Set SecurityContextHolder to OAuth2AuthenticationToken [Principal=Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=1D25B5198EF75FD6AC57539BB44A18FA], Granted Authorities=[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]]
2025-06-29 17:54:45.738  INFO [150807b4-6349-40fa-92aa-5aeeefdd1e87] 14492 --- [nio-8080-exec-9] e.x.s.OAuth2AuthenticationSuccessHandler : Extracting username from authentication: 104658082982173093135
2025-06-29 17:54:45.738  INFO [150807b4-6349-40fa-92aa-5aeeefdd1e87] 14492 --- [nio-8080-exec-9] e.x.s.OAuth2AuthenticationSuccessHandler : Principal class: org.springframework.security.oauth2.core.user.DefaultOAuth2User
2025-06-29 17:54:45.738  INFO [150807b4-6349-40fa-92aa-5aeeefdd1e87] 14492 --- [nio-8080-exec-9] e.x.s.OAuth2AuthenticationSuccessHandler : Principal is DefaultOAuth2User
2025-06-29 17:54:45.738  INFO [150807b4-6349-40fa-92aa-5aeeefdd1e87] 14492 --- [nio-8080-exec-9] e.x.s.OAuth2AuthenticationSuccessHandler : OAuth2User attributes: {sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}
2025-06-29 17:54:45.739  INFO [150807b4-6349-40fa-92aa-5aeeefdd1e87] 14492 --- [nio-8080-exec-9] e.x.s.OAuth2AuthenticationSuccessHandler : Using email as username: ****@****.***
2025-06-29 17:54:45.739  INFO [150807b4-6349-40fa-92aa-5aeeefdd1e87] 14492 --- [nio-8080-exec-9] e.x.s.OAuth2AuthenticationSuccessHandler : Extracting username from authentication: 104658082982173093135
2025-06-29 17:54:45.739  INFO [150807b4-6349-40fa-92aa-5aeeefdd1e87] 14492 --- [nio-8080-exec-9] e.x.s.OAuth2AuthenticationSuccessHandler : Principal class: org.springframework.security.oauth2.core.user.DefaultOAuth2User
2025-06-29 17:54:45.740  INFO [150807b4-6349-40fa-92aa-5aeeefdd1e87] 14492 --- [nio-8080-exec-9] e.x.s.OAuth2AuthenticationSuccessHandler : Principal is DefaultOAuth2User
2025-06-29 17:54:45.740  INFO [150807b4-6349-40fa-92aa-5aeeefdd1e87] 14492 --- [nio-8080-exec-9] e.x.s.OAuth2AuthenticationSuccessHandler : OAuth2User attributes: {sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}
2025-06-29 17:54:45.740  INFO [150807b4-6349-40fa-92aa-5aeeefdd1e87] 14492 --- [nio-8080-exec-9] e.x.s.OAuth2AuthenticationSuccessHandler : Using email as username: ****@****.***
2025-06-29 17:54:45.740  INFO [150807b4-6349-40fa-92aa-5aeeefdd1e87] 14492 --- [nio-8080-exec-9] e.x.s.OAuth2AuthenticationSuccessHandler : OAuth tokens stored in session for user: ****@****.***
2025-06-29 17:54:45.741 DEBUG [150807b4-6349-40fa-92aa-5aeeefdd1e87] 14492 --- [nio-8080-exec-9] o.s.s.web.DefaultRedirectStrategy        : Redirecting to http://localhost:3000?oauth=success
2025-06-29 17:54:46.251 DEBUG [501d1dfa-d064-43b2-914f-dd5227e0b4be] 14492 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/oauth/complete
2025-06-29 17:54:46.255 DEBUG [b97b5562-ab1e-4e6c-9b31-8d77b57acf58] 14492 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/oauth/complete
2025-06-29 17:54:46.257 DEBUG [1cc18bb6-d5c4-4218-afad-f7acdbc89c91] 14492 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /api/oauth/complete
2025-06-29 17:54:46.258 DEBUG [1cc18bb6-d5c4-4218-afad-f7acdbc89c91] 14492 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured POST /api/oauth/complete
2025-06-29 17:54:46.258 DEBUG [79cf28a9-88f9-43f8-90b0-c6a8ffc7a8a4] 14492 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/oauth/complete
2025-06-29 17:54:46.260  INFO [1cc18bb6-d5c4-4218-afad-f7acdbc89c91] 14492 --- [nio-8080-exec-8] o.e.x.controllers.OAuthController        : OAuth tokens retrieved and cleared from session for user: ****@****.***
2025-06-29 17:54:46.260 DEBUG [79cf28a9-88f9-43f8-90b0-c6a8ffc7a8a4] 14492 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /api/oauth/complete
2025-06-29 17:54:46.263 DEBUG [79cf28a9-88f9-43f8-90b0-c6a8ffc7a8a4] 14492 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=1D25B5198EF75FD6AC57539BB44A18FA], Granted Authorities=[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]]]
2025-06-29 17:54:46.263 DEBUG [1cc18bb6-d5c4-4218-afad-f7acdbc89c91] 14492 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=1D25B5198EF75FD6AC57539BB44A18FA], Granted Authorities=[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]]]
2025-06-29 17:54:46.439 DEBUG [e4b3e1f0-fbfa-47e8-bae7-7e7170d477a7] 14492 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/nearby?origin=OTP
2025-06-29 17:54:46.441 DEBUG [e4b3e1f0-fbfa-47e8-bae7-7e7170d477a7] 14492 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/nearby?origin=OTP
2025-06-29 17:54:46.442  INFO [e4b3e1f0-fbfa-47e8-bae7-7e7170d477a7] 14492 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Received request for nearby flights from origin: OTP, departureDate: null
2025-06-29 17:54:46.443  INFO [e4b3e1f0-fbfa-47e8-bae7-7e7170d477a7] 14492 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Using search date: 2025-06-29
2025-06-29 17:54:46.443  INFO [e4b3e1f0-fbfa-47e8-bae7-7e7170d477a7] 14492 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Cache key: OTP-2025-06-29
2025-06-29 17:54:46.444  INFO [e4b3e1f0-fbfa-47e8-bae7-7e7170d477a7] 14492 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Returning cached nearby flights for origin: OTP, found 6 flights
2025-06-29 17:54:46.445 DEBUG [e4b3e1f0-fbfa-47e8-bae7-7e7170d477a7] 14492 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=1D25B5198EF75FD6AC57539BB44A18FA], Granted Authorities=[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]]]
2025-06-29 17:54:46.620 DEBUG [33a76a1e-c690-4b70-a969-a23839018563] 14492 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 17:54:46.640 DEBUG [33a76a1e-c690-4b70-a969-a23839018563] 14492 --- [nio-8080-exec-3] o.s.s.core.session.SessionRegistryImpl   : Registering session 45DEDBE876A0D34933AB21DDC4F6F869, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:54:45.716784, lastLogin=null, addresses=[], tickets=[])
2025-06-29 17:54:46.641 DEBUG [33a76a1e-c690-4b70-a969-a23839018563] 14492 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:54:45.716784, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@cab8609]
2025-06-29 17:54:46.643 DEBUG [33a76a1e-c690-4b70-a969-a23839018563] 14492 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me
2025-06-29 17:54:46.645  INFO [33a76a1e-c690-4b70-a969-a23839018563] 14492 --- [nio-8080-exec-3] o.e.x.controllers.UserController         : Request received for current user details: ****@****.***
2025-06-29 17:54:46.654  INFO [33a76a1e-c690-4b70-a969-a23839018563] 14492 --- [nio-8080-exec-3] o.e.x.controllers.UserController         : Returning details for user: ****@****.***
2025-06-29 17:54:46.680 DEBUG [94524ada-8983-46cc-8721-027008962798] 14492 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:54:46.680 DEBUG [cc2b7107-3bf6-4d00-ae4e-c22e2a48812f] 14492 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 17:54:46.694 DEBUG [cc2b7107-3bf6-4d00-ae4e-c22e2a48812f] 14492 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=1D25B5198EF75FD6AC57539BB44A18FA], Granted Authorities=[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]]]
2025-06-29 17:54:46.696 DEBUG [94524ada-8983-46cc-8721-027008962798] 14492 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:54:45.716784, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=131AECF3C53000E87D6D5F0A59832A84], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:54:46.698 DEBUG [cc2b7107-3bf6-4d00-ae4e-c22e2a48812f] 14492 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 17:54:46.698 DEBUG [94524ada-8983-46cc-8721-027008962798] 14492 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:54:46.699  INFO [94524ada-8983-46cc-8721-027008962798] 14492 --- [nio-8080-exec-5] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:54:46.710  WARN [cc2b7107-3bf6-4d00-ae4e-c22e2a48812f] 14492 --- [nio-8080-exec-4] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 17:54:46.713  INFO [94524ada-8983-46cc-8721-027008962798] 14492 --- [nio-8080-exec-5] o.e.xlr8travel.services.CartServiceImpl  : No existing cart found for user ****@****.*** with ID 4, creating a new one.
2025-06-29 17:54:46.719  WARN [cc2b7107-3bf6-4d00-ae4e-c22e2a48812f] 14492 --- [nio-8080-exec-4] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 17:54:46.728  INFO [94524ada-8983-46cc-8721-027008962798] 14492 --- [nio-8080-exec-5] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 17:54:49.047 DEBUG [4fc2feb8-ab52-4d65-a4ac-6c47c319e9cb] 14492 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-29 17:54:49.049 DEBUG [4fc2feb8-ab52-4d65-a4ac-6c47c319e9cb] 14492 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-29 17:54:49.051  INFO [4fc2feb8-ab52-4d65-a4ac-6c47c319e9cb] 14492 --- [nio-8080-exec-6] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris
2025-06-29 17:54:49.051  INFO [4fc2feb8-ab52-4d65-a4ac-6c47c319e9cb] 14492 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-29 17:54:49.051  INFO [4fc2feb8-ab52-4d65-a4ac-6c47c319e9cb] 14492 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-29 17:54:49.051 DEBUG [4fc2feb8-ab52-4d65-a4ac-6c47c319e9cb] 14492 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-29).    For example, if today is 2025-06-29, a good departure date would be between 2025-07-06 and 2025-07-13, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris";
2025-06-29 17:54:49.053  INFO [4fc2feb8-ab52-4d65-a4ac-6c47c319e9cb] 14492 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-29 17:54:49.053  INFO [4fc2feb8-ab52-4d65-a4ac-6c47c319e9cb] 14492 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-29 17:54:49.053  INFO [4fc2feb8-ab52-4d65-a4ac-6c47c319e9cb] 14492 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-29 17:54:49.054  INFO [4fc2feb8-ab52-4d65-a4ac-6c47c319e9cb] 14492 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 17:54:49.054  INFO [4fc2feb8-ab52-4d65-a4ac-6c47c319e9cb] 14492 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-29 17:54:49.057  INFO [4fc2feb8-ab52-4d65-a4ac-6c47c319e9cb] 14492 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-29 17:54:49.057  INFO [4fc2feb8-ab52-4d65-a4ac-6c47c319e9cb] 14492 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-29 17:54:49.057  INFO [4fc2feb8-ab52-4d65-a4ac-6c47c319e9cb] 14492 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-29 17:54:49.057  INFO [4fc2feb8-ab52-4d65-a4ac-6c47c319e9cb] 14492 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-29 17:54:51.032  INFO [4fc2feb8-ab52-4d65-a4ac-6c47c319e9cb] 14492 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-29 17:54:51.040  INFO [4fc2feb8-ab52-4d65-a4ac-6c47c319e9cb] 14492 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Response length: 195 characters
2025-06-29 17:54:51.042 DEBUG [4fc2feb8-ab52-4d65-a4ac-6c47c319e9cb] 14492 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-06",
  "returnDate": "2025-07-08",
  "tripType": "roundTrip",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-29 17:54:51.054 DEBUG [4fc2feb8-ab52-4d65-a4ac-6c47c319e9cb] 14492 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-29 17:54:51.055 DEBUG [4fc2feb8-ab52-4d65-a4ac-6c47c319e9cb] 14492 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-29 17:54:51.056 DEBUG [4fc2feb8-ab52-4d65-a4ac-6c47c319e9cb] 14492 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-29 17:54:51.062 DEBUG [4fc2feb8-ab52-4d65-a4ac-6c47c319e9cb] 14492 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 17:54:51.063  INFO [4fc2feb8-ab52-4d65-a4ac-6c47c319e9cb] 14492 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 17:54:51.063  INFO [4fc2feb8-ab52-4d65-a4ac-6c47c319e9cb] 14492 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-06, returnDate=2025-07-08, tripType=roundTrip, adults=1, children=0, infants=0
2025-06-29 17:54:51.063  INFO [4fc2feb8-ab52-4d65-a4ac-6c47c319e9cb] 14492 --- [nio-8080-exec-6] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-29 17:54:51.065 DEBUG [4fc2feb8-ab52-4d65-a4ac-6c47c319e9cb] 14492 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:54:45.716784, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=131AECF3C53000E87D6D5F0A59832A84], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:54:53.729 DEBUG [0341b8d5-f733-4906-b0a0-0fda2dd2ba25] 14492 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-29 17:54:53.731 DEBUG [0341b8d5-f733-4906-b0a0-0fda2dd2ba25] 14492 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-29 17:54:53.734  INFO [0341b8d5-f733-4906-b0a0-0fda2dd2ba25] 14492 --- [nio-8080-exec-9] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris one way
2025-06-29 17:54:53.734  INFO [0341b8d5-f733-4906-b0a0-0fda2dd2ba25] 14492 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-29 17:54:53.734  INFO [0341b8d5-f733-4906-b0a0-0fda2dd2ba25] 14492 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-29 17:54:53.735 DEBUG [0341b8d5-f733-4906-b0a0-0fda2dd2ba25] 14492 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-29).    For example, if today is 2025-06-29, a good departure date would be between 2025-07-06 and 2025-07-13, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris one way";
2025-06-29 17:54:53.736  INFO [0341b8d5-f733-4906-b0a0-0fda2dd2ba25] 14492 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-29 17:54:53.736  INFO [0341b8d5-f733-4906-b0a0-0fda2dd2ba25] 14492 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-29 17:54:53.737  INFO [0341b8d5-f733-4906-b0a0-0fda2dd2ba25] 14492 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-29 17:54:53.737  INFO [0341b8d5-f733-4906-b0a0-0fda2dd2ba25] 14492 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 17:54:53.737  INFO [0341b8d5-f733-4906-b0a0-0fda2dd2ba25] 14492 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-29 17:54:53.739  INFO [0341b8d5-f733-4906-b0a0-0fda2dd2ba25] 14492 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-29 17:54:53.740  INFO [0341b8d5-f733-4906-b0a0-0fda2dd2ba25] 14492 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-29 17:54:53.740  INFO [0341b8d5-f733-4906-b0a0-0fda2dd2ba25] 14492 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-29 17:54:53.740  INFO [0341b8d5-f733-4906-b0a0-0fda2dd2ba25] 14492 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-29 17:54:55.444  INFO [0341b8d5-f733-4906-b0a0-0fda2dd2ba25] 14492 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-29 17:54:55.444  INFO [0341b8d5-f733-4906-b0a0-0fda2dd2ba25] 14492 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Response length: 184 characters
2025-06-29 17:54:55.444 DEBUG [0341b8d5-f733-4906-b0a0-0fda2dd2ba25] 14492 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-06",
  "returnDate": null,
  "tripType": "oneWay",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-29 17:54:55.445 DEBUG [0341b8d5-f733-4906-b0a0-0fda2dd2ba25] 14492 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-29 17:54:55.445 DEBUG [0341b8d5-f733-4906-b0a0-0fda2dd2ba25] 14492 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-29 17:54:55.446 DEBUG [0341b8d5-f733-4906-b0a0-0fda2dd2ba25] 14492 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-29 17:54:55.446 DEBUG [0341b8d5-f733-4906-b0a0-0fda2dd2ba25] 14492 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 17:54:55.446  INFO [0341b8d5-f733-4906-b0a0-0fda2dd2ba25] 14492 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 17:54:55.446  INFO [0341b8d5-f733-4906-b0a0-0fda2dd2ba25] 14492 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-06, returnDate=null, tripType=oneWay, adults=1, children=0, infants=0
2025-06-29 17:54:55.447  INFO [0341b8d5-f733-4906-b0a0-0fda2dd2ba25] 14492 --- [nio-8080-exec-9] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-29 17:54:55.448 DEBUG [0341b8d5-f733-4906-b0a0-0fda2dd2ba25] 14492 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:54:45.716784, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=131AECF3C53000E87D6D5F0A59832A84], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:54:57.221 DEBUG [30f57f42-e5b7-4012-917d-3d3c0703fb3d] 14492 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 17:54:57.234 DEBUG [30f57f42-e5b7-4012-917d-3d3c0703fb3d] 14492 --- [nio-8080-exec-7] o.s.s.core.session.SessionRegistryImpl   : Registering session 1D10F43B68D66F13B6EECD45E9B68F25, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:54:45.716784, lastLogin=null, addresses=[], tickets=[])
2025-06-29 17:54:57.235 DEBUG [30f57f42-e5b7-4012-917d-3d3c0703fb3d] 14492 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:54:45.716784, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@7753526f]
2025-06-29 17:54:57.237 DEBUG [30f57f42-e5b7-4012-917d-3d3c0703fb3d] 14492 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me
2025-06-29 17:54:57.238  INFO [30f57f42-e5b7-4012-917d-3d3c0703fb3d] 14492 --- [nio-8080-exec-7] o.e.x.controllers.UserController         : Request received for current user details: ****@****.***
2025-06-29 17:54:57.243  INFO [30f57f42-e5b7-4012-917d-3d3c0703fb3d] 14492 --- [nio-8080-exec-7] o.e.x.controllers.UserController         : Returning details for user: ****@****.***
2025-06-29 17:54:57.301 DEBUG [981332b7-1a23-469e-a9a0-b7a94cc0e132] 14492 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 17:54:57.303 DEBUG [4e41888e-2e4e-45ef-bde1-77eaa3a2eeb2] 14492 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 17:54:57.306 DEBUG [7e8ff8d7-5a5c-4269-96c7-d57c2c3bfb3b] 14492 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:54:57.306 DEBUG [4e41888e-2e4e-45ef-bde1-77eaa3a2eeb2] 14492 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 17:54:57.308  INFO [4e41888e-2e4e-45ef-bde1-77eaa3a2eeb2] 14492 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 17:54:57.309  INFO [4e41888e-2e4e-45ef-bde1-77eaa3a2eeb2] 14492 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 17:54:57.316 DEBUG [981332b7-1a23-469e-a9a0-b7a94cc0e132] 14492 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:54:45.716784, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=131AECF3C53000E87D6D5F0A59832A84], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:54:57.320 DEBUG [981332b7-1a23-469e-a9a0-b7a94cc0e132] 14492 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 17:54:57.353 DEBUG [7e8ff8d7-5a5c-4269-96c7-d57c2c3bfb3b] 14492 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:54:45.716784, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=131AECF3C53000E87D6D5F0A59832A84], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:54:57.356 DEBUG [7e8ff8d7-5a5c-4269-96c7-d57c2c3bfb3b] 14492 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:54:57.357  INFO [7e8ff8d7-5a5c-4269-96c7-d57c2c3bfb3b] 14492 --- [nio-8080-exec-8] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:54:57.362  WARN [981332b7-1a23-469e-a9a0-b7a94cc0e132] 14492 --- [io-8080-exec-10] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 17:54:57.364  WARN [981332b7-1a23-469e-a9a0-b7a94cc0e132] 14492 --- [io-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 17:54:57.373 DEBUG [c621acdb-9a33-42d5-8d0a-78bab8d0bd0a] 14492 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 17:54:57.385  INFO [7e8ff8d7-5a5c-4269-96c7-d57c2c3bfb3b] 14492 --- [nio-8080-exec-8] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 17:54:57.392 DEBUG [c621acdb-9a33-42d5-8d0a-78bab8d0bd0a] 14492 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:54:45.716784, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=131AECF3C53000E87D6D5F0A59832A84], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:54:57.394 DEBUG [c621acdb-9a33-42d5-8d0a-78bab8d0bd0a] 14492 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 17:54:57.402  WARN [c621acdb-9a33-42d5-8d0a-78bab8d0bd0a] 14492 --- [nio-8080-exec-1] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 17:54:57.403  WARN [c621acdb-9a33-42d5-8d0a-78bab8d0bd0a] 14492 --- [nio-8080-exec-1] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 17:54:57.425  INFO [4e41888e-2e4e-45ef-bde1-77eaa3a2eeb2] 14492 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 17:54:57.428 DEBUG [4e41888e-2e4e-45ef-bde1-77eaa3a2eeb2] 14492 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:54:45.716784, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=131AECF3C53000E87D6D5F0A59832A84], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:54:57.437 DEBUG [f9506384-9346-4888-826d-88c0864e85ca] 14492 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 17:54:57.439 DEBUG [f9506384-9346-4888-826d-88c0864e85ca] 14492 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 17:54:57.441  INFO [f9506384-9346-4888-826d-88c0864e85ca] 14492 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 17:54:57.441  INFO [f9506384-9346-4888-826d-88c0864e85ca] 14492 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 17:54:57.524 DEBUG [d5af2ddd-bc0e-43ec-afcb-e7b6e9a7b8a3] 14492 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 17:54:57.527 DEBUG [d5af2ddd-bc0e-43ec-afcb-e7b6e9a7b8a3] 14492 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 17:54:57.529  INFO [d5af2ddd-bc0e-43ec-afcb-e7b6e9a7b8a3] 14492 --- [nio-8080-exec-4] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 17:54:57.544  INFO [f9506384-9346-4888-826d-88c0864e85ca] 14492 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 17:54:57.546 DEBUG [f9506384-9346-4888-826d-88c0864e85ca] 14492 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:54:45.716784, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=131AECF3C53000E87D6D5F0A59832A84], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:54:57.713  INFO [d5af2ddd-bc0e-43ec-afcb-e7b6e9a7b8a3] 14492 --- [nio-8080-exec-4] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 17:54:57.715 DEBUG [d5af2ddd-bc0e-43ec-afcb-e7b6e9a7b8a3] 14492 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:54:45.716784, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=131AECF3C53000E87D6D5F0A59832A84], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:54:57.722 DEBUG [fe30ed86-1603-4f92-a84a-4586f04e776d] 14492 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 17:54:57.724 DEBUG [fe30ed86-1603-4f92-a84a-4586f04e776d] 14492 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 17:54:57.724 DEBUG [4904127a-df96-430f-960e-d114e45bf332] 14492 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 17:54:57.725  INFO [fe30ed86-1603-4f92-a84a-4586f04e776d] 14492 --- [nio-8080-exec-5] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 17:54:57.725 DEBUG [4904127a-df96-430f-960e-d114e45bf332] 14492 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 17:54:57.726  INFO [4904127a-df96-430f-960e-d114e45bf332] 14492 --- [nio-8080-exec-6] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 17:54:57.774  INFO [fe30ed86-1603-4f92-a84a-4586f04e776d] 14492 --- [nio-8080-exec-5] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 17:54:57.776 DEBUG [fe30ed86-1603-4f92-a84a-4586f04e776d] 14492 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:54:45.716784, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=131AECF3C53000E87D6D5F0A59832A84], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:54:57.919  INFO [4904127a-df96-430f-960e-d114e45bf332] 14492 --- [nio-8080-exec-6] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 17:54:57.920 DEBUG [4904127a-df96-430f-960e-d114e45bf332] 14492 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:54:45.716784, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=131AECF3C53000E87D6D5F0A59832A84], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:54:57.930 DEBUG [e80aaaed-879e-4b67-a63d-595982c7b985] 14492 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 17:54:57.932 DEBUG [e80aaaed-879e-4b67-a63d-595982c7b985] 14492 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 17:54:57.933  INFO [e80aaaed-879e-4b67-a63d-595982c7b985] 14492 --- [nio-8080-exec-9] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 17:54:57.981  INFO [e80aaaed-879e-4b67-a63d-595982c7b985] 14492 --- [nio-8080-exec-9] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 17:54:57.982 DEBUG [e80aaaed-879e-4b67-a63d-595982c7b985] 14492 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:54:45.716784, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=131AECF3C53000E87D6D5F0A59832A84], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:55:06.373 DEBUG [bf60685e-cfc1-4274-9842-a8e3bd1f1b4d] 14492 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 17:55:06.387 DEBUG [bf60685e-cfc1-4274-9842-a8e3bd1f1b4d] 14492 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:54:45.716784, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=131AECF3C53000E87D6D5F0A59832A84], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:55:06.391 DEBUG [bf60685e-cfc1-4274-9842-a8e3bd1f1b4d] 14492 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 17:55:06.392  INFO [bf60685e-cfc1-4274-9842-a8e3bd1f1b4d] 14492 --- [nio-8080-exec-7] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 17:55:06.392  INFO [bf60685e-cfc1-4274-9842-a8e3bd1f1b4d] 14492 --- [nio-8080-exec-7] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 17:55:06.410 DEBUG [a65968db-d61c-49e6-b412-7ed1f37d5777] 14492 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 17:55:06.425 DEBUG [a65968db-d61c-49e6-b412-7ed1f37d5777] 14492 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:54:45.716784, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=131AECF3C53000E87D6D5F0A59832A84], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:55:06.438 DEBUG [a65968db-d61c-49e6-b412-7ed1f37d5777] 14492 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 17:55:06.451  INFO [a65968db-d61c-49e6-b412-7ed1f37d5777] 14492 --- [io-8080-exec-10] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 17:55:06.451  INFO [a65968db-d61c-49e6-b412-7ed1f37d5777] 14492 --- [io-8080-exec-10] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 17:55:06.759 DEBUG [fdbd6135-1f52-4b44-a256-247c20666c88] 14492 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 17:55:06.778 DEBUG [fdbd6135-1f52-4b44-a256-247c20666c88] 14492 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:54:45.716784, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=131AECF3C53000E87D6D5F0A59832A84], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:55:06.782 DEBUG [fdbd6135-1f52-4b44-a256-247c20666c88] 14492 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 17:55:06.783  INFO [fdbd6135-1f52-4b44-a256-247c20666c88] 14492 --- [nio-8080-exec-8] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 17:55:06.783  INFO [fdbd6135-1f52-4b44-a256-247c20666c88] 14492 --- [nio-8080-exec-8] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 17:55:13.037 DEBUG [6b8b9b05-14d8-4f83-9456-8ffb013e0ecc] 14492 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/cart/add
2025-06-29 17:55:13.048 DEBUG [6b8b9b05-14d8-4f83-9456-8ffb013e0ecc] 14492 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:54:45.716784, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=131AECF3C53000E87D6D5F0A59832A84], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:55:13.050 DEBUG [6b8b9b05-14d8-4f83-9456-8ffb013e0ecc] 14492 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/cart/add
2025-06-29 17:55:13.094  INFO [6b8b9b05-14d8-4f83-9456-8ffb013e0ecc] 14492 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : User ****@****.*** request to add flight ID 16 to persistent cart
2025-06-29 17:55:13.167  INFO [6b8b9b05-14d8-4f83-9456-8ffb013e0ecc] 14492 --- [nio-8080-exec-1] o.e.xlr8travel.services.CartServiceImpl  : Added new flight ID 16 to cart for user ****@****.***
2025-06-29 17:55:13.207  INFO [6b8b9b05-14d8-4f83-9456-8ffb013e0ecc] 14492 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Flight ID 16 added/incremented in persistent cart for user ****@****.***.
2025-06-29 17:55:13.238 DEBUG [65253730-45bf-49b2-ba79-f75f2a49ed40] 14492 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:55:13.258 DEBUG [65253730-45bf-49b2-ba79-f75f2a49ed40] 14492 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:54:45.716784, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=131AECF3C53000E87D6D5F0A59832A84], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:55:13.261 DEBUG [65253730-45bf-49b2-ba79-f75f2a49ed40] 14492 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:55:13.262  INFO [65253730-45bf-49b2-ba79-f75f2a49ed40] 14492 --- [nio-8080-exec-2] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:55:13.342  INFO [65253730-45bf-49b2-ba79-f75f2a49ed40] 14492 --- [nio-8080-exec-2] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 17:55:13.735 DEBUG [4b3ba2f8-2707-46fb-93c5-a93c3fbb850c] 14492 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:55:13.746 DEBUG [4b3ba2f8-2707-46fb-93c5-a93c3fbb850c] 14492 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:54:45.716784, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=131AECF3C53000E87D6D5F0A59832A84], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:55:13.747 DEBUG [4b3ba2f8-2707-46fb-93c5-a93c3fbb850c] 14492 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:55:13.748  INFO [4b3ba2f8-2707-46fb-93c5-a93c3fbb850c] 14492 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:55:13.792  INFO [4b3ba2f8-2707-46fb-93c5-a93c3fbb850c] 14492 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 17:55:13.798 DEBUG [d3b250a7-8be2-4bfb-9e99-8c28dc093048] 14492 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:55:13.807 DEBUG [d3b250a7-8be2-4bfb-9e99-8c28dc093048] 14492 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:54:45.716784, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=131AECF3C53000E87D6D5F0A59832A84], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:55:13.809 DEBUG [d3b250a7-8be2-4bfb-9e99-8c28dc093048] 14492 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:55:13.809  INFO [d3b250a7-8be2-4bfb-9e99-8c28dc093048] 14492 --- [nio-8080-exec-4] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:55:13.853  INFO [d3b250a7-8be2-4bfb-9e99-8c28dc093048] 14492 --- [nio-8080-exec-4] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 17:55:15.412 DEBUG [758740f4-36ec-4311-9d6a-cf985604e5bd] 14492 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:55:15.429 DEBUG [758740f4-36ec-4311-9d6a-cf985604e5bd] 14492 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:54:45.716784, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=131AECF3C53000E87D6D5F0A59832A84], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:55:15.430 DEBUG [758740f4-36ec-4311-9d6a-cf985604e5bd] 14492 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:55:15.431  INFO [758740f4-36ec-4311-9d6a-cf985604e5bd] 14492 --- [nio-8080-exec-5] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:55:15.484  INFO [758740f4-36ec-4311-9d6a-cf985604e5bd] 14492 --- [nio-8080-exec-5] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 17:55:15.491 DEBUG [ff05ebed-24de-4c0b-9593-3c1d0e442322] 14492 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:55:15.502 DEBUG [ff05ebed-24de-4c0b-9593-3c1d0e442322] 14492 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:54:45.716784, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=131AECF3C53000E87D6D5F0A59832A84], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:55:15.504 DEBUG [ff05ebed-24de-4c0b-9593-3c1d0e442322] 14492 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:55:15.504  INFO [ff05ebed-24de-4c0b-9593-3c1d0e442322] 14492 --- [nio-8080-exec-6] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:55:15.565  INFO [ff05ebed-24de-4c0b-9593-3c1d0e442322] 14492 --- [nio-8080-exec-6] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 17:55:21.831 DEBUG [8cfa3313-9813-4200-acfa-596d6a0663bb] 14492 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing POST /api/checkout/create-payment-intent
2025-06-29 17:55:21.832 DEBUG [8cfa3313-9813-4200-acfa-596d6a0663bb] 14492 --- [nio-8080-exec-9] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 17:55:21.833 DEBUG [8cfa3313-9813-4200-acfa-596d6a0663bb] 14492 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured POST /api/checkout/create-payment-intent
2025-06-29 17:55:21.850  INFO [8cfa3313-9813-4200-acfa-596d6a0663bb] 14492 --- [nio-8080-exec-9] o.e.x.controllers.PaymentController      : Creating payment intent for amount: 23995 ron
2025-06-29 17:55:22.485  INFO [8cfa3313-9813-4200-acfa-596d6a0663bb] 14492 --- [nio-8080-exec-9] o.e.x.controllers.PaymentController      : Payment intent created successfully: pi_3RfMdaGf8s1WZJnq1SmwGrzP
2025-06-29 17:55:23.714 DEBUG [7cf59e4d-92cf-432d-adca-332b606f007d] 14492 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/checkout/confirm
2025-06-29 17:55:23.725 DEBUG [7cf59e4d-92cf-432d-adca-332b606f007d] 14492 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:54:45.716784, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=131AECF3C53000E87D6D5F0A59832A84], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:55:23.726 DEBUG [7cf59e4d-92cf-432d-adca-332b606f007d] 14492 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/checkout/confirm
2025-06-29 17:55:23.728  INFO [7cf59e4d-92cf-432d-adca-332b606f007d] 14492 --- [nio-8080-exec-7] o.e.x.controllers.CheckoutController     : Received purchase confirmation request.
2025-06-29 17:55:23.734  INFO [7cf59e4d-92cf-432d-adca-332b606f007d] 14492 --- [nio-8080-exec-7] o.e.x.controllers.CheckoutController     : Processing purchase for user: ****@****.***
2025-06-29 17:55:23.777  INFO [7cf59e4d-92cf-432d-adca-332b606f007d] 14492 --- [nio-8080-exec-7] o.e.x.controllers.CheckoutController     : User ****@****.*** persistent cart has 1 items.
2025-06-29 17:55:23.777  WARN [7cf59e4d-92cf-432d-adca-332b606f007d] 14492 --- [nio-8080-exec-7] o.e.x.controllers.CheckoutController     : !!! SIMULATING successful payment processing for user ****@****.*** !!!
2025-06-29 17:55:23.779  INFO [7cf59e4d-92cf-432d-adca-332b606f007d] 14492 --- [nio-8080-exec-7] o.e.x.services.OrderServiceImpl          : Creating order from persistent cart for user: ****@****.***
2025-06-29 17:55:23.785  INFO [7cf59e4d-92cf-432d-adca-332b606f007d] 14492 --- [nio-8080-exec-7] o.e.x.services.OrderServiceImpl          : Order 1 created for user ****@****.***, status: PENDING_PAYMENT. Total: 37.99
2025-06-29 17:55:23.786  WARN [7cf59e4d-92cf-432d-adca-332b606f007d] 14492 --- [nio-8080-exec-7] o.e.x.services.OrderServiceImpl          : Unexpected seatId format: XXXX-XXXX-XXXX-XXXX, deferring seat selection
2025-06-29 17:55:23.786  INFO [7cf59e4d-92cf-432d-adca-332b606f007d] 14492 --- [nio-8080-exec-7] o.e.x.services.OrderServiceImpl          : Ticket has baggage type: BAGGAGE_TYPE_WEIGHT_CARRY_ON_0
2025-06-29 17:55:25.127  INFO [7cf59e4d-92cf-432d-adca-332b606f007d] 14492 --- [nio-8080-exec-7] o.e.x.services.EmailServiceImpl          : Purchase confirmation email sent to ****@****.***
2025-06-29 17:55:25.127  INFO [7cf59e4d-92cf-432d-adca-332b606f007d] 14492 --- [nio-8080-exec-7] o.e.x.services.OrderServiceImpl          : Purchase confirmation email sent to user: ****@****.***
2025-06-29 17:55:25.141  INFO [7cf59e4d-92cf-432d-adca-332b606f007d] 14492 --- [nio-8080-exec-7] o.e.x.controllers.CheckoutController     : Order successfully created for user ****@****.***. Confirmation: 1
2025-06-29 17:55:25.145  INFO [7cf59e4d-92cf-432d-adca-332b606f007d] 14492 --- [nio-8080-exec-7] o.e.xlr8travel.services.CartServiceImpl  : Clearing 1 items from cart for user ****@****.***
2025-06-29 17:55:25.178  INFO [7cf59e4d-92cf-432d-adca-332b606f007d] 14492 --- [nio-8080-exec-7] o.e.x.controllers.CheckoutController     : Persistent cart cleared for user ****@****.***.
2025-06-29 17:55:25.188 DEBUG [c8fceed3-7963-4afb-9824-72bc452c154f] 14492 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing DELETE /api/cart/remove/16
2025-06-29 17:55:25.279 DEBUG [c8fceed3-7963-4afb-9824-72bc452c154f] 14492 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:54:45.716784, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=131AECF3C53000E87D6D5F0A59832A84], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:55:25.280 DEBUG [c8fceed3-7963-4afb-9824-72bc452c154f] 14492 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured DELETE /api/cart/remove/16
2025-06-29 17:55:25.374  INFO [c8fceed3-7963-4afb-9824-72bc452c154f] 14492 --- [io-8080-exec-10] o.e.x.controllers.CartController         : User ****@****.*** request to remove flight ID 16 from persistent cart
2025-06-29 17:55:25.383  WARN [c8fceed3-7963-4afb-9824-72bc452c154f] 14492 --- [io-8080-exec-10] o.e.xlr8travel.services.CartServiceImpl  : Attempted to remove flight ID 16 not found in cart for user ****@****.***
2025-06-29 17:55:25.385  WARN [c8fceed3-7963-4afb-9824-72bc452c154f] 14492 --- [io-8080-exec-10] o.e.x.controllers.CartController         : Attempted to remove flight ID 16 not found in persistent cart for user ****@****.***
2025-06-29 17:55:25.395 DEBUG [d9e24b8a-1831-42a6-9e8e-da4355c3cf64] 14492 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:55:25.498 DEBUG [d9e24b8a-1831-42a6-9e8e-da4355c3cf64] 14492 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:54:45.716784, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=131AECF3C53000E87D6D5F0A59832A84], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:55:25.499 DEBUG [d9e24b8a-1831-42a6-9e8e-da4355c3cf64] 14492 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:55:25.500  INFO [d9e24b8a-1831-42a6-9e8e-da4355c3cf64] 14492 --- [nio-8080-exec-8] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:55:25.587  INFO [d9e24b8a-1831-42a6-9e8e-da4355c3cf64] 14492 --- [nio-8080-exec-8] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 17:55:27.003 DEBUG [987f1faa-8411-409b-abad-7f9952995dad] 14492 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 17:55:27.109 DEBUG [987f1faa-8411-409b-abad-7f9952995dad] 14492 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:54:45.716784, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=131AECF3C53000E87D6D5F0A59832A84], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:55:27.111 DEBUG [987f1faa-8411-409b-abad-7f9952995dad] 14492 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 17:55:27.202  INFO [987f1faa-8411-409b-abad-7f9952995dad] 14492 --- [nio-8080-exec-1] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 17:55:27.202  INFO [987f1faa-8411-409b-abad-7f9952995dad] 14492 --- [nio-8080-exec-1] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 17:55:27.209  INFO [987f1faa-8411-409b-abad-7f9952995dad] 14492 --- [nio-8080-exec-1] o.e.x.services.TicketServiceImpl         : Found 1 tickets eligible for check-in for user 4
2025-06-29 17:55:27.230 DEBUG [de99ef2f-964d-48d3-a945-d68cfb9a369a] 14492 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 17:55:27.320 DEBUG [de99ef2f-964d-48d3-a945-d68cfb9a369a] 14492 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:54:45.716784, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=131AECF3C53000E87D6D5F0A59832A84], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:55:27.322 DEBUG [de99ef2f-964d-48d3-a945-d68cfb9a369a] 14492 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 17:55:27.406  INFO [de99ef2f-964d-48d3-a945-d68cfb9a369a] 14492 --- [nio-8080-exec-2] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 17:55:27.406  INFO [de99ef2f-964d-48d3-a945-d68cfb9a369a] 14492 --- [nio-8080-exec-2] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 17:55:27.412  INFO [de99ef2f-964d-48d3-a945-d68cfb9a369a] 14492 --- [nio-8080-exec-2] o.e.x.services.TicketServiceImpl         : Found 1 tickets eligible for check-in for user 4
2025-06-29 17:55:30.850 DEBUG [0eba073f-8c03-4aff-941b-a7130abfcd3f] 14492 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 17:55:30.961 DEBUG [0eba073f-8c03-4aff-941b-a7130abfcd3f] 14492 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:54:45.716784, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=131AECF3C53000E87D6D5F0A59832A84], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:55:30.963 DEBUG [0eba073f-8c03-4aff-941b-a7130abfcd3f] 14492 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 17:55:30.964  INFO [0eba073f-8c03-4aff-941b-a7130abfcd3f] 14492 --- [nio-8080-exec-3] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 17:55:30.964  INFO [0eba073f-8c03-4aff-941b-a7130abfcd3f] 14492 --- [nio-8080-exec-3] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 17:55:31.011 DEBUG [9024fc6c-11c4-4a5a-8eb1-de8285898f3f] 14492 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 17:55:31.103 DEBUG [9024fc6c-11c4-4a5a-8eb1-de8285898f3f] 14492 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:54:45.716784, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=131AECF3C53000E87D6D5F0A59832A84], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:55:31.106 DEBUG [9024fc6c-11c4-4a5a-8eb1-de8285898f3f] 14492 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 17:55:31.106  INFO [9024fc6c-11c4-4a5a-8eb1-de8285898f3f] 14492 --- [nio-8080-exec-4] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 17:55:31.107  INFO [9024fc6c-11c4-4a5a-8eb1-de8285898f3f] 14492 --- [nio-8080-exec-4] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 17:55:36.586 DEBUG [eed36ebb-df95-4581-b0b8-d453a735e1d8] 14492 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 17:55:36.698 DEBUG [eed36ebb-df95-4581-b0b8-d453a735e1d8] 14492 --- [nio-8080-exec-5] o.s.s.core.session.SessionRegistryImpl   : Registering session 42E5F7E35B87DA75A5BD603A7A4E448C, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:54:45.716784, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}])
2025-06-29 17:55:36.699 DEBUG [eed36ebb-df95-4581-b0b8-d453a735e1d8] 14492 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:54:45.716784, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@37559aae]
2025-06-29 17:55:36.701 DEBUG [eed36ebb-df95-4581-b0b8-d453a735e1d8] 14492 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me
2025-06-29 17:55:36.701  INFO [eed36ebb-df95-4581-b0b8-d453a735e1d8] 14492 --- [nio-8080-exec-5] o.e.x.controllers.UserController         : Request received for current user details: ****@****.***
2025-06-29 17:55:36.811  INFO [eed36ebb-df95-4581-b0b8-d453a735e1d8] 14492 --- [nio-8080-exec-5] o.e.x.controllers.UserController         : Returning details for user: ****@****.***
2025-06-29 17:55:36.910 DEBUG [fbf25044-3313-482d-8efb-527aebae1474] 14492 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 17:55:36.910 DEBUG [dbdfed55-8c7d-499a-8f39-4c8041d2f7a3] 14492 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 17:55:36.915 DEBUG [40039013-55c2-4654-841c-f1c36682e38a] 14492 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 17:55:36.915 DEBUG [fcc28528-a137-4f5f-bf4b-6a1044389af1] 14492 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 17:55:36.918 DEBUG [34c8c6db-4024-4ac0-8195-2c950b8c128f] 14492 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 17:55:37.099 DEBUG [fbf25044-3313-482d-8efb-527aebae1474] 14492 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:54:45.716784, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=131AECF3C53000E87D6D5F0A59832A84], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:55:37.102 DEBUG [fbf25044-3313-482d-8efb-527aebae1474] 14492 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 17:55:37.102 DEBUG [dbdfed55-8c7d-499a-8f39-4c8041d2f7a3] 14492 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:54:45.716784, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=131AECF3C53000E87D6D5F0A59832A84], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:55:37.102 DEBUG [40039013-55c2-4654-841c-f1c36682e38a] 14492 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:54:45.716784, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=131AECF3C53000E87D6D5F0A59832A84], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:55:37.104 DEBUG [dbdfed55-8c7d-499a-8f39-4c8041d2f7a3] 14492 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 17:55:37.104 DEBUG [40039013-55c2-4654-841c-f1c36682e38a] 14492 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 17:55:37.104 DEBUG [fcc28528-a137-4f5f-bf4b-6a1044389af1] 14492 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:54:45.716784, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=131AECF3C53000E87D6D5F0A59832A84], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:55:37.106 DEBUG [fcc28528-a137-4f5f-bf4b-6a1044389af1] 14492 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 17:55:37.106  INFO [fcc28528-a137-4f5f-bf4b-6a1044389af1] 14492 --- [nio-8080-exec-7] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 17:55:37.108 DEBUG [34c8c6db-4024-4ac0-8195-2c950b8c128f] 14492 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:54:45.716784, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=131AECF3C53000E87D6D5F0A59832A84], Granted Authorities=[ROLE_USER]]]
2025-06-29 17:55:37.111 DEBUG [34c8c6db-4024-4ac0-8195-2c950b8c128f] 14492 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 17:55:37.256  INFO [fbf25044-3313-482d-8efb-527aebae1474] 14492 --- [nio-8080-exec-9] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 17:55:37.257  INFO [fbf25044-3313-482d-8efb-527aebae1474] 14492 --- [nio-8080-exec-9] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 17:55:37.257  WARN [dbdfed55-8c7d-499a-8f39-4c8041d2f7a3] 14492 --- [nio-8080-exec-6] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 17:55:37.258  WARN [dbdfed55-8c7d-499a-8f39-4c8041d2f7a3] 14492 --- [nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 17:55:37.261  INFO [34c8c6db-4024-4ac0-8195-2c950b8c128f] 14492 --- [nio-8080-exec-8] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 17:55:37.262  INFO [34c8c6db-4024-4ac0-8195-2c950b8c128f] 14492 --- [nio-8080-exec-8] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 17:55:37.262  WARN [40039013-55c2-4654-841c-f1c36682e38a] 14492 --- [io-8080-exec-10] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 17:55:37.263  WARN [40039013-55c2-4654-841c-f1c36682e38a] 14492 --- [io-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 17:55:37.265  INFO [fbf25044-3313-482d-8efb-527aebae1474] 14492 --- [nio-8080-exec-9] o.e.x.services.TicketServiceImpl         : Found 1 tickets eligible for check-in for user 4
2025-06-29 17:55:37.269  INFO [34c8c6db-4024-4ac0-8195-2c950b8c128f] 14492 --- [nio-8080-exec-8] o.e.x.services.TicketServiceImpl         : Found 1 tickets eligible for check-in for user 4
2025-06-29 17:55:37.275  INFO [fcc28528-a137-4f5f-bf4b-6a1044389af1] 14492 --- [nio-8080-exec-7] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 18:00:01.911 DEBUG [3cc47cf0-b3de-497d-9a13-311580a86c77] 14492 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/nearby?origin=OTP
2025-06-29 18:00:01.913 DEBUG [3cc47cf0-b3de-497d-9a13-311580a86c77] 14492 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/nearby?origin=OTP
2025-06-29 18:00:01.913  INFO [3cc47cf0-b3de-497d-9a13-311580a86c77] 14492 --- [nio-8080-exec-6] o.e.x.controllers.FlightController       : Received request for nearby flights from origin: OTP, departureDate: null
2025-06-29 18:00:01.914  INFO [3cc47cf0-b3de-497d-9a13-311580a86c77] 14492 --- [nio-8080-exec-6] o.e.x.controllers.FlightController       : Using search date: 2025-06-29
2025-06-29 18:00:01.914  INFO [3cc47cf0-b3de-497d-9a13-311580a86c77] 14492 --- [nio-8080-exec-6] o.e.x.controllers.FlightController       : Cache key: OTP-2025-06-29
2025-06-29 18:00:01.914  INFO [3cc47cf0-b3de-497d-9a13-311580a86c77] 14492 --- [nio-8080-exec-6] o.e.x.controllers.FlightController       : No valid cache found. Searching nearby flights from origin: OTP, after date: 2025-06-29
2025-06-29 18:00:01.914  INFO [3cc47cf0-b3de-497d-9a13-311580a86c77] 14492 --- [nio-8080-exec-6] o.e.x.controllers.FlightController       : Calling flightService.findByOriginAndDepartureDateAfter for origin: OTP, date: 2025-06-29
2025-06-29 18:00:01.973  INFO [3cc47cf0-b3de-497d-9a13-311580a86c77] 14492 --- [nio-8080-exec-6] o.e.x.controllers.FlightController       : Database query completed, found 16 flights
2025-06-29 18:00:01.974  INFO [3cc47cf0-b3de-497d-9a13-311580a86c77] 14492 --- [nio-8080-exec-6] o.e.x.controllers.FlightController       : Converting 16 Flight entities to FlightDTOs
2025-06-29 18:00:01.974  INFO [3cc47cf0-b3de-497d-9a13-311580a86c77] 14492 --- [nio-8080-exec-6] o.e.x.controllers.FlightController       : Converted to 16 FlightDTOs
2025-06-29 18:00:01.974  INFO [3cc47cf0-b3de-497d-9a13-311580a86c77] 14492 --- [nio-8080-exec-6] o.e.x.controllers.FlightController       : Grouping flights by destination country
2025-06-29 18:00:01.974  INFO [3cc47cf0-b3de-497d-9a13-311580a86c77] 14492 --- [nio-8080-exec-6] o.e.x.controllers.FlightController       : Grouped flights into 7 countries
2025-06-29 18:00:01.974  INFO [3cc47cf0-b3de-497d-9a13-311580a86c77] 14492 --- [nio-8080-exec-6] o.e.x.controllers.FlightController       : Selecting diverse flights - one from each country first
2025-06-29 18:00:01.975  INFO [3cc47cf0-b3de-497d-9a13-311580a86c77] 14492 --- [nio-8080-exec-6] o.e.x.controllers.FlightController       : Adding first flight from Greece (has 2 flights)
2025-06-29 18:00:01.975  INFO [3cc47cf0-b3de-497d-9a13-311580a86c77] 14492 --- [nio-8080-exec-6] o.e.x.controllers.FlightController       : Adding first flight from Netherlands (has 2 flights)
2025-06-29 18:00:01.975  INFO [3cc47cf0-b3de-497d-9a13-311580a86c77] 14492 --- [nio-8080-exec-6] o.e.x.controllers.FlightController       : Adding first flight from Italy (has 2 flights)
2025-06-29 18:00:01.975  INFO [3cc47cf0-b3de-497d-9a13-311580a86c77] 14492 --- [nio-8080-exec-6] o.e.x.controllers.FlightController       : Adding first flight from United Kingdom (has 2 flights)
2025-06-29 18:00:01.975  INFO [3cc47cf0-b3de-497d-9a13-311580a86c77] 14492 --- [nio-8080-exec-6] o.e.x.controllers.FlightController       : Adding first flight from France (has 2 flights)
2025-06-29 18:00:01.975  INFO [3cc47cf0-b3de-497d-9a13-311580a86c77] 14492 --- [nio-8080-exec-6] o.e.x.controllers.FlightController       : Adding first flight from Switzerland (has 2 flights)
2025-06-29 18:00:01.976  INFO [3cc47cf0-b3de-497d-9a13-311580a86c77] 14492 --- [nio-8080-exec-6] o.e.x.controllers.FlightController       : Reached 6 flights after first pass, stopping
2025-06-29 18:00:01.976  INFO [3cc47cf0-b3de-497d-9a13-311580a86c77] 14492 --- [nio-8080-exec-6] o.e.x.controllers.FlightController       : Caching 6 diverse flights with key: OTP-2025-06-29
2025-06-29 18:00:01.976  INFO [3cc47cf0-b3de-497d-9a13-311580a86c77] 14492 --- [nio-8080-exec-6] o.e.x.controllers.FlightController       : Returning 6 diverse nearby flights from: OTP
2025-06-29 18:00:01.977 DEBUG [3cc47cf0-b3de-497d-9a13-311580a86c77] 14492 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:54:45.716784, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=131AECF3C53000E87D6D5F0A59832A84], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:00:06.260 DEBUG [7cee5393-49d6-442c-9f03-2c1ed064b29b] 14492 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-29 18:00:06.262 DEBUG [7cee5393-49d6-442c-9f03-2c1ed064b29b] 14492 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-29 18:00:06.263  INFO [7cee5393-49d6-442c-9f03-2c1ed064b29b] 14492 --- [io-8080-exec-10] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris
2025-06-29 18:00:06.263  INFO [7cee5393-49d6-442c-9f03-2c1ed064b29b] 14492 --- [io-8080-exec-10] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-29 18:00:06.263  INFO [7cee5393-49d6-442c-9f03-2c1ed064b29b] 14492 --- [io-8080-exec-10] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-29 18:00:06.263 DEBUG [7cee5393-49d6-442c-9f03-2c1ed064b29b] 14492 --- [io-8080-exec-10] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-29).    For example, if today is 2025-06-29, a good departure date would be between 2025-07-06 and 2025-07-13, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris";
2025-06-29 18:00:06.266  INFO [7cee5393-49d6-442c-9f03-2c1ed064b29b] 14492 --- [io-8080-exec-10] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-29 18:00:06.266  INFO [7cee5393-49d6-442c-9f03-2c1ed064b29b] 14492 --- [io-8080-exec-10] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-29 18:00:06.266  INFO [7cee5393-49d6-442c-9f03-2c1ed064b29b] 14492 --- [io-8080-exec-10] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-29 18:00:06.266  INFO [7cee5393-49d6-442c-9f03-2c1ed064b29b] 14492 --- [io-8080-exec-10] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 18:00:06.266  INFO [7cee5393-49d6-442c-9f03-2c1ed064b29b] 14492 --- [io-8080-exec-10] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-29 18:00:06.268  INFO [7cee5393-49d6-442c-9f03-2c1ed064b29b] 14492 --- [io-8080-exec-10] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-29 18:00:06.268  INFO [7cee5393-49d6-442c-9f03-2c1ed064b29b] 14492 --- [io-8080-exec-10] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-29 18:00:06.268  INFO [7cee5393-49d6-442c-9f03-2c1ed064b29b] 14492 --- [io-8080-exec-10] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-29 18:00:06.269  INFO [7cee5393-49d6-442c-9f03-2c1ed064b29b] 14492 --- [io-8080-exec-10] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-29 18:00:08.160  INFO [7cee5393-49d6-442c-9f03-2c1ed064b29b] 14492 --- [io-8080-exec-10] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-29 18:00:08.161  INFO [7cee5393-49d6-442c-9f03-2c1ed064b29b] 14492 --- [io-8080-exec-10] o.e.x.services.GeminiServiceImpl         : Response length: 195 characters
2025-06-29 18:00:08.161 DEBUG [7cee5393-49d6-442c-9f03-2c1ed064b29b] 14492 --- [io-8080-exec-10] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-06",
  "returnDate": "2025-07-08",
  "tripType": "roundTrip",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-29 18:00:08.161 DEBUG [7cee5393-49d6-442c-9f03-2c1ed064b29b] 14492 --- [io-8080-exec-10] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-29 18:00:08.162 DEBUG [7cee5393-49d6-442c-9f03-2c1ed064b29b] 14492 --- [io-8080-exec-10] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-29 18:00:08.162 DEBUG [7cee5393-49d6-442c-9f03-2c1ed064b29b] 14492 --- [io-8080-exec-10] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-29 18:00:08.163 DEBUG [7cee5393-49d6-442c-9f03-2c1ed064b29b] 14492 --- [io-8080-exec-10] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 18:00:08.163  INFO [7cee5393-49d6-442c-9f03-2c1ed064b29b] 14492 --- [io-8080-exec-10] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 18:00:08.163  INFO [7cee5393-49d6-442c-9f03-2c1ed064b29b] 14492 --- [io-8080-exec-10] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-06, returnDate=2025-07-08, tripType=roundTrip, adults=1, children=0, infants=0
2025-06-29 18:00:08.163  INFO [7cee5393-49d6-442c-9f03-2c1ed064b29b] 14492 --- [io-8080-exec-10] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-29 18:00:08.164 DEBUG [7cee5393-49d6-442c-9f03-2c1ed064b29b] 14492 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:54:45.716784, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=131AECF3C53000E87D6D5F0A59832A84], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:00:10.704 DEBUG [a2bcedef-eb94-416f-a133-3e0ae08fa4b3] 14492 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-29 18:00:10.706 DEBUG [a2bcedef-eb94-416f-a133-3e0ae08fa4b3] 14492 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-29 18:00:10.707  INFO [a2bcedef-eb94-416f-a133-3e0ae08fa4b3] 14492 --- [nio-8080-exec-9] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris one way
2025-06-29 18:00:10.707  INFO [a2bcedef-eb94-416f-a133-3e0ae08fa4b3] 14492 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-29 18:00:10.707  INFO [a2bcedef-eb94-416f-a133-3e0ae08fa4b3] 14492 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-29 18:00:10.707 DEBUG [a2bcedef-eb94-416f-a133-3e0ae08fa4b3] 14492 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-29).    For example, if today is 2025-06-29, a good departure date would be between 2025-07-06 and 2025-07-13, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris one way";
2025-06-29 18:00:10.709  INFO [a2bcedef-eb94-416f-a133-3e0ae08fa4b3] 14492 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-29 18:00:10.709  INFO [a2bcedef-eb94-416f-a133-3e0ae08fa4b3] 14492 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-29 18:00:10.710  INFO [a2bcedef-eb94-416f-a133-3e0ae08fa4b3] 14492 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-29 18:00:10.710  INFO [a2bcedef-eb94-416f-a133-3e0ae08fa4b3] 14492 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 18:00:10.710  INFO [a2bcedef-eb94-416f-a133-3e0ae08fa4b3] 14492 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-29 18:00:10.712  INFO [a2bcedef-eb94-416f-a133-3e0ae08fa4b3] 14492 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-29 18:00:10.712  INFO [a2bcedef-eb94-416f-a133-3e0ae08fa4b3] 14492 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-29 18:00:10.713  INFO [a2bcedef-eb94-416f-a133-3e0ae08fa4b3] 14492 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-29 18:00:10.713  INFO [a2bcedef-eb94-416f-a133-3e0ae08fa4b3] 14492 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-29 18:00:12.325  INFO [a2bcedef-eb94-416f-a133-3e0ae08fa4b3] 14492 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-29 18:00:12.325  INFO [a2bcedef-eb94-416f-a133-3e0ae08fa4b3] 14492 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Response length: 184 characters
2025-06-29 18:00:12.325 DEBUG [a2bcedef-eb94-416f-a133-3e0ae08fa4b3] 14492 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-06",
  "returnDate": null,
  "tripType": "oneWay",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-29 18:00:12.326 DEBUG [a2bcedef-eb94-416f-a133-3e0ae08fa4b3] 14492 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-29 18:00:12.326 DEBUG [a2bcedef-eb94-416f-a133-3e0ae08fa4b3] 14492 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-29 18:00:12.327 DEBUG [a2bcedef-eb94-416f-a133-3e0ae08fa4b3] 14492 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-29 18:00:12.327 DEBUG [a2bcedef-eb94-416f-a133-3e0ae08fa4b3] 14492 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 18:00:12.327  INFO [a2bcedef-eb94-416f-a133-3e0ae08fa4b3] 14492 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 18:00:12.327  INFO [a2bcedef-eb94-416f-a133-3e0ae08fa4b3] 14492 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-06, returnDate=null, tripType=oneWay, adults=1, children=0, infants=0
2025-06-29 18:00:12.327  INFO [a2bcedef-eb94-416f-a133-3e0ae08fa4b3] 14492 --- [nio-8080-exec-9] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-29 18:00:12.328 DEBUG [a2bcedef-eb94-416f-a133-3e0ae08fa4b3] 14492 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:54:45.716784, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=131AECF3C53000E87D6D5F0A59832A84], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:00:14.251 DEBUG [c956d002-7287-4d51-b5a4-2e5affbdc03a] 14492 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 18:00:14.359 DEBUG [c956d002-7287-4d51-b5a4-2e5affbdc03a] 14492 --- [nio-8080-exec-8] o.s.s.core.session.SessionRegistryImpl   : Registering session 52799EA32F6A1B9CF7C15F11D320F789, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:54:45.716784, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}])
2025-06-29 18:00:14.360 DEBUG [c956d002-7287-4d51-b5a4-2e5affbdc03a] 14492 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:54:45.716784, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@12e1da2e]
2025-06-29 18:00:14.361 DEBUG [c956d002-7287-4d51-b5a4-2e5affbdc03a] 14492 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me
2025-06-29 18:00:14.362  INFO [c956d002-7287-4d51-b5a4-2e5affbdc03a] 14492 --- [nio-8080-exec-8] o.e.x.controllers.UserController         : Request received for current user details: ****@****.***
2025-06-29 18:00:14.482  INFO [c956d002-7287-4d51-b5a4-2e5affbdc03a] 14492 --- [nio-8080-exec-8] o.e.x.controllers.UserController         : Returning details for user: ****@****.***
2025-06-29 18:00:14.571 DEBUG [24b815c8-43ba-45aa-8171-194a60aa6d62] 14492 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 18:00:14.582 DEBUG [73e6bd2f-96ad-4980-b323-c5b80e988dc5] 14492 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 18:00:14.597 DEBUG [73e6bd2f-96ad-4980-b323-c5b80e988dc5] 14492 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 18:00:14.608  INFO [73e6bd2f-96ad-4980-b323-c5b80e988dc5] 14492 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 18:00:14.614  INFO [73e6bd2f-96ad-4980-b323-c5b80e988dc5] 14492 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 18:00:14.625 DEBUG [76f4905e-c133-44fb-8a39-0c0e1b3bdd12] 14492 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 18:00:14.625 DEBUG [9451f145-b9ac-46e2-bc13-ad2c1de99eef] 14492 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 18:00:14.625 DEBUG [d37b8502-7793-4bfe-8dd5-3b4857bedc9f] 14492 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 18:00:14.627 DEBUG [d37b8502-7793-4bfe-8dd5-3b4857bedc9f] 14492 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 18:00:14.629  INFO [d37b8502-7793-4bfe-8dd5-3b4857bedc9f] 14492 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 18:00:14.630  INFO [d37b8502-7793-4bfe-8dd5-3b4857bedc9f] 14492 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 18:00:14.714  INFO [73e6bd2f-96ad-4980-b323-c5b80e988dc5] 14492 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 18:00:14.716 DEBUG [73e6bd2f-96ad-4980-b323-c5b80e988dc5] 14492 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:54:45.716784, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=131AECF3C53000E87D6D5F0A59832A84], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:00:14.721  INFO [d37b8502-7793-4bfe-8dd5-3b4857bedc9f] 14492 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 18:00:14.723 DEBUG [d37b8502-7793-4bfe-8dd5-3b4857bedc9f] 14492 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:54:45.716784, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=131AECF3C53000E87D6D5F0A59832A84], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:00:14.788 DEBUG [28292714-cdc4-437d-8582-6be1e8351a80] 14492 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 18:00:14.791 DEBUG [28292714-cdc4-437d-8582-6be1e8351a80] 14492 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 18:00:14.792  INFO [28292714-cdc4-437d-8582-6be1e8351a80] 14492 --- [nio-8080-exec-5] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 18:00:14.800 DEBUG [4ee2192a-8d48-49ec-bf87-1d4a60d06239] 14492 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 18:00:14.804 DEBUG [4ee2192a-8d48-49ec-bf87-1d4a60d06239] 14492 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 18:00:14.809  INFO [4ee2192a-8d48-49ec-bf87-1d4a60d06239] 14492 --- [nio-8080-exec-6] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 18:00:14.815 DEBUG [24b815c8-43ba-45aa-8171-194a60aa6d62] 14492 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:54:45.716784, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=131AECF3C53000E87D6D5F0A59832A84], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:00:14.819 DEBUG [24b815c8-43ba-45aa-8171-194a60aa6d62] 14492 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 18:00:14.819 DEBUG [76f4905e-c133-44fb-8a39-0c0e1b3bdd12] 14492 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:54:45.716784, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=131AECF3C53000E87D6D5F0A59832A84], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:00:14.821 DEBUG [76f4905e-c133-44fb-8a39-0c0e1b3bdd12] 14492 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 18:00:14.843 DEBUG [9451f145-b9ac-46e2-bc13-ad2c1de99eef] 14492 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:54:45.716784, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=131AECF3C53000E87D6D5F0A59832A84], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:00:14.844 DEBUG [9451f145-b9ac-46e2-bc13-ad2c1de99eef] 14492 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 18:00:14.845  INFO [9451f145-b9ac-46e2-bc13-ad2c1de99eef] 14492 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 18:00:14.936  WARN [76f4905e-c133-44fb-8a39-0c0e1b3bdd12] 14492 --- [nio-8080-exec-1] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 18:00:14.936  WARN [24b815c8-43ba-45aa-8171-194a60aa6d62] 14492 --- [nio-8080-exec-7] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 18:00:14.936  WARN [76f4905e-c133-44fb-8a39-0c0e1b3bdd12] 14492 --- [nio-8080-exec-1] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 18:00:14.936  WARN [24b815c8-43ba-45aa-8171-194a60aa6d62] 14492 --- [nio-8080-exec-7] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 18:00:14.960  INFO [9451f145-b9ac-46e2-bc13-ad2c1de99eef] 14492 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 18:00:14.972  INFO [28292714-cdc4-437d-8582-6be1e8351a80] 14492 --- [nio-8080-exec-5] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 18:00:14.973 DEBUG [28292714-cdc4-437d-8582-6be1e8351a80] 14492 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:54:45.716784, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=131AECF3C53000E87D6D5F0A59832A84], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:00:14.978  INFO [4ee2192a-8d48-49ec-bf87-1d4a60d06239] 14492 --- [nio-8080-exec-6] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 18:00:14.979 DEBUG [4ee2192a-8d48-49ec-bf87-1d4a60d06239] 14492 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:54:45.716784, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=131AECF3C53000E87D6D5F0A59832A84], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:00:15.024 DEBUG [23334bd7-f90d-4f8e-8dc7-3e1496a4d1e2] 14492 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 18:00:15.026 DEBUG [23334bd7-f90d-4f8e-8dc7-3e1496a4d1e2] 14492 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 18:00:15.027  INFO [23334bd7-f90d-4f8e-8dc7-3e1496a4d1e2] 14492 --- [io-8080-exec-10] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 18:00:15.047 DEBUG [4881e264-7f0c-4c21-a4fc-d26901352432] 14492 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 18:00:15.048 DEBUG [4881e264-7f0c-4c21-a4fc-d26901352432] 14492 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 18:00:15.049  INFO [4881e264-7f0c-4c21-a4fc-d26901352432] 14492 --- [nio-8080-exec-9] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 18:00:15.119  INFO [23334bd7-f90d-4f8e-8dc7-3e1496a4d1e2] 14492 --- [io-8080-exec-10] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 18:00:15.121 DEBUG [23334bd7-f90d-4f8e-8dc7-3e1496a4d1e2] 14492 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:54:45.716784, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=131AECF3C53000E87D6D5F0A59832A84], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:00:15.127  INFO [4881e264-7f0c-4c21-a4fc-d26901352432] 14492 --- [nio-8080-exec-9] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 18:00:15.129 DEBUG [4881e264-7f0c-4c21-a4fc-d26901352432] 14492 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:54:45.716784, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=131AECF3C53000E87D6D5F0A59832A84], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:00:25.659 DEBUG [8ca53eb9-bed0-4dbb-9a34-aa90db6638f1] 14492 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 18:00:25.661 DEBUG [ae3537ac-ee7b-46bd-922b-74d8ef9663f0] 14492 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 18:00:25.770 DEBUG [ae3537ac-ee7b-46bd-922b-74d8ef9663f0] 14492 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:54:45.716784, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=131AECF3C53000E87D6D5F0A59832A84], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:00:25.770 DEBUG [8ca53eb9-bed0-4dbb-9a34-aa90db6638f1] 14492 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:54:45.716784, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=131AECF3C53000E87D6D5F0A59832A84], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:00:25.772 DEBUG [ae3537ac-ee7b-46bd-922b-74d8ef9663f0] 14492 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 18:00:25.772 DEBUG [8ca53eb9-bed0-4dbb-9a34-aa90db6638f1] 14492 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 18:00:25.773  INFO [ae3537ac-ee7b-46bd-922b-74d8ef9663f0] 14492 --- [nio-8080-exec-4] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 18:00:25.773  INFO [8ca53eb9-bed0-4dbb-9a34-aa90db6638f1] 14492 --- [nio-8080-exec-8] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 18:00:25.773  INFO [ae3537ac-ee7b-46bd-922b-74d8ef9663f0] 14492 --- [nio-8080-exec-4] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 18:00:25.773  INFO [8ca53eb9-bed0-4dbb-9a34-aa90db6638f1] 14492 --- [nio-8080-exec-8] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 18:00:26.069 DEBUG [8e5696f8-54ae-4ecf-af8b-fd13125bcb73] 14492 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 18:00:26.176 DEBUG [8e5696f8-54ae-4ecf-af8b-fd13125bcb73] 14492 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:54:45.716784, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=131AECF3C53000E87D6D5F0A59832A84], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:00:26.180 DEBUG [8e5696f8-54ae-4ecf-af8b-fd13125bcb73] 14492 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 18:00:26.181  INFO [8e5696f8-54ae-4ecf-af8b-fd13125bcb73] 14492 --- [nio-8080-exec-2] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 18:00:26.181  INFO [8e5696f8-54ae-4ecf-af8b-fd13125bcb73] 14492 --- [nio-8080-exec-2] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 18:00:40.883 DEBUG [a1e938e5-6772-41ce-aebd-cb78185c2670] 14492 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/cart/add
2025-06-29 18:00:40.993 DEBUG [a1e938e5-6772-41ce-aebd-cb78185c2670] 14492 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:54:45.716784, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=131AECF3C53000E87D6D5F0A59832A84], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:00:40.994 DEBUG [a1e938e5-6772-41ce-aebd-cb78185c2670] 14492 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/cart/add
2025-06-29 18:00:41.087  INFO [a1e938e5-6772-41ce-aebd-cb78185c2670] 14492 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : User ****@****.*** request to add flight ID 16 to persistent cart
2025-06-29 18:00:41.096  INFO [a1e938e5-6772-41ce-aebd-cb78185c2670] 14492 --- [nio-8080-exec-1] o.e.xlr8travel.services.CartServiceImpl  : Added new flight ID 16 to cart for user ****@****.***
2025-06-29 18:00:41.114  INFO [a1e938e5-6772-41ce-aebd-cb78185c2670] 14492 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Flight ID 16 added/incremented in persistent cart for user ****@****.***.
2025-06-29 18:00:41.319 DEBUG [182d3767-f8b1-4273-867d-71dea9aae39e] 14492 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 18:00:41.428 DEBUG [182d3767-f8b1-4273-867d-71dea9aae39e] 14492 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:54:45.716784, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=131AECF3C53000E87D6D5F0A59832A84], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:00:41.429 DEBUG [182d3767-f8b1-4273-867d-71dea9aae39e] 14492 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 18:00:41.430  INFO [182d3767-f8b1-4273-867d-71dea9aae39e] 14492 --- [nio-8080-exec-7] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 18:00:41.545  INFO [182d3767-f8b1-4273-867d-71dea9aae39e] 14492 --- [nio-8080-exec-7] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 18:00:42.268 DEBUG [f17f5c00-c451-4e71-9225-01a9d7f2e2a1] 14492 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 18:00:42.273 DEBUG [cee65ab0-07e4-4832-9159-ace121d2a8cf] 14492 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 18:00:42.397 DEBUG [f17f5c00-c451-4e71-9225-01a9d7f2e2a1] 14492 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:54:45.716784, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=131AECF3C53000E87D6D5F0A59832A84], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:00:42.399 DEBUG [f17f5c00-c451-4e71-9225-01a9d7f2e2a1] 14492 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 18:00:42.399 DEBUG [cee65ab0-07e4-4832-9159-ace121d2a8cf] 14492 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T17:54:45.716784, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=131AECF3C53000E87D6D5F0A59832A84], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:00:42.399  INFO [f17f5c00-c451-4e71-9225-01a9d7f2e2a1] 14492 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 18:00:42.400 DEBUG [cee65ab0-07e4-4832-9159-ace121d2a8cf] 14492 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 18:00:42.400  INFO [cee65ab0-07e4-4832-9159-ace121d2a8cf] 14492 --- [nio-8080-exec-5] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 18:00:42.510  INFO [f17f5c00-c451-4e71-9225-01a9d7f2e2a1] 14492 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 18:00:42.510  INFO [cee65ab0-07e4-4832-9159-ace121d2a8cf] 14492 --- [nio-8080-exec-5] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 18:08:27.277  INFO [NONE] 14492 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-29 18:08:27.280  INFO [NONE] 14492 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-06-29 18:08:27.286  INFO [NONE] 14492 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-06-29 18:12:15.180  INFO [NONE] 32976 --- [  restartedMain] o.e.xlr8travel.Xlr8travelApplication     : Starting Xlr8travelApplication using Java 21.0.5 with PID 32976 (C:\Users\razvi\Desktop\Licenta\backend\target\classes started by razvi in C:\Users\razvi\Desktop\Licenta\backend)
2025-06-29 18:12:15.187 DEBUG [NONE] 32976 --- [  restartedMain] o.e.xlr8travel.Xlr8travelApplication     : Running with Spring Boot v3.2.4, Spring v6.1.5
2025-06-29 18:12:15.187  INFO [NONE] 32976 --- [  restartedMain] o.e.xlr8travel.Xlr8travelApplication     : The following 1 profile is active: "local"
2025-06-29 18:12:15.221  INFO [NONE] 32976 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-29 18:12:15.222  INFO [NONE] 32976 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-29 18:12:16.109  INFO [NONE] 32976 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-29 18:12:16.188  INFO [NONE] 32976 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 73 ms. Found 9 JPA repository interfaces.
2025-06-29 18:12:16.915  INFO [NONE] 32976 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-29 18:12:16.925  INFO [NONE] 32976 --- [  restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-29 18:12:16.926  INFO [NONE] 32976 --- [  restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.19]
2025-06-29 18:12:16.997  INFO [NONE] 32976 --- [  restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-06-29 18:12:16.998  INFO [NONE] 32976 --- [  restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1774 ms
2025-06-29 18:12:17.238  INFO [NONE] 32976 --- [  restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-29 18:12:17.288  INFO [NONE] 32976 --- [  restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.4.Final
2025-06-29 18:12:17.318  INFO [NONE] 32976 --- [  restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-06-29 18:12:17.519  INFO [NONE] 32976 --- [  restartedMain] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-29 18:12:17.542  INFO [NONE] 32976 --- [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-06-29 18:12:17.712  INFO [NONE] 32976 --- [  restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@1908641f
2025-06-29 18:12:17.714  INFO [NONE] 32976 --- [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-06-29 18:12:17.755  WARN [NONE] 32976 --- [  restartedMain] org.hibernate.orm.deprecation            : HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-29 18:12:18.901  INFO [NONE] 32976 --- [  restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-29 18:12:27.856  INFO [NONE] 32976 --- [  restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-29 18:12:28.219  INFO [NONE] 32976 --- [  restartedMain] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-29 18:12:28.699  WARN [NONE] 32976 --- [  restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Cannot deserialize session attribute [SPRING_SECURITY_CONTEXT] for session [131AECF3C53000E87D6D5F0A59832A84]
2025-06-29 18:12:28.701 ERROR [NONE] 32976 --- [  restartedMain] o.a.catalina.session.StandardManager     : Exception loading sessions from persistent storage

java.lang.ClassCastException: class java.io.ObjectStreamClass cannot be cast to class java.lang.String (java.io.ObjectStreamClass and java.lang.String are in module java.base of loader 'bootstrap')
	at java.base/java.io.ObjectInputStream.readTypeString(ObjectInputStream.java:1839)
	at java.base/java.io.ObjectStreamClass.readNonProxy(ObjectStreamClass.java:709)
	at java.base/java.io.ObjectInputStream.readClassDescriptor(ObjectInputStream.java:1014)
	at java.base/java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:2050)
	at java.base/java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1927)
	at java.base/java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2252)
	at java.base/java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1762)
	at java.base/java.io.ObjectInputStream.readObject(ObjectInputStream.java:540)
	at java.base/java.io.ObjectInputStream.readObject(ObjectInputStream.java:498)
	at org.apache.catalina.session.StandardSession.doReadObject(StandardSession.java:1415)
	at org.apache.catalina.session.StandardSession.readObjectData(StandardSession.java:985)
	at org.apache.catalina.session.StandardManager.doLoad(StandardManager.java:210)
	at org.apache.catalina.session.StandardManager.load(StandardManager.java:156)
	at org.apache.catalina.session.StandardManager.startInternal(StandardManager.java:346)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4893)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1332)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1322)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:866)
	at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:845)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1332)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1322)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:866)
	at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:240)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.StandardService.startInternal(StandardService.java:433)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:921)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.startup.Tomcat.start(Tomcat.java:437)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:126)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.<init>(TomcatWebServer.java:105)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getTomcatWebServer(TomcatServletWebServerFactory.java:499)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getWebServer(TomcatServletWebServerFactory.java:218)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.createWebServer(ServletWebServerApplicationContext.java:188)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:162)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:618)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at org.example.xlr8travel.Xlr8travelApplication.main(Xlr8travelApplication.java:10)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)

2025-06-29 18:12:28.709 DEBUG [NONE] 32976 --- [  restartedMain] o.e.x.security.JwtAuthenticationFilter   : Filter 'jwtAuthenticationFilter' configured for use
2025-06-29 18:12:28.711 DEBUG [NONE] 32976 --- [  restartedMain] o.e.x.security.RateLimitingFilter        : Filter 'rateLimitingFilter' configured for use
2025-06-29 18:12:28.925  INFO [NONE] 32976 --- [  restartedMain] o.e.x.config.LocalPropertiesConfig       : Loaded application-local.properties
2025-06-29 18:12:29.223  INFO [NONE] 32976 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : === GEMINI SERVICE CONFIGURATION ===
2025-06-29 18:12:29.223  INFO [NONE] 32976 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : Project ID: xlr8travel
2025-06-29 18:12:29.223  INFO [NONE] 32976 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : Location ID: us-east1
2025-06-29 18:12:29.223  INFO [NONE] 32976 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : Model: gemini-2.0-flash-001
2025-06-29 18:12:29.224  INFO [NONE] 32976 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : Credentials Path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 18:12:29.224  INFO [NONE] 32976 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : API Key: ***SET***
2025-06-29 18:12:29.224  INFO [NONE] 32976 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : ✅ Credentials file exists: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 18:12:29.225  INFO [NONE] 32976 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : ✅ Credentials file size: 2376 bytes
2025-06-29 18:12:29.225  INFO [NONE] 32976 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : ✅ GOOGLE_APPLICATION_CREDENTIALS env var is set: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 18:12:29.226  INFO [NONE] 32976 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : =====================================
2025-06-29 18:12:29.249  INFO [NONE] 32976 --- [  restartedMain] o.e.x.config.SensitiveDataConfig         : Validating sensitive data configuration for profile: local
2025-06-29 18:12:29.250  WARN [NONE] 32976 --- [  restartedMain] o.e.x.config.SensitiveDataConfig         : Environment variable SPRING_DATASOURCE_URL is not set
2025-06-29 18:12:29.250  WARN [NONE] 32976 --- [  restartedMain] o.e.x.config.SensitiveDataConfig         : Environment variable SPRING_DATASOURCE_USERNAME is not set
2025-06-29 18:12:29.250  WARN [NONE] 32976 --- [  restartedMain] o.e.x.config.SensitiveDataConfig         : Environment variable SPRING_DATASOURCE_PASSWORD is not set
2025-06-29 18:12:29.250  WARN [NONE] 32976 --- [  restartedMain] o.e.x.config.SensitiveDataConfig         : Environment variable STRIPE_SECRET_KEY is not set
2025-06-29 18:12:29.292  WARN [NONE] 32976 --- [  restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-29 18:12:29.395  INFO [NONE] 32976 --- [  restartedMain] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2025-06-29 18:12:29.661  INFO [NONE] 32976 --- [  restartedMain] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 4 endpoint(s) beneath base path '/actuator'
2025-06-29 18:12:29.746  INFO [NONE] 32976 --- [  restartedMain] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@1d8e36e, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@d7f7603, org.springframework.security.web.context.SecurityContextHolderFilter@5b7ff850, org.springframework.security.web.header.HeaderWriterFilter@28e5a5df, org.springframework.web.filter.CorsFilter@18ff361b, org.springframework.security.web.authentication.logout.LogoutFilter@39a9ba6, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@3fd8b8c9, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@15edeb18, org.example.xlr8travel.security.JwtAuthenticationFilter@6b6287cb, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@4f587e68, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@74a218ad, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@3ec261da, org.springframework.security.web.session.ConcurrentSessionFilter@230fd88b, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@1b68df3a, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7cbdd2b3, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@129c84a7, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78c736ff, org.springframework.security.web.session.SessionManagementFilter@4bafe7ac, org.springframework.security.web.access.ExceptionTranslationFilter@7bc85d87, org.springframework.security.web.access.intercept.AuthorizationFilter@46613614]
2025-06-29 18:12:30.215  INFO [NONE] 32976 --- [  restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2025-06-29 18:12:30.283  INFO [NONE] 32976 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path ''
2025-06-29 18:12:30.293  INFO [NONE] 32976 --- [  restartedMain] o.e.xlr8travel.Xlr8travelApplication     : Started Xlr8travelApplication in 15.57 seconds (process running for 16.242)
2025-06-29 18:12:39.756  INFO [NONE] 32976 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-29 18:12:39.757  INFO [NONE] 32976 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-06-29 18:12:39.759  INFO [NONE] 32976 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2025-06-29 18:12:39.777 DEBUG [b6357810-a1b2-44ff-8298-a486fd260c8f] 32976 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 18:12:39.903 ERROR [b6357810-a1b2-44ff-8298-a486fd260c8f] 32976 --- [nio-8080-exec-1] o.e.x.security.JwtAuthenticationFilter   : Cannot set user authentication: User ****@****.*** not found
2025-06-29 18:12:39.906 DEBUG [b6357810-a1b2-44ff-8298-a486fd260c8f] 32976 --- [nio-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 18:12:39.912  WARN [b6357810-a1b2-44ff-8298-a486fd260c8f] 32976 --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/api/user/me' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2025-06-29 18:12:39.937 DEBUG [b6357810-a1b2-44ff-8298-a486fd260c8f] 32976 --- [nio-8080-exec-1] o.s.s.w.s.HttpSessionRequestCache        : Saved request http://localhost:8080/api/user/me?continue to session
2025-06-29 18:12:39.937 DEBUG [b6357810-a1b2-44ff-8298-a486fd260c8f] 32976 --- [nio-8080-exec-1] s.w.a.DelegatingAuthenticationEntryPoint : Trying to match using Ant [pattern='/api/**']
2025-06-29 18:12:39.938 DEBUG [b6357810-a1b2-44ff-8298-a486fd260c8f] 32976 --- [nio-8080-exec-1] s.w.a.DelegatingAuthenticationEntryPoint : Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@1958f592
2025-06-29 18:12:40.105 DEBUG [ffd68cb4-c869-431e-8b80-1fa5fa24c5e3] 32976 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/token/refresh
2025-06-29 18:12:40.106 DEBUG [ffd68cb4-c869-431e-8b80-1fa5fa24c5e3] 32976 --- [nio-8080-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 18:12:40.110 DEBUG [ffd68cb4-c869-431e-8b80-1fa5fa24c5e3] 32976 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /api/token/refresh
2025-06-29 18:12:40.202  INFO [ffd68cb4-c869-431e-8b80-1fa5fa24c5e3] 32976 --- [nio-8080-exec-2] o.e.x.controllers.TokenController        : Generated new access token for user: ****@****.***
2025-06-29 18:12:40.406 DEBUG [019d308c-b07f-4bf1-bf3b-3ecb3a5afdc6] 32976 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 18:12:40.418 ERROR [019d308c-b07f-4bf1-bf3b-3ecb3a5afdc6] 32976 --- [nio-8080-exec-3] o.e.x.security.JwtAuthenticationFilter   : Cannot set user authentication: User ****@****.*** not found
2025-06-29 18:12:40.420 DEBUG [019d308c-b07f-4bf1-bf3b-3ecb3a5afdc6] 32976 --- [nio-8080-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 18:12:40.425 DEBUG [019d308c-b07f-4bf1-bf3b-3ecb3a5afdc6] 32976 --- [nio-8080-exec-3] o.s.s.w.s.HttpSessionRequestCache        : Saved request http://localhost:8080/api/user/me?continue to session
2025-06-29 18:12:40.425 DEBUG [019d308c-b07f-4bf1-bf3b-3ecb3a5afdc6] 32976 --- [nio-8080-exec-3] s.w.a.DelegatingAuthenticationEntryPoint : Trying to match using Ant [pattern='/api/**']
2025-06-29 18:12:40.425 DEBUG [019d308c-b07f-4bf1-bf3b-3ecb3a5afdc6] 32976 --- [nio-8080-exec-3] s.w.a.DelegatingAuthenticationEntryPoint : Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@1958f592
2025-06-29 18:12:41.061 DEBUG [e9ecff5e-f232-418d-874b-5f62514b96f8] 32976 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/nearby?origin=OTP
2025-06-29 18:12:41.068 DEBUG [e9ecff5e-f232-418d-874b-5f62514b96f8] 32976 --- [nio-8080-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 18:12:41.068 DEBUG [e9ecff5e-f232-418d-874b-5f62514b96f8] 32976 --- [nio-8080-exec-4] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 131AECF3C53000E87D6D5F0A59832A84
2025-06-29 18:12:41.070 DEBUG [e9ecff5e-f232-418d-874b-5f62514b96f8] 32976 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/nearby?origin=OTP
2025-06-29 18:12:41.078  INFO [e9ecff5e-f232-418d-874b-5f62514b96f8] 32976 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Received request for nearby flights from origin: OTP, departureDate: null
2025-06-29 18:12:41.078  INFO [e9ecff5e-f232-418d-874b-5f62514b96f8] 32976 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Using search date: 2025-06-29
2025-06-29 18:12:41.079  INFO [e9ecff5e-f232-418d-874b-5f62514b96f8] 32976 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Cache key: OTP-2025-06-29
2025-06-29 18:12:41.079  INFO [e9ecff5e-f232-418d-874b-5f62514b96f8] 32976 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : No valid cache found. Searching nearby flights from origin: OTP, after date: 2025-06-29
2025-06-29 18:12:41.079  INFO [e9ecff5e-f232-418d-874b-5f62514b96f8] 32976 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Calling flightService.findByOriginAndDepartureDateAfter for origin: OTP, date: 2025-06-29
2025-06-29 18:12:41.144  INFO [e9ecff5e-f232-418d-874b-5f62514b96f8] 32976 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Database query completed, found 16 flights
2025-06-29 18:12:41.144  INFO [e9ecff5e-f232-418d-874b-5f62514b96f8] 32976 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Converting 16 Flight entities to FlightDTOs
2025-06-29 18:12:41.145  INFO [e9ecff5e-f232-418d-874b-5f62514b96f8] 32976 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Converted to 16 FlightDTOs
2025-06-29 18:12:41.145  INFO [e9ecff5e-f232-418d-874b-5f62514b96f8] 32976 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Grouping flights by destination country
2025-06-29 18:12:41.145  INFO [e9ecff5e-f232-418d-874b-5f62514b96f8] 32976 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Grouped flights into 7 countries
2025-06-29 18:12:41.146  INFO [e9ecff5e-f232-418d-874b-5f62514b96f8] 32976 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Selecting diverse flights - one from each country first
2025-06-29 18:12:41.146  INFO [e9ecff5e-f232-418d-874b-5f62514b96f8] 32976 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Adding first flight from Greece (has 2 flights)
2025-06-29 18:12:41.146  INFO [e9ecff5e-f232-418d-874b-5f62514b96f8] 32976 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Adding first flight from Netherlands (has 2 flights)
2025-06-29 18:12:41.146  INFO [e9ecff5e-f232-418d-874b-5f62514b96f8] 32976 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Adding first flight from Italy (has 2 flights)
2025-06-29 18:12:41.146  INFO [e9ecff5e-f232-418d-874b-5f62514b96f8] 32976 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Adding first flight from United Kingdom (has 2 flights)
2025-06-29 18:12:41.147  INFO [e9ecff5e-f232-418d-874b-5f62514b96f8] 32976 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Adding first flight from France (has 2 flights)
2025-06-29 18:12:41.147  INFO [e9ecff5e-f232-418d-874b-5f62514b96f8] 32976 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Adding first flight from Switzerland (has 2 flights)
2025-06-29 18:12:41.147  INFO [e9ecff5e-f232-418d-874b-5f62514b96f8] 32976 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Reached 6 flights after first pass, stopping
2025-06-29 18:12:41.147  INFO [e9ecff5e-f232-418d-874b-5f62514b96f8] 32976 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Caching 6 diverse flights with key: OTP-2025-06-29
2025-06-29 18:12:41.148  INFO [e9ecff5e-f232-418d-874b-5f62514b96f8] 32976 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Returning 6 diverse nearby flights from: OTP
2025-06-29 18:12:42.166 DEBUG [e8ddcf2b-d5e7-4c3e-b839-b3abc6b7c48b] 32976 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /oauth2/authorization/google
2025-06-29 18:12:42.175 DEBUG [e8ddcf2b-d5e7-4c3e-b839-b3abc6b7c48b] 32976 --- [nio-8080-exec-5] o.s.s.web.DefaultRedirectStrategy        : Redirecting to https://accounts.google.com/o/oauth2/v2/auth?response_type=code&client_id=280181287068-i92p696f0ja6qv5lecrhi4dmn2hsrvie.apps.googleusercontent.com&scope=email%20profile&state=uLtSs4r_rb7SlWDNki0QRBiTn9cZkNVMtDT2ae-B1lE%3D&redirect_uri=http://localhost:8080/login/oauth2/code/google
2025-06-29 18:12:44.243 DEBUG [7aa21246-b554-44d6-ac4d-e12f2cbb6d10] 32976 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /login/oauth2/code/google?state=uLtSs4r_rb7SlWDNki0QRBiTn9cZkNVMtDT2ae-B1lE%3D&code=4%2F0AVMBsJjhQPjBkMs4Bavwk5LwXYI_F2YN0JSFKapMuTqO5EK4KxTuOaDYsGOaYC1zxcOlWw&scope=email+profile+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile+openid&authuser=1&prompt=none
2025-06-29 18:12:44.750  INFO [7aa21246-b554-44d6-ac4d-e12f2cbb6d10] 32976 --- [nio-8080-exec-6] o.e.x.security.CustomOAuth2UserService   : Creating new user from OAuth2 login: ****@****.***
2025-06-29 18:12:44.825  INFO [7aa21246-b554-44d6-ac4d-e12f2cbb6d10] 32976 --- [nio-8080-exec-6] o.e.x.security.CustomOAuth2UserService   : Successfully created new user from OAuth2 login: ****@****.***
2025-06-29 18:12:44.828 DEBUG [7aa21246-b554-44d6-ac4d-e12f2cbb6d10] 32976 --- [nio-8080-exec-6] .s.ChangeSessionIdAuthenticationStrategy : Changed session id from E190706B57D36092AD28C8625BC1B82D
2025-06-29 18:12:44.828 DEBUG [7aa21246-b554-44d6-ac4d-e12f2cbb6d10] 32976 --- [nio-8080-exec-6] o.s.s.core.session.SessionRegistryImpl   : Registering session C70C69C0ABB077E02DD4AA1DAAF66020, for principal Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}]
2025-06-29 18:12:44.829 DEBUG [7aa21246-b554-44d6-ac4d-e12f2cbb6d10] 32976 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E190706B57D36092AD28C8625BC1B82D], Granted Authorities=[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@4da3705a]
2025-06-29 18:12:44.830 DEBUG [7aa21246-b554-44d6-ac4d-e12f2cbb6d10] 32976 --- [nio-8080-exec-6] .s.o.c.w.OAuth2LoginAuthenticationFilter : Set SecurityContextHolder to OAuth2AuthenticationToken [Principal=Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E190706B57D36092AD28C8625BC1B82D], Granted Authorities=[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]]
2025-06-29 18:12:44.832  INFO [7aa21246-b554-44d6-ac4d-e12f2cbb6d10] 32976 --- [nio-8080-exec-6] e.x.s.OAuth2AuthenticationSuccessHandler : Extracting username from authentication: 104658082982173093135
2025-06-29 18:12:44.832  INFO [7aa21246-b554-44d6-ac4d-e12f2cbb6d10] 32976 --- [nio-8080-exec-6] e.x.s.OAuth2AuthenticationSuccessHandler : Principal class: org.springframework.security.oauth2.core.user.DefaultOAuth2User
2025-06-29 18:12:44.832  INFO [7aa21246-b554-44d6-ac4d-e12f2cbb6d10] 32976 --- [nio-8080-exec-6] e.x.s.OAuth2AuthenticationSuccessHandler : Principal is DefaultOAuth2User
2025-06-29 18:12:44.833  INFO [7aa21246-b554-44d6-ac4d-e12f2cbb6d10] 32976 --- [nio-8080-exec-6] e.x.s.OAuth2AuthenticationSuccessHandler : OAuth2User attributes: {sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}
2025-06-29 18:12:44.833  INFO [7aa21246-b554-44d6-ac4d-e12f2cbb6d10] 32976 --- [nio-8080-exec-6] e.x.s.OAuth2AuthenticationSuccessHandler : Using email as username: ****@****.***
2025-06-29 18:12:44.834  INFO [7aa21246-b554-44d6-ac4d-e12f2cbb6d10] 32976 --- [nio-8080-exec-6] e.x.s.OAuth2AuthenticationSuccessHandler : Extracting username from authentication: 104658082982173093135
2025-06-29 18:12:44.834  INFO [7aa21246-b554-44d6-ac4d-e12f2cbb6d10] 32976 --- [nio-8080-exec-6] e.x.s.OAuth2AuthenticationSuccessHandler : Principal class: org.springframework.security.oauth2.core.user.DefaultOAuth2User
2025-06-29 18:12:44.835  INFO [7aa21246-b554-44d6-ac4d-e12f2cbb6d10] 32976 --- [nio-8080-exec-6] e.x.s.OAuth2AuthenticationSuccessHandler : Principal is DefaultOAuth2User
2025-06-29 18:12:44.835  INFO [7aa21246-b554-44d6-ac4d-e12f2cbb6d10] 32976 --- [nio-8080-exec-6] e.x.s.OAuth2AuthenticationSuccessHandler : OAuth2User attributes: {sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}
2025-06-29 18:12:44.835  INFO [7aa21246-b554-44d6-ac4d-e12f2cbb6d10] 32976 --- [nio-8080-exec-6] e.x.s.OAuth2AuthenticationSuccessHandler : Using email as username: ****@****.***
2025-06-29 18:12:44.835  INFO [7aa21246-b554-44d6-ac4d-e12f2cbb6d10] 32976 --- [nio-8080-exec-6] e.x.s.OAuth2AuthenticationSuccessHandler : OAuth tokens stored in session for user: ****@****.***
2025-06-29 18:12:44.836 DEBUG [7aa21246-b554-44d6-ac4d-e12f2cbb6d10] 32976 --- [nio-8080-exec-6] o.s.s.web.DefaultRedirectStrategy        : Redirecting to http://localhost:3000?oauth=success
2025-06-29 18:12:45.364 DEBUG [d33ece9c-4951-48af-82dd-63d47d9858d2] 32976 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/oauth/complete
2025-06-29 18:12:45.367 DEBUG [283a92c1-9507-4294-9f36-ddb3706c3f02] 32976 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/oauth/complete
2025-06-29 18:12:45.370 DEBUG [7217ce70-c3bf-4a2a-aed0-8f3912476a35] 32976 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing POST /api/oauth/complete
2025-06-29 18:12:45.371 DEBUG [6edd2dca-6a1b-4615-9b79-4732e34cbe6f] 32976 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing POST /api/oauth/complete
2025-06-29 18:12:45.373 DEBUG [7217ce70-c3bf-4a2a-aed0-8f3912476a35] 32976 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured POST /api/oauth/complete
2025-06-29 18:12:45.373 DEBUG [6edd2dca-6a1b-4615-9b79-4732e34cbe6f] 32976 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured POST /api/oauth/complete
2025-06-29 18:12:45.375  INFO [6edd2dca-6a1b-4615-9b79-4732e34cbe6f] 32976 --- [io-8080-exec-10] o.e.x.controllers.OAuthController        : OAuth tokens retrieved and cleared from session for user: ****@****.***
2025-06-29 18:12:45.375  INFO [7217ce70-c3bf-4a2a-aed0-8f3912476a35] 32976 --- [nio-8080-exec-9] o.e.x.controllers.OAuthController        : OAuth tokens retrieved and cleared from session for user: ****@****.***
2025-06-29 18:12:45.377 DEBUG [7217ce70-c3bf-4a2a-aed0-8f3912476a35] 32976 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E190706B57D36092AD28C8625BC1B82D], Granted Authorities=[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]]]
2025-06-29 18:12:45.377 DEBUG [6edd2dca-6a1b-4615-9b79-4732e34cbe6f] 32976 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E190706B57D36092AD28C8625BC1B82D], Granted Authorities=[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]]]
2025-06-29 18:12:45.474 DEBUG [7b046f67-df73-40c7-8a8c-5ed47586bb42] 32976 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/nearby?origin=OTP
2025-06-29 18:12:45.483 DEBUG [7b046f67-df73-40c7-8a8c-5ed47586bb42] 32976 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/nearby?origin=OTP
2025-06-29 18:12:45.484  INFO [7b046f67-df73-40c7-8a8c-5ed47586bb42] 32976 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Received request for nearby flights from origin: OTP, departureDate: null
2025-06-29 18:12:45.485  INFO [7b046f67-df73-40c7-8a8c-5ed47586bb42] 32976 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Using search date: 2025-06-29
2025-06-29 18:12:45.485  INFO [7b046f67-df73-40c7-8a8c-5ed47586bb42] 32976 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Cache key: OTP-2025-06-29
2025-06-29 18:12:45.485  INFO [7b046f67-df73-40c7-8a8c-5ed47586bb42] 32976 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Returning cached nearby flights for origin: OTP, found 6 flights
2025-06-29 18:12:45.487 DEBUG [7b046f67-df73-40c7-8a8c-5ed47586bb42] 32976 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E190706B57D36092AD28C8625BC1B82D], Granted Authorities=[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]]]
2025-06-29 18:12:45.689 DEBUG [4e625fa9-79ec-4080-800e-035cde60bb46] 32976 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 18:12:45.710 DEBUG [4e625fa9-79ec-4080-800e-035cde60bb46] 32976 --- [nio-8080-exec-2] o.s.s.core.session.SessionRegistryImpl   : Registering session 4472858AD39E4008D01BA1B8EBFAFAB7, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:12:44.812284, lastLogin=null, addresses=[], tickets=[])
2025-06-29 18:12:45.710 DEBUG [4e625fa9-79ec-4080-800e-035cde60bb46] 32976 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:12:44.812284, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@d095cea]
2025-06-29 18:12:45.713 DEBUG [4e625fa9-79ec-4080-800e-035cde60bb46] 32976 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me
2025-06-29 18:12:45.714  INFO [4e625fa9-79ec-4080-800e-035cde60bb46] 32976 --- [nio-8080-exec-2] o.e.x.controllers.UserController         : Request received for current user details: ****@****.***
2025-06-29 18:12:45.723  INFO [4e625fa9-79ec-4080-800e-035cde60bb46] 32976 --- [nio-8080-exec-2] o.e.x.controllers.UserController         : Returning details for user: ****@****.***
2025-06-29 18:12:45.765 DEBUG [7a9a13b6-4510-4476-9d9e-e6765548f322] 32976 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 18:12:45.765 DEBUG [1d18ed0b-b66f-433b-8faa-c31bb724c32b] 32976 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 18:12:45.781 DEBUG [7a9a13b6-4510-4476-9d9e-e6765548f322] 32976 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E190706B57D36092AD28C8625BC1B82D], Granted Authorities=[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]]]
2025-06-29 18:12:45.785 DEBUG [7a9a13b6-4510-4476-9d9e-e6765548f322] 32976 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 18:12:45.785 DEBUG [1d18ed0b-b66f-433b-8faa-c31bb724c32b] 32976 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:12:44.812284, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=C70C69C0ABB077E02DD4AA1DAAF66020], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:12:45.787  INFO [7a9a13b6-4510-4476-9d9e-e6765548f322] 32976 --- [nio-8080-exec-4] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 18:12:45.790 DEBUG [1d18ed0b-b66f-433b-8faa-c31bb724c32b] 32976 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 18:12:45.803  WARN [1d18ed0b-b66f-433b-8faa-c31bb724c32b] 32976 --- [nio-8080-exec-3] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 18:12:45.805  INFO [7a9a13b6-4510-4476-9d9e-e6765548f322] 32976 --- [nio-8080-exec-4] o.e.xlr8travel.services.CartServiceImpl  : No existing cart found for user ****@****.*** with ID 4, creating a new one.
2025-06-29 18:12:45.813  WARN [1d18ed0b-b66f-433b-8faa-c31bb724c32b] 32976 --- [nio-8080-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 18:12:45.822  INFO [7a9a13b6-4510-4476-9d9e-e6765548f322] 32976 --- [nio-8080-exec-4] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 18:12:45.947 DEBUG [f46fe0ea-9818-498c-a783-b5ce3495e242] 32976 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 18:12:45.958 DEBUG [f46fe0ea-9818-498c-a783-b5ce3495e242] 32976 --- [nio-8080-exec-5] o.s.s.core.session.SessionRegistryImpl   : Registering session A64E2110B19E3F6B56FFDFCB1CEFAFA8, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:12:44.812284, lastLogin=null, addresses=[], tickets=[])
2025-06-29 18:12:45.959 DEBUG [f46fe0ea-9818-498c-a783-b5ce3495e242] 32976 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:12:44.812284, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@51a16aae]
2025-06-29 18:12:45.961 DEBUG [f46fe0ea-9818-498c-a783-b5ce3495e242] 32976 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me
2025-06-29 18:12:45.962  INFO [f46fe0ea-9818-498c-a783-b5ce3495e242] 32976 --- [nio-8080-exec-5] o.e.x.controllers.UserController         : Request received for current user details: ****@****.***
2025-06-29 18:12:45.969  INFO [f46fe0ea-9818-498c-a783-b5ce3495e242] 32976 --- [nio-8080-exec-5] o.e.x.controllers.UserController         : Returning details for user: ****@****.***
2025-06-29 18:12:48.618 DEBUG [1f0629a4-2ccb-4248-a214-fd0c8d70b61c] 32976 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-29 18:12:48.621 DEBUG [1f0629a4-2ccb-4248-a214-fd0c8d70b61c] 32976 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-29 18:12:48.624  INFO [1f0629a4-2ccb-4248-a214-fd0c8d70b61c] 32976 --- [nio-8080-exec-6] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris
2025-06-29 18:12:48.625  INFO [1f0629a4-2ccb-4248-a214-fd0c8d70b61c] 32976 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-29 18:12:48.626  INFO [1f0629a4-2ccb-4248-a214-fd0c8d70b61c] 32976 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-29 18:12:48.629 DEBUG [1f0629a4-2ccb-4248-a214-fd0c8d70b61c] 32976 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-29).    For example, if today is 2025-06-29, a good departure date would be between 2025-07-06 and 2025-07-13, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris";
2025-06-29 18:12:48.631  INFO [1f0629a4-2ccb-4248-a214-fd0c8d70b61c] 32976 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-29 18:12:48.631  INFO [1f0629a4-2ccb-4248-a214-fd0c8d70b61c] 32976 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-29 18:12:48.632  INFO [1f0629a4-2ccb-4248-a214-fd0c8d70b61c] 32976 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-29 18:12:48.632  INFO [1f0629a4-2ccb-4248-a214-fd0c8d70b61c] 32976 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 18:12:48.632  INFO [1f0629a4-2ccb-4248-a214-fd0c8d70b61c] 32976 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-29 18:12:48.674  INFO [1f0629a4-2ccb-4248-a214-fd0c8d70b61c] 32976 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-29 18:12:48.676  INFO [1f0629a4-2ccb-4248-a214-fd0c8d70b61c] 32976 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-29 18:12:48.678  INFO [1f0629a4-2ccb-4248-a214-fd0c8d70b61c] 32976 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-29 18:12:48.701  INFO [1f0629a4-2ccb-4248-a214-fd0c8d70b61c] 32976 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-29 18:12:51.344  INFO [1f0629a4-2ccb-4248-a214-fd0c8d70b61c] 32976 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-29 18:12:51.345  INFO [1f0629a4-2ccb-4248-a214-fd0c8d70b61c] 32976 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Response length: 195 characters
2025-06-29 18:12:51.347 DEBUG [1f0629a4-2ccb-4248-a214-fd0c8d70b61c] 32976 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-06",
  "returnDate": "2025-07-08",
  "tripType": "roundTrip",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-29 18:12:51.347 DEBUG [1f0629a4-2ccb-4248-a214-fd0c8d70b61c] 32976 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-29 18:12:51.352 DEBUG [1f0629a4-2ccb-4248-a214-fd0c8d70b61c] 32976 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-29 18:12:51.352 DEBUG [1f0629a4-2ccb-4248-a214-fd0c8d70b61c] 32976 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-29 18:12:51.353 DEBUG [1f0629a4-2ccb-4248-a214-fd0c8d70b61c] 32976 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 18:12:51.353  INFO [1f0629a4-2ccb-4248-a214-fd0c8d70b61c] 32976 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 18:12:51.354  INFO [1f0629a4-2ccb-4248-a214-fd0c8d70b61c] 32976 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-06, returnDate=2025-07-08, tripType=roundTrip, adults=1, children=0, infants=0
2025-06-29 18:12:51.354  INFO [1f0629a4-2ccb-4248-a214-fd0c8d70b61c] 32976 --- [nio-8080-exec-6] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-29 18:12:51.358 DEBUG [1f0629a4-2ccb-4248-a214-fd0c8d70b61c] 32976 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:12:44.812284, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=C70C69C0ABB077E02DD4AA1DAAF66020], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:12:53.055 DEBUG [fa599aa3-2a35-41c3-8e26-19c14e293528] 32976 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-29 18:12:53.057 DEBUG [fa599aa3-2a35-41c3-8e26-19c14e293528] 32976 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-29 18:12:53.059  INFO [fa599aa3-2a35-41c3-8e26-19c14e293528] 32976 --- [nio-8080-exec-7] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris one way
2025-06-29 18:12:53.059  INFO [fa599aa3-2a35-41c3-8e26-19c14e293528] 32976 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-29 18:12:53.059  INFO [fa599aa3-2a35-41c3-8e26-19c14e293528] 32976 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-29 18:12:53.060 DEBUG [fa599aa3-2a35-41c3-8e26-19c14e293528] 32976 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-29).    For example, if today is 2025-06-29, a good departure date would be between 2025-07-06 and 2025-07-13, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris one way";
2025-06-29 18:12:53.061  INFO [fa599aa3-2a35-41c3-8e26-19c14e293528] 32976 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-29 18:12:53.061  INFO [fa599aa3-2a35-41c3-8e26-19c14e293528] 32976 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-29 18:12:53.062  INFO [fa599aa3-2a35-41c3-8e26-19c14e293528] 32976 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-29 18:12:53.062  INFO [fa599aa3-2a35-41c3-8e26-19c14e293528] 32976 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 18:12:53.062  INFO [fa599aa3-2a35-41c3-8e26-19c14e293528] 32976 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-29 18:12:53.070  INFO [fa599aa3-2a35-41c3-8e26-19c14e293528] 32976 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-29 18:12:53.070  INFO [fa599aa3-2a35-41c3-8e26-19c14e293528] 32976 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-29 18:12:53.070  INFO [fa599aa3-2a35-41c3-8e26-19c14e293528] 32976 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-29 18:12:53.071  INFO [fa599aa3-2a35-41c3-8e26-19c14e293528] 32976 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-29 18:12:54.843  INFO [fa599aa3-2a35-41c3-8e26-19c14e293528] 32976 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-29 18:12:54.844  INFO [fa599aa3-2a35-41c3-8e26-19c14e293528] 32976 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Response length: 184 characters
2025-06-29 18:12:54.844 DEBUG [fa599aa3-2a35-41c3-8e26-19c14e293528] 32976 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-06",
  "returnDate": null,
  "tripType": "oneWay",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-29 18:12:54.845 DEBUG [fa599aa3-2a35-41c3-8e26-19c14e293528] 32976 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-29 18:12:54.845 DEBUG [fa599aa3-2a35-41c3-8e26-19c14e293528] 32976 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-29 18:12:54.845 DEBUG [fa599aa3-2a35-41c3-8e26-19c14e293528] 32976 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-29 18:12:54.845 DEBUG [fa599aa3-2a35-41c3-8e26-19c14e293528] 32976 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 18:12:54.846  INFO [fa599aa3-2a35-41c3-8e26-19c14e293528] 32976 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 18:12:54.846  INFO [fa599aa3-2a35-41c3-8e26-19c14e293528] 32976 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-06, returnDate=null, tripType=oneWay, adults=1, children=0, infants=0
2025-06-29 18:12:54.846  INFO [fa599aa3-2a35-41c3-8e26-19c14e293528] 32976 --- [nio-8080-exec-7] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-29 18:12:54.848 DEBUG [fa599aa3-2a35-41c3-8e26-19c14e293528] 32976 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:12:44.812284, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=C70C69C0ABB077E02DD4AA1DAAF66020], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:12:56.441 DEBUG [cbfc6dcc-0620-4d29-aacf-3a1d2f8a5f62] 32976 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 18:12:56.457 DEBUG [cbfc6dcc-0620-4d29-aacf-3a1d2f8a5f62] 32976 --- [nio-8080-exec-8] o.s.s.core.session.SessionRegistryImpl   : Registering session A21520D5B6B4A581E5B169B804405BD5, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:12:44.812284, lastLogin=null, addresses=[], tickets=[])
2025-06-29 18:12:56.458 DEBUG [cbfc6dcc-0620-4d29-aacf-3a1d2f8a5f62] 32976 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:12:44.812284, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@12790729]
2025-06-29 18:12:56.460 DEBUG [cbfc6dcc-0620-4d29-aacf-3a1d2f8a5f62] 32976 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me
2025-06-29 18:12:56.460  INFO [cbfc6dcc-0620-4d29-aacf-3a1d2f8a5f62] 32976 --- [nio-8080-exec-8] o.e.x.controllers.UserController         : Request received for current user details: ****@****.***
2025-06-29 18:12:56.467  INFO [cbfc6dcc-0620-4d29-aacf-3a1d2f8a5f62] 32976 --- [nio-8080-exec-8] o.e.x.controllers.UserController         : Returning details for user: ****@****.***
2025-06-29 18:12:56.514 DEBUG [f31e15f7-4f6b-4a3b-b944-9646531481ee] 32976 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 18:12:56.516 DEBUG [a0fb1dfb-0f58-4896-9c22-3e88dba173d9] 32976 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 18:12:56.517 DEBUG [559d96e4-8c74-4344-894c-b5741e3ad80e] 32976 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 18:12:56.519 DEBUG [a0fb1dfb-0f58-4896-9c22-3e88dba173d9] 32976 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 18:12:56.527  INFO [a0fb1dfb-0f58-4896-9c22-3e88dba173d9] 32976 --- [nio-8080-exec-9] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 18:12:56.527  INFO [a0fb1dfb-0f58-4896-9c22-3e88dba173d9] 32976 --- [nio-8080-exec-9] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 18:12:56.529 DEBUG [f31e15f7-4f6b-4a3b-b944-9646531481ee] 32976 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:12:44.812284, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=C70C69C0ABB077E02DD4AA1DAAF66020], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:12:56.530 DEBUG [559d96e4-8c74-4344-894c-b5741e3ad80e] 32976 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:12:44.812284, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=C70C69C0ABB077E02DD4AA1DAAF66020], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:12:56.532 DEBUG [f31e15f7-4f6b-4a3b-b944-9646531481ee] 32976 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 18:12:56.533 DEBUG [559d96e4-8c74-4344-894c-b5741e3ad80e] 32976 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 18:12:56.533  INFO [559d96e4-8c74-4344-894c-b5741e3ad80e] 32976 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 18:12:56.553  WARN [f31e15f7-4f6b-4a3b-b944-9646531481ee] 32976 --- [io-8080-exec-10] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 18:12:56.555  WARN [f31e15f7-4f6b-4a3b-b944-9646531481ee] 32976 --- [io-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 18:12:56.563 DEBUG [ac251f08-20ca-4384-b012-b4eadf823223] 32976 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 18:12:56.565  INFO [559d96e4-8c74-4344-894c-b5741e3ad80e] 32976 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 18:12:56.575 DEBUG [ac251f08-20ca-4384-b012-b4eadf823223] 32976 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:12:44.812284, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=C70C69C0ABB077E02DD4AA1DAAF66020], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:12:56.579 DEBUG [ac251f08-20ca-4384-b012-b4eadf823223] 32976 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 18:12:56.586  WARN [ac251f08-20ca-4384-b012-b4eadf823223] 32976 --- [nio-8080-exec-2] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 18:12:56.587  WARN [ac251f08-20ca-4384-b012-b4eadf823223] 32976 --- [nio-8080-exec-2] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 18:12:56.613  INFO [a0fb1dfb-0f58-4896-9c22-3e88dba173d9] 32976 --- [nio-8080-exec-9] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 18:12:56.615 DEBUG [a0fb1dfb-0f58-4896-9c22-3e88dba173d9] 32976 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:12:44.812284, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=C70C69C0ABB077E02DD4AA1DAAF66020], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:12:56.620 DEBUG [0d224434-3a85-464c-b90d-6a028083517a] 32976 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 18:12:56.622 DEBUG [0d224434-3a85-464c-b90d-6a028083517a] 32976 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 18:12:56.623  INFO [0d224434-3a85-464c-b90d-6a028083517a] 32976 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 18:12:56.623  INFO [0d224434-3a85-464c-b90d-6a028083517a] 32976 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 18:12:56.649 DEBUG [cee61afd-6c75-467d-8457-2878d04de97f] 32976 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 18:12:56.651 DEBUG [cee61afd-6c75-467d-8457-2878d04de97f] 32976 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 18:12:56.653  INFO [cee61afd-6c75-467d-8457-2878d04de97f] 32976 --- [nio-8080-exec-4] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 18:12:56.679  INFO [0d224434-3a85-464c-b90d-6a028083517a] 32976 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 18:12:56.680 DEBUG [0d224434-3a85-464c-b90d-6a028083517a] 32976 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:12:44.812284, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=C70C69C0ABB077E02DD4AA1DAAF66020], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:12:56.810  INFO [cee61afd-6c75-467d-8457-2878d04de97f] 32976 --- [nio-8080-exec-4] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 18:12:56.814 DEBUG [cee61afd-6c75-467d-8457-2878d04de97f] 32976 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:12:44.812284, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=C70C69C0ABB077E02DD4AA1DAAF66020], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:12:56.820 DEBUG [9b1cbd1f-300d-4d55-a164-54ebffe9acb2] 32976 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 18:12:56.822 DEBUG [9b1cbd1f-300d-4d55-a164-54ebffe9acb2] 32976 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 18:12:56.822 DEBUG [416eeb22-e1b8-40ce-96a8-a49b07cc7374] 32976 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 18:12:56.823  INFO [9b1cbd1f-300d-4d55-a164-54ebffe9acb2] 32976 --- [nio-8080-exec-5] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 18:12:56.824 DEBUG [416eeb22-e1b8-40ce-96a8-a49b07cc7374] 32976 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 18:12:56.825  INFO [416eeb22-e1b8-40ce-96a8-a49b07cc7374] 32976 --- [nio-8080-exec-6] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 18:12:56.859  INFO [9b1cbd1f-300d-4d55-a164-54ebffe9acb2] 32976 --- [nio-8080-exec-5] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 18:12:56.861 DEBUG [9b1cbd1f-300d-4d55-a164-54ebffe9acb2] 32976 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:12:44.812284, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=C70C69C0ABB077E02DD4AA1DAAF66020], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:12:57.023  INFO [416eeb22-e1b8-40ce-96a8-a49b07cc7374] 32976 --- [nio-8080-exec-6] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 18:12:57.024 DEBUG [416eeb22-e1b8-40ce-96a8-a49b07cc7374] 32976 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:12:44.812284, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=C70C69C0ABB077E02DD4AA1DAAF66020], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:12:57.031 DEBUG [e477e2bc-1bfe-48af-b9e0-413da7523703] 32976 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 18:12:57.034 DEBUG [e477e2bc-1bfe-48af-b9e0-413da7523703] 32976 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 18:12:57.034  INFO [e477e2bc-1bfe-48af-b9e0-413da7523703] 32976 --- [nio-8080-exec-7] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 18:12:57.082  INFO [e477e2bc-1bfe-48af-b9e0-413da7523703] 32976 --- [nio-8080-exec-7] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 18:12:57.083 DEBUG [e477e2bc-1bfe-48af-b9e0-413da7523703] 32976 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:12:44.812284, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=C70C69C0ABB077E02DD4AA1DAAF66020], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:13:01.527 DEBUG [ded3e05a-48fa-4a13-8fe3-ebf70b06c9d8] 32976 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 18:13:01.537 DEBUG [ded3e05a-48fa-4a13-8fe3-ebf70b06c9d8] 32976 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:12:44.812284, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=C70C69C0ABB077E02DD4AA1DAAF66020], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:13:01.541 DEBUG [ded3e05a-48fa-4a13-8fe3-ebf70b06c9d8] 32976 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 18:13:01.543  INFO [ded3e05a-48fa-4a13-8fe3-ebf70b06c9d8] 32976 --- [nio-8080-exec-8] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 18:13:01.543  INFO [ded3e05a-48fa-4a13-8fe3-ebf70b06c9d8] 32976 --- [nio-8080-exec-8] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 18:13:01.554 DEBUG [6538028c-1c88-485b-bc3d-a1f159c27c17] 32976 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 18:13:01.563 DEBUG [6538028c-1c88-485b-bc3d-a1f159c27c17] 32976 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:12:44.812284, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=C70C69C0ABB077E02DD4AA1DAAF66020], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:13:01.567 DEBUG [6538028c-1c88-485b-bc3d-a1f159c27c17] 32976 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 18:13:01.568  INFO [6538028c-1c88-485b-bc3d-a1f159c27c17] 32976 --- [io-8080-exec-10] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 18:13:01.568  INFO [6538028c-1c88-485b-bc3d-a1f159c27c17] 32976 --- [io-8080-exec-10] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 18:13:01.787 DEBUG [876b0f51-73b1-4b63-996c-4693aef57916] 32976 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 18:13:01.798 DEBUG [876b0f51-73b1-4b63-996c-4693aef57916] 32976 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:12:44.812284, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=C70C69C0ABB077E02DD4AA1DAAF66020], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:13:01.801 DEBUG [876b0f51-73b1-4b63-996c-4693aef57916] 32976 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 18:13:01.802  INFO [876b0f51-73b1-4b63-996c-4693aef57916] 32976 --- [nio-8080-exec-1] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 18:13:01.802  INFO [876b0f51-73b1-4b63-996c-4693aef57916] 32976 --- [nio-8080-exec-1] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 18:13:06.425 DEBUG [208b22c8-344b-4264-b651-1346a0938861] 32976 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/cart/add
2025-06-29 18:13:06.437 DEBUG [208b22c8-344b-4264-b651-1346a0938861] 32976 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:12:44.812284, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=C70C69C0ABB077E02DD4AA1DAAF66020], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:13:06.438 DEBUG [208b22c8-344b-4264-b651-1346a0938861] 32976 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /api/cart/add
2025-06-29 18:13:06.485  INFO [208b22c8-344b-4264-b651-1346a0938861] 32976 --- [nio-8080-exec-2] o.e.x.controllers.CartController         : User ****@****.*** request to add flight ID 16 to persistent cart
2025-06-29 18:13:06.542  INFO [208b22c8-344b-4264-b651-1346a0938861] 32976 --- [nio-8080-exec-2] o.e.xlr8travel.services.CartServiceImpl  : Added new flight ID 16 to cart for user ****@****.***
2025-06-29 18:13:06.577  INFO [208b22c8-344b-4264-b651-1346a0938861] 32976 --- [nio-8080-exec-2] o.e.x.controllers.CartController         : Flight ID 16 added/incremented in persistent cart for user ****@****.***.
2025-06-29 18:13:06.591 DEBUG [092492a0-d29e-41c2-83bc-1b3fb472ea26] 32976 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 18:13:06.603 DEBUG [092492a0-d29e-41c2-83bc-1b3fb472ea26] 32976 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:12:44.812284, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=C70C69C0ABB077E02DD4AA1DAAF66020], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:13:06.606 DEBUG [092492a0-d29e-41c2-83bc-1b3fb472ea26] 32976 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 18:13:06.606  INFO [092492a0-d29e-41c2-83bc-1b3fb472ea26] 32976 --- [nio-8080-exec-9] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 18:13:06.675  INFO [092492a0-d29e-41c2-83bc-1b3fb472ea26] 32976 --- [nio-8080-exec-9] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 18:13:07.032 DEBUG [e3b7ddfb-7bd6-4c8b-a5dd-81ef7b5a8aab] 32976 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 18:13:07.042 DEBUG [e3b7ddfb-7bd6-4c8b-a5dd-81ef7b5a8aab] 32976 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:12:44.812284, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=C70C69C0ABB077E02DD4AA1DAAF66020], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:13:07.045 DEBUG [e3b7ddfb-7bd6-4c8b-a5dd-81ef7b5a8aab] 32976 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 18:13:07.045  INFO [e3b7ddfb-7bd6-4c8b-a5dd-81ef7b5a8aab] 32976 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 18:13:07.101  INFO [e3b7ddfb-7bd6-4c8b-a5dd-81ef7b5a8aab] 32976 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 18:13:07.107 DEBUG [15244a09-0eaa-4a40-bca2-0e312f8c7739] 32976 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 18:13:07.118 DEBUG [15244a09-0eaa-4a40-bca2-0e312f8c7739] 32976 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:12:44.812284, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=C70C69C0ABB077E02DD4AA1DAAF66020], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:13:07.120 DEBUG [15244a09-0eaa-4a40-bca2-0e312f8c7739] 32976 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 18:13:07.121  INFO [15244a09-0eaa-4a40-bca2-0e312f8c7739] 32976 --- [nio-8080-exec-4] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 18:13:07.165  INFO [15244a09-0eaa-4a40-bca2-0e312f8c7739] 32976 --- [nio-8080-exec-4] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 18:13:08.792 DEBUG [ca562f1b-4085-414f-8b7c-597305383004] 32976 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 18:13:08.808 DEBUG [ca562f1b-4085-414f-8b7c-597305383004] 32976 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:12:44.812284, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=C70C69C0ABB077E02DD4AA1DAAF66020], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:13:08.810 DEBUG [ca562f1b-4085-414f-8b7c-597305383004] 32976 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 18:13:08.812  INFO [ca562f1b-4085-414f-8b7c-597305383004] 32976 --- [nio-8080-exec-5] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 18:13:08.864  INFO [ca562f1b-4085-414f-8b7c-597305383004] 32976 --- [nio-8080-exec-5] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 18:13:08.871 DEBUG [8705d6d6-3b9f-48e0-9623-14f478f4175c] 32976 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 18:13:08.881 DEBUG [8705d6d6-3b9f-48e0-9623-14f478f4175c] 32976 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:12:44.812284, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=C70C69C0ABB077E02DD4AA1DAAF66020], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:13:08.883 DEBUG [8705d6d6-3b9f-48e0-9623-14f478f4175c] 32976 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 18:13:08.884  INFO [8705d6d6-3b9f-48e0-9623-14f478f4175c] 32976 --- [nio-8080-exec-6] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 18:13:08.939  INFO [8705d6d6-3b9f-48e0-9623-14f478f4175c] 32976 --- [nio-8080-exec-6] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 18:13:17.726 DEBUG [5d5e8110-a536-4be0-89cd-64e0cfeae6e0] 32976 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/checkout/create-payment-intent
2025-06-29 18:13:17.727 DEBUG [5d5e8110-a536-4be0-89cd-64e0cfeae6e0] 32976 --- [nio-8080-exec-7] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 18:13:17.728 DEBUG [5d5e8110-a536-4be0-89cd-64e0cfeae6e0] 32976 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/checkout/create-payment-intent
2025-06-29 18:13:17.744  INFO [5d5e8110-a536-4be0-89cd-64e0cfeae6e0] 32976 --- [nio-8080-exec-7] o.e.x.controllers.PaymentController      : Creating payment intent for amount: 23995 ron
2025-06-29 18:13:18.392  INFO [5d5e8110-a536-4be0-89cd-64e0cfeae6e0] 32976 --- [nio-8080-exec-7] o.e.x.controllers.PaymentController      : Payment intent created successfully: pi_3RfMuwGf8s1WZJnq0lkP0u85
2025-06-29 18:13:19.659 DEBUG [03398773-fa28-4e5c-ab4e-dc99e492f334] 32976 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /api/checkout/confirm
2025-06-29 18:13:19.669 DEBUG [03398773-fa28-4e5c-ab4e-dc99e492f334] 32976 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:12:44.812284, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=C70C69C0ABB077E02DD4AA1DAAF66020], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:13:19.670 DEBUG [03398773-fa28-4e5c-ab4e-dc99e492f334] 32976 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured POST /api/checkout/confirm
2025-06-29 18:13:19.672  INFO [03398773-fa28-4e5c-ab4e-dc99e492f334] 32976 --- [nio-8080-exec-8] o.e.x.controllers.CheckoutController     : Received purchase confirmation request.
2025-06-29 18:13:19.678  INFO [03398773-fa28-4e5c-ab4e-dc99e492f334] 32976 --- [nio-8080-exec-8] o.e.x.controllers.CheckoutController     : Processing purchase for user: ****@****.***
2025-06-29 18:13:19.724  INFO [03398773-fa28-4e5c-ab4e-dc99e492f334] 32976 --- [nio-8080-exec-8] o.e.x.controllers.CheckoutController     : User ****@****.*** persistent cart has 1 items.
2025-06-29 18:13:19.725  WARN [03398773-fa28-4e5c-ab4e-dc99e492f334] 32976 --- [nio-8080-exec-8] o.e.x.controllers.CheckoutController     : !!! SIMULATING successful payment processing for user ****@****.*** !!!
2025-06-29 18:13:19.726  INFO [03398773-fa28-4e5c-ab4e-dc99e492f334] 32976 --- [nio-8080-exec-8] o.e.x.services.OrderServiceImpl          : Creating order from persistent cart for user: ****@****.***
2025-06-29 18:13:19.732  INFO [03398773-fa28-4e5c-ab4e-dc99e492f334] 32976 --- [nio-8080-exec-8] o.e.x.services.OrderServiceImpl          : Order 1 created for user ****@****.***, status: PENDING_PAYMENT. Total: 37.99
2025-06-29 18:13:19.732  INFO [03398773-fa28-4e5c-ab4e-dc99e492f334] 32976 --- [nio-8080-exec-8] o.e.x.services.OrderServiceImpl          : Created ticket with deferred seat selection (fallback) for flight XT-OTP-CDG-2 for user ****@****.***
2025-06-29 18:13:19.732  INFO [03398773-fa28-4e5c-ab4e-dc99e492f334] 32976 --- [nio-8080-exec-8] o.e.x.services.OrderServiceImpl          : Ticket has baggage type: BAGGAGE_TYPE_WEIGHT_CARRY_ON_0
2025-06-29 18:13:20.864  INFO [03398773-fa28-4e5c-ab4e-dc99e492f334] 32976 --- [nio-8080-exec-8] o.e.x.services.EmailServiceImpl          : Purchase confirmation email sent to ****@****.***
2025-06-29 18:13:20.864  INFO [03398773-fa28-4e5c-ab4e-dc99e492f334] 32976 --- [nio-8080-exec-8] o.e.x.services.OrderServiceImpl          : Purchase confirmation email sent to user: ****@****.***
2025-06-29 18:13:20.877  INFO [03398773-fa28-4e5c-ab4e-dc99e492f334] 32976 --- [nio-8080-exec-8] o.e.x.controllers.CheckoutController     : Order successfully created for user ****@****.***. Confirmation: 1
2025-06-29 18:13:20.881  INFO [03398773-fa28-4e5c-ab4e-dc99e492f334] 32976 --- [nio-8080-exec-8] o.e.xlr8travel.services.CartServiceImpl  : Clearing 1 items from cart for user ****@****.***
2025-06-29 18:13:20.904  INFO [03398773-fa28-4e5c-ab4e-dc99e492f334] 32976 --- [nio-8080-exec-8] o.e.x.controllers.CheckoutController     : Persistent cart cleared for user ****@****.***.
2025-06-29 18:13:20.913 DEBUG [fc7748db-c725-4c9d-ac52-1e2a275c3277] 32976 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing DELETE /api/cart/remove/16
2025-06-29 18:13:21.009 DEBUG [fc7748db-c725-4c9d-ac52-1e2a275c3277] 32976 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:12:44.812284, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=C70C69C0ABB077E02DD4AA1DAAF66020], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:13:21.011 DEBUG [fc7748db-c725-4c9d-ac52-1e2a275c3277] 32976 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured DELETE /api/cart/remove/16
2025-06-29 18:13:21.093  INFO [fc7748db-c725-4c9d-ac52-1e2a275c3277] 32976 --- [io-8080-exec-10] o.e.x.controllers.CartController         : User ****@****.*** request to remove flight ID 16 from persistent cart
2025-06-29 18:13:21.102  WARN [fc7748db-c725-4c9d-ac52-1e2a275c3277] 32976 --- [io-8080-exec-10] o.e.xlr8travel.services.CartServiceImpl  : Attempted to remove flight ID 16 not found in cart for user ****@****.***
2025-06-29 18:13:21.104  WARN [fc7748db-c725-4c9d-ac52-1e2a275c3277] 32976 --- [io-8080-exec-10] o.e.x.controllers.CartController         : Attempted to remove flight ID 16 not found in persistent cart for user ****@****.***
2025-06-29 18:13:21.114 DEBUG [dc856aa7-a816-43d4-9286-67c337e06211] 32976 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 18:13:21.208 DEBUG [dc856aa7-a816-43d4-9286-67c337e06211] 32976 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:12:44.812284, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=C70C69C0ABB077E02DD4AA1DAAF66020], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:13:21.210 DEBUG [dc856aa7-a816-43d4-9286-67c337e06211] 32976 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 18:13:21.210  INFO [dc856aa7-a816-43d4-9286-67c337e06211] 32976 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 18:13:21.297  INFO [dc856aa7-a816-43d4-9286-67c337e06211] 32976 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 18:13:29.831 DEBUG [50508539-332c-49d6-b9a4-d3ecd3cdacb6] 32976 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 18:13:29.946 DEBUG [50508539-332c-49d6-b9a4-d3ecd3cdacb6] 32976 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:12:44.812284, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=C70C69C0ABB077E02DD4AA1DAAF66020], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:13:29.948 DEBUG [50508539-332c-49d6-b9a4-d3ecd3cdacb6] 32976 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 18:13:30.049  INFO [50508539-332c-49d6-b9a4-d3ecd3cdacb6] 32976 --- [nio-8080-exec-2] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 18:13:30.049  INFO [50508539-332c-49d6-b9a4-d3ecd3cdacb6] 32976 --- [nio-8080-exec-2] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 18:13:30.055  INFO [50508539-332c-49d6-b9a4-d3ecd3cdacb6] 32976 --- [nio-8080-exec-2] o.e.x.services.TicketServiceImpl         : Found 1 tickets eligible for check-in for user 4
2025-06-29 18:13:30.076 DEBUG [b56a238d-cb44-42c1-bb3a-5187978787b9] 32976 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 18:13:30.173 DEBUG [b56a238d-cb44-42c1-bb3a-5187978787b9] 32976 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:12:44.812284, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=C70C69C0ABB077E02DD4AA1DAAF66020], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:13:30.175 DEBUG [b56a238d-cb44-42c1-bb3a-5187978787b9] 32976 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 18:13:30.272  INFO [b56a238d-cb44-42c1-bb3a-5187978787b9] 32976 --- [nio-8080-exec-9] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 18:13:30.272  INFO [b56a238d-cb44-42c1-bb3a-5187978787b9] 32976 --- [nio-8080-exec-9] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 18:13:30.277  INFO [b56a238d-cb44-42c1-bb3a-5187978787b9] 32976 --- [nio-8080-exec-9] o.e.x.services.TicketServiceImpl         : Found 1 tickets eligible for check-in for user 4
2025-06-29 18:13:34.008 DEBUG [57805ab7-a0b5-4b48-9457-06a5873375c8] 32976 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 18:13:34.099 DEBUG [57805ab7-a0b5-4b48-9457-06a5873375c8] 32976 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:12:44.812284, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=C70C69C0ABB077E02DD4AA1DAAF66020], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:13:34.101 DEBUG [57805ab7-a0b5-4b48-9457-06a5873375c8] 32976 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 18:13:34.101  INFO [57805ab7-a0b5-4b48-9457-06a5873375c8] 32976 --- [nio-8080-exec-3] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 18:13:34.102  INFO [57805ab7-a0b5-4b48-9457-06a5873375c8] 32976 --- [nio-8080-exec-3] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 18:13:34.143 DEBUG [8a23bb74-98a0-4399-9147-bfe01abce486] 32976 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 18:13:34.244 DEBUG [8a23bb74-98a0-4399-9147-bfe01abce486] 32976 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:12:44.812284, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=C70C69C0ABB077E02DD4AA1DAAF66020], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:13:34.247 DEBUG [8a23bb74-98a0-4399-9147-bfe01abce486] 32976 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 18:13:34.247  INFO [8a23bb74-98a0-4399-9147-bfe01abce486] 32976 --- [nio-8080-exec-4] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 18:13:34.248  INFO [8a23bb74-98a0-4399-9147-bfe01abce486] 32976 --- [nio-8080-exec-4] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 18:14:09.409 DEBUG [a0a52be3-b08d-4924-b42a-11ba0afebfd9] 32976 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 18:14:09.422 DEBUG [b4688138-a3a7-4294-933c-8030a0904ee7] 32976 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 18:14:09.533 DEBUG [a0a52be3-b08d-4924-b42a-11ba0afebfd9] 32976 --- [io-8080-exec-10] o.s.s.core.session.SessionRegistryImpl   : Registering session 71DE7058B1968E15AD17681BFC2B175A, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:12:44.812284, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}])
2025-06-29 18:14:09.534 DEBUG [a0a52be3-b08d-4924-b42a-11ba0afebfd9] 32976 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:12:44.812284, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@376fe49f]
2025-06-29 18:14:09.535 DEBUG [a0a52be3-b08d-4924-b42a-11ba0afebfd9] 32976 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me
2025-06-29 18:14:09.536  INFO [a0a52be3-b08d-4924-b42a-11ba0afebfd9] 32976 --- [io-8080-exec-10] o.e.x.controllers.UserController         : Request received for current user details: ****@****.***
2025-06-29 18:14:09.547 DEBUG [b4688138-a3a7-4294-933c-8030a0904ee7] 32976 --- [nio-8080-exec-1] o.s.s.core.session.SessionRegistryImpl   : Registering session 5DF5EDD23B0B10E55D52A6DA8028A784, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:12:44.812284, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}])
2025-06-29 18:14:09.548 DEBUG [b4688138-a3a7-4294-933c-8030a0904ee7] 32976 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:12:44.812284, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@6cda15e1]
2025-06-29 18:14:09.550 DEBUG [b4688138-a3a7-4294-933c-8030a0904ee7] 32976 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me
2025-06-29 18:14:09.550  INFO [b4688138-a3a7-4294-933c-8030a0904ee7] 32976 --- [nio-8080-exec-1] o.e.x.controllers.UserController         : Request received for current user details: ****@****.***
2025-06-29 18:14:09.659  INFO [a0a52be3-b08d-4924-b42a-11ba0afebfd9] 32976 --- [io-8080-exec-10] o.e.x.controllers.UserController         : Returning details for user: ****@****.***
2025-06-29 18:14:09.671  INFO [b4688138-a3a7-4294-933c-8030a0904ee7] 32976 --- [nio-8080-exec-1] o.e.x.controllers.UserController         : Returning details for user: ****@****.***
2025-06-29 18:14:09.772 DEBUG [28948d76-e162-448a-ab6e-4872cf7453b1] 32976 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 18:14:09.778 DEBUG [f6c5f753-e5d4-467f-90ef-c344b9a8dd2c] 32976 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 18:14:09.780 DEBUG [f923e87b-fd97-479f-b31a-8729a6f5a138] 32976 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 18:14:09.787 DEBUG [26e0e041-fa8a-42e5-a767-aab2c7a0ae39] 32976 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 18:14:09.787 DEBUG [2fcbd0e3-9dff-4d5c-aee0-df89bd48d269] 32976 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 18:14:09.958 DEBUG [28948d76-e162-448a-ab6e-4872cf7453b1] 32976 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:12:44.812284, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=C70C69C0ABB077E02DD4AA1DAAF66020], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:14:09.961 DEBUG [28948d76-e162-448a-ab6e-4872cf7453b1] 32976 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 18:14:09.964 DEBUG [f923e87b-fd97-479f-b31a-8729a6f5a138] 32976 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:12:44.812284, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=C70C69C0ABB077E02DD4AA1DAAF66020], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:14:09.967 DEBUG [f923e87b-fd97-479f-b31a-8729a6f5a138] 32976 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 18:14:09.968  INFO [f923e87b-fd97-479f-b31a-8729a6f5a138] 32976 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 18:14:09.972 DEBUG [f6c5f753-e5d4-467f-90ef-c344b9a8dd2c] 32976 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:12:44.812284, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=C70C69C0ABB077E02DD4AA1DAAF66020], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:14:09.974 DEBUG [f6c5f753-e5d4-467f-90ef-c344b9a8dd2c] 32976 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 18:14:09.979 DEBUG [2fcbd0e3-9dff-4d5c-aee0-df89bd48d269] 32976 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:12:44.812284, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=C70C69C0ABB077E02DD4AA1DAAF66020], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:14:09.982 DEBUG [2fcbd0e3-9dff-4d5c-aee0-df89bd48d269] 32976 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 18:14:09.991 DEBUG [26e0e041-fa8a-42e5-a767-aab2c7a0ae39] 32976 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:12:44.812284, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=C70C69C0ABB077E02DD4AA1DAAF66020], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:14:09.994 DEBUG [26e0e041-fa8a-42e5-a767-aab2c7a0ae39] 32976 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 18:14:10.117  WARN [28948d76-e162-448a-ab6e-4872cf7453b1] 32976 --- [nio-8080-exec-2] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 18:14:10.117  INFO [f6c5f753-e5d4-467f-90ef-c344b9a8dd2c] 32976 --- [nio-8080-exec-9] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 18:14:10.118  INFO [f6c5f753-e5d4-467f-90ef-c344b9a8dd2c] 32976 --- [nio-8080-exec-9] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 18:14:10.118  WARN [28948d76-e162-448a-ab6e-4872cf7453b1] 32976 --- [nio-8080-exec-2] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 18:14:10.130  INFO [2fcbd0e3-9dff-4d5c-aee0-df89bd48d269] 32976 --- [nio-8080-exec-7] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 18:14:10.130  INFO [2fcbd0e3-9dff-4d5c-aee0-df89bd48d269] 32976 --- [nio-8080-exec-7] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 18:14:10.133  INFO [f923e87b-fd97-479f-b31a-8729a6f5a138] 32976 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 18:14:10.137  INFO [f6c5f753-e5d4-467f-90ef-c344b9a8dd2c] 32976 --- [nio-8080-exec-9] o.e.x.services.TicketServiceImpl         : Found 1 tickets eligible for check-in for user 4
2025-06-29 18:14:10.139  INFO [2fcbd0e3-9dff-4d5c-aee0-df89bd48d269] 32976 --- [nio-8080-exec-7] o.e.x.services.TicketServiceImpl         : Found 1 tickets eligible for check-in for user 4
2025-06-29 18:14:10.144  WARN [26e0e041-fa8a-42e5-a767-aab2c7a0ae39] 32976 --- [nio-8080-exec-4] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 18:14:10.145  WARN [26e0e041-fa8a-42e5-a767-aab2c7a0ae39] 32976 --- [nio-8080-exec-4] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 18:17:36.008  INFO [NONE] 32976 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-29 18:17:36.014  INFO [NONE] 32976 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-06-29 18:17:36.066  INFO [NONE] 32976 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-06-29 18:17:57.110  INFO [NONE] 32628 --- [  restartedMain] o.e.xlr8travel.Xlr8travelApplication     : Starting Xlr8travelApplication using Java 21.0.5 with PID 32628 (C:\Users\razvi\Desktop\Licenta\backend\target\classes started by razvi in C:\Users\razvi\Desktop\Licenta\backend)
2025-06-29 18:17:57.117 DEBUG [NONE] 32628 --- [  restartedMain] o.e.xlr8travel.Xlr8travelApplication     : Running with Spring Boot v3.2.4, Spring v6.1.5
2025-06-29 18:17:57.118  INFO [NONE] 32628 --- [  restartedMain] o.e.xlr8travel.Xlr8travelApplication     : The following 1 profile is active: "local"
2025-06-29 18:17:57.166  INFO [NONE] 32628 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-29 18:17:57.167  INFO [NONE] 32628 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-29 18:17:58.154  INFO [NONE] 32628 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-29 18:17:58.235  INFO [NONE] 32628 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 74 ms. Found 9 JPA repository interfaces.
2025-06-29 18:17:59.142  INFO [NONE] 32628 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-29 18:17:59.154  INFO [NONE] 32628 --- [  restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-29 18:17:59.155  INFO [NONE] 32628 --- [  restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.19]
2025-06-29 18:17:59.233  INFO [NONE] 32628 --- [  restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-06-29 18:17:59.234  INFO [NONE] 32628 --- [  restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2065 ms
2025-06-29 18:17:59.510  INFO [NONE] 32628 --- [  restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-29 18:17:59.565  INFO [NONE] 32628 --- [  restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.4.Final
2025-06-29 18:17:59.599  INFO [NONE] 32628 --- [  restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-06-29 18:17:59.816  INFO [NONE] 32628 --- [  restartedMain] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-29 18:17:59.845  INFO [NONE] 32628 --- [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-06-29 18:18:00.038  INFO [NONE] 32628 --- [  restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@36e44a12
2025-06-29 18:18:00.040  INFO [NONE] 32628 --- [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-06-29 18:18:00.089  WARN [NONE] 32628 --- [  restartedMain] org.hibernate.orm.deprecation            : HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-29 18:18:01.234  INFO [NONE] 32628 --- [  restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-29 18:18:09.723  INFO [NONE] 32628 --- [  restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-29 18:18:10.072  INFO [NONE] 32628 --- [  restartedMain] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-29 18:18:10.547  WARN [NONE] 32628 --- [  restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Cannot deserialize session attribute [SPRING_SECURITY_CONTEXT] for session [5DF5EDD23B0B10E55D52A6DA8028A784]
2025-06-29 18:18:10.549 ERROR [NONE] 32628 --- [  restartedMain] o.a.catalina.session.StandardManager     : Exception loading sessions from persistent storage

java.io.StreamCorruptedException: invalid type code: 00
	at java.base/java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1793)
	at java.base/java.io.ObjectInputStream$FieldValues.<init>(ObjectInputStream.java:2618)
	at java.base/java.io.ObjectInputStream.defaultReadObject(ObjectInputStream.java:678)
	at java.base/java.lang.Throwable.readObject(Throwable.java:936)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1102)
	at java.base/java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2444)
	at java.base/java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2284)
	at java.base/java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1762)
	at java.base/java.io.ObjectInputStream.readObject(ObjectInputStream.java:540)
	at java.base/java.io.ObjectInputStream.readObject(ObjectInputStream.java:498)
	at org.apache.catalina.session.StandardSession.doReadObject(StandardSession.java:1348)
	at org.apache.catalina.session.StandardSession.readObjectData(StandardSession.java:985)
	at org.apache.catalina.session.StandardManager.doLoad(StandardManager.java:210)
	at org.apache.catalina.session.StandardManager.load(StandardManager.java:156)
	at org.apache.catalina.session.StandardManager.startInternal(StandardManager.java:346)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4893)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1332)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1322)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:866)
	at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:845)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1332)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1322)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:866)
	at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:240)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.StandardService.startInternal(StandardService.java:433)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:921)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.startup.Tomcat.start(Tomcat.java:437)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:126)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.<init>(TomcatWebServer.java:105)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getTomcatWebServer(TomcatServletWebServerFactory.java:499)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getWebServer(TomcatServletWebServerFactory.java:218)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.createWebServer(ServletWebServerApplicationContext.java:188)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:162)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:618)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at org.example.xlr8travel.Xlr8travelApplication.main(Xlr8travelApplication.java:10)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)

2025-06-29 18:18:10.557 DEBUG [NONE] 32628 --- [  restartedMain] o.e.x.security.JwtAuthenticationFilter   : Filter 'jwtAuthenticationFilter' configured for use
2025-06-29 18:18:10.559 DEBUG [NONE] 32628 --- [  restartedMain] o.e.x.security.RateLimitingFilter        : Filter 'rateLimitingFilter' configured for use
2025-06-29 18:18:10.776  INFO [NONE] 32628 --- [  restartedMain] o.e.x.config.LocalPropertiesConfig       : Loaded application-local.properties
2025-06-29 18:18:11.109  INFO [NONE] 32628 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : === GEMINI SERVICE CONFIGURATION ===
2025-06-29 18:18:11.110  INFO [NONE] 32628 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : Project ID: xlr8travel
2025-06-29 18:18:11.110  INFO [NONE] 32628 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : Location ID: us-east1
2025-06-29 18:18:11.110  INFO [NONE] 32628 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : Model: gemini-2.0-flash-001
2025-06-29 18:18:11.111  INFO [NONE] 32628 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : Credentials Path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 18:18:11.111  INFO [NONE] 32628 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : API Key: ***SET***
2025-06-29 18:18:11.111  INFO [NONE] 32628 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : ✅ Credentials file exists: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 18:18:11.112  INFO [NONE] 32628 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : ✅ Credentials file size: 2376 bytes
2025-06-29 18:18:11.112  INFO [NONE] 32628 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : ✅ GOOGLE_APPLICATION_CREDENTIALS env var is set: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 18:18:11.113  INFO [NONE] 32628 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : =====================================
2025-06-29 18:18:11.144  INFO [NONE] 32628 --- [  restartedMain] o.e.x.config.SensitiveDataConfig         : Validating sensitive data configuration for profile: local
2025-06-29 18:18:11.145  WARN [NONE] 32628 --- [  restartedMain] o.e.x.config.SensitiveDataConfig         : Environment variable SPRING_DATASOURCE_URL is not set
2025-06-29 18:18:11.146  WARN [NONE] 32628 --- [  restartedMain] o.e.x.config.SensitiveDataConfig         : Environment variable SPRING_DATASOURCE_USERNAME is not set
2025-06-29 18:18:11.146  WARN [NONE] 32628 --- [  restartedMain] o.e.x.config.SensitiveDataConfig         : Environment variable SPRING_DATASOURCE_PASSWORD is not set
2025-06-29 18:18:11.146  WARN [NONE] 32628 --- [  restartedMain] o.e.x.config.SensitiveDataConfig         : Environment variable STRIPE_SECRET_KEY is not set
2025-06-29 18:18:11.207  WARN [NONE] 32628 --- [  restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-29 18:18:11.330  INFO [NONE] 32628 --- [  restartedMain] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2025-06-29 18:18:11.769  INFO [NONE] 32628 --- [  restartedMain] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 4 endpoint(s) beneath base path '/actuator'
2025-06-29 18:18:11.918  INFO [NONE] 32628 --- [  restartedMain] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@5419dec7, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5195ceac, org.springframework.security.web.context.SecurityContextHolderFilter@3280d946, org.springframework.security.web.header.HeaderWriterFilter@699ed178, org.springframework.web.filter.CorsFilter@48b0d4f9, org.springframework.security.web.authentication.logout.LogoutFilter@454a3e60, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@53f59d8, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@35f29615, org.example.xlr8travel.security.JwtAuthenticationFilter@6d009f01, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@3356cbfb, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@33d3d556, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@746987b6, org.springframework.security.web.session.ConcurrentSessionFilter@3f9267cc, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@564b93f1, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1e386ace, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@27c9d573, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6e1c801a, org.springframework.security.web.session.SessionManagementFilter@4d94eb95, org.springframework.security.web.access.ExceptionTranslationFilter@5b7ff850, org.springframework.security.web.access.intercept.AuthorizationFilter@34ef81a9]
2025-06-29 18:18:12.734  INFO [NONE] 32628 --- [  restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2025-06-29 18:18:12.833  INFO [NONE] 32628 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path ''
2025-06-29 18:18:12.849  INFO [NONE] 32628 --- [  restartedMain] o.e.xlr8travel.Xlr8travelApplication     : Started Xlr8travelApplication in 16.249 seconds (process running for 16.915)
2025-06-29 18:18:19.502  INFO [NONE] 32628 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-29 18:18:19.502  INFO [NONE] 32628 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-06-29 18:18:19.504  INFO [NONE] 32628 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-06-29 18:18:19.522 DEBUG [54fce005-0469-4f6e-9e50-0fe3531d5961] 32628 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 18:18:19.659 ERROR [54fce005-0469-4f6e-9e50-0fe3531d5961] 32628 --- [nio-8080-exec-1] o.e.x.security.JwtAuthenticationFilter   : Cannot set user authentication: User ****@****.*** not found
2025-06-29 18:18:19.662 DEBUG [54fce005-0469-4f6e-9e50-0fe3531d5961] 32628 --- [nio-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 18:18:19.667  WARN [54fce005-0469-4f6e-9e50-0fe3531d5961] 32628 --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/api/user/me' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2025-06-29 18:18:19.694 DEBUG [54fce005-0469-4f6e-9e50-0fe3531d5961] 32628 --- [nio-8080-exec-1] o.s.s.w.s.HttpSessionRequestCache        : Saved request http://localhost:8080/api/user/me?continue to session
2025-06-29 18:18:19.695 DEBUG [54fce005-0469-4f6e-9e50-0fe3531d5961] 32628 --- [nio-8080-exec-1] s.w.a.DelegatingAuthenticationEntryPoint : Trying to match using Ant [pattern='/api/**']
2025-06-29 18:18:19.695 DEBUG [54fce005-0469-4f6e-9e50-0fe3531d5961] 32628 --- [nio-8080-exec-1] s.w.a.DelegatingAuthenticationEntryPoint : Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@53f45c0f
2025-06-29 18:18:19.873 DEBUG [b27d3e0b-7b1e-4845-876c-01c766f83cea] 32628 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/token/refresh
2025-06-29 18:18:19.875 DEBUG [b27d3e0b-7b1e-4845-876c-01c766f83cea] 32628 --- [nio-8080-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 18:18:19.877 DEBUG [b27d3e0b-7b1e-4845-876c-01c766f83cea] 32628 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /api/token/refresh
2025-06-29 18:18:19.956  INFO [b27d3e0b-7b1e-4845-876c-01c766f83cea] 32628 --- [nio-8080-exec-2] o.e.x.controllers.TokenController        : Generated new access token for user: ****@****.***
2025-06-29 18:18:20.149 DEBUG [108addde-e4c4-4b31-8d3c-4e0bc576d93c] 32628 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 18:18:20.165 ERROR [108addde-e4c4-4b31-8d3c-4e0bc576d93c] 32628 --- [nio-8080-exec-3] o.e.x.security.JwtAuthenticationFilter   : Cannot set user authentication: User ****@****.*** not found
2025-06-29 18:18:20.166 DEBUG [108addde-e4c4-4b31-8d3c-4e0bc576d93c] 32628 --- [nio-8080-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 18:18:20.172 DEBUG [108addde-e4c4-4b31-8d3c-4e0bc576d93c] 32628 --- [nio-8080-exec-3] o.s.s.w.s.HttpSessionRequestCache        : Saved request http://localhost:8080/api/user/me?continue to session
2025-06-29 18:18:20.172 DEBUG [108addde-e4c4-4b31-8d3c-4e0bc576d93c] 32628 --- [nio-8080-exec-3] s.w.a.DelegatingAuthenticationEntryPoint : Trying to match using Ant [pattern='/api/**']
2025-06-29 18:18:20.173 DEBUG [108addde-e4c4-4b31-8d3c-4e0bc576d93c] 32628 --- [nio-8080-exec-3] s.w.a.DelegatingAuthenticationEntryPoint : Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@53f45c0f
2025-06-29 18:18:20.349 DEBUG [2a652f14-f62b-4f19-8a0b-0380c0442a3f] 32628 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/nearby?origin=OTP
2025-06-29 18:18:20.357 DEBUG [2a652f14-f62b-4f19-8a0b-0380c0442a3f] 32628 --- [nio-8080-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 18:18:20.357 DEBUG [2a652f14-f62b-4f19-8a0b-0380c0442a3f] 32628 --- [nio-8080-exec-4] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id C70C69C0ABB077E02DD4AA1DAAF66020
2025-06-29 18:18:20.360 DEBUG [2a652f14-f62b-4f19-8a0b-0380c0442a3f] 32628 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/nearby?origin=OTP
2025-06-29 18:18:20.369  INFO [2a652f14-f62b-4f19-8a0b-0380c0442a3f] 32628 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Received request for nearby flights from origin: OTP, departureDate: null
2025-06-29 18:18:20.369  INFO [2a652f14-f62b-4f19-8a0b-0380c0442a3f] 32628 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Using search date: 2025-06-29
2025-06-29 18:18:20.370  INFO [2a652f14-f62b-4f19-8a0b-0380c0442a3f] 32628 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Cache key: OTP-2025-06-29
2025-06-29 18:18:20.370  INFO [2a652f14-f62b-4f19-8a0b-0380c0442a3f] 32628 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : No valid cache found. Searching nearby flights from origin: OTP, after date: 2025-06-29
2025-06-29 18:18:20.371  INFO [2a652f14-f62b-4f19-8a0b-0380c0442a3f] 32628 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Calling flightService.findByOriginAndDepartureDateAfter for origin: OTP, date: 2025-06-29
2025-06-29 18:18:20.469  INFO [2a652f14-f62b-4f19-8a0b-0380c0442a3f] 32628 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Database query completed, found 16 flights
2025-06-29 18:18:20.470  INFO [2a652f14-f62b-4f19-8a0b-0380c0442a3f] 32628 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Converting 16 Flight entities to FlightDTOs
2025-06-29 18:18:20.471  INFO [2a652f14-f62b-4f19-8a0b-0380c0442a3f] 32628 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Converted to 16 FlightDTOs
2025-06-29 18:18:20.471  INFO [2a652f14-f62b-4f19-8a0b-0380c0442a3f] 32628 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Grouping flights by destination country
2025-06-29 18:18:20.471  INFO [2a652f14-f62b-4f19-8a0b-0380c0442a3f] 32628 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Grouped flights into 7 countries
2025-06-29 18:18:20.472  INFO [2a652f14-f62b-4f19-8a0b-0380c0442a3f] 32628 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Selecting diverse flights - one from each country first
2025-06-29 18:18:20.472  INFO [2a652f14-f62b-4f19-8a0b-0380c0442a3f] 32628 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Adding first flight from Greece (has 2 flights)
2025-06-29 18:18:20.472  INFO [2a652f14-f62b-4f19-8a0b-0380c0442a3f] 32628 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Adding first flight from Netherlands (has 2 flights)
2025-06-29 18:18:20.472  INFO [2a652f14-f62b-4f19-8a0b-0380c0442a3f] 32628 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Adding first flight from Italy (has 2 flights)
2025-06-29 18:18:20.473  INFO [2a652f14-f62b-4f19-8a0b-0380c0442a3f] 32628 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Adding first flight from United Kingdom (has 2 flights)
2025-06-29 18:18:20.473  INFO [2a652f14-f62b-4f19-8a0b-0380c0442a3f] 32628 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Adding first flight from France (has 2 flights)
2025-06-29 18:18:20.473  INFO [2a652f14-f62b-4f19-8a0b-0380c0442a3f] 32628 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Adding first flight from Switzerland (has 2 flights)
2025-06-29 18:18:20.473  INFO [2a652f14-f62b-4f19-8a0b-0380c0442a3f] 32628 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Reached 6 flights after first pass, stopping
2025-06-29 18:18:20.473  INFO [2a652f14-f62b-4f19-8a0b-0380c0442a3f] 32628 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Caching 6 diverse flights with key: OTP-2025-06-29
2025-06-29 18:18:20.475  INFO [2a652f14-f62b-4f19-8a0b-0380c0442a3f] 32628 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Returning 6 diverse nearby flights from: OTP
2025-06-29 18:18:21.954 DEBUG [a31a0199-30e8-45cc-ae5a-383d4eba359e] 32628 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /oauth2/authorization/google
2025-06-29 18:18:21.964 DEBUG [a31a0199-30e8-45cc-ae5a-383d4eba359e] 32628 --- [nio-8080-exec-5] o.s.s.web.DefaultRedirectStrategy        : Redirecting to https://accounts.google.com/o/oauth2/v2/auth?response_type=code&client_id=280181287068-i92p696f0ja6qv5lecrhi4dmn2hsrvie.apps.googleusercontent.com&scope=email%20profile&state=RXw8-bAxPjMgvYYTsBO5CcFbTvIBtNFyCsY2O8nkGR8%3D&redirect_uri=http://localhost:8080/login/oauth2/code/google
2025-06-29 18:18:24.206 DEBUG [81fefbba-7847-4d77-a3a1-16fcc42dc2e1] 32628 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /login/oauth2/code/google?state=RXw8-bAxPjMgvYYTsBO5CcFbTvIBtNFyCsY2O8nkGR8%3D&code=4%2F0AVMBsJiEiByFGyO3iRJ4vqbn6E3n69VfIBKU1_HjhE8dmo7QPA2vMccX1dM-kwxzK8l6Zg&scope=email+profile+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile+openid&authuser=1&prompt=none
2025-06-29 18:18:24.721  INFO [81fefbba-7847-4d77-a3a1-16fcc42dc2e1] 32628 --- [nio-8080-exec-6] o.e.x.security.CustomOAuth2UserService   : Creating new user from OAuth2 login: ****@****.***
2025-06-29 18:18:24.801  INFO [81fefbba-7847-4d77-a3a1-16fcc42dc2e1] 32628 --- [nio-8080-exec-6] o.e.x.security.CustomOAuth2UserService   : Successfully created new user from OAuth2 login: ****@****.***
2025-06-29 18:18:24.803 DEBUG [81fefbba-7847-4d77-a3a1-16fcc42dc2e1] 32628 --- [nio-8080-exec-6] .s.ChangeSessionIdAuthenticationStrategy : Changed session id from 6B484E3FF492FF6E58633EE9DFA449A4
2025-06-29 18:18:24.804 DEBUG [81fefbba-7847-4d77-a3a1-16fcc42dc2e1] 32628 --- [nio-8080-exec-6] o.s.s.core.session.SessionRegistryImpl   : Registering session D4361BDF77019A1AAE9F6046C30CA54A, for principal Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}]
2025-06-29 18:18:24.805 DEBUG [81fefbba-7847-4d77-a3a1-16fcc42dc2e1] 32628 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=6B484E3FF492FF6E58633EE9DFA449A4], Granted Authorities=[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@6726625a]
2025-06-29 18:18:24.806 DEBUG [81fefbba-7847-4d77-a3a1-16fcc42dc2e1] 32628 --- [nio-8080-exec-6] .s.o.c.w.OAuth2LoginAuthenticationFilter : Set SecurityContextHolder to OAuth2AuthenticationToken [Principal=Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=6B484E3FF492FF6E58633EE9DFA449A4], Granted Authorities=[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]]
2025-06-29 18:18:24.807  INFO [81fefbba-7847-4d77-a3a1-16fcc42dc2e1] 32628 --- [nio-8080-exec-6] e.x.s.OAuth2AuthenticationSuccessHandler : Extracting username from authentication: 104658082982173093135
2025-06-29 18:18:24.807  INFO [81fefbba-7847-4d77-a3a1-16fcc42dc2e1] 32628 --- [nio-8080-exec-6] e.x.s.OAuth2AuthenticationSuccessHandler : Principal class: org.springframework.security.oauth2.core.user.DefaultOAuth2User
2025-06-29 18:18:24.808  INFO [81fefbba-7847-4d77-a3a1-16fcc42dc2e1] 32628 --- [nio-8080-exec-6] e.x.s.OAuth2AuthenticationSuccessHandler : Principal is DefaultOAuth2User
2025-06-29 18:18:24.808  INFO [81fefbba-7847-4d77-a3a1-16fcc42dc2e1] 32628 --- [nio-8080-exec-6] e.x.s.OAuth2AuthenticationSuccessHandler : OAuth2User attributes: {sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}
2025-06-29 18:18:24.809  INFO [81fefbba-7847-4d77-a3a1-16fcc42dc2e1] 32628 --- [nio-8080-exec-6] e.x.s.OAuth2AuthenticationSuccessHandler : Using email as username: ****@****.***
2025-06-29 18:18:24.809  INFO [81fefbba-7847-4d77-a3a1-16fcc42dc2e1] 32628 --- [nio-8080-exec-6] e.x.s.OAuth2AuthenticationSuccessHandler : Extracting username from authentication: 104658082982173093135
2025-06-29 18:18:24.809  INFO [81fefbba-7847-4d77-a3a1-16fcc42dc2e1] 32628 --- [nio-8080-exec-6] e.x.s.OAuth2AuthenticationSuccessHandler : Principal class: org.springframework.security.oauth2.core.user.DefaultOAuth2User
2025-06-29 18:18:24.810  INFO [81fefbba-7847-4d77-a3a1-16fcc42dc2e1] 32628 --- [nio-8080-exec-6] e.x.s.OAuth2AuthenticationSuccessHandler : Principal is DefaultOAuth2User
2025-06-29 18:18:24.810  INFO [81fefbba-7847-4d77-a3a1-16fcc42dc2e1] 32628 --- [nio-8080-exec-6] e.x.s.OAuth2AuthenticationSuccessHandler : OAuth2User attributes: {sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}
2025-06-29 18:18:24.810  INFO [81fefbba-7847-4d77-a3a1-16fcc42dc2e1] 32628 --- [nio-8080-exec-6] e.x.s.OAuth2AuthenticationSuccessHandler : Using email as username: ****@****.***
2025-06-29 18:18:24.810  INFO [81fefbba-7847-4d77-a3a1-16fcc42dc2e1] 32628 --- [nio-8080-exec-6] e.x.s.OAuth2AuthenticationSuccessHandler : OAuth tokens stored in session for user: ****@****.***
2025-06-29 18:18:24.811 DEBUG [81fefbba-7847-4d77-a3a1-16fcc42dc2e1] 32628 --- [nio-8080-exec-6] o.s.s.web.DefaultRedirectStrategy        : Redirecting to http://localhost:3000?oauth=success
2025-06-29 18:18:25.396 DEBUG [9733ead4-370f-4ac7-8e4b-d626e7bb790a] 32628 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/oauth/complete
2025-06-29 18:18:25.401 DEBUG [b694c0b2-407e-46d2-ab30-1f3f395af872] 32628 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /api/oauth/complete
2025-06-29 18:18:25.404 DEBUG [19399dc1-8394-47df-beea-765988c55bb4] 32628 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing POST /api/oauth/complete
2025-06-29 18:18:25.405 DEBUG [b694c0b2-407e-46d2-ab30-1f3f395af872] 32628 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured POST /api/oauth/complete
2025-06-29 18:18:25.406 DEBUG [19399dc1-8394-47df-beea-765988c55bb4] 32628 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured POST /api/oauth/complete
2025-06-29 18:18:25.407  INFO [b694c0b2-407e-46d2-ab30-1f3f395af872] 32628 --- [nio-8080-exec-8] o.e.x.controllers.OAuthController        : OAuth tokens retrieved and cleared from session for user: ****@****.***
2025-06-29 18:18:25.410 DEBUG [19399dc1-8394-47df-beea-765988c55bb4] 32628 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=6B484E3FF492FF6E58633EE9DFA449A4], Granted Authorities=[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]]]
2025-06-29 18:18:25.410 DEBUG [b694c0b2-407e-46d2-ab30-1f3f395af872] 32628 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=6B484E3FF492FF6E58633EE9DFA449A4], Granted Authorities=[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]]]
2025-06-29 18:18:25.572 DEBUG [b43f998b-1b11-40d7-9b24-48aaf81b4dbd] 32628 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/nearby?origin=OTP
2025-06-29 18:18:25.575 DEBUG [b43f998b-1b11-40d7-9b24-48aaf81b4dbd] 32628 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/nearby?origin=OTP
2025-06-29 18:18:25.577  INFO [b43f998b-1b11-40d7-9b24-48aaf81b4dbd] 32628 --- [io-8080-exec-10] o.e.x.controllers.FlightController       : Received request for nearby flights from origin: OTP, departureDate: null
2025-06-29 18:18:25.577  INFO [b43f998b-1b11-40d7-9b24-48aaf81b4dbd] 32628 --- [io-8080-exec-10] o.e.x.controllers.FlightController       : Using search date: 2025-06-29
2025-06-29 18:18:25.578  INFO [b43f998b-1b11-40d7-9b24-48aaf81b4dbd] 32628 --- [io-8080-exec-10] o.e.x.controllers.FlightController       : Cache key: OTP-2025-06-29
2025-06-29 18:18:25.578  INFO [b43f998b-1b11-40d7-9b24-48aaf81b4dbd] 32628 --- [io-8080-exec-10] o.e.x.controllers.FlightController       : Returning cached nearby flights for origin: OTP, found 6 flights
2025-06-29 18:18:25.580 DEBUG [b43f998b-1b11-40d7-9b24-48aaf81b4dbd] 32628 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=6B484E3FF492FF6E58633EE9DFA449A4], Granted Authorities=[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]]]
2025-06-29 18:18:25.759 DEBUG [7c699475-c010-46e7-b566-28c1aa9eaa5e] 32628 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 18:18:25.779 DEBUG [7c699475-c010-46e7-b566-28c1aa9eaa5e] 32628 --- [nio-8080-exec-1] o.s.s.core.session.SessionRegistryImpl   : Registering session 4DFEDB12219977A9CE054B147D572FE3, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:18:24.787362, lastLogin=null, addresses=[], tickets=[])
2025-06-29 18:18:25.780 DEBUG [7c699475-c010-46e7-b566-28c1aa9eaa5e] 32628 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:18:24.787362, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@5c3f05f9]
2025-06-29 18:18:25.783 DEBUG [7c699475-c010-46e7-b566-28c1aa9eaa5e] 32628 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me
2025-06-29 18:18:25.785  INFO [7c699475-c010-46e7-b566-28c1aa9eaa5e] 32628 --- [nio-8080-exec-1] o.e.x.controllers.UserController         : Request received for current user details: ****@****.***
2025-06-29 18:18:25.793  INFO [7c699475-c010-46e7-b566-28c1aa9eaa5e] 32628 --- [nio-8080-exec-1] o.e.x.controllers.UserController         : Returning details for user: ****@****.***
2025-06-29 18:18:25.822 DEBUG [fa8e044c-dd6a-40ae-88f7-1818952e39ce] 32628 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 18:18:25.822 DEBUG [6b763e4b-48e3-41d8-bc3b-071de773af40] 32628 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 18:18:25.836 DEBUG [6b763e4b-48e3-41d8-bc3b-071de773af40] 32628 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=6B484E3FF492FF6E58633EE9DFA449A4], Granted Authorities=[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]]]
2025-06-29 18:18:25.841 DEBUG [6b763e4b-48e3-41d8-bc3b-071de773af40] 32628 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 18:18:25.842  INFO [6b763e4b-48e3-41d8-bc3b-071de773af40] 32628 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 18:18:25.843 DEBUG [fa8e044c-dd6a-40ae-88f7-1818952e39ce] 32628 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:18:24.787362, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D4361BDF77019A1AAE9F6046C30CA54A], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:18:25.852 DEBUG [fa8e044c-dd6a-40ae-88f7-1818952e39ce] 32628 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 18:18:25.863  INFO [6b763e4b-48e3-41d8-bc3b-071de773af40] 32628 --- [nio-8080-exec-3] o.e.xlr8travel.services.CartServiceImpl  : No existing cart found for user ****@****.*** with ID 4, creating a new one.
2025-06-29 18:18:25.865  WARN [fa8e044c-dd6a-40ae-88f7-1818952e39ce] 32628 --- [nio-8080-exec-2] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 18:18:25.875  WARN [fa8e044c-dd6a-40ae-88f7-1818952e39ce] 32628 --- [nio-8080-exec-2] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 18:18:25.881  INFO [6b763e4b-48e3-41d8-bc3b-071de773af40] 32628 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 18:18:29.223 DEBUG [72e90ce5-8992-4b15-a11c-a26113e45000] 32628 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-29 18:18:29.225 DEBUG [72e90ce5-8992-4b15-a11c-a26113e45000] 32628 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-29 18:18:29.228  INFO [72e90ce5-8992-4b15-a11c-a26113e45000] 32628 --- [nio-8080-exec-4] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris
2025-06-29 18:18:29.229  INFO [72e90ce5-8992-4b15-a11c-a26113e45000] 32628 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-29 18:18:29.230  INFO [72e90ce5-8992-4b15-a11c-a26113e45000] 32628 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-29 18:18:29.232 DEBUG [72e90ce5-8992-4b15-a11c-a26113e45000] 32628 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-29).    For example, if today is 2025-06-29, a good departure date would be between 2025-07-06 and 2025-07-13, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris";
2025-06-29 18:18:29.234  INFO [72e90ce5-8992-4b15-a11c-a26113e45000] 32628 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-29 18:18:29.235  INFO [72e90ce5-8992-4b15-a11c-a26113e45000] 32628 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-29 18:18:29.235  INFO [72e90ce5-8992-4b15-a11c-a26113e45000] 32628 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-29 18:18:29.235  INFO [72e90ce5-8992-4b15-a11c-a26113e45000] 32628 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 18:18:29.235  INFO [72e90ce5-8992-4b15-a11c-a26113e45000] 32628 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-29 18:18:29.277  INFO [72e90ce5-8992-4b15-a11c-a26113e45000] 32628 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-29 18:18:29.280  INFO [72e90ce5-8992-4b15-a11c-a26113e45000] 32628 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-29 18:18:29.283  INFO [72e90ce5-8992-4b15-a11c-a26113e45000] 32628 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-29 18:18:29.308  INFO [72e90ce5-8992-4b15-a11c-a26113e45000] 32628 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-29 18:18:31.934  INFO [72e90ce5-8992-4b15-a11c-a26113e45000] 32628 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-29 18:18:31.934  INFO [72e90ce5-8992-4b15-a11c-a26113e45000] 32628 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Response length: 195 characters
2025-06-29 18:18:31.936 DEBUG [72e90ce5-8992-4b15-a11c-a26113e45000] 32628 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-06",
  "returnDate": "2025-07-08",
  "tripType": "roundTrip",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-29 18:18:31.937 DEBUG [72e90ce5-8992-4b15-a11c-a26113e45000] 32628 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-29 18:18:31.941 DEBUG [72e90ce5-8992-4b15-a11c-a26113e45000] 32628 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-29 18:18:31.942 DEBUG [72e90ce5-8992-4b15-a11c-a26113e45000] 32628 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-29 18:18:31.943 DEBUG [72e90ce5-8992-4b15-a11c-a26113e45000] 32628 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 18:18:31.944  INFO [72e90ce5-8992-4b15-a11c-a26113e45000] 32628 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 18:18:31.944  INFO [72e90ce5-8992-4b15-a11c-a26113e45000] 32628 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-06, returnDate=2025-07-08, tripType=roundTrip, adults=1, children=0, infants=0
2025-06-29 18:18:31.944  INFO [72e90ce5-8992-4b15-a11c-a26113e45000] 32628 --- [nio-8080-exec-4] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-29 18:18:31.947 DEBUG [72e90ce5-8992-4b15-a11c-a26113e45000] 32628 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:18:24.787362, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D4361BDF77019A1AAE9F6046C30CA54A], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:18:33.423 DEBUG [788fc3f8-1d3b-4234-9aa5-73382000f0d9] 32628 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-29 18:18:33.426 DEBUG [788fc3f8-1d3b-4234-9aa5-73382000f0d9] 32628 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-29 18:18:33.427  INFO [788fc3f8-1d3b-4234-9aa5-73382000f0d9] 32628 --- [nio-8080-exec-5] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris one way
2025-06-29 18:18:33.427  INFO [788fc3f8-1d3b-4234-9aa5-73382000f0d9] 32628 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-29 18:18:33.428  INFO [788fc3f8-1d3b-4234-9aa5-73382000f0d9] 32628 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-29 18:18:33.428 DEBUG [788fc3f8-1d3b-4234-9aa5-73382000f0d9] 32628 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-29).    For example, if today is 2025-06-29, a good departure date would be between 2025-07-06 and 2025-07-13, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris one way";
2025-06-29 18:18:33.430  INFO [788fc3f8-1d3b-4234-9aa5-73382000f0d9] 32628 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-29 18:18:33.430  INFO [788fc3f8-1d3b-4234-9aa5-73382000f0d9] 32628 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-29 18:18:33.430  INFO [788fc3f8-1d3b-4234-9aa5-73382000f0d9] 32628 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-29 18:18:33.431  INFO [788fc3f8-1d3b-4234-9aa5-73382000f0d9] 32628 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 18:18:33.431  INFO [788fc3f8-1d3b-4234-9aa5-73382000f0d9] 32628 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-29 18:18:33.432  INFO [788fc3f8-1d3b-4234-9aa5-73382000f0d9] 32628 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-29 18:18:33.432  INFO [788fc3f8-1d3b-4234-9aa5-73382000f0d9] 32628 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-29 18:18:33.433  INFO [788fc3f8-1d3b-4234-9aa5-73382000f0d9] 32628 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-29 18:18:33.433  INFO [788fc3f8-1d3b-4234-9aa5-73382000f0d9] 32628 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-29 18:18:34.940  INFO [788fc3f8-1d3b-4234-9aa5-73382000f0d9] 32628 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-29 18:18:34.941  INFO [788fc3f8-1d3b-4234-9aa5-73382000f0d9] 32628 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Response length: 184 characters
2025-06-29 18:18:34.941 DEBUG [788fc3f8-1d3b-4234-9aa5-73382000f0d9] 32628 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-06",
  "returnDate": null,
  "tripType": "oneWay",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-29 18:18:34.942 DEBUG [788fc3f8-1d3b-4234-9aa5-73382000f0d9] 32628 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-29 18:18:34.942 DEBUG [788fc3f8-1d3b-4234-9aa5-73382000f0d9] 32628 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-29 18:18:34.943 DEBUG [788fc3f8-1d3b-4234-9aa5-73382000f0d9] 32628 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-29 18:18:34.943 DEBUG [788fc3f8-1d3b-4234-9aa5-73382000f0d9] 32628 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 18:18:34.943  INFO [788fc3f8-1d3b-4234-9aa5-73382000f0d9] 32628 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 18:18:34.943  INFO [788fc3f8-1d3b-4234-9aa5-73382000f0d9] 32628 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-06, returnDate=null, tripType=oneWay, adults=1, children=0, infants=0
2025-06-29 18:18:34.944  INFO [788fc3f8-1d3b-4234-9aa5-73382000f0d9] 32628 --- [nio-8080-exec-5] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-29 18:18:34.946 DEBUG [788fc3f8-1d3b-4234-9aa5-73382000f0d9] 32628 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:18:24.787362, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D4361BDF77019A1AAE9F6046C30CA54A], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:18:36.570 DEBUG [7f2e7760-1585-4b34-9c20-ea86ab4a499a] 32628 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 18:18:36.582 DEBUG [7f2e7760-1585-4b34-9c20-ea86ab4a499a] 32628 --- [nio-8080-exec-6] o.s.s.core.session.SessionRegistryImpl   : Registering session B52DDAF03F4CC27DFE547F2689673801, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:18:24.787362, lastLogin=null, addresses=[], tickets=[])
2025-06-29 18:18:36.583 DEBUG [7f2e7760-1585-4b34-9c20-ea86ab4a499a] 32628 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:18:24.787362, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@3a7d24b2]
2025-06-29 18:18:36.585 DEBUG [7f2e7760-1585-4b34-9c20-ea86ab4a499a] 32628 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me
2025-06-29 18:18:36.586  INFO [7f2e7760-1585-4b34-9c20-ea86ab4a499a] 32628 --- [nio-8080-exec-6] o.e.x.controllers.UserController         : Request received for current user details: ****@****.***
2025-06-29 18:18:36.592  INFO [7f2e7760-1585-4b34-9c20-ea86ab4a499a] 32628 --- [nio-8080-exec-6] o.e.x.controllers.UserController         : Returning details for user: ****@****.***
2025-06-29 18:18:36.628 DEBUG [e64c641d-f149-4603-bcd3-d689c743e1a1] 32628 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 18:18:36.633 DEBUG [816b2e2e-ad69-4c87-b6a7-d1bb1dfa9056] 32628 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 18:18:36.635 DEBUG [816b2e2e-ad69-4c87-b6a7-d1bb1dfa9056] 32628 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 18:18:36.635 DEBUG [ea69528f-a497-48e9-b982-cd0e117c127d] 32628 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 18:18:36.641  INFO [816b2e2e-ad69-4c87-b6a7-d1bb1dfa9056] 32628 --- [nio-8080-exec-9] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 18:18:36.641  INFO [816b2e2e-ad69-4c87-b6a7-d1bb1dfa9056] 32628 --- [nio-8080-exec-9] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 18:18:36.643 DEBUG [e64c641d-f149-4603-bcd3-d689c743e1a1] 32628 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:18:24.787362, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D4361BDF77019A1AAE9F6046C30CA54A], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:18:36.646 DEBUG [e64c641d-f149-4603-bcd3-d689c743e1a1] 32628 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 18:18:36.650 DEBUG [ea69528f-a497-48e9-b982-cd0e117c127d] 32628 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:18:24.787362, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D4361BDF77019A1AAE9F6046C30CA54A], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:18:36.654 DEBUG [ea69528f-a497-48e9-b982-cd0e117c127d] 32628 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 18:18:36.655  INFO [ea69528f-a497-48e9-b982-cd0e117c127d] 32628 --- [nio-8080-exec-8] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 18:18:36.657  WARN [e64c641d-f149-4603-bcd3-d689c743e1a1] 32628 --- [nio-8080-exec-7] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 18:18:36.658  WARN [e64c641d-f149-4603-bcd3-d689c743e1a1] 32628 --- [nio-8080-exec-7] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 18:18:36.667 DEBUG [02a5dbf7-ac9a-49f4-bd29-65e946a21973] 32628 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 18:18:36.671  INFO [ea69528f-a497-48e9-b982-cd0e117c127d] 32628 --- [nio-8080-exec-8] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 18:18:36.693 DEBUG [02a5dbf7-ac9a-49f4-bd29-65e946a21973] 32628 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:18:24.787362, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D4361BDF77019A1AAE9F6046C30CA54A], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:18:36.696 DEBUG [02a5dbf7-ac9a-49f4-bd29-65e946a21973] 32628 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 18:18:36.705  WARN [02a5dbf7-ac9a-49f4-bd29-65e946a21973] 32628 --- [io-8080-exec-10] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 18:18:36.706  WARN [02a5dbf7-ac9a-49f4-bd29-65e946a21973] 32628 --- [io-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 18:18:36.734  INFO [816b2e2e-ad69-4c87-b6a7-d1bb1dfa9056] 32628 --- [nio-8080-exec-9] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 18:18:36.736 DEBUG [816b2e2e-ad69-4c87-b6a7-d1bb1dfa9056] 32628 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:18:24.787362, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D4361BDF77019A1AAE9F6046C30CA54A], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:18:36.743 DEBUG [162368a1-e2f9-487a-bcec-048c3fc3c22e] 32628 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 18:18:36.745 DEBUG [162368a1-e2f9-487a-bcec-048c3fc3c22e] 32628 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 18:18:36.751  INFO [162368a1-e2f9-487a-bcec-048c3fc3c22e] 32628 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 18:18:36.752  INFO [162368a1-e2f9-487a-bcec-048c3fc3c22e] 32628 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 18:18:36.781 DEBUG [56b5223b-a57a-45ba-bee0-8511ee816a71] 32628 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 18:18:36.785 DEBUG [56b5223b-a57a-45ba-bee0-8511ee816a71] 32628 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 18:18:36.786  INFO [56b5223b-a57a-45ba-bee0-8511ee816a71] 32628 --- [nio-8080-exec-2] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 18:18:36.813  INFO [162368a1-e2f9-487a-bcec-048c3fc3c22e] 32628 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 18:18:36.816 DEBUG [162368a1-e2f9-487a-bcec-048c3fc3c22e] 32628 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:18:24.787362, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D4361BDF77019A1AAE9F6046C30CA54A], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:18:36.978  INFO [56b5223b-a57a-45ba-bee0-8511ee816a71] 32628 --- [nio-8080-exec-2] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 18:18:36.984 DEBUG [56b5223b-a57a-45ba-bee0-8511ee816a71] 32628 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:18:24.787362, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D4361BDF77019A1AAE9F6046C30CA54A], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:18:36.990 DEBUG [df2f585c-7a51-41f3-bb1e-16e08c11674d] 32628 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 18:18:36.991 DEBUG [df2f585c-7a51-41f3-bb1e-16e08c11674d] 32628 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 18:18:36.992 DEBUG [967cd78f-16b3-474e-875a-cbd693d865a7] 32628 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 18:18:36.992  INFO [df2f585c-7a51-41f3-bb1e-16e08c11674d] 32628 --- [nio-8080-exec-3] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 18:18:36.993 DEBUG [967cd78f-16b3-474e-875a-cbd693d865a7] 32628 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 18:18:36.993  INFO [967cd78f-16b3-474e-875a-cbd693d865a7] 32628 --- [nio-8080-exec-4] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 18:18:37.039  INFO [df2f585c-7a51-41f3-bb1e-16e08c11674d] 32628 --- [nio-8080-exec-3] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 18:18:37.041 DEBUG [df2f585c-7a51-41f3-bb1e-16e08c11674d] 32628 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:18:24.787362, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D4361BDF77019A1AAE9F6046C30CA54A], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:18:37.193  INFO [967cd78f-16b3-474e-875a-cbd693d865a7] 32628 --- [nio-8080-exec-4] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 18:18:37.194 DEBUG [967cd78f-16b3-474e-875a-cbd693d865a7] 32628 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:18:24.787362, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D4361BDF77019A1AAE9F6046C30CA54A], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:18:37.203 DEBUG [013df7cd-45c3-4923-98b5-0f7d2dcbf1e2] 32628 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 18:18:37.204 DEBUG [013df7cd-45c3-4923-98b5-0f7d2dcbf1e2] 32628 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 18:18:37.205  INFO [013df7cd-45c3-4923-98b5-0f7d2dcbf1e2] 32628 --- [nio-8080-exec-5] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 18:18:37.253  INFO [013df7cd-45c3-4923-98b5-0f7d2dcbf1e2] 32628 --- [nio-8080-exec-5] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 18:18:37.254 DEBUG [013df7cd-45c3-4923-98b5-0f7d2dcbf1e2] 32628 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:18:24.787362, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D4361BDF77019A1AAE9F6046C30CA54A], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:18:42.091 DEBUG [c135e52c-c934-49f4-8ae5-17cc18a197e8] 32628 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 18:18:42.102 DEBUG [c135e52c-c934-49f4-8ae5-17cc18a197e8] 32628 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:18:24.787362, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D4361BDF77019A1AAE9F6046C30CA54A], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:18:42.106 DEBUG [c135e52c-c934-49f4-8ae5-17cc18a197e8] 32628 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 18:18:42.108  INFO [c135e52c-c934-49f4-8ae5-17cc18a197e8] 32628 --- [nio-8080-exec-6] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 18:18:42.108  INFO [c135e52c-c934-49f4-8ae5-17cc18a197e8] 32628 --- [nio-8080-exec-6] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 18:18:42.120 DEBUG [595fdd18-de6e-4ba5-9248-1c412394c75d] 32628 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 18:18:42.129 DEBUG [595fdd18-de6e-4ba5-9248-1c412394c75d] 32628 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:18:24.787362, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D4361BDF77019A1AAE9F6046C30CA54A], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:18:42.132 DEBUG [595fdd18-de6e-4ba5-9248-1c412394c75d] 32628 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 18:18:42.134  INFO [595fdd18-de6e-4ba5-9248-1c412394c75d] 32628 --- [nio-8080-exec-7] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 18:18:42.134  INFO [595fdd18-de6e-4ba5-9248-1c412394c75d] 32628 --- [nio-8080-exec-7] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 18:18:42.292 DEBUG [e136d042-283e-4a74-af0a-7c3626a5d098] 32628 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 18:18:42.304 DEBUG [e136d042-283e-4a74-af0a-7c3626a5d098] 32628 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:18:24.787362, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D4361BDF77019A1AAE9F6046C30CA54A], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:18:42.307 DEBUG [e136d042-283e-4a74-af0a-7c3626a5d098] 32628 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 18:18:42.308  INFO [e136d042-283e-4a74-af0a-7c3626a5d098] 32628 --- [nio-8080-exec-8] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 18:18:42.308  INFO [e136d042-283e-4a74-af0a-7c3626a5d098] 32628 --- [nio-8080-exec-8] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 18:18:44.590 DEBUG [30a1d78e-8f34-44b0-aac1-70b11ef45c6b] 32628 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing POST /api/cart/add
2025-06-29 18:18:44.602 DEBUG [30a1d78e-8f34-44b0-aac1-70b11ef45c6b] 32628 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:18:24.787362, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D4361BDF77019A1AAE9F6046C30CA54A], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:18:44.604 DEBUG [30a1d78e-8f34-44b0-aac1-70b11ef45c6b] 32628 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured POST /api/cart/add
2025-06-29 18:18:44.652  INFO [30a1d78e-8f34-44b0-aac1-70b11ef45c6b] 32628 --- [io-8080-exec-10] o.e.x.controllers.CartController         : User ****@****.*** request to add flight ID 16 to persistent cart
2025-06-29 18:18:44.699  INFO [30a1d78e-8f34-44b0-aac1-70b11ef45c6b] 32628 --- [io-8080-exec-10] o.e.x.controllers.CartController         : AddToCart request: flightId=16, seatNumber=null, seatType=null, deferSeat=false, randomSeat=false
2025-06-29 18:18:44.712  INFO [30a1d78e-8f34-44b0-aac1-70b11ef45c6b] 32628 --- [io-8080-exec-10] o.e.xlr8travel.services.CartServiceImpl  : Added new flight ID 16 to cart for user ****@****.***
2025-06-29 18:18:44.740  INFO [30a1d78e-8f34-44b0-aac1-70b11ef45c6b] 32628 --- [io-8080-exec-10] o.e.x.controllers.CartController         : Flight ID 16 added/incremented in persistent cart for user ****@****.***.
2025-06-29 18:18:44.752 DEBUG [34f6148e-3275-426b-8c4e-008b9e3ca903] 32628 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 18:18:44.765 DEBUG [34f6148e-3275-426b-8c4e-008b9e3ca903] 32628 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:18:24.787362, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D4361BDF77019A1AAE9F6046C30CA54A], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:18:44.767 DEBUG [34f6148e-3275-426b-8c4e-008b9e3ca903] 32628 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 18:18:44.768  INFO [34f6148e-3275-426b-8c4e-008b9e3ca903] 32628 --- [nio-8080-exec-9] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 18:18:44.843  INFO [34f6148e-3275-426b-8c4e-008b9e3ca903] 32628 --- [nio-8080-exec-9] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 18:18:45.226 DEBUG [c02c8f76-b8ed-4482-92d7-f158c767a411] 32628 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 18:18:45.238 DEBUG [c02c8f76-b8ed-4482-92d7-f158c767a411] 32628 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:18:24.787362, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D4361BDF77019A1AAE9F6046C30CA54A], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:18:45.240 DEBUG [c02c8f76-b8ed-4482-92d7-f158c767a411] 32628 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 18:18:45.241  INFO [c02c8f76-b8ed-4482-92d7-f158c767a411] 32628 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 18:18:45.291  INFO [c02c8f76-b8ed-4482-92d7-f158c767a411] 32628 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 18:18:45.297 DEBUG [60a38993-a6ac-47fc-9e61-e429e0452646] 32628 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 18:18:45.307 DEBUG [60a38993-a6ac-47fc-9e61-e429e0452646] 32628 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:18:24.787362, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D4361BDF77019A1AAE9F6046C30CA54A], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:18:45.309 DEBUG [60a38993-a6ac-47fc-9e61-e429e0452646] 32628 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 18:18:45.310  INFO [60a38993-a6ac-47fc-9e61-e429e0452646] 32628 --- [nio-8080-exec-2] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 18:18:45.363  INFO [60a38993-a6ac-47fc-9e61-e429e0452646] 32628 --- [nio-8080-exec-2] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 18:18:47.659 DEBUG [8f0e9fd1-838d-4ec3-bf42-610b30a7321c] 32628 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 18:18:47.679 DEBUG [8f0e9fd1-838d-4ec3-bf42-610b30a7321c] 32628 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:18:24.787362, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D4361BDF77019A1AAE9F6046C30CA54A], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:18:47.681 DEBUG [8f0e9fd1-838d-4ec3-bf42-610b30a7321c] 32628 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 18:18:47.683  INFO [8f0e9fd1-838d-4ec3-bf42-610b30a7321c] 32628 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 18:18:47.733  INFO [8f0e9fd1-838d-4ec3-bf42-610b30a7321c] 32628 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 18:18:47.739 DEBUG [c9c4d8d4-4434-4ccb-b07e-6f9ff7cb6378] 32628 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 18:18:47.749 DEBUG [c9c4d8d4-4434-4ccb-b07e-6f9ff7cb6378] 32628 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:18:24.787362, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D4361BDF77019A1AAE9F6046C30CA54A], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:18:47.751 DEBUG [c9c4d8d4-4434-4ccb-b07e-6f9ff7cb6378] 32628 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 18:18:47.751  INFO [c9c4d8d4-4434-4ccb-b07e-6f9ff7cb6378] 32628 --- [nio-8080-exec-4] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 18:18:47.802  INFO [c9c4d8d4-4434-4ccb-b07e-6f9ff7cb6378] 32628 --- [nio-8080-exec-4] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 18:19:04.166 DEBUG [121f289a-56af-4eb0-a384-c681d1e0f87b] 32628 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /api/checkout/create-payment-intent
2025-06-29 18:19:04.167 DEBUG [121f289a-56af-4eb0-a384-c681d1e0f87b] 32628 --- [nio-8080-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 18:19:04.168 DEBUG [121f289a-56af-4eb0-a384-c681d1e0f87b] 32628 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured POST /api/checkout/create-payment-intent
2025-06-29 18:19:04.187  INFO [121f289a-56af-4eb0-a384-c681d1e0f87b] 32628 --- [nio-8080-exec-5] o.e.x.controllers.PaymentController      : Creating payment intent for amount: 23995 ron
2025-06-29 18:19:04.856  INFO [121f289a-56af-4eb0-a384-c681d1e0f87b] 32628 --- [nio-8080-exec-5] o.e.x.controllers.PaymentController      : Payment intent created successfully: pi_3RfN0WGf8s1WZJnq1bSxqOSa
2025-06-29 18:19:06.025 DEBUG [3004d4d4-d55b-4e01-bc89-f0ff5ac08dcd] 32628 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/checkout/confirm
2025-06-29 18:19:06.034 DEBUG [3004d4d4-d55b-4e01-bc89-f0ff5ac08dcd] 32628 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:18:24.787362, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D4361BDF77019A1AAE9F6046C30CA54A], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:19:06.036 DEBUG [3004d4d4-d55b-4e01-bc89-f0ff5ac08dcd] 32628 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/checkout/confirm
2025-06-29 18:19:06.038  INFO [3004d4d4-d55b-4e01-bc89-f0ff5ac08dcd] 32628 --- [nio-8080-exec-6] o.e.x.controllers.CheckoutController     : Received purchase confirmation request.
2025-06-29 18:19:06.044  INFO [3004d4d4-d55b-4e01-bc89-f0ff5ac08dcd] 32628 --- [nio-8080-exec-6] o.e.x.controllers.CheckoutController     : Processing purchase for user: ****@****.***
2025-06-29 18:19:06.086  INFO [3004d4d4-d55b-4e01-bc89-f0ff5ac08dcd] 32628 --- [nio-8080-exec-6] o.e.x.controllers.CheckoutController     : User ****@****.*** persistent cart has 1 items.
2025-06-29 18:19:06.086  WARN [3004d4d4-d55b-4e01-bc89-f0ff5ac08dcd] 32628 --- [nio-8080-exec-6] o.e.x.controllers.CheckoutController     : !!! SIMULATING successful payment processing for user ****@****.*** !!!
2025-06-29 18:19:06.087  INFO [3004d4d4-d55b-4e01-bc89-f0ff5ac08dcd] 32628 --- [nio-8080-exec-6] o.e.x.services.OrderServiceImpl          : Creating order from persistent cart for user: ****@****.***
2025-06-29 18:19:06.093  INFO [3004d4d4-d55b-4e01-bc89-f0ff5ac08dcd] 32628 --- [nio-8080-exec-6] o.e.x.services.OrderServiceImpl          : Order 1 created for user ****@****.***, status: PENDING_PAYMENT. Total: 37.99
2025-06-29 18:19:06.094  INFO [3004d4d4-d55b-4e01-bc89-f0ff5ac08dcd] 32628 --- [nio-8080-exec-6] o.e.x.services.OrderServiceImpl          : Created ticket with deferred seat selection (fallback) for flight XT-OTP-CDG-2 for user ****@****.***
2025-06-29 18:19:06.094  INFO [3004d4d4-d55b-4e01-bc89-f0ff5ac08dcd] 32628 --- [nio-8080-exec-6] o.e.x.services.OrderServiceImpl          : Ticket has baggage type: BAGGAGE_TYPE_WEIGHT_CARRY_ON_0
2025-06-29 18:19:07.320  INFO [3004d4d4-d55b-4e01-bc89-f0ff5ac08dcd] 32628 --- [nio-8080-exec-6] o.e.x.services.EmailServiceImpl          : Purchase confirmation email sent to ****@****.***
2025-06-29 18:19:07.321  INFO [3004d4d4-d55b-4e01-bc89-f0ff5ac08dcd] 32628 --- [nio-8080-exec-6] o.e.x.services.OrderServiceImpl          : Purchase confirmation email sent to user: ****@****.***
2025-06-29 18:19:07.333  INFO [3004d4d4-d55b-4e01-bc89-f0ff5ac08dcd] 32628 --- [nio-8080-exec-6] o.e.x.controllers.CheckoutController     : Order successfully created for user ****@****.***. Confirmation: 1
2025-06-29 18:19:07.338  INFO [3004d4d4-d55b-4e01-bc89-f0ff5ac08dcd] 32628 --- [nio-8080-exec-6] o.e.xlr8travel.services.CartServiceImpl  : Clearing 1 items from cart for user ****@****.***
2025-06-29 18:19:07.362  INFO [3004d4d4-d55b-4e01-bc89-f0ff5ac08dcd] 32628 --- [nio-8080-exec-6] o.e.x.controllers.CheckoutController     : Persistent cart cleared for user ****@****.***.
2025-06-29 18:19:07.373 DEBUG [ffb1ccb5-1239-4e5f-a3c3-307ae634a0a4] 32628 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing DELETE /api/cart/remove/16
2025-06-29 18:19:07.463 DEBUG [ffb1ccb5-1239-4e5f-a3c3-307ae634a0a4] 32628 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:18:24.787362, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D4361BDF77019A1AAE9F6046C30CA54A], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:19:07.464 DEBUG [ffb1ccb5-1239-4e5f-a3c3-307ae634a0a4] 32628 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured DELETE /api/cart/remove/16
2025-06-29 18:19:07.550  INFO [ffb1ccb5-1239-4e5f-a3c3-307ae634a0a4] 32628 --- [nio-8080-exec-7] o.e.x.controllers.CartController         : User ****@****.*** request to remove flight ID 16 from persistent cart
2025-06-29 18:19:07.559  WARN [ffb1ccb5-1239-4e5f-a3c3-307ae634a0a4] 32628 --- [nio-8080-exec-7] o.e.xlr8travel.services.CartServiceImpl  : Attempted to remove flight ID 16 not found in cart for user ****@****.***
2025-06-29 18:19:07.562  WARN [ffb1ccb5-1239-4e5f-a3c3-307ae634a0a4] 32628 --- [nio-8080-exec-7] o.e.x.controllers.CartController         : Attempted to remove flight ID 16 not found in persistent cart for user ****@****.***
2025-06-29 18:19:07.571 DEBUG [6e267c21-749e-4d88-a869-471cd02222ee] 32628 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 18:19:07.661 DEBUG [6e267c21-749e-4d88-a869-471cd02222ee] 32628 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:18:24.787362, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D4361BDF77019A1AAE9F6046C30CA54A], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:19:07.663 DEBUG [6e267c21-749e-4d88-a869-471cd02222ee] 32628 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 18:19:07.664  INFO [6e267c21-749e-4d88-a869-471cd02222ee] 32628 --- [nio-8080-exec-8] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 18:19:07.750  INFO [6e267c21-749e-4d88-a869-471cd02222ee] 32628 --- [nio-8080-exec-8] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 18:19:43.561 DEBUG [03b49ea0-f383-4ba0-ac6c-90f2853cdef2] 32628 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/nearby?origin=OTP
2025-06-29 18:19:43.563 DEBUG [03b49ea0-f383-4ba0-ac6c-90f2853cdef2] 32628 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/nearby?origin=OTP
2025-06-29 18:19:43.564  INFO [03b49ea0-f383-4ba0-ac6c-90f2853cdef2] 32628 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Received request for nearby flights from origin: OTP, departureDate: null
2025-06-29 18:19:43.564  INFO [03b49ea0-f383-4ba0-ac6c-90f2853cdef2] 32628 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Using search date: 2025-06-29
2025-06-29 18:19:43.564  INFO [03b49ea0-f383-4ba0-ac6c-90f2853cdef2] 32628 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Cache key: OTP-2025-06-29
2025-06-29 18:19:43.564  INFO [03b49ea0-f383-4ba0-ac6c-90f2853cdef2] 32628 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Returning cached nearby flights for origin: OTP, found 6 flights
2025-06-29 18:19:43.565 DEBUG [03b49ea0-f383-4ba0-ac6c-90f2853cdef2] 32628 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:18:24.787362, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D4361BDF77019A1AAE9F6046C30CA54A], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:19:45.980 DEBUG [e6fafe12-a023-4ee2-bd9d-9d0449423d86] 32628 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 18:19:46.097 DEBUG [e6fafe12-a023-4ee2-bd9d-9d0449423d86] 32628 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:18:24.787362, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D4361BDF77019A1AAE9F6046C30CA54A], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:19:46.099 DEBUG [e6fafe12-a023-4ee2-bd9d-9d0449423d86] 32628 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 18:19:46.182  INFO [e6fafe12-a023-4ee2-bd9d-9d0449423d86] 32628 --- [nio-8080-exec-3] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 18:19:46.182  INFO [e6fafe12-a023-4ee2-bd9d-9d0449423d86] 32628 --- [nio-8080-exec-3] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 18:19:46.189  INFO [e6fafe12-a023-4ee2-bd9d-9d0449423d86] 32628 --- [nio-8080-exec-3] o.e.x.services.TicketServiceImpl         : Found 1 tickets eligible for check-in for user 4
2025-06-29 18:19:46.208 DEBUG [1698c67f-694d-419c-823f-1897194d405a] 32628 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 18:19:46.294 DEBUG [1698c67f-694d-419c-823f-1897194d405a] 32628 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:18:24.787362, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D4361BDF77019A1AAE9F6046C30CA54A], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:19:46.296 DEBUG [1698c67f-694d-419c-823f-1897194d405a] 32628 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 18:19:46.399  INFO [1698c67f-694d-419c-823f-1897194d405a] 32628 --- [nio-8080-exec-4] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 18:19:46.400  INFO [1698c67f-694d-419c-823f-1897194d405a] 32628 --- [nio-8080-exec-4] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 18:19:46.408  INFO [1698c67f-694d-419c-823f-1897194d405a] 32628 --- [nio-8080-exec-4] o.e.x.services.TicketServiceImpl         : Found 1 tickets eligible for check-in for user 4
2025-06-29 18:20:19.181 DEBUG [193cdb59-d081-4797-a6c6-5007b429cf7f] 32628 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/nearby?origin=OTP
2025-06-29 18:20:19.182 DEBUG [193cdb59-d081-4797-a6c6-5007b429cf7f] 32628 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/nearby?origin=OTP
2025-06-29 18:20:19.184  INFO [193cdb59-d081-4797-a6c6-5007b429cf7f] 32628 --- [nio-8080-exec-6] o.e.x.controllers.FlightController       : Received request for nearby flights from origin: OTP, departureDate: null
2025-06-29 18:20:19.185  INFO [193cdb59-d081-4797-a6c6-5007b429cf7f] 32628 --- [nio-8080-exec-6] o.e.x.controllers.FlightController       : Using search date: 2025-06-29
2025-06-29 18:20:19.185  INFO [193cdb59-d081-4797-a6c6-5007b429cf7f] 32628 --- [nio-8080-exec-6] o.e.x.controllers.FlightController       : Cache key: OTP-2025-06-29
2025-06-29 18:20:19.185  INFO [193cdb59-d081-4797-a6c6-5007b429cf7f] 32628 --- [nio-8080-exec-6] o.e.x.controllers.FlightController       : Returning cached nearby flights for origin: OTP, found 6 flights
2025-06-29 18:20:19.186 DEBUG [193cdb59-d081-4797-a6c6-5007b429cf7f] 32628 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:18:24.787362, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D4361BDF77019A1AAE9F6046C30CA54A], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:20:23.335 DEBUG [c75afbfd-4558-42a5-ac7a-4069ad7116c5] 32628 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-29 18:20:23.336 DEBUG [c75afbfd-4558-42a5-ac7a-4069ad7116c5] 32628 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-29 18:20:23.338  INFO [c75afbfd-4558-42a5-ac7a-4069ad7116c5] 32628 --- [nio-8080-exec-7] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris
2025-06-29 18:20:23.339  INFO [c75afbfd-4558-42a5-ac7a-4069ad7116c5] 32628 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-29 18:20:23.339  INFO [c75afbfd-4558-42a5-ac7a-4069ad7116c5] 32628 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-29 18:20:23.339 DEBUG [c75afbfd-4558-42a5-ac7a-4069ad7116c5] 32628 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-29).    For example, if today is 2025-06-29, a good departure date would be between 2025-07-06 and 2025-07-13, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris";
2025-06-29 18:20:23.341  INFO [c75afbfd-4558-42a5-ac7a-4069ad7116c5] 32628 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-29 18:20:23.341  INFO [c75afbfd-4558-42a5-ac7a-4069ad7116c5] 32628 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-29 18:20:23.341  INFO [c75afbfd-4558-42a5-ac7a-4069ad7116c5] 32628 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-29 18:20:23.342  INFO [c75afbfd-4558-42a5-ac7a-4069ad7116c5] 32628 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 18:20:23.342  INFO [c75afbfd-4558-42a5-ac7a-4069ad7116c5] 32628 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-29 18:20:23.344  INFO [c75afbfd-4558-42a5-ac7a-4069ad7116c5] 32628 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-29 18:20:23.344  INFO [c75afbfd-4558-42a5-ac7a-4069ad7116c5] 32628 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-29 18:20:23.344  INFO [c75afbfd-4558-42a5-ac7a-4069ad7116c5] 32628 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-29 18:20:23.345  INFO [c75afbfd-4558-42a5-ac7a-4069ad7116c5] 32628 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-29 18:20:25.221  INFO [c75afbfd-4558-42a5-ac7a-4069ad7116c5] 32628 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-29 18:20:25.221  INFO [c75afbfd-4558-42a5-ac7a-4069ad7116c5] 32628 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Response length: 195 characters
2025-06-29 18:20:25.222 DEBUG [c75afbfd-4558-42a5-ac7a-4069ad7116c5] 32628 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-06",
  "returnDate": "2025-07-08",
  "tripType": "roundTrip",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-29 18:20:25.223 DEBUG [c75afbfd-4558-42a5-ac7a-4069ad7116c5] 32628 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-29 18:20:25.223 DEBUG [c75afbfd-4558-42a5-ac7a-4069ad7116c5] 32628 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-29 18:20:25.224 DEBUG [c75afbfd-4558-42a5-ac7a-4069ad7116c5] 32628 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-29 18:20:25.224 DEBUG [c75afbfd-4558-42a5-ac7a-4069ad7116c5] 32628 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 18:20:25.224  INFO [c75afbfd-4558-42a5-ac7a-4069ad7116c5] 32628 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 18:20:25.224  INFO [c75afbfd-4558-42a5-ac7a-4069ad7116c5] 32628 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-06, returnDate=2025-07-08, tripType=roundTrip, adults=1, children=0, infants=0
2025-06-29 18:20:25.224  INFO [c75afbfd-4558-42a5-ac7a-4069ad7116c5] 32628 --- [nio-8080-exec-7] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-29 18:20:25.226 DEBUG [c75afbfd-4558-42a5-ac7a-4069ad7116c5] 32628 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:18:24.787362, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D4361BDF77019A1AAE9F6046C30CA54A], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:20:26.631 DEBUG [3629d791-23c9-49af-8297-ed34641f5401] 32628 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-29 18:20:26.633 DEBUG [3629d791-23c9-49af-8297-ed34641f5401] 32628 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-29 18:20:26.635  INFO [3629d791-23c9-49af-8297-ed34641f5401] 32628 --- [nio-8080-exec-8] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris one way
2025-06-29 18:20:26.635  INFO [3629d791-23c9-49af-8297-ed34641f5401] 32628 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-29 18:20:26.635  INFO [3629d791-23c9-49af-8297-ed34641f5401] 32628 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-29 18:20:26.635 DEBUG [3629d791-23c9-49af-8297-ed34641f5401] 32628 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-29).    For example, if today is 2025-06-29, a good departure date would be between 2025-07-06 and 2025-07-13, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris one way";
2025-06-29 18:20:26.637  INFO [3629d791-23c9-49af-8297-ed34641f5401] 32628 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-29 18:20:26.637  INFO [3629d791-23c9-49af-8297-ed34641f5401] 32628 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-29 18:20:26.637  INFO [3629d791-23c9-49af-8297-ed34641f5401] 32628 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-29 18:20:26.637  INFO [3629d791-23c9-49af-8297-ed34641f5401] 32628 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 18:20:26.637  INFO [3629d791-23c9-49af-8297-ed34641f5401] 32628 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-29 18:20:26.639  INFO [3629d791-23c9-49af-8297-ed34641f5401] 32628 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-29 18:20:26.639  INFO [3629d791-23c9-49af-8297-ed34641f5401] 32628 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-29 18:20:26.640  INFO [3629d791-23c9-49af-8297-ed34641f5401] 32628 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-29 18:20:26.640  INFO [3629d791-23c9-49af-8297-ed34641f5401] 32628 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-29 18:20:28.345  INFO [3629d791-23c9-49af-8297-ed34641f5401] 32628 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-29 18:20:28.345  INFO [3629d791-23c9-49af-8297-ed34641f5401] 32628 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Response length: 184 characters
2025-06-29 18:20:28.346 DEBUG [3629d791-23c9-49af-8297-ed34641f5401] 32628 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-06",
  "returnDate": null,
  "tripType": "oneWay",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-29 18:20:28.347 DEBUG [3629d791-23c9-49af-8297-ed34641f5401] 32628 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-29 18:20:28.347 DEBUG [3629d791-23c9-49af-8297-ed34641f5401] 32628 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-29 18:20:28.347 DEBUG [3629d791-23c9-49af-8297-ed34641f5401] 32628 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-29 18:20:28.347 DEBUG [3629d791-23c9-49af-8297-ed34641f5401] 32628 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 18:20:28.348  INFO [3629d791-23c9-49af-8297-ed34641f5401] 32628 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 18:20:28.348  INFO [3629d791-23c9-49af-8297-ed34641f5401] 32628 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-06, returnDate=null, tripType=oneWay, adults=1, children=0, infants=0
2025-06-29 18:20:28.348  INFO [3629d791-23c9-49af-8297-ed34641f5401] 32628 --- [nio-8080-exec-8] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-29 18:20:28.349 DEBUG [3629d791-23c9-49af-8297-ed34641f5401] 32628 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:18:24.787362, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D4361BDF77019A1AAE9F6046C30CA54A], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:20:29.933 DEBUG [fa3ed952-9c14-4ede-a5f9-a0db8a518336] 32628 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 18:20:30.051 DEBUG [fa3ed952-9c14-4ede-a5f9-a0db8a518336] 32628 --- [io-8080-exec-10] o.s.s.core.session.SessionRegistryImpl   : Registering session 128DCA2F6974236B29F55C5E36D37B46, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:18:24.787362, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}])
2025-06-29 18:20:30.052 DEBUG [fa3ed952-9c14-4ede-a5f9-a0db8a518336] 32628 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:18:24.787362, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@64ee1be7]
2025-06-29 18:20:30.053 DEBUG [fa3ed952-9c14-4ede-a5f9-a0db8a518336] 32628 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me
2025-06-29 18:20:30.054  INFO [fa3ed952-9c14-4ede-a5f9-a0db8a518336] 32628 --- [io-8080-exec-10] o.e.x.controllers.UserController         : Request received for current user details: ****@****.***
2025-06-29 18:20:30.156  INFO [fa3ed952-9c14-4ede-a5f9-a0db8a518336] 32628 --- [io-8080-exec-10] o.e.x.controllers.UserController         : Returning details for user: ****@****.***
2025-06-29 18:20:30.208 DEBUG [6da51f17-dd91-498d-bf12-f433bbd5fac5] 32628 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 18:20:30.213 DEBUG [39751243-ae70-46be-8761-27fb3364f231] 32628 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 18:20:30.213 DEBUG [8ecc38f0-1aa0-4877-8ead-e79b03bbecb8] 32628 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 18:20:30.214 DEBUG [8ecc38f0-1aa0-4877-8ead-e79b03bbecb8] 32628 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 18:20:30.215  INFO [8ecc38f0-1aa0-4877-8ead-e79b03bbecb8] 32628 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 18:20:30.216  INFO [8ecc38f0-1aa0-4877-8ead-e79b03bbecb8] 32628 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 18:20:30.283  INFO [8ecc38f0-1aa0-4877-8ead-e79b03bbecb8] 32628 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 18:20:30.284 DEBUG [8ecc38f0-1aa0-4877-8ead-e79b03bbecb8] 32628 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:18:24.787362, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D4361BDF77019A1AAE9F6046C30CA54A], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:20:30.291 DEBUG [71fd944c-3766-43d4-a0a5-67940f77b7bd] 32628 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 18:20:30.292 DEBUG [71fd944c-3766-43d4-a0a5-67940f77b7bd] 32628 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 18:20:30.293  INFO [71fd944c-3766-43d4-a0a5-67940f77b7bd] 32628 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 18:20:30.294  INFO [71fd944c-3766-43d4-a0a5-67940f77b7bd] 32628 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 18:20:30.320 DEBUG [d776b86a-e61a-49f4-bd89-0a192aa5e912] 32628 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 18:20:30.321 DEBUG [d776b86a-e61a-49f4-bd89-0a192aa5e912] 32628 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 18:20:30.322  INFO [d776b86a-e61a-49f4-bd89-0a192aa5e912] 32628 --- [nio-8080-exec-4] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 18:20:30.344 DEBUG [6da51f17-dd91-498d-bf12-f433bbd5fac5] 32628 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:18:24.787362, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D4361BDF77019A1AAE9F6046C30CA54A], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:20:30.345 DEBUG [39751243-ae70-46be-8761-27fb3364f231] 32628 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:18:24.787362, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D4361BDF77019A1AAE9F6046C30CA54A], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:20:30.346 DEBUG [39751243-ae70-46be-8761-27fb3364f231] 32628 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 18:20:30.347 DEBUG [6da51f17-dd91-498d-bf12-f433bbd5fac5] 32628 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 18:20:30.347  INFO [39751243-ae70-46be-8761-27fb3364f231] 32628 --- [nio-8080-exec-2] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 18:20:30.349  INFO [71fd944c-3766-43d4-a0a5-67940f77b7bd] 32628 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 18:20:30.350 DEBUG [71fd944c-3766-43d4-a0a5-67940f77b7bd] 32628 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:18:24.787362, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D4361BDF77019A1AAE9F6046C30CA54A], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:20:30.453  WARN [6da51f17-dd91-498d-bf12-f433bbd5fac5] 32628 --- [nio-8080-exec-9] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 18:20:30.454  WARN [6da51f17-dd91-498d-bf12-f433bbd5fac5] 32628 --- [nio-8080-exec-9] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 18:20:30.460 DEBUG [43c94d0d-313f-434f-bde0-9c24038fac48] 32628 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 18:20:30.462  INFO [39751243-ae70-46be-8761-27fb3364f231] 32628 --- [nio-8080-exec-2] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 18:20:30.501  INFO [d776b86a-e61a-49f4-bd89-0a192aa5e912] 32628 --- [nio-8080-exec-4] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 18:20:30.503 DEBUG [d776b86a-e61a-49f4-bd89-0a192aa5e912] 32628 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:18:24.787362, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D4361BDF77019A1AAE9F6046C30CA54A], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:20:30.509 DEBUG [60654b1c-ff90-482f-8c32-fe8b369c4c22] 32628 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 18:20:30.511 DEBUG [60654b1c-ff90-482f-8c32-fe8b369c4c22] 32628 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 18:20:30.512  INFO [60654b1c-ff90-482f-8c32-fe8b369c4c22] 32628 --- [nio-8080-exec-6] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 18:20:30.515 DEBUG [67e36c82-f3a2-40fe-bc08-59045de4ec46] 32628 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 18:20:30.516 DEBUG [67e36c82-f3a2-40fe-bc08-59045de4ec46] 32628 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 18:20:30.517  INFO [67e36c82-f3a2-40fe-bc08-59045de4ec46] 32628 --- [nio-8080-exec-7] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 18:20:30.563  INFO [60654b1c-ff90-482f-8c32-fe8b369c4c22] 32628 --- [nio-8080-exec-6] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 18:20:30.564 DEBUG [60654b1c-ff90-482f-8c32-fe8b369c4c22] 32628 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:18:24.787362, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D4361BDF77019A1AAE9F6046C30CA54A], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:20:30.580 DEBUG [43c94d0d-313f-434f-bde0-9c24038fac48] 32628 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:18:24.787362, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D4361BDF77019A1AAE9F6046C30CA54A], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:20:30.583 DEBUG [43c94d0d-313f-434f-bde0-9c24038fac48] 32628 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 18:20:30.682  WARN [43c94d0d-313f-434f-bde0-9c24038fac48] 32628 --- [nio-8080-exec-5] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 18:20:30.683  WARN [43c94d0d-313f-434f-bde0-9c24038fac48] 32628 --- [nio-8080-exec-5] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 18:20:30.716  INFO [67e36c82-f3a2-40fe-bc08-59045de4ec46] 32628 --- [nio-8080-exec-7] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 18:20:30.718 DEBUG [67e36c82-f3a2-40fe-bc08-59045de4ec46] 32628 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:18:24.787362, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D4361BDF77019A1AAE9F6046C30CA54A], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:20:30.724 DEBUG [f1c84f41-9dd6-4bbd-bf9c-b03d54af057e] 32628 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 18:20:30.725 DEBUG [f1c84f41-9dd6-4bbd-bf9c-b03d54af057e] 32628 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 18:20:30.726  INFO [f1c84f41-9dd6-4bbd-bf9c-b03d54af057e] 32628 --- [nio-8080-exec-8] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 18:20:30.774  INFO [f1c84f41-9dd6-4bbd-bf9c-b03d54af057e] 32628 --- [nio-8080-exec-8] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 18:20:30.776 DEBUG [f1c84f41-9dd6-4bbd-bf9c-b03d54af057e] 32628 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:18:24.787362, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D4361BDF77019A1AAE9F6046C30CA54A], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:20:34.778 DEBUG [7d83d0f3-c2d7-44fe-8f6b-1378fd47c417] 32628 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 18:20:34.866 DEBUG [7d83d0f3-c2d7-44fe-8f6b-1378fd47c417] 32628 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:18:24.787362, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D4361BDF77019A1AAE9F6046C30CA54A], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:20:34.869 DEBUG [7d83d0f3-c2d7-44fe-8f6b-1378fd47c417] 32628 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 18:20:34.870  INFO [7d83d0f3-c2d7-44fe-8f6b-1378fd47c417] 32628 --- [io-8080-exec-10] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 18:20:34.870  INFO [7d83d0f3-c2d7-44fe-8f6b-1378fd47c417] 32628 --- [io-8080-exec-10] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 18:20:34.909 DEBUG [db50eae8-9ebc-499e-9c71-2b8cef29a3d5] 32628 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 18:20:35.004 DEBUG [db50eae8-9ebc-499e-9c71-2b8cef29a3d5] 32628 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:18:24.787362, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D4361BDF77019A1AAE9F6046C30CA54A], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:20:35.007 DEBUG [db50eae8-9ebc-499e-9c71-2b8cef29a3d5] 32628 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 18:20:35.007  INFO [db50eae8-9ebc-499e-9c71-2b8cef29a3d5] 32628 --- [nio-8080-exec-1] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 18:20:35.008  INFO [db50eae8-9ebc-499e-9c71-2b8cef29a3d5] 32628 --- [nio-8080-exec-1] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 18:20:35.067 DEBUG [3cf0ceff-5083-465c-b3c4-78a62201a5ed] 32628 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 18:20:35.173 DEBUG [3cf0ceff-5083-465c-b3c4-78a62201a5ed] 32628 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:18:24.787362, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D4361BDF77019A1AAE9F6046C30CA54A], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:20:35.175 DEBUG [3cf0ceff-5083-465c-b3c4-78a62201a5ed] 32628 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 18:20:35.176  INFO [3cf0ceff-5083-465c-b3c4-78a62201a5ed] 32628 --- [nio-8080-exec-3] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 18:20:35.176  INFO [3cf0ceff-5083-465c-b3c4-78a62201a5ed] 32628 --- [nio-8080-exec-3] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 18:20:53.709 DEBUG [68f06fc5-e82e-45fe-b847-4b7b1d34aab3] 32628 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 18:20:53.814 DEBUG [68f06fc5-e82e-45fe-b847-4b7b1d34aab3] 32628 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:18:24.787362, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D4361BDF77019A1AAE9F6046C30CA54A], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:20:53.816 DEBUG [68f06fc5-e82e-45fe-b847-4b7b1d34aab3] 32628 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 18:20:53.817  INFO [68f06fc5-e82e-45fe-b847-4b7b1d34aab3] 32628 --- [nio-8080-exec-9] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 18:20:53.817  INFO [68f06fc5-e82e-45fe-b847-4b7b1d34aab3] 32628 --- [nio-8080-exec-9] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 18:20:53.859 DEBUG [f38f21b3-5017-45c7-bacf-00f9bd8b45db] 32628 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 18:20:53.948 DEBUG [f38f21b3-5017-45c7-bacf-00f9bd8b45db] 32628 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:18:24.787362, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D4361BDF77019A1AAE9F6046C30CA54A], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:20:53.951 DEBUG [f38f21b3-5017-45c7-bacf-00f9bd8b45db] 32628 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 18:20:53.951  INFO [f38f21b3-5017-45c7-bacf-00f9bd8b45db] 32628 --- [nio-8080-exec-2] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 18:20:53.951  INFO [f38f21b3-5017-45c7-bacf-00f9bd8b45db] 32628 --- [nio-8080-exec-2] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 18:20:53.993 DEBUG [e13e4cee-83ad-4a2a-b0ca-58512659fa75] 32628 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 18:20:54.092 DEBUG [e13e4cee-83ad-4a2a-b0ca-58512659fa75] 32628 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:18:24.787362, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D4361BDF77019A1AAE9F6046C30CA54A], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:20:54.094 DEBUG [e13e4cee-83ad-4a2a-b0ca-58512659fa75] 32628 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 18:20:54.095  INFO [e13e4cee-83ad-4a2a-b0ca-58512659fa75] 32628 --- [nio-8080-exec-4] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 18:20:54.095  INFO [e13e4cee-83ad-4a2a-b0ca-58512659fa75] 32628 --- [nio-8080-exec-4] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 18:21:16.614 DEBUG [5be5cd43-a5b9-41f3-983a-642947d368cb] 32628 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/cart/add
2025-06-29 18:21:16.719 DEBUG [5be5cd43-a5b9-41f3-983a-642947d368cb] 32628 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:18:24.787362, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D4361BDF77019A1AAE9F6046C30CA54A], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:21:16.720 DEBUG [5be5cd43-a5b9-41f3-983a-642947d368cb] 32628 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/cart/add
2025-06-29 18:21:16.827  INFO [5be5cd43-a5b9-41f3-983a-642947d368cb] 32628 --- [nio-8080-exec-6] o.e.x.controllers.CartController         : User ****@****.*** request to add flight ID 16 to persistent cart
2025-06-29 18:21:16.832  INFO [5be5cd43-a5b9-41f3-983a-642947d368cb] 32628 --- [nio-8080-exec-6] o.e.x.controllers.CartController         : AddToCart request: flightId=16, seatNumber=null, seatType=null, deferSeat=false, randomSeat=false
2025-06-29 18:21:16.838  INFO [5be5cd43-a5b9-41f3-983a-642947d368cb] 32628 --- [nio-8080-exec-6] o.e.xlr8travel.services.CartServiceImpl  : Added new flight ID 16 to cart for user ****@****.***
2025-06-29 18:21:16.857  INFO [5be5cd43-a5b9-41f3-983a-642947d368cb] 32628 --- [nio-8080-exec-6] o.e.x.controllers.CartController         : Flight ID 16 added/incremented in persistent cart for user ****@****.***.
2025-06-29 18:21:16.867 DEBUG [7c983411-18da-4b08-b27e-344173c2812e] 32628 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 18:21:16.976 DEBUG [7c983411-18da-4b08-b27e-344173c2812e] 32628 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:18:24.787362, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D4361BDF77019A1AAE9F6046C30CA54A], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:21:16.977 DEBUG [7c983411-18da-4b08-b27e-344173c2812e] 32628 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 18:21:16.978  INFO [7c983411-18da-4b08-b27e-344173c2812e] 32628 --- [nio-8080-exec-5] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 18:21:17.089  INFO [7c983411-18da-4b08-b27e-344173c2812e] 32628 --- [nio-8080-exec-5] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 18:21:17.439 DEBUG [0084cb6a-b8fc-4e65-a04f-b7fb2631858c] 32628 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 18:21:17.534 DEBUG [0084cb6a-b8fc-4e65-a04f-b7fb2631858c] 32628 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:18:24.787362, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D4361BDF77019A1AAE9F6046C30CA54A], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:21:17.536 DEBUG [0084cb6a-b8fc-4e65-a04f-b7fb2631858c] 32628 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 18:21:17.537  INFO [0084cb6a-b8fc-4e65-a04f-b7fb2631858c] 32628 --- [nio-8080-exec-7] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 18:21:17.640  INFO [0084cb6a-b8fc-4e65-a04f-b7fb2631858c] 32628 --- [nio-8080-exec-7] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 18:21:17.660 DEBUG [bac12171-854f-49d7-a4d1-277a789459eb] 32628 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 18:21:17.758 DEBUG [bac12171-854f-49d7-a4d1-277a789459eb] 32628 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:18:24.787362, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D4361BDF77019A1AAE9F6046C30CA54A], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:21:17.760 DEBUG [bac12171-854f-49d7-a4d1-277a789459eb] 32628 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 18:21:17.760  INFO [bac12171-854f-49d7-a4d1-277a789459eb] 32628 --- [nio-8080-exec-8] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 18:21:17.856  INFO [bac12171-854f-49d7-a4d1-277a789459eb] 32628 --- [nio-8080-exec-8] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 18:21:19.543 DEBUG [a3dc7969-9c27-4150-9d88-c9b6b90ef988] 32628 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 18:21:19.644 DEBUG [a3dc7969-9c27-4150-9d88-c9b6b90ef988] 32628 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:18:24.787362, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D4361BDF77019A1AAE9F6046C30CA54A], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:21:19.646 DEBUG [a3dc7969-9c27-4150-9d88-c9b6b90ef988] 32628 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 18:21:19.646  INFO [a3dc7969-9c27-4150-9d88-c9b6b90ef988] 32628 --- [io-8080-exec-10] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 18:21:19.735  INFO [a3dc7969-9c27-4150-9d88-c9b6b90ef988] 32628 --- [io-8080-exec-10] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 18:21:19.742 DEBUG [399c6945-05bd-40a0-936a-4b53b0f54104] 32628 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 18:21:19.842 DEBUG [399c6945-05bd-40a0-936a-4b53b0f54104] 32628 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:18:24.787362, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D4361BDF77019A1AAE9F6046C30CA54A], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:21:19.843 DEBUG [399c6945-05bd-40a0-936a-4b53b0f54104] 32628 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 18:21:19.844  INFO [399c6945-05bd-40a0-936a-4b53b0f54104] 32628 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 18:21:19.942  INFO [399c6945-05bd-40a0-936a-4b53b0f54104] 32628 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 18:21:30.912 DEBUG [1730bf50-439c-4f69-b509-ae65d854b9cd] 32628 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing POST /api/checkout/create-payment-intent
2025-06-29 18:21:30.913 DEBUG [1730bf50-439c-4f69-b509-ae65d854b9cd] 32628 --- [nio-8080-exec-9] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 18:21:30.914 DEBUG [1730bf50-439c-4f69-b509-ae65d854b9cd] 32628 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured POST /api/checkout/create-payment-intent
2025-06-29 18:21:30.919  INFO [1730bf50-439c-4f69-b509-ae65d854b9cd] 32628 --- [nio-8080-exec-9] o.e.x.controllers.PaymentController      : Creating payment intent for amount: 23995 ron
2025-06-29 18:21:31.392  INFO [1730bf50-439c-4f69-b509-ae65d854b9cd] 32628 --- [nio-8080-exec-9] o.e.x.controllers.PaymentController      : Payment intent created successfully: pi_3RfN2tGf8s1WZJnq0SKKDiAx
2025-06-29 18:21:33.923 DEBUG [dcdb4d5b-c4ae-46e1-9133-ff7e4d30df64] 32628 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/checkout/create-payment-intent
2025-06-29 18:21:33.923 DEBUG [dcdb4d5b-c4ae-46e1-9133-ff7e4d30df64] 32628 --- [nio-8080-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 18:21:33.924 DEBUG [dcdb4d5b-c4ae-46e1-9133-ff7e4d30df64] 32628 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /api/checkout/create-payment-intent
2025-06-29 18:21:33.925  INFO [dcdb4d5b-c4ae-46e1-9133-ff7e4d30df64] 32628 --- [nio-8080-exec-2] o.e.x.controllers.PaymentController      : Creating payment intent for amount: 23995 ron
2025-06-29 18:21:34.230  INFO [dcdb4d5b-c4ae-46e1-9133-ff7e4d30df64] 32628 --- [nio-8080-exec-2] o.e.x.controllers.PaymentController      : Payment intent created successfully: pi_3RfN2wGf8s1WZJnq0FN0qLjb
2025-06-29 18:21:40.878 DEBUG [b024c5cc-7ef8-49d9-aced-2e93f965ae1c] 32628 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing POST /api/checkout/create-payment-intent
2025-06-29 18:21:40.878 DEBUG [b024c5cc-7ef8-49d9-aced-2e93f965ae1c] 32628 --- [nio-8080-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 18:21:40.879 DEBUG [b024c5cc-7ef8-49d9-aced-2e93f965ae1c] 32628 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured POST /api/checkout/create-payment-intent
2025-06-29 18:21:40.880  INFO [b024c5cc-7ef8-49d9-aced-2e93f965ae1c] 32628 --- [nio-8080-exec-4] o.e.x.controllers.PaymentController      : Creating payment intent for amount: 23995 ron
2025-06-29 18:21:41.322  INFO [b024c5cc-7ef8-49d9-aced-2e93f965ae1c] 32628 --- [nio-8080-exec-4] o.e.x.controllers.PaymentController      : Payment intent created successfully: pi_3RfN33Gf8s1WZJnq1jlIj3kt
2025-06-29 18:21:42.505 DEBUG [509822f8-00fb-4367-af6f-ff77767864cd] 32628 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/checkout/confirm
2025-06-29 18:21:42.608 DEBUG [509822f8-00fb-4367-af6f-ff77767864cd] 32628 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:18:24.787362, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D4361BDF77019A1AAE9F6046C30CA54A], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:21:42.610 DEBUG [509822f8-00fb-4367-af6f-ff77767864cd] 32628 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/checkout/confirm
2025-06-29 18:21:42.613  INFO [509822f8-00fb-4367-af6f-ff77767864cd] 32628 --- [nio-8080-exec-6] o.e.x.controllers.CheckoutController     : Received purchase confirmation request.
2025-06-29 18:21:42.712  INFO [509822f8-00fb-4367-af6f-ff77767864cd] 32628 --- [nio-8080-exec-6] o.e.x.controllers.CheckoutController     : Processing purchase for user: ****@****.***
2025-06-29 18:21:42.719  INFO [509822f8-00fb-4367-af6f-ff77767864cd] 32628 --- [nio-8080-exec-6] o.e.x.controllers.CheckoutController     : User ****@****.*** persistent cart has 1 items.
2025-06-29 18:21:42.719  WARN [509822f8-00fb-4367-af6f-ff77767864cd] 32628 --- [nio-8080-exec-6] o.e.x.controllers.CheckoutController     : !!! SIMULATING successful payment processing for user ****@****.*** !!!
2025-06-29 18:21:42.720  INFO [509822f8-00fb-4367-af6f-ff77767864cd] 32628 --- [nio-8080-exec-6] o.e.x.services.OrderServiceImpl          : Creating order from persistent cart for user: ****@****.***
2025-06-29 18:21:42.725  INFO [509822f8-00fb-4367-af6f-ff77767864cd] 32628 --- [nio-8080-exec-6] o.e.x.services.OrderServiceImpl          : Order 2 created for user ****@****.***, status: PENDING_PAYMENT. Total: 37.99
2025-06-29 18:21:42.726  INFO [509822f8-00fb-4367-af6f-ff77767864cd] 32628 --- [nio-8080-exec-6] o.e.x.services.OrderServiceImpl          : Created ticket with deferred seat selection (fallback) for flight XT-OTP-CDG-2 for user ****@****.***
2025-06-29 18:21:42.726  INFO [509822f8-00fb-4367-af6f-ff77767864cd] 32628 --- [nio-8080-exec-6] o.e.x.services.OrderServiceImpl          : Ticket has baggage type: BAGGAGE_TYPE_WEIGHT_CARRY_ON_0
2025-06-29 18:21:43.924  INFO [509822f8-00fb-4367-af6f-ff77767864cd] 32628 --- [nio-8080-exec-6] o.e.x.services.EmailServiceImpl          : Purchase confirmation email sent to ****@****.***
2025-06-29 18:21:43.924  INFO [509822f8-00fb-4367-af6f-ff77767864cd] 32628 --- [nio-8080-exec-6] o.e.x.services.OrderServiceImpl          : Purchase confirmation email sent to user: ****@****.***
2025-06-29 18:21:43.939  INFO [509822f8-00fb-4367-af6f-ff77767864cd] 32628 --- [nio-8080-exec-6] o.e.x.controllers.CheckoutController     : Order successfully created for user ****@****.***. Confirmation: 2
2025-06-29 18:21:43.945  INFO [509822f8-00fb-4367-af6f-ff77767864cd] 32628 --- [nio-8080-exec-6] o.e.xlr8travel.services.CartServiceImpl  : Clearing 1 items from cart for user ****@****.***
2025-06-29 18:21:43.963  INFO [509822f8-00fb-4367-af6f-ff77767864cd] 32628 --- [nio-8080-exec-6] o.e.x.controllers.CheckoutController     : Persistent cart cleared for user ****@****.***.
2025-06-29 18:21:43.981 DEBUG [05eb87c3-6b55-4840-bece-316066bf8032] 32628 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing DELETE /api/cart/remove/16
2025-06-29 18:21:44.087 DEBUG [05eb87c3-6b55-4840-bece-316066bf8032] 32628 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:18:24.787362, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D4361BDF77019A1AAE9F6046C30CA54A], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:21:44.089 DEBUG [05eb87c3-6b55-4840-bece-316066bf8032] 32628 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured DELETE /api/cart/remove/16
2025-06-29 18:21:44.183  INFO [05eb87c3-6b55-4840-bece-316066bf8032] 32628 --- [nio-8080-exec-5] o.e.x.controllers.CartController         : User ****@****.*** request to remove flight ID 16 from persistent cart
2025-06-29 18:21:44.191  WARN [05eb87c3-6b55-4840-bece-316066bf8032] 32628 --- [nio-8080-exec-5] o.e.xlr8travel.services.CartServiceImpl  : Attempted to remove flight ID 16 not found in cart for user ****@****.***
2025-06-29 18:21:44.193  WARN [05eb87c3-6b55-4840-bece-316066bf8032] 32628 --- [nio-8080-exec-5] o.e.x.controllers.CartController         : Attempted to remove flight ID 16 not found in persistent cart for user ****@****.***
2025-06-29 18:21:44.204 DEBUG [d84e3486-2d8d-45b2-abbe-90b604b0227d] 32628 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 18:21:44.305 DEBUG [d84e3486-2d8d-45b2-abbe-90b604b0227d] 32628 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:18:24.787362, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D4361BDF77019A1AAE9F6046C30CA54A], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:21:44.307 DEBUG [d84e3486-2d8d-45b2-abbe-90b604b0227d] 32628 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 18:21:44.308  INFO [d84e3486-2d8d-45b2-abbe-90b604b0227d] 32628 --- [nio-8080-exec-7] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 18:21:44.396  INFO [d84e3486-2d8d-45b2-abbe-90b604b0227d] 32628 --- [nio-8080-exec-7] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 18:21:47.587 DEBUG [e7e1d0dc-d349-41db-968b-81fb8b35a7ec] 32628 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/nearby?origin=OTP
2025-06-29 18:21:47.588 DEBUG [e7e1d0dc-d349-41db-968b-81fb8b35a7ec] 32628 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/nearby?origin=OTP
2025-06-29 18:21:47.590  INFO [e7e1d0dc-d349-41db-968b-81fb8b35a7ec] 32628 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Received request for nearby flights from origin: OTP, departureDate: null
2025-06-29 18:21:47.590  INFO [e7e1d0dc-d349-41db-968b-81fb8b35a7ec] 32628 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Using search date: 2025-06-29
2025-06-29 18:21:47.590  INFO [e7e1d0dc-d349-41db-968b-81fb8b35a7ec] 32628 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Cache key: OTP-2025-06-29
2025-06-29 18:21:47.590  INFO [e7e1d0dc-d349-41db-968b-81fb8b35a7ec] 32628 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Returning cached nearby flights for origin: OTP, found 6 flights
2025-06-29 18:21:47.592 DEBUG [e7e1d0dc-d349-41db-968b-81fb8b35a7ec] 32628 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:18:24.787362, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D4361BDF77019A1AAE9F6046C30CA54A], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:21:50.354 DEBUG [e6d91b47-dbfe-45f0-a04f-3c3ad15678f4] 32628 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/check-in/boarding-passes
2025-06-29 18:21:50.354 DEBUG [af3a1bb3-c6fe-4ecc-bdc6-ea1d9dabfe2c] 32628 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/check-in/boarding-passes
2025-06-29 18:21:50.359 DEBUG [42d7d8ff-9f81-4330-92c0-4306649e0ae4] 32628 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/boarding-passes
2025-06-29 18:21:50.361 DEBUG [fc4e9d37-4c3b-40bc-a3cb-f61fec9f22c3] 32628 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/boarding-passes
2025-06-29 18:21:50.490 DEBUG [42d7d8ff-9f81-4330-92c0-4306649e0ae4] 32628 --- [nio-8080-exec-3] o.s.s.core.session.SessionRegistryImpl   : Registering session 163E383A1E9081B10A2E76B097BEC584, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:18:24.787362, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CONFIRMED'}])
2025-06-29 18:21:50.491 DEBUG [fc4e9d37-4c3b-40bc-a3cb-f61fec9f22c3] 32628 --- [nio-8080-exec-9] o.s.s.core.session.SessionRegistryImpl   : Registering session 89E6AD1C70C0B553C6848AC06D53C5E4, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:18:24.787362, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CONFIRMED'}])
2025-06-29 18:21:50.491 DEBUG [42d7d8ff-9f81-4330-92c0-4306649e0ae4] 32628 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:18:24.787362, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@3e69476d]
2025-06-29 18:21:50.491 DEBUG [fc4e9d37-4c3b-40bc-a3cb-f61fec9f22c3] 32628 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:18:24.787362, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@617cde3c]
2025-06-29 18:21:50.494 DEBUG [fc4e9d37-4c3b-40bc-a3cb-f61fec9f22c3] 32628 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/boarding-passes
2025-06-29 18:21:50.494 DEBUG [42d7d8ff-9f81-4330-92c0-4306649e0ae4] 32628 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/boarding-passes
2025-06-29 18:21:50.607  INFO [fc4e9d37-4c3b-40bc-a3cb-f61fec9f22c3] 32628 --- [nio-8080-exec-9] o.e.x.services.TicketServiceImpl         : Finding checked-in tickets for user 4
2025-06-29 18:21:50.607  INFO [42d7d8ff-9f81-4330-92c0-4306649e0ae4] 32628 --- [nio-8080-exec-3] o.e.x.services.TicketServiceImpl         : Finding checked-in tickets for user 4
2025-06-29 18:21:50.807 DEBUG [ab73a430-27c2-4c1d-8a56-206bf3c8c82d] 32628 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 18:21:50.807 DEBUG [83ed36cb-b95c-4b2d-ab6d-e5fd29a86e6d] 32628 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 18:21:50.914 DEBUG [83ed36cb-b95c-4b2d-ab6d-e5fd29a86e6d] 32628 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:18:24.787362, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D4361BDF77019A1AAE9F6046C30CA54A], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:21:50.914 DEBUG [ab73a430-27c2-4c1d-8a56-206bf3c8c82d] 32628 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T18:18:24.787362, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D4361BDF77019A1AAE9F6046C30CA54A], Granted Authorities=[ROLE_USER]]]
2025-06-29 18:21:50.916 DEBUG [83ed36cb-b95c-4b2d-ab6d-e5fd29a86e6d] 32628 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 18:21:50.916 DEBUG [ab73a430-27c2-4c1d-8a56-206bf3c8c82d] 32628 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 18:21:51.017  INFO [83ed36cb-b95c-4b2d-ab6d-e5fd29a86e6d] 32628 --- [nio-8080-exec-4] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 18:21:51.017  INFO [83ed36cb-b95c-4b2d-ab6d-e5fd29a86e6d] 32628 --- [nio-8080-exec-4] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 18:21:51.018  INFO [ab73a430-27c2-4c1d-8a56-206bf3c8c82d] 32628 --- [nio-8080-exec-2] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 18:21:51.019  INFO [ab73a430-27c2-4c1d-8a56-206bf3c8c82d] 32628 --- [nio-8080-exec-2] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 18:21:51.023  INFO [83ed36cb-b95c-4b2d-ab6d-e5fd29a86e6d] 32628 --- [nio-8080-exec-4] o.e.x.services.TicketServiceImpl         : Found 2 tickets eligible for check-in for user 4
2025-06-29 18:21:51.024  INFO [ab73a430-27c2-4c1d-8a56-206bf3c8c82d] 32628 --- [nio-8080-exec-2] o.e.x.services.TicketServiceImpl         : Found 2 tickets eligible for check-in for user 4
2025-06-29 18:22:24.474  INFO [NONE] 32628 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-29 18:22:24.477  INFO [NONE] 32628 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-06-29 18:22:24.483  INFO [NONE] 32628 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-06-29 19:54:54.036  INFO [NONE] 17056 --- [  restartedMain] o.e.xlr8travel.Xlr8travelApplication     : Starting Xlr8travelApplication using Java 21.0.5 with PID 17056 (C:\Users\razvi\Desktop\Licenta\backend\target\classes started by razvi in C:\Users\razvi\Desktop\Licenta\backend)
2025-06-29 19:54:54.043 DEBUG [NONE] 17056 --- [  restartedMain] o.e.xlr8travel.Xlr8travelApplication     : Running with Spring Boot v3.2.4, Spring v6.1.5
2025-06-29 19:54:54.044  INFO [NONE] 17056 --- [  restartedMain] o.e.xlr8travel.Xlr8travelApplication     : The following 1 profile is active: "local"
2025-06-29 19:54:54.094  INFO [NONE] 17056 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-29 19:54:54.095  INFO [NONE] 17056 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-29 19:54:55.528  INFO [NONE] 17056 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-29 19:54:55.626  INFO [NONE] 17056 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 89 ms. Found 9 JPA repository interfaces.
2025-06-29 19:54:56.523  INFO [NONE] 17056 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-29 19:54:56.536  INFO [NONE] 17056 --- [  restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-29 19:54:56.536  INFO [NONE] 17056 --- [  restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.19]
2025-06-29 19:54:56.627  INFO [NONE] 17056 --- [  restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-06-29 19:54:56.628  INFO [NONE] 17056 --- [  restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2531 ms
2025-06-29 19:54:56.934  INFO [NONE] 17056 --- [  restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-29 19:54:57.015  INFO [NONE] 17056 --- [  restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.4.Final
2025-06-29 19:54:57.059  INFO [NONE] 17056 --- [  restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-06-29 19:54:57.390  INFO [NONE] 17056 --- [  restartedMain] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-29 19:54:57.429  INFO [NONE] 17056 --- [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-06-29 19:54:58.595 ERROR [NONE] 17056 --- [  restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Exception during pool initialization.

com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at com.mysql.cj.jdbc.exceptions.SQLError.createCommunicationsException(SQLError.java:174)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:64)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:815)
	at com.mysql.cj.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:438)
	at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:241)
	at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:189)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:100)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)
	at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess.obtainConnection(JdbcEnvironmentInitiator.java:428)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcIsolationDelegate.delegateWork(JdbcIsolationDelegate.java:61)
	at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.getJdbcEnvironmentUsingJdbcMetadata(JdbcEnvironmentInitiator.java:276)
	at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:107)
	at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:68)
	at org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.initiateService(StandardServiceRegistryImpl.java:130)
	at org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:263)
	at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:238)
	at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:215)
	at org.hibernate.boot.model.relational.Database.<init>(Database.java:45)
	at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.getDatabase(InFlightMetadataCollectorImpl.java:223)
	at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.<init>(InFlightMetadataCollectorImpl.java:191)
	at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:170)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1432)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1503)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:365)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:135)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveConstructorArguments(ConstructorResolver.java:682)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:509)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1335)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1165)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:365)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:135)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1685)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1434)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:904)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:782)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:784)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:767)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:145)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:508)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1419)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.getOrderedBeansOfType(ServletContextInitializerBeans.java:210)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAsRegistrationBean(ServletContextInitializerBeans.java:173)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAsRegistrationBean(ServletContextInitializerBeans.java:168)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAdaptableBeans(ServletContextInitializerBeans.java:153)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.<init>(ServletContextInitializerBeans.java:86)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.getServletContextInitializerBeans(ServletWebServerApplicationContext.java:266)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.selfInitialize(ServletWebServerApplicationContext.java:240)
	at org.springframework.boot.web.embedded.tomcat.TomcatStarter.onStartup(TomcatStarter.java:52)
	at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4866)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1332)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1322)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:866)
	at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:845)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1332)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1322)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:866)
	at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:240)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.StandardService.startInternal(StandardService.java:433)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:921)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.startup.Tomcat.start(Tomcat.java:437)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:126)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.<init>(TomcatWebServer.java:105)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getTomcatWebServer(TomcatServletWebServerFactory.java:499)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getWebServer(TomcatServletWebServerFactory.java:218)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.createWebServer(ServletWebServerApplicationContext.java:188)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:162)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:618)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at org.example.xlr8travel.Xlr8travelApplication.main(Xlr8travelApplication.java:10)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at java.base/jdk.internal.reflect.DirectConstructorHandleAccessor.newInstance(DirectConstructorHandleAccessor.java:62)
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:502)
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:486)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:61)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:104)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:149)
	at com.mysql.cj.exceptions.ExceptionFactory.createCommunicationsException(ExceptionFactory.java:165)
	at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:88)
	at com.mysql.cj.NativeSession.connect(NativeSession.java:120)
	at com.mysql.cj.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:935)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:805)
	... 137 common frames omitted
Caused by: java.net.ConnectException: Connection refused: getsockopt
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:682)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:542)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:592)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at com.mysql.cj.protocol.StandardSocketFactory.connect(StandardSocketFactory.java:153)
	at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:62)
	... 140 common frames omitted

2025-06-29 19:54:58.604  WARN [NONE] 17056 --- [  restartedMain] o.h.e.j.e.i.JdbcEnvironmentInitiator     : HHH000342: Could not obtain connection to query metadata

java.lang.NullPointerException: Cannot invoke "org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(java.sql.SQLException, String)" because the return value of "org.hibernate.resource.transaction.backend.jdbc.internal.JdbcIsolationDelegate.sqlExceptionHelper()" is null
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcIsolationDelegate.delegateWork(JdbcIsolationDelegate.java:116)
	at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.getJdbcEnvironmentUsingJdbcMetadata(JdbcEnvironmentInitiator.java:276)
	at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:107)
	at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:68)
	at org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.initiateService(StandardServiceRegistryImpl.java:130)
	at org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:263)
	at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:238)
	at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:215)
	at org.hibernate.boot.model.relational.Database.<init>(Database.java:45)
	at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.getDatabase(InFlightMetadataCollectorImpl.java:223)
	at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.<init>(InFlightMetadataCollectorImpl.java:191)
	at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:170)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1432)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1503)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:365)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:135)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveConstructorArguments(ConstructorResolver.java:682)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:509)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1335)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1165)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:365)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:135)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1685)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1434)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:904)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:782)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:784)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:767)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:145)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:508)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1419)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.getOrderedBeansOfType(ServletContextInitializerBeans.java:210)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAsRegistrationBean(ServletContextInitializerBeans.java:173)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAsRegistrationBean(ServletContextInitializerBeans.java:168)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAdaptableBeans(ServletContextInitializerBeans.java:153)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.<init>(ServletContextInitializerBeans.java:86)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.getServletContextInitializerBeans(ServletWebServerApplicationContext.java:266)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.selfInitialize(ServletWebServerApplicationContext.java:240)
	at org.springframework.boot.web.embedded.tomcat.TomcatStarter.onStartup(TomcatStarter.java:52)
	at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4866)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1332)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1322)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:866)
	at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:845)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1332)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1322)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:866)
	at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:240)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.StandardService.startInternal(StandardService.java:433)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:921)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.startup.Tomcat.start(Tomcat.java:437)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:126)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.<init>(TomcatWebServer.java:105)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getTomcatWebServer(TomcatServletWebServerFactory.java:499)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getWebServer(TomcatServletWebServerFactory.java:218)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.createWebServer(ServletWebServerApplicationContext.java:188)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:162)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:618)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at org.example.xlr8travel.Xlr8travelApplication.main(Xlr8travelApplication.java:10)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)

2025-06-29 19:54:58.645  WARN [NONE] 17056 --- [  restartedMain] org.hibernate.orm.deprecation            : HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-29 19:55:00.493  INFO [NONE] 17056 --- [  restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-29 19:55:00.521  INFO [NONE] 17056 --- [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-06-29 19:55:01.573 ERROR [NONE] 17056 --- [  restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Exception during pool initialization.

com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at com.mysql.cj.jdbc.exceptions.SQLError.createCommunicationsException(SQLError.java:174)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:64)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:815)
	at com.mysql.cj.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:438)
	at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:241)
	at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:189)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:100)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)
	at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess.obtainConnection(JdbcEnvironmentInitiator.java:428)
	at org.hibernate.resource.transaction.backend.jdbc.internal.DdlTransactionIsolatorNonJtaImpl.getIsolatedConnection(DdlTransactionIsolatorNonJtaImpl.java:46)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.getIsolatedConnection(GenerationTargetToDatabase.java:60)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.jdbcStatement(GenerationTargetToDatabase.java:112)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:79)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:470)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropConstraintsTablesSequences(SchemaDropperImpl.java:242)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:215)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:185)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:155)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:115)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:244)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:145)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:142)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:315)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:450)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1507)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:365)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:135)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveConstructorArguments(ConstructorResolver.java:682)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:509)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1335)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1165)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:365)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:135)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1685)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1434)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:904)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:782)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:784)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:767)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:145)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:508)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1419)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.getOrderedBeansOfType(ServletContextInitializerBeans.java:210)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAsRegistrationBean(ServletContextInitializerBeans.java:173)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAsRegistrationBean(ServletContextInitializerBeans.java:168)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAdaptableBeans(ServletContextInitializerBeans.java:153)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.<init>(ServletContextInitializerBeans.java:86)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.getServletContextInitializerBeans(ServletWebServerApplicationContext.java:266)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.selfInitialize(ServletWebServerApplicationContext.java:240)
	at org.springframework.boot.web.embedded.tomcat.TomcatStarter.onStartup(TomcatStarter.java:52)
	at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4866)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1332)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1322)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:866)
	at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:845)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1332)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1322)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:866)
	at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:240)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.StandardService.startInternal(StandardService.java:433)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:921)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.startup.Tomcat.start(Tomcat.java:437)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:126)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.<init>(TomcatWebServer.java:105)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getTomcatWebServer(TomcatServletWebServerFactory.java:499)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getWebServer(TomcatServletWebServerFactory.java:218)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.createWebServer(ServletWebServerApplicationContext.java:188)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:162)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:618)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at org.example.xlr8travel.Xlr8travelApplication.main(Xlr8travelApplication.java:10)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at java.base/jdk.internal.reflect.DirectConstructorHandleAccessor.newInstance(DirectConstructorHandleAccessor.java:62)
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:502)
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:486)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:61)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:104)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:149)
	at com.mysql.cj.exceptions.ExceptionFactory.createCommunicationsException(ExceptionFactory.java:165)
	at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:88)
	at com.mysql.cj.NativeSession.connect(NativeSession.java:120)
	at com.mysql.cj.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:935)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:805)
	... 144 common frames omitted
Caused by: java.net.ConnectException: Connection refused: getsockopt
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:682)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:542)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:592)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at com.mysql.cj.protocol.StandardSocketFactory.connect(StandardSocketFactory.java:153)
	at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:62)
	... 147 common frames omitted

2025-06-29 19:55:01.587  WARN [NONE] 17056 --- [  restartedMain] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 0, SQLState: 08S01
2025-06-29 19:55:01.588 ERROR [NONE] 17056 --- [  restartedMain] o.h.engine.jdbc.spi.SqlExceptionHelper   : Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
2025-06-29 19:55:01.598 ERROR [NONE] 17056 --- [  restartedMain] j.LocalContainerEntityManagerFactoryBean : Failed to initialize JPA EntityManagerFactory: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution [Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.] [n/a]
2025-06-29 19:55:01.601 ERROR [NONE] 17056 --- [  restartedMain] o.s.b.web.embedded.tomcat.TomcatStarter  : Error starting Tomcat context. Exception: org.springframework.beans.factory.UnsatisfiedDependencyException. Message: Error creating bean with name 'jwtAuthenticationFilter': Unsatisfied dependency expressed through field 'userDetailsService': Error creating bean with name 'userRepoUserDetailsService' defined in file [C:\Users\razvi\Desktop\Licenta\backend\target\classes\org\example\xlr8travel\security\UserRepoUserDetailsService.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'userRepository' defined in org.example.xlr8travel.repositories.UserRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Cannot resolve reference to bean 'jpaSharedEM_entityManagerFactory' while setting bean property 'entityManager'
2025-06-29 19:55:01.740  WARN [NONE] 17056 --- [  restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Cannot deserialize session attribute [SPRING_SECURITY_CONTEXT] for session [89E6AD1C70C0B553C6848AC06D53C5E4]
2025-06-29 19:55:01.745 ERROR [NONE] 17056 --- [  restartedMain] o.a.catalina.session.StandardManager     : Exception loading sessions from persistent storage

java.io.StreamCorruptedException: invalid type code: 00
	at java.base/java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1793)
	at java.base/java.io.ObjectInputStream$FieldValues.<init>(ObjectInputStream.java:2618)
	at java.base/java.io.ObjectInputStream.defaultReadObject(ObjectInputStream.java:678)
	at java.base/java.lang.Throwable.readObject(Throwable.java:936)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1102)
	at java.base/java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2444)
	at java.base/java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2284)
	at java.base/java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1762)
	at java.base/java.io.ObjectInputStream.readObject(ObjectInputStream.java:540)
	at java.base/java.io.ObjectInputStream.readObject(ObjectInputStream.java:498)
	at org.apache.catalina.session.StandardSession.doReadObject(StandardSession.java:1348)
	at org.apache.catalina.session.StandardSession.readObjectData(StandardSession.java:985)
	at org.apache.catalina.session.StandardManager.doLoad(StandardManager.java:210)
	at org.apache.catalina.session.StandardManager.load(StandardManager.java:156)
	at org.apache.catalina.session.StandardManager.startInternal(StandardManager.java:346)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4893)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1332)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1322)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:866)
	at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:845)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1332)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1322)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:866)
	at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:240)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.StandardService.startInternal(StandardService.java:433)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:921)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.startup.Tomcat.start(Tomcat.java:437)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:126)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.<init>(TomcatWebServer.java:105)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getTomcatWebServer(TomcatServletWebServerFactory.java:499)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getWebServer(TomcatServletWebServerFactory.java:218)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.createWebServer(ServletWebServerApplicationContext.java:188)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:162)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:618)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at org.example.xlr8travel.Xlr8travelApplication.main(Xlr8travelApplication.java:10)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)

2025-06-29 19:55:01.762  INFO [NONE] 17056 --- [  restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-06-29 19:55:01.780  WARN [NONE] 17056 --- [  restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Unable to start web server
2025-06-29 19:55:01.800  INFO [NONE] 17056 --- [  restartedMain] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-06-29 19:55:01.840 ERROR [NONE] 17056 --- [  restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.context.ApplicationContextException: Unable to start web server
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:165)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:618)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at org.example.xlr8travel.Xlr8travelApplication.main(Xlr8travelApplication.java:10)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.boot.web.server.WebServerException: Unable to start embedded Tomcat
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:145)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.<init>(TomcatWebServer.java:105)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getTomcatWebServer(TomcatServletWebServerFactory.java:499)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getWebServer(TomcatServletWebServerFactory.java:218)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.createWebServer(ServletWebServerApplicationContext.java:188)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:162)
	... 11 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'jwtAuthenticationFilter': Unsatisfied dependency expressed through field 'userDetailsService': Error creating bean with name 'userRepoUserDetailsService' defined in file [C:\Users\razvi\Desktop\Licenta\backend\target\classes\org\example\xlr8travel\security\UserRepoUserDetailsService.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'userRepository' defined in org.example.xlr8travel.repositories.UserRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Cannot resolve reference to bean 'jpaSharedEM_entityManagerFactory' while setting bean property 'entityManager'
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:787)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:767)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:145)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:508)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1419)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.getOrderedBeansOfType(ServletContextInitializerBeans.java:210)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAsRegistrationBean(ServletContextInitializerBeans.java:173)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAsRegistrationBean(ServletContextInitializerBeans.java:168)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAdaptableBeans(ServletContextInitializerBeans.java:153)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.<init>(ServletContextInitializerBeans.java:86)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.getServletContextInitializerBeans(ServletWebServerApplicationContext.java:266)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.selfInitialize(ServletWebServerApplicationContext.java:240)
	at org.springframework.boot.web.embedded.tomcat.TomcatStarter.onStartup(TomcatStarter.java:52)
	at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4866)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1332)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1322)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:866)
	at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:845)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1332)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1322)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:866)
	at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:240)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.StandardService.startInternal(StandardService.java:433)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:921)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.startup.Tomcat.start(Tomcat.java:437)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:126)
	... 16 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'userRepoUserDetailsService' defined in file [C:\Users\razvi\Desktop\Licenta\backend\target\classes\org\example\xlr8travel\security\UserRepoUserDetailsService.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'userRepository' defined in org.example.xlr8travel.repositories.UserRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Cannot resolve reference to bean 'jpaSharedEM_entityManagerFactory' while setting bean property 'entityManager'
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:795)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:784)
	... 58 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userRepository' defined in org.example.xlr8travel.repositories.UserRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Cannot resolve reference to bean 'jpaSharedEM_entityManagerFactory' while setting bean property 'entityManager'
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:377)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:135)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1685)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1434)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:904)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:782)
	... 71 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'jpaSharedEM_entityManagerFactory': Cannot resolve reference to bean 'entityManagerFactory' while setting constructor argument
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:377)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:135)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveConstructorArguments(ConstructorResolver.java:682)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:509)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1335)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1165)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:365)
	... 85 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution [Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.] [n/a]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1786)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:365)
	... 97 common frames omitted
Caused by: jakarta.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution [Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.] [n/a]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:421)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782)
	... 104 common frames omitted
Caused by: org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution [Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.] [n/a]
	at org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:100)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.transaction.backend.jdbc.internal.DdlTransactionIsolatorNonJtaImpl.getIsolatedConnection(DdlTransactionIsolatorNonJtaImpl.java:74)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.getIsolatedConnection(GenerationTargetToDatabase.java:60)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.jdbcStatement(GenerationTargetToDatabase.java:112)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:79)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:470)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropConstraintsTablesSequences(SchemaDropperImpl.java:242)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:215)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:185)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:155)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:115)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:244)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:145)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:142)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:315)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:450)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1507)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	... 108 common frames omitted
Caused by: com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at com.mysql.cj.jdbc.exceptions.SQLError.createCommunicationsException(SQLError.java:174)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:64)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:815)
	at com.mysql.cj.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:438)
	at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:241)
	at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:189)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:100)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)
	at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess.obtainConnection(JdbcEnvironmentInitiator.java:428)
	at org.hibernate.resource.transaction.backend.jdbc.internal.DdlTransactionIsolatorNonJtaImpl.getIsolatedConnection(DdlTransactionIsolatorNonJtaImpl.java:46)
	... 131 common frames omitted
Caused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at java.base/jdk.internal.reflect.DirectConstructorHandleAccessor.newInstance(DirectConstructorHandleAccessor.java:62)
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:502)
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:486)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:61)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:104)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:149)
	at com.mysql.cj.exceptions.ExceptionFactory.createCommunicationsException(ExceptionFactory.java:165)
	at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:88)
	at com.mysql.cj.NativeSession.connect(NativeSession.java:120)
	at com.mysql.cj.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:935)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:805)
	... 144 common frames omitted
Caused by: java.net.ConnectException: Connection refused: getsockopt
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:682)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:542)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:592)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at com.mysql.cj.protocol.StandardSocketFactory.connect(StandardSocketFactory.java:153)
	at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:62)
	... 147 common frames omitted

2025-06-29 19:55:57.283  INFO [NONE] 22644 --- [  restartedMain] o.e.xlr8travel.Xlr8travelApplication     : Starting Xlr8travelApplication using Java 21.0.5 with PID 22644 (C:\Users\razvi\Desktop\Licenta\backend\target\classes started by razvi in C:\Users\razvi\Desktop\Licenta\backend)
2025-06-29 19:55:57.290 DEBUG [NONE] 22644 --- [  restartedMain] o.e.xlr8travel.Xlr8travelApplication     : Running with Spring Boot v3.2.4, Spring v6.1.5
2025-06-29 19:55:57.291  INFO [NONE] 22644 --- [  restartedMain] o.e.xlr8travel.Xlr8travelApplication     : The following 1 profile is active: "local"
2025-06-29 19:55:57.340  INFO [NONE] 22644 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-29 19:55:57.341  INFO [NONE] 22644 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-29 19:55:58.948  INFO [NONE] 22644 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-29 19:55:59.051  INFO [NONE] 22644 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 96 ms. Found 9 JPA repository interfaces.
2025-06-29 19:56:00.028  INFO [NONE] 22644 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-29 19:56:00.041  INFO [NONE] 22644 --- [  restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-29 19:56:00.042  INFO [NONE] 22644 --- [  restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.19]
2025-06-29 19:56:00.138  INFO [NONE] 22644 --- [  restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-06-29 19:56:00.139  INFO [NONE] 22644 --- [  restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2796 ms
2025-06-29 19:56:00.489  INFO [NONE] 22644 --- [  restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-29 19:56:00.563  INFO [NONE] 22644 --- [  restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.4.Final
2025-06-29 19:56:00.607  INFO [NONE] 22644 --- [  restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-06-29 19:56:00.913  INFO [NONE] 22644 --- [  restartedMain] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-29 19:56:00.952  INFO [NONE] 22644 --- [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-06-29 19:56:01.247  INFO [NONE] 22644 --- [  restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7022a5d2
2025-06-29 19:56:01.250  INFO [NONE] 22644 --- [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-06-29 19:56:01.315  WARN [NONE] 22644 --- [  restartedMain] org.hibernate.orm.deprecation            : HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-29 19:56:05.242  INFO [NONE] 22644 --- [  restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-29 19:56:16.148  INFO [NONE] 22644 --- [  restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-29 19:56:16.542  INFO [NONE] 22644 --- [  restartedMain] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-29 19:56:17.052 DEBUG [NONE] 22644 --- [  restartedMain] o.e.x.security.JwtAuthenticationFilter   : Filter 'jwtAuthenticationFilter' configured for use
2025-06-29 19:56:17.055 DEBUG [NONE] 22644 --- [  restartedMain] o.e.x.security.RateLimitingFilter        : Filter 'rateLimitingFilter' configured for use
2025-06-29 19:56:17.285  INFO [NONE] 22644 --- [  restartedMain] o.e.x.config.LocalPropertiesConfig       : Loaded application-local.properties
2025-06-29 19:56:17.679  INFO [NONE] 22644 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : === GEMINI SERVICE CONFIGURATION ===
2025-06-29 19:56:17.679  INFO [NONE] 22644 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : Project ID: xlr8travel
2025-06-29 19:56:17.680  INFO [NONE] 22644 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : Location ID: us-east1
2025-06-29 19:56:17.680  INFO [NONE] 22644 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : Model: gemini-2.0-flash-001
2025-06-29 19:56:17.680  INFO [NONE] 22644 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : Credentials Path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 19:56:17.680  INFO [NONE] 22644 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : API Key: ***SET***
2025-06-29 19:56:17.681  INFO [NONE] 22644 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : ✅ Credentials file exists: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 19:56:17.681  INFO [NONE] 22644 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : ✅ Credentials file size: 2376 bytes
2025-06-29 19:56:17.681  INFO [NONE] 22644 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : ✅ GOOGLE_APPLICATION_CREDENTIALS env var is set: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 19:56:17.682  INFO [NONE] 22644 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : =====================================
2025-06-29 19:56:17.709  INFO [NONE] 22644 --- [  restartedMain] o.e.x.config.SensitiveDataConfig         : Validating sensitive data configuration for profile: local
2025-06-29 19:56:17.709  WARN [NONE] 22644 --- [  restartedMain] o.e.x.config.SensitiveDataConfig         : Environment variable SPRING_DATASOURCE_URL is not set
2025-06-29 19:56:17.710  WARN [NONE] 22644 --- [  restartedMain] o.e.x.config.SensitiveDataConfig         : Environment variable SPRING_DATASOURCE_USERNAME is not set
2025-06-29 19:56:17.710  WARN [NONE] 22644 --- [  restartedMain] o.e.x.config.SensitiveDataConfig         : Environment variable SPRING_DATASOURCE_PASSWORD is not set
2025-06-29 19:56:17.710  WARN [NONE] 22644 --- [  restartedMain] o.e.x.config.SensitiveDataConfig         : Environment variable STRIPE_SECRET_KEY is not set
2025-06-29 19:56:17.761  WARN [NONE] 22644 --- [  restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-29 19:56:17.894  INFO [NONE] 22644 --- [  restartedMain] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2025-06-29 19:56:18.243  INFO [NONE] 22644 --- [  restartedMain] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 4 endpoint(s) beneath base path '/actuator'
2025-06-29 19:56:18.352  INFO [NONE] 22644 --- [  restartedMain] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@41c920bb, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4e6efad3, org.springframework.security.web.context.SecurityContextHolderFilter@3f1622eb, org.springframework.security.web.header.HeaderWriterFilter@7e6afb25, org.springframework.web.filter.CorsFilter@4d72f64a, org.springframework.security.web.authentication.logout.LogoutFilter@bfd2b6, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@49226ef4, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@70e6876c, org.example.xlr8travel.security.JwtAuthenticationFilter@3d038ec7, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@66bd32bb, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@68bf75fc, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@2f946173, org.springframework.security.web.session.ConcurrentSessionFilter@262b3b16, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@7724ce3, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4b455d58, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2ed52c2, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@27d040c2, org.springframework.security.web.session.SessionManagementFilter@1b68df3a, org.springframework.security.web.access.ExceptionTranslationFilter@710cf77f, org.springframework.security.web.access.intercept.AuthorizationFilter@4d84a743]
2025-06-29 19:56:18.946  INFO [NONE] 22644 --- [  restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2025-06-29 19:56:19.030  INFO [NONE] 22644 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path ''
2025-06-29 19:56:19.040  INFO [NONE] 22644 --- [  restartedMain] o.e.xlr8travel.Xlr8travelApplication     : Started Xlr8travelApplication in 22.444 seconds (process running for 23.158)
2025-06-29 19:56:34.676  INFO [NONE] 22644 --- [nio-8080-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-29 19:56:34.676  INFO [NONE] 22644 --- [nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-06-29 19:56:34.678  INFO [NONE] 22644 --- [nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2025-06-29 19:56:34.696 DEBUG [fa15ec50-1766-47e6-9dd4-16d6bdbfc318] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 19:56:34.840 ERROR [fa15ec50-1766-47e6-9dd4-16d6bdbfc318] 22644 --- [nio-8080-exec-2] o.e.x.security.JwtAuthenticationFilter   : Cannot set user authentication: User ****@****.*** not found
2025-06-29 19:56:34.844 DEBUG [fa15ec50-1766-47e6-9dd4-16d6bdbfc318] 22644 --- [nio-8080-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 19:56:34.849  WARN [fa15ec50-1766-47e6-9dd4-16d6bdbfc318] 22644 --- [nio-8080-exec-2] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/api/user/me' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2025-06-29 19:56:34.878 DEBUG [fa15ec50-1766-47e6-9dd4-16d6bdbfc318] 22644 --- [nio-8080-exec-2] o.s.s.w.s.HttpSessionRequestCache        : Saved request http://localhost:8080/api/user/me?continue to session
2025-06-29 19:56:34.878 DEBUG [fa15ec50-1766-47e6-9dd4-16d6bdbfc318] 22644 --- [nio-8080-exec-2] s.w.a.DelegatingAuthenticationEntryPoint : Trying to match using Ant [pattern='/api/**']
2025-06-29 19:56:34.879 DEBUG [fa15ec50-1766-47e6-9dd4-16d6bdbfc318] 22644 --- [nio-8080-exec-2] s.w.a.DelegatingAuthenticationEntryPoint : Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@3b834e82
2025-06-29 19:56:35.614 DEBUG [03743eb5-9429-43d6-8988-7a35f24632e6] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /api/token/refresh
2025-06-29 19:56:35.615 DEBUG [03743eb5-9429-43d6-8988-7a35f24632e6] 22644 --- [nio-8080-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 19:56:35.618 DEBUG [03743eb5-9429-43d6-8988-7a35f24632e6] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /api/token/refresh
2025-06-29 19:56:35.715  INFO [03743eb5-9429-43d6-8988-7a35f24632e6] 22644 --- [nio-8080-exec-3] o.e.x.controllers.TokenController        : Generated new access token for user: ****@****.***
2025-06-29 19:56:35.940 DEBUG [0cf51351-507d-4043-86cb-8203809f8c19] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 19:56:35.951 ERROR [0cf51351-507d-4043-86cb-8203809f8c19] 22644 --- [nio-8080-exec-4] o.e.x.security.JwtAuthenticationFilter   : Cannot set user authentication: User ****@****.*** not found
2025-06-29 19:56:35.952 DEBUG [0cf51351-507d-4043-86cb-8203809f8c19] 22644 --- [nio-8080-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 19:56:35.956 DEBUG [0cf51351-507d-4043-86cb-8203809f8c19] 22644 --- [nio-8080-exec-4] o.s.s.w.s.HttpSessionRequestCache        : Saved request http://localhost:8080/api/user/me?continue to session
2025-06-29 19:56:35.957 DEBUG [0cf51351-507d-4043-86cb-8203809f8c19] 22644 --- [nio-8080-exec-4] s.w.a.DelegatingAuthenticationEntryPoint : Trying to match using Ant [pattern='/api/**']
2025-06-29 19:56:35.958 DEBUG [0cf51351-507d-4043-86cb-8203809f8c19] 22644 --- [nio-8080-exec-4] s.w.a.DelegatingAuthenticationEntryPoint : Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@3b834e82
2025-06-29 19:56:36.793 DEBUG [61b98a9c-3154-4221-886f-715a3e3fe314] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/nearby?origin=OTP
2025-06-29 19:56:36.807 DEBUG [61b98a9c-3154-4221-886f-715a3e3fe314] 22644 --- [nio-8080-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 19:56:36.811 DEBUG [61b98a9c-3154-4221-886f-715a3e3fe314] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/nearby?origin=OTP
2025-06-29 19:56:36.828  INFO [61b98a9c-3154-4221-886f-715a3e3fe314] 22644 --- [nio-8080-exec-5] o.e.x.controllers.FlightController       : Received request for nearby flights from origin: OTP, departureDate: null
2025-06-29 19:56:36.828  INFO [61b98a9c-3154-4221-886f-715a3e3fe314] 22644 --- [nio-8080-exec-5] o.e.x.controllers.FlightController       : Using search date: 2025-06-29
2025-06-29 19:56:36.829  INFO [61b98a9c-3154-4221-886f-715a3e3fe314] 22644 --- [nio-8080-exec-5] o.e.x.controllers.FlightController       : Cache key: OTP-2025-06-29
2025-06-29 19:56:36.830  INFO [61b98a9c-3154-4221-886f-715a3e3fe314] 22644 --- [nio-8080-exec-5] o.e.x.controllers.FlightController       : No valid cache found. Searching nearby flights from origin: OTP, after date: 2025-06-29
2025-06-29 19:56:36.831  INFO [61b98a9c-3154-4221-886f-715a3e3fe314] 22644 --- [nio-8080-exec-5] o.e.x.controllers.FlightController       : Calling flightService.findByOriginAndDepartureDateAfter for origin: OTP, date: 2025-06-29
2025-06-29 19:56:36.933  INFO [61b98a9c-3154-4221-886f-715a3e3fe314] 22644 --- [nio-8080-exec-5] o.e.x.controllers.FlightController       : Database query completed, found 16 flights
2025-06-29 19:56:36.934  INFO [61b98a9c-3154-4221-886f-715a3e3fe314] 22644 --- [nio-8080-exec-5] o.e.x.controllers.FlightController       : Converting 16 Flight entities to FlightDTOs
2025-06-29 19:56:36.936  INFO [61b98a9c-3154-4221-886f-715a3e3fe314] 22644 --- [nio-8080-exec-5] o.e.x.controllers.FlightController       : Converted to 16 FlightDTOs
2025-06-29 19:56:36.936  INFO [61b98a9c-3154-4221-886f-715a3e3fe314] 22644 --- [nio-8080-exec-5] o.e.x.controllers.FlightController       : Grouping flights by destination country
2025-06-29 19:56:36.937  INFO [61b98a9c-3154-4221-886f-715a3e3fe314] 22644 --- [nio-8080-exec-5] o.e.x.controllers.FlightController       : Grouped flights into 7 countries
2025-06-29 19:56:36.937  INFO [61b98a9c-3154-4221-886f-715a3e3fe314] 22644 --- [nio-8080-exec-5] o.e.x.controllers.FlightController       : Selecting diverse flights - one from each country first
2025-06-29 19:56:36.938  INFO [61b98a9c-3154-4221-886f-715a3e3fe314] 22644 --- [nio-8080-exec-5] o.e.x.controllers.FlightController       : Adding first flight from Greece (has 2 flights)
2025-06-29 19:56:36.938  INFO [61b98a9c-3154-4221-886f-715a3e3fe314] 22644 --- [nio-8080-exec-5] o.e.x.controllers.FlightController       : Adding first flight from Netherlands (has 2 flights)
2025-06-29 19:56:36.938  INFO [61b98a9c-3154-4221-886f-715a3e3fe314] 22644 --- [nio-8080-exec-5] o.e.x.controllers.FlightController       : Adding first flight from Italy (has 2 flights)
2025-06-29 19:56:36.939  INFO [61b98a9c-3154-4221-886f-715a3e3fe314] 22644 --- [nio-8080-exec-5] o.e.x.controllers.FlightController       : Adding first flight from United Kingdom (has 2 flights)
2025-06-29 19:56:36.939  INFO [61b98a9c-3154-4221-886f-715a3e3fe314] 22644 --- [nio-8080-exec-5] o.e.x.controllers.FlightController       : Adding first flight from France (has 2 flights)
2025-06-29 19:56:36.939  INFO [61b98a9c-3154-4221-886f-715a3e3fe314] 22644 --- [nio-8080-exec-5] o.e.x.controllers.FlightController       : Adding first flight from Switzerland (has 2 flights)
2025-06-29 19:56:36.939  INFO [61b98a9c-3154-4221-886f-715a3e3fe314] 22644 --- [nio-8080-exec-5] o.e.x.controllers.FlightController       : Reached 6 flights after first pass, stopping
2025-06-29 19:56:36.940  INFO [61b98a9c-3154-4221-886f-715a3e3fe314] 22644 --- [nio-8080-exec-5] o.e.x.controllers.FlightController       : Caching 6 diverse flights with key: OTP-2025-06-29
2025-06-29 19:56:36.941  INFO [61b98a9c-3154-4221-886f-715a3e3fe314] 22644 --- [nio-8080-exec-5] o.e.x.controllers.FlightController       : Returning 6 diverse nearby flights from: OTP
2025-06-29 19:56:38.140 DEBUG [a3c6b285-19f5-4e27-b3ed-176ae68c5692] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /oauth2/authorization/google
2025-06-29 19:56:38.155 DEBUG [a3c6b285-19f5-4e27-b3ed-176ae68c5692] 22644 --- [nio-8080-exec-6] o.s.s.web.DefaultRedirectStrategy        : Redirecting to https://accounts.google.com/o/oauth2/v2/auth?response_type=code&client_id=280181287068-i92p696f0ja6qv5lecrhi4dmn2hsrvie.apps.googleusercontent.com&scope=email%20profile&state=5xsv1T3Fo4KqzrQwNe83FewUzPLsxdJqUw-dh5vPjas%3D&redirect_uri=http://localhost:8080/login/oauth2/code/google
2025-06-29 19:56:40.168 DEBUG [1cf7cbf8-f088-462c-957c-6558865806ab] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /login/oauth2/code/google?state=5xsv1T3Fo4KqzrQwNe83FewUzPLsxdJqUw-dh5vPjas%3D&code=4%2F0AVMBsJgXfabBM9bVthrcViotO2mWWkQTaDWXyQkLbT7z8fpw0H9FC_Zuk7uBx7a7pGwmcQ&scope=email+profile+openid+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile&authuser=1&prompt=none
2025-06-29 19:56:40.726  INFO [1cf7cbf8-f088-462c-957c-6558865806ab] 22644 --- [nio-8080-exec-7] o.e.x.security.CustomOAuth2UserService   : Creating new user from OAuth2 login: ****@****.***
2025-06-29 19:56:40.809  INFO [1cf7cbf8-f088-462c-957c-6558865806ab] 22644 --- [nio-8080-exec-7] o.e.x.security.CustomOAuth2UserService   : Successfully created new user from OAuth2 login: ****@****.***
2025-06-29 19:56:40.811 DEBUG [1cf7cbf8-f088-462c-957c-6558865806ab] 22644 --- [nio-8080-exec-7] .s.ChangeSessionIdAuthenticationStrategy : Changed session id from D87C279E4E12FF46B797B93901CBC394
2025-06-29 19:56:40.812 DEBUG [1cf7cbf8-f088-462c-957c-6558865806ab] 22644 --- [nio-8080-exec-7] o.s.s.core.session.SessionRegistryImpl   : Registering session D00BC53B7143F7E518C587A12694FC0F, for principal Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}]
2025-06-29 19:56:40.813 DEBUG [1cf7cbf8-f088-462c-957c-6558865806ab] 22644 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D87C279E4E12FF46B797B93901CBC394], Granted Authorities=[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@e6f9cb5]
2025-06-29 19:56:40.814 DEBUG [1cf7cbf8-f088-462c-957c-6558865806ab] 22644 --- [nio-8080-exec-7] .s.o.c.w.OAuth2LoginAuthenticationFilter : Set SecurityContextHolder to OAuth2AuthenticationToken [Principal=Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D87C279E4E12FF46B797B93901CBC394], Granted Authorities=[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]]
2025-06-29 19:56:40.816  INFO [1cf7cbf8-f088-462c-957c-6558865806ab] 22644 --- [nio-8080-exec-7] e.x.s.OAuth2AuthenticationSuccessHandler : Extracting username from authentication: 104658082982173093135
2025-06-29 19:56:40.816  INFO [1cf7cbf8-f088-462c-957c-6558865806ab] 22644 --- [nio-8080-exec-7] e.x.s.OAuth2AuthenticationSuccessHandler : Principal class: org.springframework.security.oauth2.core.user.DefaultOAuth2User
2025-06-29 19:56:40.817  INFO [1cf7cbf8-f088-462c-957c-6558865806ab] 22644 --- [nio-8080-exec-7] e.x.s.OAuth2AuthenticationSuccessHandler : Principal is DefaultOAuth2User
2025-06-29 19:56:40.817  INFO [1cf7cbf8-f088-462c-957c-6558865806ab] 22644 --- [nio-8080-exec-7] e.x.s.OAuth2AuthenticationSuccessHandler : OAuth2User attributes: {sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}
2025-06-29 19:56:40.817  INFO [1cf7cbf8-f088-462c-957c-6558865806ab] 22644 --- [nio-8080-exec-7] e.x.s.OAuth2AuthenticationSuccessHandler : Using email as username: ****@****.***
2025-06-29 19:56:40.818  INFO [1cf7cbf8-f088-462c-957c-6558865806ab] 22644 --- [nio-8080-exec-7] e.x.s.OAuth2AuthenticationSuccessHandler : Extracting username from authentication: 104658082982173093135
2025-06-29 19:56:40.818  INFO [1cf7cbf8-f088-462c-957c-6558865806ab] 22644 --- [nio-8080-exec-7] e.x.s.OAuth2AuthenticationSuccessHandler : Principal class: org.springframework.security.oauth2.core.user.DefaultOAuth2User
2025-06-29 19:56:40.818  INFO [1cf7cbf8-f088-462c-957c-6558865806ab] 22644 --- [nio-8080-exec-7] e.x.s.OAuth2AuthenticationSuccessHandler : Principal is DefaultOAuth2User
2025-06-29 19:56:40.819  INFO [1cf7cbf8-f088-462c-957c-6558865806ab] 22644 --- [nio-8080-exec-7] e.x.s.OAuth2AuthenticationSuccessHandler : OAuth2User attributes: {sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}
2025-06-29 19:56:40.819  INFO [1cf7cbf8-f088-462c-957c-6558865806ab] 22644 --- [nio-8080-exec-7] e.x.s.OAuth2AuthenticationSuccessHandler : Using email as username: ****@****.***
2025-06-29 19:56:40.819  INFO [1cf7cbf8-f088-462c-957c-6558865806ab] 22644 --- [nio-8080-exec-7] e.x.s.OAuth2AuthenticationSuccessHandler : OAuth tokens stored in session for user: ****@****.***
2025-06-29 19:56:40.820 DEBUG [1cf7cbf8-f088-462c-957c-6558865806ab] 22644 --- [nio-8080-exec-7] o.s.s.web.DefaultRedirectStrategy        : Redirecting to http://localhost:3000?oauth=success
2025-06-29 19:56:41.415 DEBUG [d1db406d-aa71-45c8-aa34-d5262dbb8f79] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/oauth/complete
2025-06-29 19:56:41.418 DEBUG [20870f23-4ae6-43c9-b4e0-02fef554e835] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/oauth/complete
2025-06-29 19:56:41.422 DEBUG [d0a01616-1d5d-4867-9716-11a36c5c5015] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing POST /api/oauth/complete
2025-06-29 19:56:41.425 DEBUG [bad24a99-8c57-4144-99fc-4ba1850b46dd] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/oauth/complete
2025-06-29 19:56:41.427 DEBUG [d0a01616-1d5d-4867-9716-11a36c5c5015] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured POST /api/oauth/complete
2025-06-29 19:56:41.427 DEBUG [bad24a99-8c57-4144-99fc-4ba1850b46dd] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/oauth/complete
2025-06-29 19:56:41.429  INFO [d0a01616-1d5d-4867-9716-11a36c5c5015] 22644 --- [nio-8080-exec-9] o.e.x.controllers.OAuthController        : OAuth tokens retrieved and cleared from session for user: ****@****.***
2025-06-29 19:56:41.429  INFO [bad24a99-8c57-4144-99fc-4ba1850b46dd] 22644 --- [nio-8080-exec-1] o.e.x.controllers.OAuthController        : OAuth tokens retrieved and cleared from session for user: ****@****.***
2025-06-29 19:56:41.432 DEBUG [d0a01616-1d5d-4867-9716-11a36c5c5015] 22644 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D87C279E4E12FF46B797B93901CBC394], Granted Authorities=[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]]]
2025-06-29 19:56:41.432 DEBUG [bad24a99-8c57-4144-99fc-4ba1850b46dd] 22644 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D87C279E4E12FF46B797B93901CBC394], Granted Authorities=[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]]]
2025-06-29 19:56:41.800 DEBUG [6b9d9864-d09c-4721-8d8b-ffd919045257] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 19:56:41.826 DEBUG [6b9d9864-d09c-4721-8d8b-ffd919045257] 22644 --- [nio-8080-exec-2] o.s.s.core.session.SessionRegistryImpl   : Registering session 2AA9A4ED70C0415EFEFF50D3AD55F171, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[])
2025-06-29 19:56:41.827 DEBUG [6b9d9864-d09c-4721-8d8b-ffd919045257] 22644 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@6ad110c3]
2025-06-29 19:56:41.830 DEBUG [6b9d9864-d09c-4721-8d8b-ffd919045257] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me
2025-06-29 19:56:41.832  INFO [6b9d9864-d09c-4721-8d8b-ffd919045257] 22644 --- [nio-8080-exec-2] o.e.x.controllers.UserController         : Request received for current user details: ****@****.***
2025-06-29 19:56:41.842  INFO [6b9d9864-d09c-4721-8d8b-ffd919045257] 22644 --- [nio-8080-exec-2] o.e.x.controllers.UserController         : Returning details for user: ****@****.***
2025-06-29 19:56:41.892 DEBUG [449ed86e-dd5b-4a53-a397-843a7b770ad3] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 19:56:41.892 DEBUG [a9c2f34e-7dbb-4b34-b291-2a38aa1db617] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 19:56:41.916 DEBUG [a9c2f34e-7dbb-4b34-b291-2a38aa1db617] 22644 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D87C279E4E12FF46B797B93901CBC394], Granted Authorities=[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]]]
2025-06-29 19:56:41.921 DEBUG [a9c2f34e-7dbb-4b34-b291-2a38aa1db617] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 19:56:41.923  INFO [a9c2f34e-7dbb-4b34-b291-2a38aa1db617] 22644 --- [nio-8080-exec-4] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 19:56:41.933 DEBUG [449ed86e-dd5b-4a53-a397-843a7b770ad3] 22644 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 19:56:41.941 DEBUG [449ed86e-dd5b-4a53-a397-843a7b770ad3] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 19:56:41.951  INFO [a9c2f34e-7dbb-4b34-b291-2a38aa1db617] 22644 --- [nio-8080-exec-4] o.e.xlr8travel.services.CartServiceImpl  : No existing cart found for user ****@****.*** with ID 4, creating a new one.
2025-06-29 19:56:41.961  WARN [449ed86e-dd5b-4a53-a397-843a7b770ad3] 22644 --- [nio-8080-exec-3] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 19:56:41.973  INFO [a9c2f34e-7dbb-4b34-b291-2a38aa1db617] 22644 --- [nio-8080-exec-4] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 19:56:41.976  WARN [449ed86e-dd5b-4a53-a397-843a7b770ad3] 22644 --- [nio-8080-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 19:56:42.153 DEBUG [a33b0beb-da9f-4680-9ef5-56c39d4922b1] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 19:56:42.167 DEBUG [a33b0beb-da9f-4680-9ef5-56c39d4922b1] 22644 --- [nio-8080-exec-5] o.s.s.core.session.SessionRegistryImpl   : Registering session 5833FA9215403631DDC4B8B6996ABDA6, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[])
2025-06-29 19:56:42.168 DEBUG [a33b0beb-da9f-4680-9ef5-56c39d4922b1] 22644 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@612eb541]
2025-06-29 19:56:42.171 DEBUG [a33b0beb-da9f-4680-9ef5-56c39d4922b1] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me
2025-06-29 19:56:42.172  INFO [a33b0beb-da9f-4680-9ef5-56c39d4922b1] 22644 --- [nio-8080-exec-5] o.e.x.controllers.UserController         : Request received for current user details: ****@****.***
2025-06-29 19:56:42.184  INFO [a33b0beb-da9f-4680-9ef5-56c39d4922b1] 22644 --- [nio-8080-exec-5] o.e.x.controllers.UserController         : Returning details for user: ****@****.***
2025-06-29 19:56:43.461 DEBUG [42be2501-948c-4437-b90e-7ac75edc251e] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/nearby?origin=OTP
2025-06-29 19:56:43.464 DEBUG [42be2501-948c-4437-b90e-7ac75edc251e] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/nearby?origin=OTP
2025-06-29 19:56:43.467  INFO [42be2501-948c-4437-b90e-7ac75edc251e] 22644 --- [nio-8080-exec-6] o.e.x.controllers.FlightController       : Received request for nearby flights from origin: OTP, departureDate: null
2025-06-29 19:56:43.468  INFO [42be2501-948c-4437-b90e-7ac75edc251e] 22644 --- [nio-8080-exec-6] o.e.x.controllers.FlightController       : Using search date: 2025-06-29
2025-06-29 19:56:43.468  INFO [42be2501-948c-4437-b90e-7ac75edc251e] 22644 --- [nio-8080-exec-6] o.e.x.controllers.FlightController       : Cache key: OTP-2025-06-29
2025-06-29 19:56:43.469  INFO [42be2501-948c-4437-b90e-7ac75edc251e] 22644 --- [nio-8080-exec-6] o.e.x.controllers.FlightController       : Returning cached nearby flights for origin: OTP, found 6 flights
2025-06-29 19:56:43.472 DEBUG [42be2501-948c-4437-b90e-7ac75edc251e] 22644 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 19:56:44.739 DEBUG [a8d408d1-4769-4146-be6c-da9185237250] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-29 19:56:44.741 DEBUG [a8d408d1-4769-4146-be6c-da9185237250] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-29 19:56:44.745  INFO [a8d408d1-4769-4146-be6c-da9185237250] 22644 --- [nio-8080-exec-7] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris
2025-06-29 19:56:44.745  INFO [a8d408d1-4769-4146-be6c-da9185237250] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : No closest airport provided or determined, defaulting to OTP
2025-06-29 19:56:44.746  INFO [a8d408d1-4769-4146-be6c-da9185237250] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-29 19:56:44.752 DEBUG [a8d408d1-4769-4146-be6c-da9185237250] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-29).    For example, if today is 2025-06-29, a good departure date would be between 2025-07-06 and 2025-07-13, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris";
2025-06-29 19:56:44.756  INFO [a8d408d1-4769-4146-be6c-da9185237250] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-29 19:56:44.756  INFO [a8d408d1-4769-4146-be6c-da9185237250] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-29 19:56:44.757  INFO [a8d408d1-4769-4146-be6c-da9185237250] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-29 19:56:44.757  INFO [a8d408d1-4769-4146-be6c-da9185237250] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 19:56:44.758  INFO [a8d408d1-4769-4146-be6c-da9185237250] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-29 19:56:44.839  INFO [a8d408d1-4769-4146-be6c-da9185237250] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-29 19:56:44.843  INFO [a8d408d1-4769-4146-be6c-da9185237250] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-29 19:56:44.846  INFO [a8d408d1-4769-4146-be6c-da9185237250] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-29 19:56:44.889  INFO [a8d408d1-4769-4146-be6c-da9185237250] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-29 19:56:47.896  INFO [a8d408d1-4769-4146-be6c-da9185237250] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-29 19:56:47.897  INFO [a8d408d1-4769-4146-be6c-da9185237250] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Response length: 195 characters
2025-06-29 19:56:47.899 DEBUG [a8d408d1-4769-4146-be6c-da9185237250] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-06",
  "returnDate": "2025-07-08",
  "tripType": "roundTrip",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-29 19:56:47.900 DEBUG [a8d408d1-4769-4146-be6c-da9185237250] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-29 19:56:47.905 DEBUG [a8d408d1-4769-4146-be6c-da9185237250] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-29 19:56:47.906 DEBUG [a8d408d1-4769-4146-be6c-da9185237250] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-29 19:56:47.912 DEBUG [a8d408d1-4769-4146-be6c-da9185237250] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 19:56:47.912  INFO [a8d408d1-4769-4146-be6c-da9185237250] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 19:56:47.913  INFO [a8d408d1-4769-4146-be6c-da9185237250] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-06, returnDate=2025-07-08, tripType=roundTrip, adults=1, children=0, infants=0
2025-06-29 19:56:47.913  INFO [a8d408d1-4769-4146-be6c-da9185237250] 22644 --- [nio-8080-exec-7] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-29 19:56:47.917 DEBUG [a8d408d1-4769-4146-be6c-da9185237250] 22644 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 19:56:51.230 DEBUG [57089345-5355-446d-9d2b-ed1a7c051f01] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-29 19:56:51.233 DEBUG [57089345-5355-446d-9d2b-ed1a7c051f01] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-29 19:56:51.234  INFO [57089345-5355-446d-9d2b-ed1a7c051f01] 22644 --- [nio-8080-exec-8] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris one way
2025-06-29 19:56:51.235  INFO [57089345-5355-446d-9d2b-ed1a7c051f01] 22644 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : No closest airport provided or determined, defaulting to OTP
2025-06-29 19:56:51.235  INFO [57089345-5355-446d-9d2b-ed1a7c051f01] 22644 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-29 19:56:51.235 DEBUG [57089345-5355-446d-9d2b-ed1a7c051f01] 22644 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-29).    For example, if today is 2025-06-29, a good departure date would be between 2025-07-06 and 2025-07-13, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris one way";
2025-06-29 19:56:51.237  INFO [57089345-5355-446d-9d2b-ed1a7c051f01] 22644 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-29 19:56:51.238  INFO [57089345-5355-446d-9d2b-ed1a7c051f01] 22644 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-29 19:56:51.238  INFO [57089345-5355-446d-9d2b-ed1a7c051f01] 22644 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-29 19:56:51.238  INFO [57089345-5355-446d-9d2b-ed1a7c051f01] 22644 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 19:56:51.238  INFO [57089345-5355-446d-9d2b-ed1a7c051f01] 22644 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-29 19:56:51.240  INFO [57089345-5355-446d-9d2b-ed1a7c051f01] 22644 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-29 19:56:51.241  INFO [57089345-5355-446d-9d2b-ed1a7c051f01] 22644 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-29 19:56:51.241  INFO [57089345-5355-446d-9d2b-ed1a7c051f01] 22644 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-29 19:56:51.241  INFO [57089345-5355-446d-9d2b-ed1a7c051f01] 22644 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-29 19:56:53.045  INFO [57089345-5355-446d-9d2b-ed1a7c051f01] 22644 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-29 19:56:53.046  INFO [57089345-5355-446d-9d2b-ed1a7c051f01] 22644 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Response length: 184 characters
2025-06-29 19:56:53.046 DEBUG [57089345-5355-446d-9d2b-ed1a7c051f01] 22644 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-06",
  "returnDate": null,
  "tripType": "oneWay",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-29 19:56:53.047 DEBUG [57089345-5355-446d-9d2b-ed1a7c051f01] 22644 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-29 19:56:53.047 DEBUG [57089345-5355-446d-9d2b-ed1a7c051f01] 22644 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-29 19:56:53.047 DEBUG [57089345-5355-446d-9d2b-ed1a7c051f01] 22644 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-29 19:56:53.048 DEBUG [57089345-5355-446d-9d2b-ed1a7c051f01] 22644 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 19:56:53.048  INFO [57089345-5355-446d-9d2b-ed1a7c051f01] 22644 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 19:56:53.048  INFO [57089345-5355-446d-9d2b-ed1a7c051f01] 22644 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-06, returnDate=null, tripType=oneWay, adults=1, children=0, infants=0
2025-06-29 19:56:53.048  INFO [57089345-5355-446d-9d2b-ed1a7c051f01] 22644 --- [nio-8080-exec-8] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-29 19:56:53.049 DEBUG [57089345-5355-446d-9d2b-ed1a7c051f01] 22644 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 19:56:57.228 DEBUG [daebf249-fd5d-4b01-a3e5-b68bc78a3edb] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 19:56:57.246 DEBUG [daebf249-fd5d-4b01-a3e5-b68bc78a3edb] 22644 --- [io-8080-exec-10] o.s.s.core.session.SessionRegistryImpl   : Registering session 8C96DAA26C98A38B00219427F185705B, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[])
2025-06-29 19:56:57.247 DEBUG [daebf249-fd5d-4b01-a3e5-b68bc78a3edb] 22644 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@6fd71812]
2025-06-29 19:56:57.250 DEBUG [daebf249-fd5d-4b01-a3e5-b68bc78a3edb] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me
2025-06-29 19:56:57.251  INFO [daebf249-fd5d-4b01-a3e5-b68bc78a3edb] 22644 --- [io-8080-exec-10] o.e.x.controllers.UserController         : Request received for current user details: ****@****.***
2025-06-29 19:56:57.262  INFO [daebf249-fd5d-4b01-a3e5-b68bc78a3edb] 22644 --- [io-8080-exec-10] o.e.x.controllers.UserController         : Returning details for user: ****@****.***
2025-06-29 19:56:57.335 DEBUG [5b9de60c-9b4d-4bd3-89b7-29068c5507c9] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 19:56:57.343 DEBUG [329bd826-26a6-4a2b-b125-d517327b9be8] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 19:56:57.347 DEBUG [8acb1537-81ac-46b5-a085-d40132af508e] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 19:56:57.348 DEBUG [329bd826-26a6-4a2b-b125-d517327b9be8] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 19:56:57.364  INFO [329bd826-26a6-4a2b-b125-d517327b9be8] 22644 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 19:56:57.362 DEBUG [5b9de60c-9b4d-4bd3-89b7-29068c5507c9] 22644 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 19:56:57.365  INFO [329bd826-26a6-4a2b-b125-d517327b9be8] 22644 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 19:56:57.369 DEBUG [5b9de60c-9b4d-4bd3-89b7-29068c5507c9] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 19:56:57.369 DEBUG [8acb1537-81ac-46b5-a085-d40132af508e] 22644 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 19:56:57.373 DEBUG [8acb1537-81ac-46b5-a085-d40132af508e] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 19:56:57.374  INFO [8acb1537-81ac-46b5-a085-d40132af508e] 22644 --- [nio-8080-exec-2] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 19:56:57.398  WARN [5b9de60c-9b4d-4bd3-89b7-29068c5507c9] 22644 --- [nio-8080-exec-9] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 19:56:57.400  WARN [5b9de60c-9b4d-4bd3-89b7-29068c5507c9] 22644 --- [nio-8080-exec-9] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 19:56:57.410 DEBUG [2e95c98d-6375-4f7d-84a5-1ce73354f698] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 19:56:57.421  INFO [8acb1537-81ac-46b5-a085-d40132af508e] 22644 --- [nio-8080-exec-2] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 19:56:57.422 DEBUG [2e95c98d-6375-4f7d-84a5-1ce73354f698] 22644 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 19:56:57.428 DEBUG [2e95c98d-6375-4f7d-84a5-1ce73354f698] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 19:56:57.438  WARN [2e95c98d-6375-4f7d-84a5-1ce73354f698] 22644 --- [nio-8080-exec-3] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 19:56:57.439  WARN [2e95c98d-6375-4f7d-84a5-1ce73354f698] 22644 --- [nio-8080-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 19:56:57.484  INFO [329bd826-26a6-4a2b-b125-d517327b9be8] 22644 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 19:56:57.486 DEBUG [329bd826-26a6-4a2b-b125-d517327b9be8] 22644 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 19:56:57.496 DEBUG [429469d6-f7aa-463d-a2b8-45492f45d00b] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 19:56:57.511 DEBUG [429469d6-f7aa-463d-a2b8-45492f45d00b] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 19:56:57.514  INFO [429469d6-f7aa-463d-a2b8-45492f45d00b] 22644 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 19:56:57.514  INFO [429469d6-f7aa-463d-a2b8-45492f45d00b] 22644 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 19:56:57.558 DEBUG [6a0e8b4b-16dc-45f7-abdc-b78429b81d56] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 19:56:57.561 DEBUG [6a0e8b4b-16dc-45f7-abdc-b78429b81d56] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 19:56:57.563  INFO [6a0e8b4b-16dc-45f7-abdc-b78429b81d56] 22644 --- [nio-8080-exec-5] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 19:56:57.595  INFO [429469d6-f7aa-463d-a2b8-45492f45d00b] 22644 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 19:56:57.597 DEBUG [429469d6-f7aa-463d-a2b8-45492f45d00b] 22644 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 19:56:57.761  INFO [6a0e8b4b-16dc-45f7-abdc-b78429b81d56] 22644 --- [nio-8080-exec-5] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 19:56:57.766 DEBUG [6a0e8b4b-16dc-45f7-abdc-b78429b81d56] 22644 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 19:56:57.775 DEBUG [839d25b4-d402-482e-9ef2-4a3e1fd8b123] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 19:56:57.777 DEBUG [839d25b4-d402-482e-9ef2-4a3e1fd8b123] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 19:56:57.777 DEBUG [799b399b-5ffe-4d92-ab27-aab0e6d707e5] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 19:56:57.778  INFO [839d25b4-d402-482e-9ef2-4a3e1fd8b123] 22644 --- [nio-8080-exec-6] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 19:56:57.779 DEBUG [799b399b-5ffe-4d92-ab27-aab0e6d707e5] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 19:56:57.780  INFO [799b399b-5ffe-4d92-ab27-aab0e6d707e5] 22644 --- [nio-8080-exec-7] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 19:56:57.823  INFO [839d25b4-d402-482e-9ef2-4a3e1fd8b123] 22644 --- [nio-8080-exec-6] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 19:56:57.825 DEBUG [839d25b4-d402-482e-9ef2-4a3e1fd8b123] 22644 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 19:56:57.984  INFO [799b399b-5ffe-4d92-ab27-aab0e6d707e5] 22644 --- [nio-8080-exec-7] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 19:56:57.985 DEBUG [799b399b-5ffe-4d92-ab27-aab0e6d707e5] 22644 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 19:56:57.994 DEBUG [d15638b0-df84-405a-8c3c-2f991d2bc727] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 19:56:57.996 DEBUG [d15638b0-df84-405a-8c3c-2f991d2bc727] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 19:56:57.998  INFO [d15638b0-df84-405a-8c3c-2f991d2bc727] 22644 --- [nio-8080-exec-8] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 19:56:58.043  INFO [d15638b0-df84-405a-8c3c-2f991d2bc727] 22644 --- [nio-8080-exec-8] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 19:56:58.046 DEBUG [d15638b0-df84-405a-8c3c-2f991d2bc727] 22644 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 19:57:02.134 DEBUG [1c35c683-3242-4efc-a687-b11a5cb0edb6] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 19:57:02.146 DEBUG [1c35c683-3242-4efc-a687-b11a5cb0edb6] 22644 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 19:57:02.150 DEBUG [1c35c683-3242-4efc-a687-b11a5cb0edb6] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 19:57:02.152  INFO [1c35c683-3242-4efc-a687-b11a5cb0edb6] 22644 --- [io-8080-exec-10] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 19:57:02.152  INFO [1c35c683-3242-4efc-a687-b11a5cb0edb6] 22644 --- [io-8080-exec-10] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 19:57:02.165 DEBUG [101e7072-4872-4c3c-a866-76c06b188fb4] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 19:57:02.177 DEBUG [101e7072-4872-4c3c-a866-76c06b188fb4] 22644 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 19:57:02.181 DEBUG [101e7072-4872-4c3c-a866-76c06b188fb4] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 19:57:02.182  INFO [101e7072-4872-4c3c-a866-76c06b188fb4] 22644 --- [nio-8080-exec-9] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 19:57:02.182  INFO [101e7072-4872-4c3c-a866-76c06b188fb4] 22644 --- [nio-8080-exec-9] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 19:57:02.482 DEBUG [a5942b95-ab03-46b7-8447-c122c101bf47] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 19:57:02.496 DEBUG [a5942b95-ab03-46b7-8447-c122c101bf47] 22644 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 19:57:02.502 DEBUG [a5942b95-ab03-46b7-8447-c122c101bf47] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 19:57:02.503  INFO [a5942b95-ab03-46b7-8447-c122c101bf47] 22644 --- [nio-8080-exec-2] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 19:57:02.503  INFO [a5942b95-ab03-46b7-8447-c122c101bf47] 22644 --- [nio-8080-exec-2] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 19:57:07.085 DEBUG [cad2231d-aca1-4a0a-96e3-60474402fc25] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /api/cart/add
2025-06-29 19:57:07.098 DEBUG [cad2231d-aca1-4a0a-96e3-60474402fc25] 22644 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 19:57:07.101 DEBUG [cad2231d-aca1-4a0a-96e3-60474402fc25] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /api/cart/add
2025-06-29 19:57:07.167  INFO [cad2231d-aca1-4a0a-96e3-60474402fc25] 22644 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : User ****@****.*** request to add flight ID 16 to persistent cart
2025-06-29 19:57:07.237  INFO [cad2231d-aca1-4a0a-96e3-60474402fc25] 22644 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : AddToCart request: flightId=16, seatNumber=null, seatType=null, deferSeat=false, randomSeat=false
2025-06-29 19:57:07.253  INFO [cad2231d-aca1-4a0a-96e3-60474402fc25] 22644 --- [nio-8080-exec-3] o.e.xlr8travel.services.CartServiceImpl  : Added new flight ID 16 to cart for user ****@****.***
2025-06-29 19:57:07.293  INFO [cad2231d-aca1-4a0a-96e3-60474402fc25] 22644 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : Flight ID 16 added/incremented in persistent cart for user ****@****.***.
2025-06-29 19:57:07.320 DEBUG [52e189d0-95ba-4310-9ac5-4e5b59a9b950] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 19:57:07.336 DEBUG [52e189d0-95ba-4310-9ac5-4e5b59a9b950] 22644 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 19:57:07.338 DEBUG [52e189d0-95ba-4310-9ac5-4e5b59a9b950] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 19:57:07.339  INFO [52e189d0-95ba-4310-9ac5-4e5b59a9b950] 22644 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 19:57:07.422  INFO [52e189d0-95ba-4310-9ac5-4e5b59a9b950] 22644 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 19:57:08.803 DEBUG [fbac3a8f-27c1-4167-8aa4-47ecc94d9db6] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 19:57:08.816 DEBUG [fbac3a8f-27c1-4167-8aa4-47ecc94d9db6] 22644 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 19:57:08.818 DEBUG [fbac3a8f-27c1-4167-8aa4-47ecc94d9db6] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 19:57:08.819  INFO [fbac3a8f-27c1-4167-8aa4-47ecc94d9db6] 22644 --- [nio-8080-exec-4] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 19:57:08.873  INFO [fbac3a8f-27c1-4167-8aa4-47ecc94d9db6] 22644 --- [nio-8080-exec-4] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 19:57:08.881 DEBUG [e73de9d5-f739-4943-9750-04b1cdb2af8a] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 19:57:08.893 DEBUG [e73de9d5-f739-4943-9750-04b1cdb2af8a] 22644 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 19:57:08.894 DEBUG [e73de9d5-f739-4943-9750-04b1cdb2af8a] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 19:57:08.895  INFO [e73de9d5-f739-4943-9750-04b1cdb2af8a] 22644 --- [nio-8080-exec-5] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 19:57:08.947  INFO [e73de9d5-f739-4943-9750-04b1cdb2af8a] 22644 --- [nio-8080-exec-5] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 19:57:11.668 DEBUG [dd30d2bb-8ef1-4876-ad91-1a6e2f36f734] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 19:57:11.684 DEBUG [dd30d2bb-8ef1-4876-ad91-1a6e2f36f734] 22644 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 19:57:11.687 DEBUG [dd30d2bb-8ef1-4876-ad91-1a6e2f36f734] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 19:57:11.687  INFO [dd30d2bb-8ef1-4876-ad91-1a6e2f36f734] 22644 --- [nio-8080-exec-6] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 19:57:11.742  INFO [dd30d2bb-8ef1-4876-ad91-1a6e2f36f734] 22644 --- [nio-8080-exec-6] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 19:57:11.750 DEBUG [930b57e3-f5f5-4cad-bf41-f0f8810207dd] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 19:57:11.762 DEBUG [930b57e3-f5f5-4cad-bf41-f0f8810207dd] 22644 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 19:57:11.765 DEBUG [930b57e3-f5f5-4cad-bf41-f0f8810207dd] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 19:57:11.766  INFO [930b57e3-f5f5-4cad-bf41-f0f8810207dd] 22644 --- [nio-8080-exec-7] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 19:57:11.841  INFO [930b57e3-f5f5-4cad-bf41-f0f8810207dd] 22644 --- [nio-8080-exec-7] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 19:57:18.358 DEBUG [10a05278-ea04-4369-846f-84d9e28a542c] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /api/checkout/create-payment-intent
2025-06-29 19:57:18.359 DEBUG [10a05278-ea04-4369-846f-84d9e28a542c] 22644 --- [nio-8080-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 19:57:18.360 DEBUG [10a05278-ea04-4369-846f-84d9e28a542c] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured POST /api/checkout/create-payment-intent
2025-06-29 19:57:18.381  INFO [10a05278-ea04-4369-846f-84d9e28a542c] 22644 --- [nio-8080-exec-8] o.e.x.controllers.PaymentController      : Creating payment intent for amount: 23995 ron
2025-06-29 19:57:19.059  INFO [10a05278-ea04-4369-846f-84d9e28a542c] 22644 --- [nio-8080-exec-8] o.e.x.controllers.PaymentController      : Payment intent created successfully: pi_3RfOXbGf8s1WZJnq0ZUgjr4A
2025-06-29 19:57:20.313 DEBUG [4cb068d2-d2ef-4198-b047-490706f4e2a9] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing POST /api/checkout/confirm
2025-06-29 19:57:20.324 DEBUG [4cb068d2-d2ef-4198-b047-490706f4e2a9] 22644 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 19:57:20.326 DEBUG [4cb068d2-d2ef-4198-b047-490706f4e2a9] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured POST /api/checkout/confirm
2025-06-29 19:57:20.328  INFO [4cb068d2-d2ef-4198-b047-490706f4e2a9] 22644 --- [io-8080-exec-10] o.e.x.controllers.CheckoutController     : Received purchase confirmation request.
2025-06-29 19:57:20.334  INFO [4cb068d2-d2ef-4198-b047-490706f4e2a9] 22644 --- [io-8080-exec-10] o.e.x.controllers.CheckoutController     : Processing purchase for user: ****@****.***
2025-06-29 19:57:20.373  INFO [4cb068d2-d2ef-4198-b047-490706f4e2a9] 22644 --- [io-8080-exec-10] o.e.x.controllers.CheckoutController     : User ****@****.*** persistent cart has 1 items.
2025-06-29 19:57:20.373  WARN [4cb068d2-d2ef-4198-b047-490706f4e2a9] 22644 --- [io-8080-exec-10] o.e.x.controllers.CheckoutController     : !!! SIMULATING successful payment processing for user ****@****.*** !!!
2025-06-29 19:57:20.374  INFO [4cb068d2-d2ef-4198-b047-490706f4e2a9] 22644 --- [io-8080-exec-10] o.e.x.services.OrderServiceImpl          : Creating order from persistent cart for user: ****@****.***
2025-06-29 19:57:20.382  INFO [4cb068d2-d2ef-4198-b047-490706f4e2a9] 22644 --- [io-8080-exec-10] o.e.x.services.OrderServiceImpl          : Order 1 created for user ****@****.***, status: PENDING_PAYMENT. Total: 37.99
2025-06-29 19:57:20.383  INFO [4cb068d2-d2ef-4198-b047-490706f4e2a9] 22644 --- [io-8080-exec-10] o.e.x.services.OrderServiceImpl          : Created ticket with deferred seat selection (fallback) for flight XT-OTP-CDG-2 for user ****@****.***
2025-06-29 19:57:20.383  INFO [4cb068d2-d2ef-4198-b047-490706f4e2a9] 22644 --- [io-8080-exec-10] o.e.x.services.OrderServiceImpl          : Ticket has baggage type: BAGGAGE_TYPE_WEIGHT_CARRY_ON_0
2025-06-29 19:57:21.801  INFO [4cb068d2-d2ef-4198-b047-490706f4e2a9] 22644 --- [io-8080-exec-10] o.e.x.services.EmailServiceImpl          : Purchase confirmation email sent to ****@****.***
2025-06-29 19:57:21.801  INFO [4cb068d2-d2ef-4198-b047-490706f4e2a9] 22644 --- [io-8080-exec-10] o.e.x.services.OrderServiceImpl          : Purchase confirmation email sent to user: ****@****.***
2025-06-29 19:57:21.815  INFO [4cb068d2-d2ef-4198-b047-490706f4e2a9] 22644 --- [io-8080-exec-10] o.e.x.controllers.CheckoutController     : Order successfully created for user ****@****.***. Confirmation: 1
2025-06-29 19:57:21.819  INFO [4cb068d2-d2ef-4198-b047-490706f4e2a9] 22644 --- [io-8080-exec-10] o.e.xlr8travel.services.CartServiceImpl  : Clearing 1 items from cart for user ****@****.***
2025-06-29 19:57:21.841  INFO [4cb068d2-d2ef-4198-b047-490706f4e2a9] 22644 --- [io-8080-exec-10] o.e.x.controllers.CheckoutController     : Persistent cart cleared for user ****@****.***.
2025-06-29 19:57:21.851 DEBUG [0a492f36-6bff-4def-b092-b00d406f8df0] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing DELETE /api/cart/remove/16
2025-06-29 19:57:21.939 DEBUG [0a492f36-6bff-4def-b092-b00d406f8df0] 22644 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 19:57:21.941 DEBUG [0a492f36-6bff-4def-b092-b00d406f8df0] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured DELETE /api/cart/remove/16
2025-06-29 19:57:22.023  INFO [0a492f36-6bff-4def-b092-b00d406f8df0] 22644 --- [nio-8080-exec-9] o.e.x.controllers.CartController         : User ****@****.*** request to remove flight ID 16 from persistent cart
2025-06-29 19:57:22.033  WARN [0a492f36-6bff-4def-b092-b00d406f8df0] 22644 --- [nio-8080-exec-9] o.e.xlr8travel.services.CartServiceImpl  : Attempted to remove flight ID 16 not found in cart for user ****@****.***
2025-06-29 19:57:22.036  WARN [0a492f36-6bff-4def-b092-b00d406f8df0] 22644 --- [nio-8080-exec-9] o.e.x.controllers.CartController         : Attempted to remove flight ID 16 not found in persistent cart for user ****@****.***
2025-06-29 19:57:22.045 DEBUG [bc3af035-3957-4ee0-959b-472ce58088e4] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 19:57:22.146 DEBUG [bc3af035-3957-4ee0-959b-472ce58088e4] 22644 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 19:57:22.147 DEBUG [bc3af035-3957-4ee0-959b-472ce58088e4] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 19:57:22.148  INFO [bc3af035-3957-4ee0-959b-472ce58088e4] 22644 --- [nio-8080-exec-2] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 19:57:22.233  INFO [bc3af035-3957-4ee0-959b-472ce58088e4] 22644 --- [nio-8080-exec-2] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 19:57:39.623 DEBUG [eff9f90e-6ce0-4c3f-b9b6-9e3c8358087e] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 19:57:39.730 DEBUG [eff9f90e-6ce0-4c3f-b9b6-9e3c8358087e] 22644 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 19:57:39.732 DEBUG [eff9f90e-6ce0-4c3f-b9b6-9e3c8358087e] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 19:57:39.824  INFO [eff9f90e-6ce0-4c3f-b9b6-9e3c8358087e] 22644 --- [nio-8080-exec-3] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 19:57:39.825  INFO [eff9f90e-6ce0-4c3f-b9b6-9e3c8358087e] 22644 --- [nio-8080-exec-3] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 19:57:39.831  INFO [eff9f90e-6ce0-4c3f-b9b6-9e3c8358087e] 22644 --- [nio-8080-exec-3] o.e.x.services.TicketServiceImpl         : Found 1 tickets eligible for check-in for user 4
2025-06-29 19:57:39.853 DEBUG [dbb73689-a851-4630-930a-94768b96f461] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 19:57:39.952 DEBUG [dbb73689-a851-4630-930a-94768b96f461] 22644 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 19:57:39.955 DEBUG [dbb73689-a851-4630-930a-94768b96f461] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 19:57:40.058  INFO [dbb73689-a851-4630-930a-94768b96f461] 22644 --- [nio-8080-exec-1] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 19:57:40.059  INFO [dbb73689-a851-4630-930a-94768b96f461] 22644 --- [nio-8080-exec-1] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 19:57:40.082  INFO [dbb73689-a851-4630-930a-94768b96f461] 22644 --- [nio-8080-exec-1] o.e.x.services.TicketServiceImpl         : Found 1 tickets eligible for check-in for user 4
2025-06-29 19:57:42.272 DEBUG [e561b08d-3167-413b-95b3-4f69a58492e2] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 19:57:42.382 DEBUG [e561b08d-3167-413b-95b3-4f69a58492e2] 22644 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 19:57:42.384 DEBUG [e561b08d-3167-413b-95b3-4f69a58492e2] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 19:57:42.385  INFO [e561b08d-3167-413b-95b3-4f69a58492e2] 22644 --- [nio-8080-exec-8] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 19:57:42.385  INFO [e561b08d-3167-413b-95b3-4f69a58492e2] 22644 --- [nio-8080-exec-8] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 19:57:42.429 DEBUG [4809d4de-b829-43e8-9ca8-ca186072047f] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 19:57:42.523 DEBUG [4809d4de-b829-43e8-9ca8-ca186072047f] 22644 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 19:57:42.526 DEBUG [4809d4de-b829-43e8-9ca8-ca186072047f] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 19:57:42.526  INFO [4809d4de-b829-43e8-9ca8-ca186072047f] 22644 --- [io-8080-exec-10] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 19:57:42.527  INFO [4809d4de-b829-43e8-9ca8-ca186072047f] 22644 --- [io-8080-exec-10] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 19:58:11.322 DEBUG [f712422f-3c6a-4b58-a252-2373a2f1b803] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 19:58:11.429 DEBUG [f712422f-3c6a-4b58-a252-2373a2f1b803] 22644 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 19:58:11.431 DEBUG [f712422f-3c6a-4b58-a252-2373a2f1b803] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 19:58:11.432  INFO [f712422f-3c6a-4b58-a252-2373a2f1b803] 22644 --- [nio-8080-exec-9] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 19:58:11.432  INFO [f712422f-3c6a-4b58-a252-2373a2f1b803] 22644 --- [nio-8080-exec-9] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 19:58:11.478 DEBUG [bb90b99e-55b8-44c5-9e82-676167bd5941] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 19:58:11.575 DEBUG [bb90b99e-55b8-44c5-9e82-676167bd5941] 22644 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 19:58:11.577 DEBUG [bb90b99e-55b8-44c5-9e82-676167bd5941] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 19:58:11.577  INFO [bb90b99e-55b8-44c5-9e82-676167bd5941] 22644 --- [nio-8080-exec-2] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 19:58:11.577  INFO [bb90b99e-55b8-44c5-9e82-676167bd5941] 22644 --- [nio-8080-exec-2] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 19:58:54.432 DEBUG [02527247-2777-4db6-b0fa-da9a8b608104] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/nearby?origin=OTP
2025-06-29 19:58:54.435 DEBUG [02527247-2777-4db6-b0fa-da9a8b608104] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/nearby?origin=OTP
2025-06-29 19:58:54.437  INFO [02527247-2777-4db6-b0fa-da9a8b608104] 22644 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Received request for nearby flights from origin: OTP, departureDate: null
2025-06-29 19:58:54.439  INFO [02527247-2777-4db6-b0fa-da9a8b608104] 22644 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Using search date: 2025-06-29
2025-06-29 19:58:54.453  INFO [02527247-2777-4db6-b0fa-da9a8b608104] 22644 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Cache key: OTP-2025-06-29
2025-06-29 19:58:54.457  INFO [02527247-2777-4db6-b0fa-da9a8b608104] 22644 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Returning cached nearby flights for origin: OTP, found 6 flights
2025-06-29 19:58:54.472 DEBUG [02527247-2777-4db6-b0fa-da9a8b608104] 22644 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:01:23.020 DEBUG [bd0905ee-34aa-46af-ad88-559788b7db6d] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-29 20:01:23.022 DEBUG [bd0905ee-34aa-46af-ad88-559788b7db6d] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-29 20:01:23.023  INFO [bd0905ee-34aa-46af-ad88-559788b7db6d] 22644 --- [nio-8080-exec-5] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris
2025-06-29 20:01:23.029  INFO [bd0905ee-34aa-46af-ad88-559788b7db6d] 22644 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-29 20:01:23.029  INFO [bd0905ee-34aa-46af-ad88-559788b7db6d] 22644 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-29 20:01:23.030 DEBUG [bd0905ee-34aa-46af-ad88-559788b7db6d] 22644 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-29).    For example, if today is 2025-06-29, a good departure date would be between 2025-07-06 and 2025-07-13, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris";
2025-06-29 20:01:23.032  INFO [bd0905ee-34aa-46af-ad88-559788b7db6d] 22644 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-29 20:01:23.032  INFO [bd0905ee-34aa-46af-ad88-559788b7db6d] 22644 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-29 20:01:23.032  INFO [bd0905ee-34aa-46af-ad88-559788b7db6d] 22644 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-29 20:01:23.033  INFO [bd0905ee-34aa-46af-ad88-559788b7db6d] 22644 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 20:01:23.033  INFO [bd0905ee-34aa-46af-ad88-559788b7db6d] 22644 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-29 20:01:23.035  INFO [bd0905ee-34aa-46af-ad88-559788b7db6d] 22644 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-29 20:01:23.035  INFO [bd0905ee-34aa-46af-ad88-559788b7db6d] 22644 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-29 20:01:23.036  INFO [bd0905ee-34aa-46af-ad88-559788b7db6d] 22644 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-29 20:01:23.036  INFO [bd0905ee-34aa-46af-ad88-559788b7db6d] 22644 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-29 20:01:24.884  INFO [bd0905ee-34aa-46af-ad88-559788b7db6d] 22644 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-29 20:01:24.884  INFO [bd0905ee-34aa-46af-ad88-559788b7db6d] 22644 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Response length: 195 characters
2025-06-29 20:01:24.885 DEBUG [bd0905ee-34aa-46af-ad88-559788b7db6d] 22644 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-06",
  "returnDate": "2025-07-08",
  "tripType": "roundTrip",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-29 20:01:24.886 DEBUG [bd0905ee-34aa-46af-ad88-559788b7db6d] 22644 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-29 20:01:24.886 DEBUG [bd0905ee-34aa-46af-ad88-559788b7db6d] 22644 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-29 20:01:24.886 DEBUG [bd0905ee-34aa-46af-ad88-559788b7db6d] 22644 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-29 20:01:24.887 DEBUG [bd0905ee-34aa-46af-ad88-559788b7db6d] 22644 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 20:01:24.887  INFO [bd0905ee-34aa-46af-ad88-559788b7db6d] 22644 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 20:01:24.887  INFO [bd0905ee-34aa-46af-ad88-559788b7db6d] 22644 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-06, returnDate=2025-07-08, tripType=roundTrip, adults=1, children=0, infants=0
2025-06-29 20:01:24.887  INFO [bd0905ee-34aa-46af-ad88-559788b7db6d] 22644 --- [nio-8080-exec-5] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-29 20:01:24.888 DEBUG [bd0905ee-34aa-46af-ad88-559788b7db6d] 22644 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:01:26.287 DEBUG [d3dd90b5-f9d2-47ca-89f5-ef1c0243f235] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-29 20:01:26.290 DEBUG [d3dd90b5-f9d2-47ca-89f5-ef1c0243f235] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-29 20:01:26.292  INFO [d3dd90b5-f9d2-47ca-89f5-ef1c0243f235] 22644 --- [nio-8080-exec-7] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris one way
2025-06-29 20:01:26.292  INFO [d3dd90b5-f9d2-47ca-89f5-ef1c0243f235] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-29 20:01:26.293  INFO [d3dd90b5-f9d2-47ca-89f5-ef1c0243f235] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-29 20:01:26.293 DEBUG [d3dd90b5-f9d2-47ca-89f5-ef1c0243f235] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-29).    For example, if today is 2025-06-29, a good departure date would be between 2025-07-06 and 2025-07-13, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris one way";
2025-06-29 20:01:26.296  INFO [d3dd90b5-f9d2-47ca-89f5-ef1c0243f235] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-29 20:01:26.296  INFO [d3dd90b5-f9d2-47ca-89f5-ef1c0243f235] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-29 20:01:26.296  INFO [d3dd90b5-f9d2-47ca-89f5-ef1c0243f235] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-29 20:01:26.297  INFO [d3dd90b5-f9d2-47ca-89f5-ef1c0243f235] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 20:01:26.297  INFO [d3dd90b5-f9d2-47ca-89f5-ef1c0243f235] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-29 20:01:26.298  INFO [d3dd90b5-f9d2-47ca-89f5-ef1c0243f235] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-29 20:01:26.299  INFO [d3dd90b5-f9d2-47ca-89f5-ef1c0243f235] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-29 20:01:26.299  INFO [d3dd90b5-f9d2-47ca-89f5-ef1c0243f235] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-29 20:01:26.299  INFO [d3dd90b5-f9d2-47ca-89f5-ef1c0243f235] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-29 20:01:27.897  INFO [d3dd90b5-f9d2-47ca-89f5-ef1c0243f235] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-29 20:01:27.898  INFO [d3dd90b5-f9d2-47ca-89f5-ef1c0243f235] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Response length: 184 characters
2025-06-29 20:01:27.898 DEBUG [d3dd90b5-f9d2-47ca-89f5-ef1c0243f235] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-06",
  "returnDate": null,
  "tripType": "oneWay",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-29 20:01:27.899 DEBUG [d3dd90b5-f9d2-47ca-89f5-ef1c0243f235] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-29 20:01:27.900 DEBUG [d3dd90b5-f9d2-47ca-89f5-ef1c0243f235] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-29 20:01:27.901 DEBUG [d3dd90b5-f9d2-47ca-89f5-ef1c0243f235] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-29 20:01:27.901 DEBUG [d3dd90b5-f9d2-47ca-89f5-ef1c0243f235] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 20:01:27.901  INFO [d3dd90b5-f9d2-47ca-89f5-ef1c0243f235] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 20:01:27.901  INFO [d3dd90b5-f9d2-47ca-89f5-ef1c0243f235] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-06, returnDate=null, tripType=oneWay, adults=1, children=0, infants=0
2025-06-29 20:01:27.902  INFO [d3dd90b5-f9d2-47ca-89f5-ef1c0243f235] 22644 --- [nio-8080-exec-7] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-29 20:01:27.904 DEBUG [d3dd90b5-f9d2-47ca-89f5-ef1c0243f235] 22644 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:01:31.111 DEBUG [47cb9b42-ea8e-4911-a68f-3cf428ef4cdc] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 20:01:31.235 DEBUG [47cb9b42-ea8e-4911-a68f-3cf428ef4cdc] 22644 --- [nio-8080-exec-4] o.s.s.core.session.SessionRegistryImpl   : Registering session 89B128034CA4359A0004C83F9F8373BE, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}])
2025-06-29 20:01:31.236 DEBUG [47cb9b42-ea8e-4911-a68f-3cf428ef4cdc] 22644 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@46bd5931]
2025-06-29 20:01:31.237 DEBUG [47cb9b42-ea8e-4911-a68f-3cf428ef4cdc] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me
2025-06-29 20:01:31.238  INFO [47cb9b42-ea8e-4911-a68f-3cf428ef4cdc] 22644 --- [nio-8080-exec-4] o.e.x.controllers.UserController         : Request received for current user details: ****@****.***
2025-06-29 20:01:31.354  INFO [47cb9b42-ea8e-4911-a68f-3cf428ef4cdc] 22644 --- [nio-8080-exec-4] o.e.x.controllers.UserController         : Returning details for user: ****@****.***
2025-06-29 20:01:31.414 DEBUG [9433dcc8-9366-4689-b6a4-83709a76c6bd] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 20:01:31.427 DEBUG [1ff852de-87eb-455a-8b77-d354b3253c99] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:01:31.428 DEBUG [001173e7-0983-4edf-92b0-6a3de962e61f] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:01:31.429 DEBUG [1ff852de-87eb-455a-8b77-d354b3253c99] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:01:31.431  INFO [1ff852de-87eb-455a-8b77-d354b3253c99] 22644 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 20:01:31.432  INFO [1ff852de-87eb-455a-8b77-d354b3253c99] 22644 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 20:01:31.513  INFO [1ff852de-87eb-455a-8b77-d354b3253c99] 22644 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 20:01:31.515 DEBUG [1ff852de-87eb-455a-8b77-d354b3253c99] 22644 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:01:31.524 DEBUG [4197986a-7082-46da-9b82-907eca884802] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:01:31.526 DEBUG [4197986a-7082-46da-9b82-907eca884802] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:01:31.527  INFO [4197986a-7082-46da-9b82-907eca884802] 22644 --- [nio-8080-exec-9] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 20:01:31.528  INFO [4197986a-7082-46da-9b82-907eca884802] 22644 --- [nio-8080-exec-9] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 20:01:31.569 DEBUG [edb396b7-98fc-479c-999c-67f64fb9cdda] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 20:01:31.573 DEBUG [edb396b7-98fc-479c-999c-67f64fb9cdda] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 20:01:31.575  INFO [edb396b7-98fc-479c-999c-67f64fb9cdda] 22644 --- [nio-8080-exec-2] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 20:01:31.589 DEBUG [9433dcc8-9366-4689-b6a4-83709a76c6bd] 22644 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:01:31.592 DEBUG [9433dcc8-9366-4689-b6a4-83709a76c6bd] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 20:01:31.608  INFO [4197986a-7082-46da-9b82-907eca884802] 22644 --- [nio-8080-exec-9] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 20:01:31.609 DEBUG [001173e7-0983-4edf-92b0-6a3de962e61f] 22644 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:01:31.611 DEBUG [001173e7-0983-4edf-92b0-6a3de962e61f] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:01:31.610 DEBUG [4197986a-7082-46da-9b82-907eca884802] 22644 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:01:31.612  INFO [001173e7-0983-4edf-92b0-6a3de962e61f] 22644 --- [io-8080-exec-10] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:01:31.727  WARN [9433dcc8-9366-4689-b6a4-83709a76c6bd] 22644 --- [nio-8080-exec-6] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 20:01:31.729  WARN [9433dcc8-9366-4689-b6a4-83709a76c6bd] 22644 --- [nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 20:01:31.735 DEBUG [190aab1e-9712-455b-bf35-4634802f0d80] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 20:01:31.746  INFO [001173e7-0983-4edf-92b0-6a3de962e61f] 22644 --- [io-8080-exec-10] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 20:01:31.756  INFO [edb396b7-98fc-479c-999c-67f64fb9cdda] 22644 --- [nio-8080-exec-2] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 20:01:31.757 DEBUG [edb396b7-98fc-479c-999c-67f64fb9cdda] 22644 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:01:31.763 DEBUG [e76b7d0a-82b8-4af9-abb0-d110a777dc40] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 20:01:31.765 DEBUG [e76b7d0a-82b8-4af9-abb0-d110a777dc40] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 20:01:31.766  INFO [e76b7d0a-82b8-4af9-abb0-d110a777dc40] 22644 --- [nio-8080-exec-1] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 20:01:31.770 DEBUG [b5f0b341-495e-4542-b4b4-df786384fb73] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:01:31.772 DEBUG [b5f0b341-495e-4542-b4b4-df786384fb73] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:01:31.773  INFO [b5f0b341-495e-4542-b4b4-df786384fb73] 22644 --- [nio-8080-exec-5] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 20:01:31.810  INFO [e76b7d0a-82b8-4af9-abb0-d110a777dc40] 22644 --- [nio-8080-exec-1] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 20:01:31.812 DEBUG [e76b7d0a-82b8-4af9-abb0-d110a777dc40] 22644 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:01:31.842 DEBUG [190aab1e-9712-455b-bf35-4634802f0d80] 22644 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:01:31.844 DEBUG [190aab1e-9712-455b-bf35-4634802f0d80] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 20:01:31.951  WARN [190aab1e-9712-455b-bf35-4634802f0d80] 22644 --- [nio-8080-exec-3] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 20:01:31.952  WARN [190aab1e-9712-455b-bf35-4634802f0d80] 22644 --- [nio-8080-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 20:01:32.002  INFO [b5f0b341-495e-4542-b4b4-df786384fb73] 22644 --- [nio-8080-exec-5] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 20:01:32.003 DEBUG [b5f0b341-495e-4542-b4b4-df786384fb73] 22644 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:01:32.009 DEBUG [75dd9ed9-ffbd-444b-ba65-e77222232fd4] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:01:32.011 DEBUG [75dd9ed9-ffbd-444b-ba65-e77222232fd4] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:01:32.012  INFO [75dd9ed9-ffbd-444b-ba65-e77222232fd4] 22644 --- [nio-8080-exec-7] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 20:01:32.064  INFO [75dd9ed9-ffbd-444b-ba65-e77222232fd4] 22644 --- [nio-8080-exec-7] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 20:01:32.066 DEBUG [75dd9ed9-ffbd-444b-ba65-e77222232fd4] 22644 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:01:40.405 DEBUG [e10e9141-1e1f-4128-ba48-c5b69d457f14] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:01:40.498 DEBUG [e10e9141-1e1f-4128-ba48-c5b69d457f14] 22644 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:01:40.501 DEBUG [e10e9141-1e1f-4128-ba48-c5b69d457f14] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:01:40.502  INFO [e10e9141-1e1f-4128-ba48-c5b69d457f14] 22644 --- [nio-8080-exec-4] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:01:40.502  INFO [e10e9141-1e1f-4128-ba48-c5b69d457f14] 22644 --- [nio-8080-exec-4] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:01:40.544 DEBUG [b2c14647-86c4-429b-ace5-4b448c3abd8c] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:01:40.660 DEBUG [b2c14647-86c4-429b-ace5-4b448c3abd8c] 22644 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:01:40.663 DEBUG [b2c14647-86c4-429b-ace5-4b448c3abd8c] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:01:40.664  INFO [b2c14647-86c4-429b-ace5-4b448c3abd8c] 22644 --- [nio-8080-exec-8] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:01:40.664  INFO [b2c14647-86c4-429b-ace5-4b448c3abd8c] 22644 --- [nio-8080-exec-8] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:01:40.708 DEBUG [ffff5279-1d6a-43d6-bc2b-44ddf2e46467] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:01:40.810 DEBUG [ffff5279-1d6a-43d6-bc2b-44ddf2e46467] 22644 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:01:40.813 DEBUG [ffff5279-1d6a-43d6-bc2b-44ddf2e46467] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:01:40.814  INFO [ffff5279-1d6a-43d6-bc2b-44ddf2e46467] 22644 --- [nio-8080-exec-9] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:01:40.814  INFO [ffff5279-1d6a-43d6-bc2b-44ddf2e46467] 22644 --- [nio-8080-exec-9] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:01:44.958 DEBUG [87bd0d1e-e57a-45a6-86da-7e4e59de6c7e] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/cart/add
2025-06-29 20:01:45.065 DEBUG [87bd0d1e-e57a-45a6-86da-7e4e59de6c7e] 22644 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:01:45.067 DEBUG [87bd0d1e-e57a-45a6-86da-7e4e59de6c7e] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/cart/add
2025-06-29 20:01:45.185  INFO [87bd0d1e-e57a-45a6-86da-7e4e59de6c7e] 22644 --- [nio-8080-exec-6] o.e.x.controllers.CartController         : User ****@****.*** request to add flight ID 16 to persistent cart
2025-06-29 20:01:45.189  INFO [87bd0d1e-e57a-45a6-86da-7e4e59de6c7e] 22644 --- [nio-8080-exec-6] o.e.x.controllers.CartController         : AddToCart request: flightId=16, seatNumber=1E, seatType=null, deferSeat=false, randomSeat=false
2025-06-29 20:01:45.196  INFO [87bd0d1e-e57a-45a6-86da-7e4e59de6c7e] 22644 --- [nio-8080-exec-6] o.e.xlr8travel.services.CartServiceImpl  : Added new flight ID 16 to cart for user ****@****.***
2025-06-29 20:01:45.216  INFO [87bd0d1e-e57a-45a6-86da-7e4e59de6c7e] 22644 --- [nio-8080-exec-6] o.e.x.controllers.CartController         : Flight ID 16 added/incremented in persistent cart for user ****@****.***.
2025-06-29 20:01:45.231 DEBUG [56dc2249-50aa-4f51-9e97-f448845db4b1] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:01:45.429 DEBUG [56dc2249-50aa-4f51-9e97-f448845db4b1] 22644 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:01:45.431 DEBUG [56dc2249-50aa-4f51-9e97-f448845db4b1] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:01:45.432  INFO [56dc2249-50aa-4f51-9e97-f448845db4b1] 22644 --- [io-8080-exec-10] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:01:45.581  INFO [56dc2249-50aa-4f51-9e97-f448845db4b1] 22644 --- [io-8080-exec-10] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 20:01:46.067 DEBUG [a1fb115a-338a-4cc5-bbfb-ea3c296c036d] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:01:46.196 DEBUG [a1fb115a-338a-4cc5-bbfb-ea3c296c036d] 22644 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:01:46.197 DEBUG [a1fb115a-338a-4cc5-bbfb-ea3c296c036d] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:01:46.198  INFO [a1fb115a-338a-4cc5-bbfb-ea3c296c036d] 22644 --- [nio-8080-exec-2] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:01:46.320  INFO [a1fb115a-338a-4cc5-bbfb-ea3c296c036d] 22644 --- [nio-8080-exec-2] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 20:01:46.328 DEBUG [d693a8bb-4f45-4851-8987-e349831566c6] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:01:46.443 DEBUG [d693a8bb-4f45-4851-8987-e349831566c6] 22644 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:01:46.445 DEBUG [d693a8bb-4f45-4851-8987-e349831566c6] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:01:46.446  INFO [d693a8bb-4f45-4851-8987-e349831566c6] 22644 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:01:46.591  INFO [d693a8bb-4f45-4851-8987-e349831566c6] 22644 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 20:01:48.187 DEBUG [00dba595-b01d-43eb-a046-eb9e43515c71] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:01:48.334 DEBUG [00dba595-b01d-43eb-a046-eb9e43515c71] 22644 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:01:48.336 DEBUG [00dba595-b01d-43eb-a046-eb9e43515c71] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:01:48.336  INFO [00dba595-b01d-43eb-a046-eb9e43515c71] 22644 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:01:48.463  INFO [00dba595-b01d-43eb-a046-eb9e43515c71] 22644 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 20:01:48.473 DEBUG [9b817695-4404-4f07-b89f-bee57e89869c] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:01:48.643 DEBUG [9b817695-4404-4f07-b89f-bee57e89869c] 22644 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:01:48.645 DEBUG [9b817695-4404-4f07-b89f-bee57e89869c] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:01:48.646  INFO [9b817695-4404-4f07-b89f-bee57e89869c] 22644 --- [nio-8080-exec-5] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:01:52.025  INFO [9b817695-4404-4f07-b89f-bee57e89869c] 22644 --- [nio-8080-exec-5] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 20:01:56.021 DEBUG [9e009603-9cfa-4fc3-8656-5c7bb447c163] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/checkout/create-payment-intent
2025-06-29 20:01:56.029 DEBUG [9e009603-9cfa-4fc3-8656-5c7bb447c163] 22644 --- [nio-8080-exec-7] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 20:01:56.035 DEBUG [9e009603-9cfa-4fc3-8656-5c7bb447c163] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/checkout/create-payment-intent
2025-06-29 20:01:56.044  INFO [9e009603-9cfa-4fc3-8656-5c7bb447c163] 22644 --- [nio-8080-exec-7] o.e.x.controllers.PaymentController      : Creating payment intent for amount: 23995 ron
2025-06-29 20:01:56.554  INFO [9e009603-9cfa-4fc3-8656-5c7bb447c163] 22644 --- [nio-8080-exec-7] o.e.x.controllers.PaymentController      : Payment intent created successfully: pi_3RfOc4Gf8s1WZJnq0VnQkbbc
2025-06-29 20:01:57.798 DEBUG [484d4295-19c7-458e-affd-317d387de510] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing POST /api/checkout/confirm
2025-06-29 20:01:57.937 DEBUG [484d4295-19c7-458e-affd-317d387de510] 22644 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:01:57.938 DEBUG [484d4295-19c7-458e-affd-317d387de510] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured POST /api/checkout/confirm
2025-06-29 20:01:57.940  INFO [484d4295-19c7-458e-affd-317d387de510] 22644 --- [nio-8080-exec-4] o.e.x.controllers.CheckoutController     : Received purchase confirmation request.
2025-06-29 20:01:58.053  INFO [484d4295-19c7-458e-affd-317d387de510] 22644 --- [nio-8080-exec-4] o.e.x.controllers.CheckoutController     : Processing purchase for user: ****@****.***
2025-06-29 20:01:58.062  INFO [484d4295-19c7-458e-affd-317d387de510] 22644 --- [nio-8080-exec-4] o.e.x.controllers.CheckoutController     : User ****@****.*** persistent cart has 1 items.
2025-06-29 20:01:58.062  WARN [484d4295-19c7-458e-affd-317d387de510] 22644 --- [nio-8080-exec-4] o.e.x.controllers.CheckoutController     : !!! SIMULATING successful payment processing for user ****@****.*** !!!
2025-06-29 20:01:58.063  INFO [484d4295-19c7-458e-affd-317d387de510] 22644 --- [nio-8080-exec-4] o.e.x.services.OrderServiceImpl          : Creating order from persistent cart for user: ****@****.***
2025-06-29 20:01:58.071  INFO [484d4295-19c7-458e-affd-317d387de510] 22644 --- [nio-8080-exec-4] o.e.x.services.OrderServiceImpl          : Order 2 created for user ****@****.***, status: PENDING_PAYMENT. Total: 37.99
2025-06-29 20:01:58.071  INFO [484d4295-19c7-458e-affd-317d387de510] 22644 --- [nio-8080-exec-4] o.e.x.services.OrderServiceImpl          : Created ticket with deferred seat selection (fallback) for flight XT-OTP-CDG-2 for user ****@****.***
2025-06-29 20:01:58.072  INFO [484d4295-19c7-458e-affd-317d387de510] 22644 --- [nio-8080-exec-4] o.e.x.services.OrderServiceImpl          : Ticket has baggage type: BAGGAGE_TYPE_WEIGHT_CARRY_ON_0
2025-06-29 20:01:59.263  INFO [484d4295-19c7-458e-affd-317d387de510] 22644 --- [nio-8080-exec-4] o.e.x.services.EmailServiceImpl          : Purchase confirmation email sent to ****@****.***
2025-06-29 20:01:59.264  INFO [484d4295-19c7-458e-affd-317d387de510] 22644 --- [nio-8080-exec-4] o.e.x.services.OrderServiceImpl          : Purchase confirmation email sent to user: ****@****.***
2025-06-29 20:01:59.280  INFO [484d4295-19c7-458e-affd-317d387de510] 22644 --- [nio-8080-exec-4] o.e.x.controllers.CheckoutController     : Order successfully created for user ****@****.***. Confirmation: 2
2025-06-29 20:01:59.285  INFO [484d4295-19c7-458e-affd-317d387de510] 22644 --- [nio-8080-exec-4] o.e.xlr8travel.services.CartServiceImpl  : Clearing 1 items from cart for user ****@****.***
2025-06-29 20:01:59.303  INFO [484d4295-19c7-458e-affd-317d387de510] 22644 --- [nio-8080-exec-4] o.e.x.controllers.CheckoutController     : Persistent cart cleared for user ****@****.***.
2025-06-29 20:01:59.316 DEBUG [0d9e57c6-20e0-438d-a119-f2497fd32cd7] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing DELETE /api/cart/remove/16
2025-06-29 20:01:59.426 DEBUG [0d9e57c6-20e0-438d-a119-f2497fd32cd7] 22644 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:01:59.427 DEBUG [0d9e57c6-20e0-438d-a119-f2497fd32cd7] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured DELETE /api/cart/remove/16
2025-06-29 20:01:59.520  INFO [0d9e57c6-20e0-438d-a119-f2497fd32cd7] 22644 --- [nio-8080-exec-8] o.e.x.controllers.CartController         : User ****@****.*** request to remove flight ID 16 from persistent cart
2025-06-29 20:01:59.529  WARN [0d9e57c6-20e0-438d-a119-f2497fd32cd7] 22644 --- [nio-8080-exec-8] o.e.xlr8travel.services.CartServiceImpl  : Attempted to remove flight ID 16 not found in cart for user ****@****.***
2025-06-29 20:01:59.530  WARN [0d9e57c6-20e0-438d-a119-f2497fd32cd7] 22644 --- [nio-8080-exec-8] o.e.x.controllers.CartController         : Attempted to remove flight ID 16 not found in persistent cart for user ****@****.***
2025-06-29 20:01:59.541 DEBUG [d42161d0-a5d0-4188-8ddb-de4617d59b85] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:01:59.662 DEBUG [d42161d0-a5d0-4188-8ddb-de4617d59b85] 22644 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:01:59.663 DEBUG [d42161d0-a5d0-4188-8ddb-de4617d59b85] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:01:59.664  INFO [d42161d0-a5d0-4188-8ddb-de4617d59b85] 22644 --- [nio-8080-exec-9] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:01:59.762  INFO [d42161d0-a5d0-4188-8ddb-de4617d59b85] 22644 --- [nio-8080-exec-9] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 20:02:01.054 DEBUG [b45600a5-6eb8-46e8-97a0-f1de650ae0ad] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 20:02:01.161 DEBUG [b45600a5-6eb8-46e8-97a0-f1de650ae0ad] 22644 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:02:01.163 DEBUG [b45600a5-6eb8-46e8-97a0-f1de650ae0ad] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 20:02:01.253  INFO [b45600a5-6eb8-46e8-97a0-f1de650ae0ad] 22644 --- [nio-8080-exec-6] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 20:02:01.253  INFO [b45600a5-6eb8-46e8-97a0-f1de650ae0ad] 22644 --- [nio-8080-exec-6] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 20:02:01.259  INFO [b45600a5-6eb8-46e8-97a0-f1de650ae0ad] 22644 --- [nio-8080-exec-6] o.e.x.services.TicketServiceImpl         : Found 2 tickets eligible for check-in for user 4
2025-06-29 20:02:01.267 DEBUG [f44c6302-e326-4c0a-9b69-a082691342ff] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 20:02:01.365 DEBUG [f44c6302-e326-4c0a-9b69-a082691342ff] 22644 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:02:01.368 DEBUG [f44c6302-e326-4c0a-9b69-a082691342ff] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 20:02:01.453  INFO [f44c6302-e326-4c0a-9b69-a082691342ff] 22644 --- [io-8080-exec-10] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 20:02:01.454  INFO [f44c6302-e326-4c0a-9b69-a082691342ff] 22644 --- [io-8080-exec-10] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 20:02:01.459  INFO [f44c6302-e326-4c0a-9b69-a082691342ff] 22644 --- [io-8080-exec-10] o.e.x.services.TicketServiceImpl         : Found 2 tickets eligible for check-in for user 4
2025-06-29 20:02:04.755 DEBUG [9c39b59f-c8a2-4f92-b6c4-e9374ade20ed] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:02:04.863 DEBUG [9c39b59f-c8a2-4f92-b6c4-e9374ade20ed] 22644 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:02:04.865 DEBUG [9c39b59f-c8a2-4f92-b6c4-e9374ade20ed] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:02:04.866  INFO [9c39b59f-c8a2-4f92-b6c4-e9374ade20ed] 22644 --- [nio-8080-exec-2] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:02:04.866  INFO [9c39b59f-c8a2-4f92-b6c4-e9374ade20ed] 22644 --- [nio-8080-exec-2] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:02:04.913 DEBUG [f7521697-0e27-4895-a10f-3ce189f7a515] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:02:05.036 DEBUG [f7521697-0e27-4895-a10f-3ce189f7a515] 22644 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:02:05.040 DEBUG [f7521697-0e27-4895-a10f-3ce189f7a515] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:02:05.041  INFO [f7521697-0e27-4895-a10f-3ce189f7a515] 22644 --- [nio-8080-exec-1] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:02:05.041  INFO [f7521697-0e27-4895-a10f-3ce189f7a515] 22644 --- [nio-8080-exec-1] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:04:11.678 DEBUG [b067939b-1db0-431c-92a6-3f2263bcb751] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 20:04:12.074 DEBUG [b067939b-1db0-431c-92a6-3f2263bcb751] 22644 --- [nio-8080-exec-5] o.s.s.core.session.SessionRegistryImpl   : Registering session 72B330321872604F15CBA9B50D073D84, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}])
2025-06-29 20:04:12.075 DEBUG [b067939b-1db0-431c-92a6-3f2263bcb751] 22644 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@153a83ed]
2025-06-29 20:04:12.078 DEBUG [b067939b-1db0-431c-92a6-3f2263bcb751] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me
2025-06-29 20:04:12.079  INFO [b067939b-1db0-431c-92a6-3f2263bcb751] 22644 --- [nio-8080-exec-5] o.e.x.controllers.UserController         : Request received for current user details: ****@****.***
2025-06-29 20:04:12.240  INFO [b067939b-1db0-431c-92a6-3f2263bcb751] 22644 --- [nio-8080-exec-5] o.e.x.controllers.UserController         : Returning details for user: ****@****.***
2025-06-29 20:04:12.315 DEBUG [88f4a0bc-f435-482c-993b-6e10b9206234] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 20:04:12.315 DEBUG [987ed83a-3ced-4f3d-96ae-c11cdcf5c714] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 20:04:12.318 DEBUG [37019240-00bb-49e7-92f0-f05fe596bd3a] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:04:12.537 DEBUG [88f4a0bc-f435-482c-993b-6e10b9206234] 22644 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:04:12.541 DEBUG [88f4a0bc-f435-482c-993b-6e10b9206234] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 20:04:12.541 DEBUG [987ed83a-3ced-4f3d-96ae-c11cdcf5c714] 22644 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:04:12.543 DEBUG [987ed83a-3ced-4f3d-96ae-c11cdcf5c714] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 20:04:12.551 DEBUG [37019240-00bb-49e7-92f0-f05fe596bd3a] 22644 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:04:12.553 DEBUG [37019240-00bb-49e7-92f0-f05fe596bd3a] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:04:12.554  INFO [37019240-00bb-49e7-92f0-f05fe596bd3a] 22644 --- [nio-8080-exec-8] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:04:12.724  INFO [88f4a0bc-f435-482c-993b-6e10b9206234] 22644 --- [nio-8080-exec-4] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 20:04:12.725  WARN [987ed83a-3ced-4f3d-96ae-c11cdcf5c714] 22644 --- [nio-8080-exec-7] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 20:04:12.725  INFO [88f4a0bc-f435-482c-993b-6e10b9206234] 22644 --- [nio-8080-exec-4] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 20:04:12.726  WARN [987ed83a-3ced-4f3d-96ae-c11cdcf5c714] 22644 --- [nio-8080-exec-7] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 20:04:12.740 DEBUG [84afb4b1-ae65-49fd-994d-158f4d3c84f2] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 20:04:12.749  INFO [88f4a0bc-f435-482c-993b-6e10b9206234] 22644 --- [nio-8080-exec-4] o.e.x.services.TicketServiceImpl         : Found 2 tickets eligible for check-in for user 4
2025-06-29 20:04:12.764 DEBUG [87a3fa8f-6ec3-4725-997c-d7151c0bd333] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 20:04:12.775  INFO [37019240-00bb-49e7-92f0-f05fe596bd3a] 22644 --- [nio-8080-exec-8] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 20:04:12.950 DEBUG [84afb4b1-ae65-49fd-994d-158f4d3c84f2] 22644 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:04:12.952 DEBUG [84afb4b1-ae65-49fd-994d-158f4d3c84f2] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 20:04:12.963 DEBUG [87a3fa8f-6ec3-4725-997c-d7151c0bd333] 22644 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:04:12.966 DEBUG [87a3fa8f-6ec3-4725-997c-d7151c0bd333] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 20:04:13.080  WARN [84afb4b1-ae65-49fd-994d-158f4d3c84f2] 22644 --- [nio-8080-exec-9] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 20:04:13.081  WARN [84afb4b1-ae65-49fd-994d-158f4d3c84f2] 22644 --- [nio-8080-exec-9] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 20:04:13.091  INFO [87a3fa8f-6ec3-4725-997c-d7151c0bd333] 22644 --- [nio-8080-exec-6] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 20:04:13.091  INFO [87a3fa8f-6ec3-4725-997c-d7151c0bd333] 22644 --- [nio-8080-exec-6] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 20:04:13.097  INFO [87a3fa8f-6ec3-4725-997c-d7151c0bd333] 22644 --- [nio-8080-exec-6] o.e.x.services.TicketServiceImpl         : Found 2 tickets eligible for check-in for user 4
2025-06-29 20:04:14.681 DEBUG [f1d14f35-68a8-4e53-925c-d0f3459ab033] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:04:14.792 DEBUG [f1d14f35-68a8-4e53-925c-d0f3459ab033] 22644 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:04:14.794 DEBUG [f1d14f35-68a8-4e53-925c-d0f3459ab033] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:04:14.796  INFO [f1d14f35-68a8-4e53-925c-d0f3459ab033] 22644 --- [io-8080-exec-10] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:04:14.796  INFO [f1d14f35-68a8-4e53-925c-d0f3459ab033] 22644 --- [io-8080-exec-10] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:04:14.847 DEBUG [82f60f55-39ef-4a86-8ccb-59717d2bbb00] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:04:14.969 DEBUG [82f60f55-39ef-4a86-8ccb-59717d2bbb00] 22644 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:04:14.972 DEBUG [82f60f55-39ef-4a86-8ccb-59717d2bbb00] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:04:14.972  INFO [82f60f55-39ef-4a86-8ccb-59717d2bbb00] 22644 --- [nio-8080-exec-2] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:04:14.973  INFO [82f60f55-39ef-4a86-8ccb-59717d2bbb00] 22644 --- [nio-8080-exec-2] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:04:17.327 DEBUG [7037e681-863d-4cad-9d10-74d649c45dd2] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/check-in/3/with-seat
2025-06-29 20:04:17.430 DEBUG [7037e681-863d-4cad-9d10-74d649c45dd2] 22644 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:04:17.433 DEBUG [7037e681-863d-4cad-9d10-74d649c45dd2] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/check-in/3/with-seat
2025-06-29 20:04:17.542  INFO [7037e681-863d-4cad-9d10-74d649c45dd2] 22644 --- [nio-8080-exec-1] o.e.x.controllers.CheckinController      : Checking in ticket 3 with seat for user: ****@****.***
2025-06-29 20:04:17.548  INFO [7037e681-863d-4cad-9d10-74d649c45dd2] 22644 --- [nio-8080-exec-1] o.e.x.services.TicketServiceImpl         : Checking in ticket 3 with seat 6C of type SEAT_TYPE_STANDARD
2025-06-29 20:04:17.549  INFO [7037e681-863d-4cad-9d10-74d649c45dd2] 22644 --- [nio-8080-exec-1] o.e.x.services.TicketServiceImpl         : Checking if seat 6C is booked for flight 16
2025-06-29 20:04:17.558  INFO [7037e681-863d-4cad-9d10-74d649c45dd2] 22644 --- [nio-8080-exec-1] o.e.x.services.TicketServiceImpl         : Successfully checked in ticket 3 with seat 6C
2025-06-29 20:04:19.495 DEBUG [69400b9c-f630-45f8-ada1-20d9b5eaba7c] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/nearby?origin=OTP
2025-06-29 20:04:19.496 DEBUG [69400b9c-f630-45f8-ada1-20d9b5eaba7c] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/nearby?origin=OTP
2025-06-29 20:04:19.497  INFO [69400b9c-f630-45f8-ada1-20d9b5eaba7c] 22644 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : Received request for nearby flights from origin: OTP, departureDate: null
2025-06-29 20:04:19.497  INFO [69400b9c-f630-45f8-ada1-20d9b5eaba7c] 22644 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : Using search date: 2025-06-29
2025-06-29 20:04:19.497  INFO [69400b9c-f630-45f8-ada1-20d9b5eaba7c] 22644 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : Cache key: OTP-2025-06-29
2025-06-29 20:04:19.498  INFO [69400b9c-f630-45f8-ada1-20d9b5eaba7c] 22644 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : No valid cache found. Searching nearby flights from origin: OTP, after date: 2025-06-29
2025-06-29 20:04:19.498  INFO [69400b9c-f630-45f8-ada1-20d9b5eaba7c] 22644 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : Calling flightService.findByOriginAndDepartureDateAfter for origin: OTP, date: 2025-06-29
2025-06-29 20:04:19.554  INFO [69400b9c-f630-45f8-ada1-20d9b5eaba7c] 22644 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : Database query completed, found 16 flights
2025-06-29 20:04:19.555  INFO [69400b9c-f630-45f8-ada1-20d9b5eaba7c] 22644 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : Converting 16 Flight entities to FlightDTOs
2025-06-29 20:04:19.555  INFO [69400b9c-f630-45f8-ada1-20d9b5eaba7c] 22644 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : Converted to 16 FlightDTOs
2025-06-29 20:04:19.555  INFO [69400b9c-f630-45f8-ada1-20d9b5eaba7c] 22644 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : Grouping flights by destination country
2025-06-29 20:04:19.555  INFO [69400b9c-f630-45f8-ada1-20d9b5eaba7c] 22644 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : Grouped flights into 7 countries
2025-06-29 20:04:19.556  INFO [69400b9c-f630-45f8-ada1-20d9b5eaba7c] 22644 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : Selecting diverse flights - one from each country first
2025-06-29 20:04:19.556  INFO [69400b9c-f630-45f8-ada1-20d9b5eaba7c] 22644 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : Adding first flight from Greece (has 2 flights)
2025-06-29 20:04:19.556  INFO [69400b9c-f630-45f8-ada1-20d9b5eaba7c] 22644 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : Adding first flight from Netherlands (has 2 flights)
2025-06-29 20:04:19.556  INFO [69400b9c-f630-45f8-ada1-20d9b5eaba7c] 22644 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : Adding first flight from Italy (has 2 flights)
2025-06-29 20:04:19.556  INFO [69400b9c-f630-45f8-ada1-20d9b5eaba7c] 22644 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : Adding first flight from United Kingdom (has 2 flights)
2025-06-29 20:04:19.557  INFO [69400b9c-f630-45f8-ada1-20d9b5eaba7c] 22644 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : Adding first flight from France (has 2 flights)
2025-06-29 20:04:19.557  INFO [69400b9c-f630-45f8-ada1-20d9b5eaba7c] 22644 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : Adding first flight from Switzerland (has 2 flights)
2025-06-29 20:04:19.557  INFO [69400b9c-f630-45f8-ada1-20d9b5eaba7c] 22644 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : Reached 6 flights after first pass, stopping
2025-06-29 20:04:19.557  INFO [69400b9c-f630-45f8-ada1-20d9b5eaba7c] 22644 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : Caching 6 diverse flights with key: OTP-2025-06-29
2025-06-29 20:04:19.557  INFO [69400b9c-f630-45f8-ada1-20d9b5eaba7c] 22644 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : Returning 6 diverse nearby flights from: OTP
2025-06-29 20:04:19.559 DEBUG [69400b9c-f630-45f8-ada1-20d9b5eaba7c] 22644 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:04:21.093 DEBUG [94f6eea0-f241-4f03-9ea4-4a8ab4a7756c] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 20:04:21.214 DEBUG [94f6eea0-f241-4f03-9ea4-4a8ab4a7756c] 22644 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:04:21.217 DEBUG [94f6eea0-f241-4f03-9ea4-4a8ab4a7756c] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 20:04:21.324  INFO [94f6eea0-f241-4f03-9ea4-4a8ab4a7756c] 22644 --- [nio-8080-exec-5] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 20:04:21.325  INFO [94f6eea0-f241-4f03-9ea4-4a8ab4a7756c] 22644 --- [nio-8080-exec-5] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 20:04:21.331  INFO [94f6eea0-f241-4f03-9ea4-4a8ab4a7756c] 22644 --- [nio-8080-exec-5] o.e.x.services.TicketServiceImpl         : Found 1 tickets eligible for check-in for user 4
2025-06-29 20:04:21.339 DEBUG [d54ef357-879b-43fa-8335-d104596554a5] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 20:04:21.444 DEBUG [d54ef357-879b-43fa-8335-d104596554a5] 22644 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:04:21.446 DEBUG [d54ef357-879b-43fa-8335-d104596554a5] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 20:04:21.537  INFO [d54ef357-879b-43fa-8335-d104596554a5] 22644 --- [nio-8080-exec-7] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 20:04:21.537  INFO [d54ef357-879b-43fa-8335-d104596554a5] 22644 --- [nio-8080-exec-7] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 20:04:21.542  INFO [d54ef357-879b-43fa-8335-d104596554a5] 22644 --- [nio-8080-exec-7] o.e.x.services.TicketServiceImpl         : Found 1 tickets eligible for check-in for user 4
2025-06-29 20:04:22.663 DEBUG [ba49e02d-8cc0-449a-9690-c345ea1213c4] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/nearby?origin=OTP
2025-06-29 20:04:22.664 DEBUG [ba49e02d-8cc0-449a-9690-c345ea1213c4] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/nearby?origin=OTP
2025-06-29 20:04:22.665  INFO [ba49e02d-8cc0-449a-9690-c345ea1213c4] 22644 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Received request for nearby flights from origin: OTP, departureDate: null
2025-06-29 20:04:22.665  INFO [ba49e02d-8cc0-449a-9690-c345ea1213c4] 22644 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Using search date: 2025-06-29
2025-06-29 20:04:22.665  INFO [ba49e02d-8cc0-449a-9690-c345ea1213c4] 22644 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Cache key: OTP-2025-06-29
2025-06-29 20:04:22.665  INFO [ba49e02d-8cc0-449a-9690-c345ea1213c4] 22644 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Returning cached nearby flights for origin: OTP, found 6 flights
2025-06-29 20:04:22.667 DEBUG [ba49e02d-8cc0-449a-9690-c345ea1213c4] 22644 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:04:25.396 DEBUG [902ea5da-baf0-458a-8ca4-0aac9ba68abc] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-29 20:04:25.398 DEBUG [902ea5da-baf0-458a-8ca4-0aac9ba68abc] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-29 20:04:25.399  INFO [902ea5da-baf0-458a-8ca4-0aac9ba68abc] 22644 --- [nio-8080-exec-8] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris
2025-06-29 20:04:25.400  INFO [902ea5da-baf0-458a-8ca4-0aac9ba68abc] 22644 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-29 20:04:25.400  INFO [902ea5da-baf0-458a-8ca4-0aac9ba68abc] 22644 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-29 20:04:25.401 DEBUG [902ea5da-baf0-458a-8ca4-0aac9ba68abc] 22644 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-29).    For example, if today is 2025-06-29, a good departure date would be between 2025-07-06 and 2025-07-13, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris";
2025-06-29 20:04:25.403  INFO [902ea5da-baf0-458a-8ca4-0aac9ba68abc] 22644 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-29 20:04:25.403  INFO [902ea5da-baf0-458a-8ca4-0aac9ba68abc] 22644 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-29 20:04:25.403  INFO [902ea5da-baf0-458a-8ca4-0aac9ba68abc] 22644 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-29 20:04:25.403  INFO [902ea5da-baf0-458a-8ca4-0aac9ba68abc] 22644 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 20:04:25.403  INFO [902ea5da-baf0-458a-8ca4-0aac9ba68abc] 22644 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-29 20:04:25.405  INFO [902ea5da-baf0-458a-8ca4-0aac9ba68abc] 22644 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-29 20:04:25.405  INFO [902ea5da-baf0-458a-8ca4-0aac9ba68abc] 22644 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-29 20:04:25.406  INFO [902ea5da-baf0-458a-8ca4-0aac9ba68abc] 22644 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-29 20:04:25.406  INFO [902ea5da-baf0-458a-8ca4-0aac9ba68abc] 22644 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-29 20:04:27.294  INFO [902ea5da-baf0-458a-8ca4-0aac9ba68abc] 22644 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-29 20:04:27.294  INFO [902ea5da-baf0-458a-8ca4-0aac9ba68abc] 22644 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Response length: 195 characters
2025-06-29 20:04:27.295 DEBUG [902ea5da-baf0-458a-8ca4-0aac9ba68abc] 22644 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-06",
  "returnDate": "2025-07-08",
  "tripType": "roundTrip",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-29 20:04:27.295 DEBUG [902ea5da-baf0-458a-8ca4-0aac9ba68abc] 22644 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-29 20:04:27.296 DEBUG [902ea5da-baf0-458a-8ca4-0aac9ba68abc] 22644 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-29 20:04:27.296 DEBUG [902ea5da-baf0-458a-8ca4-0aac9ba68abc] 22644 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-29 20:04:27.296 DEBUG [902ea5da-baf0-458a-8ca4-0aac9ba68abc] 22644 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 20:04:27.296  INFO [902ea5da-baf0-458a-8ca4-0aac9ba68abc] 22644 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 20:04:27.296  INFO [902ea5da-baf0-458a-8ca4-0aac9ba68abc] 22644 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-06, returnDate=2025-07-08, tripType=roundTrip, adults=1, children=0, infants=0
2025-06-29 20:04:27.297  INFO [902ea5da-baf0-458a-8ca4-0aac9ba68abc] 22644 --- [nio-8080-exec-8] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-29 20:04:27.298 DEBUG [902ea5da-baf0-458a-8ca4-0aac9ba68abc] 22644 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:04:33.387 DEBUG [bf3ada86-8527-44b8-ad71-164c1d3f0076] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-29 20:04:33.389 DEBUG [bf3ada86-8527-44b8-ad71-164c1d3f0076] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-29 20:04:33.390  INFO [bf3ada86-8527-44b8-ad71-164c1d3f0076] 22644 --- [nio-8080-exec-9] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris one way
2025-06-29 20:04:33.391  INFO [bf3ada86-8527-44b8-ad71-164c1d3f0076] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-29 20:04:33.391  INFO [bf3ada86-8527-44b8-ad71-164c1d3f0076] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-29 20:04:33.391 DEBUG [bf3ada86-8527-44b8-ad71-164c1d3f0076] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-29).    For example, if today is 2025-06-29, a good departure date would be between 2025-07-06 and 2025-07-13, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris one way";
2025-06-29 20:04:33.396  INFO [bf3ada86-8527-44b8-ad71-164c1d3f0076] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-29 20:04:33.397  INFO [bf3ada86-8527-44b8-ad71-164c1d3f0076] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-29 20:04:33.397  INFO [bf3ada86-8527-44b8-ad71-164c1d3f0076] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-29 20:04:33.397  INFO [bf3ada86-8527-44b8-ad71-164c1d3f0076] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 20:04:33.397  INFO [bf3ada86-8527-44b8-ad71-164c1d3f0076] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-29 20:04:33.399  INFO [bf3ada86-8527-44b8-ad71-164c1d3f0076] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-29 20:04:33.400  INFO [bf3ada86-8527-44b8-ad71-164c1d3f0076] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-29 20:04:33.400  INFO [bf3ada86-8527-44b8-ad71-164c1d3f0076] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-29 20:04:33.400  INFO [bf3ada86-8527-44b8-ad71-164c1d3f0076] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-29 20:04:35.271  INFO [bf3ada86-8527-44b8-ad71-164c1d3f0076] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-29 20:04:35.271  INFO [bf3ada86-8527-44b8-ad71-164c1d3f0076] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Response length: 184 characters
2025-06-29 20:04:35.272 DEBUG [bf3ada86-8527-44b8-ad71-164c1d3f0076] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-06",
  "returnDate": null,
  "tripType": "oneWay",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-29 20:04:35.272 DEBUG [bf3ada86-8527-44b8-ad71-164c1d3f0076] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-29 20:04:35.273 DEBUG [bf3ada86-8527-44b8-ad71-164c1d3f0076] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-29 20:04:35.273 DEBUG [bf3ada86-8527-44b8-ad71-164c1d3f0076] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-29 20:04:35.273 DEBUG [bf3ada86-8527-44b8-ad71-164c1d3f0076] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 20:04:35.273  INFO [bf3ada86-8527-44b8-ad71-164c1d3f0076] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 20:04:35.273  INFO [bf3ada86-8527-44b8-ad71-164c1d3f0076] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-06, returnDate=null, tripType=oneWay, adults=1, children=0, infants=0
2025-06-29 20:04:35.274  INFO [bf3ada86-8527-44b8-ad71-164c1d3f0076] 22644 --- [nio-8080-exec-9] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-29 20:04:35.275 DEBUG [bf3ada86-8527-44b8-ad71-164c1d3f0076] 22644 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:04:37.460 DEBUG [00b9ef71-6867-4c69-aa02-7ce205a1df98] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 20:04:37.552 DEBUG [00b9ef71-6867-4c69-aa02-7ce205a1df98] 22644 --- [nio-8080-exec-6] o.s.s.core.session.SessionRegistryImpl   : Registering session E2EDC79D1AE076B4A52947CEDA8DD2A3, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}])
2025-06-29 20:04:37.553 DEBUG [00b9ef71-6867-4c69-aa02-7ce205a1df98] 22644 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@3e0c6d18]
2025-06-29 20:04:37.554 DEBUG [00b9ef71-6867-4c69-aa02-7ce205a1df98] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me
2025-06-29 20:04:37.555  INFO [00b9ef71-6867-4c69-aa02-7ce205a1df98] 22644 --- [nio-8080-exec-6] o.e.x.controllers.UserController         : Request received for current user details: ****@****.***
2025-06-29 20:04:37.642  INFO [00b9ef71-6867-4c69-aa02-7ce205a1df98] 22644 --- [nio-8080-exec-6] o.e.x.controllers.UserController         : Returning details for user: ****@****.***
2025-06-29 20:04:37.682 DEBUG [14847b24-356a-4d3f-b475-f11c3ab5ec1f] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 20:04:37.687 DEBUG [bd7523fb-ff2d-4bd8-8ef0-a697614337e0] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:04:37.687 DEBUG [fc88b3bf-fa58-4efc-b4f1-08a42f5f5f24] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:04:37.690 DEBUG [fc88b3bf-fa58-4efc-b4f1-08a42f5f5f24] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:04:37.691  INFO [fc88b3bf-fa58-4efc-b4f1-08a42f5f5f24] 22644 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 20:04:37.692  INFO [fc88b3bf-fa58-4efc-b4f1-08a42f5f5f24] 22644 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 20:04:37.750  INFO [fc88b3bf-fa58-4efc-b4f1-08a42f5f5f24] 22644 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 20:04:37.751 DEBUG [fc88b3bf-fa58-4efc-b4f1-08a42f5f5f24] 22644 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:04:37.757 DEBUG [bd4f1ea4-e5ea-4a2e-8fb1-f7a7d72f0896] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:04:37.759 DEBUG [bd4f1ea4-e5ea-4a2e-8fb1-f7a7d72f0896] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:04:37.760  INFO [bd4f1ea4-e5ea-4a2e-8fb1-f7a7d72f0896] 22644 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 20:04:37.760  INFO [bd4f1ea4-e5ea-4a2e-8fb1-f7a7d72f0896] 22644 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 20:04:37.783 DEBUG [949c3429-d649-4760-aa7d-e2145704d233] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 20:04:37.785 DEBUG [949c3429-d649-4760-aa7d-e2145704d233] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 20:04:37.785  INFO [949c3429-d649-4760-aa7d-e2145704d233] 22644 --- [nio-8080-exec-5] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 20:04:37.804 DEBUG [14847b24-356a-4d3f-b475-f11c3ab5ec1f] 22644 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:04:37.807 DEBUG [14847b24-356a-4d3f-b475-f11c3ab5ec1f] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 20:04:37.809 DEBUG [bd7523fb-ff2d-4bd8-8ef0-a697614337e0] 22644 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:04:37.811 DEBUG [bd7523fb-ff2d-4bd8-8ef0-a697614337e0] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:04:37.812  INFO [bd7523fb-ff2d-4bd8-8ef0-a697614337e0] 22644 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:04:37.815  INFO [bd4f1ea4-e5ea-4a2e-8fb1-f7a7d72f0896] 22644 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 20:04:37.816 DEBUG [bd4f1ea4-e5ea-4a2e-8fb1-f7a7d72f0896] 22644 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:04:37.908  WARN [14847b24-356a-4d3f-b475-f11c3ab5ec1f] 22644 --- [io-8080-exec-10] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 20:04:37.908  WARN [14847b24-356a-4d3f-b475-f11c3ab5ec1f] 22644 --- [io-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 20:04:37.915 DEBUG [9acc2096-f27d-4b74-b56b-2a6ce72037b1] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 20:04:37.921  INFO [bd7523fb-ff2d-4bd8-8ef0-a697614337e0] 22644 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 20:04:37.944  INFO [949c3429-d649-4760-aa7d-e2145704d233] 22644 --- [nio-8080-exec-5] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 20:04:37.946 DEBUG [949c3429-d649-4760-aa7d-e2145704d233] 22644 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:04:37.952 DEBUG [0cb1b9d8-a88a-49ca-aa9d-e4df84ccb866] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 20:04:37.954 DEBUG [0cb1b9d8-a88a-49ca-aa9d-e4df84ccb866] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 20:04:37.955  INFO [0cb1b9d8-a88a-49ca-aa9d-e4df84ccb866] 22644 --- [nio-8080-exec-4] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 20:04:37.959 DEBUG [95e2cb8d-bb5e-4443-afc4-0e0d3c1f97f9] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:04:37.961 DEBUG [95e2cb8d-bb5e-4443-afc4-0e0d3c1f97f9] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:04:37.962  INFO [95e2cb8d-bb5e-4443-afc4-0e0d3c1f97f9] 22644 --- [nio-8080-exec-8] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 20:04:37.996  INFO [0cb1b9d8-a88a-49ca-aa9d-e4df84ccb866] 22644 --- [nio-8080-exec-4] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 20:04:37.997 DEBUG [0cb1b9d8-a88a-49ca-aa9d-e4df84ccb866] 22644 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:04:38.051 DEBUG [9acc2096-f27d-4b74-b56b-2a6ce72037b1] 22644 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:04:38.054 DEBUG [9acc2096-f27d-4b74-b56b-2a6ce72037b1] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 20:04:38.149  INFO [95e2cb8d-bb5e-4443-afc4-0e0d3c1f97f9] 22644 --- [nio-8080-exec-8] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 20:04:38.151 DEBUG [95e2cb8d-bb5e-4443-afc4-0e0d3c1f97f9] 22644 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:04:38.184 DEBUG [0164a560-951f-4fb1-9896-bae0737c49f5] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:04:38.189 DEBUG [0164a560-951f-4fb1-9896-bae0737c49f5] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:04:38.190  INFO [0164a560-951f-4fb1-9896-bae0737c49f5] 22644 --- [nio-8080-exec-9] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 20:04:38.225  WARN [9acc2096-f27d-4b74-b56b-2a6ce72037b1] 22644 --- [nio-8080-exec-7] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 20:04:38.226  WARN [9acc2096-f27d-4b74-b56b-2a6ce72037b1] 22644 --- [nio-8080-exec-7] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 20:04:38.235  INFO [0164a560-951f-4fb1-9896-bae0737c49f5] 22644 --- [nio-8080-exec-9] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 20:04:38.237 DEBUG [0164a560-951f-4fb1-9896-bae0737c49f5] 22644 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:04:43.759 DEBUG [dff7c83f-e7f6-43b3-8557-176afc38e700] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:04:43.882 DEBUG [dff7c83f-e7f6-43b3-8557-176afc38e700] 22644 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:04:43.884 DEBUG [dff7c83f-e7f6-43b3-8557-176afc38e700] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:04:43.885  INFO [dff7c83f-e7f6-43b3-8557-176afc38e700] 22644 --- [nio-8080-exec-6] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:04:43.885  INFO [dff7c83f-e7f6-43b3-8557-176afc38e700] 22644 --- [nio-8080-exec-6] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:04:43.937 DEBUG [ecb72ebd-506c-4274-b623-e62defa49c20] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:04:44.055 DEBUG [ecb72ebd-506c-4274-b623-e62defa49c20] 22644 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:04:44.058 DEBUG [ecb72ebd-506c-4274-b623-e62defa49c20] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:04:44.058  INFO [ecb72ebd-506c-4274-b623-e62defa49c20] 22644 --- [nio-8080-exec-2] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:04:44.058  INFO [ecb72ebd-506c-4274-b623-e62defa49c20] 22644 --- [nio-8080-exec-2] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:04:44.107 DEBUG [80188374-0d4a-4644-9a44-c62745e312f4] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:04:44.242 DEBUG [80188374-0d4a-4644-9a44-c62745e312f4] 22644 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:04:44.246 DEBUG [80188374-0d4a-4644-9a44-c62745e312f4] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:04:44.247  INFO [80188374-0d4a-4644-9a44-c62745e312f4] 22644 --- [nio-8080-exec-3] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:04:44.248  INFO [80188374-0d4a-4644-9a44-c62745e312f4] 22644 --- [nio-8080-exec-3] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:04:49.721 DEBUG [729fab68-58e9-43d3-91df-5052655dc39f] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing POST /api/cart/add
2025-06-29 20:04:49.814 DEBUG [729fab68-58e9-43d3-91df-5052655dc39f] 22644 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:04:49.818 DEBUG [729fab68-58e9-43d3-91df-5052655dc39f] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured POST /api/cart/add
2025-06-29 20:04:49.961  INFO [729fab68-58e9-43d3-91df-5052655dc39f] 22644 --- [io-8080-exec-10] o.e.x.controllers.CartController         : User ****@****.*** request to add flight ID 16 to persistent cart
2025-06-29 20:04:49.967  INFO [729fab68-58e9-43d3-91df-5052655dc39f] 22644 --- [io-8080-exec-10] o.e.x.controllers.CartController         : AddToCart request: flightId=16, seatNumber=1D, seatType=null, deferSeat=false, randomSeat=false
2025-06-29 20:04:49.974  INFO [729fab68-58e9-43d3-91df-5052655dc39f] 22644 --- [io-8080-exec-10] o.e.xlr8travel.services.CartServiceImpl  : Added new flight ID 16 to cart for user ****@****.***
2025-06-29 20:04:49.998  INFO [729fab68-58e9-43d3-91df-5052655dc39f] 22644 --- [io-8080-exec-10] o.e.x.controllers.CartController         : Flight ID 16 added/incremented in persistent cart for user ****@****.***.
2025-06-29 20:04:50.018 DEBUG [672796f8-9979-4455-b386-5f6dc6079773] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:04:50.172 DEBUG [672796f8-9979-4455-b386-5f6dc6079773] 22644 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:04:50.175 DEBUG [672796f8-9979-4455-b386-5f6dc6079773] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:04:50.176  INFO [672796f8-9979-4455-b386-5f6dc6079773] 22644 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:04:50.316  INFO [672796f8-9979-4455-b386-5f6dc6079773] 22644 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 20:04:50.658 DEBUG [e59964af-0451-4d09-956b-4eb68678e6c5] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:04:50.760 DEBUG [e59964af-0451-4d09-956b-4eb68678e6c5] 22644 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:04:50.761 DEBUG [e59964af-0451-4d09-956b-4eb68678e6c5] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:04:50.762  INFO [e59964af-0451-4d09-956b-4eb68678e6c5] 22644 --- [nio-8080-exec-5] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:04:50.859  INFO [e59964af-0451-4d09-956b-4eb68678e6c5] 22644 --- [nio-8080-exec-5] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 20:04:50.867 DEBUG [5cc09401-4845-4958-be6e-141a7e9bd672] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:04:50.967 DEBUG [5cc09401-4845-4958-be6e-141a7e9bd672] 22644 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:04:50.969 DEBUG [5cc09401-4845-4958-be6e-141a7e9bd672] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:04:50.970  INFO [5cc09401-4845-4958-be6e-141a7e9bd672] 22644 --- [nio-8080-exec-4] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:04:51.088  INFO [5cc09401-4845-4958-be6e-141a7e9bd672] 22644 --- [nio-8080-exec-4] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 20:04:54.470 DEBUG [d7e44f22-b70b-4abd-99cf-b640991c72a9] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:04:54.575 DEBUG [d7e44f22-b70b-4abd-99cf-b640991c72a9] 22644 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:04:54.577 DEBUG [d7e44f22-b70b-4abd-99cf-b640991c72a9] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:04:54.577  INFO [d7e44f22-b70b-4abd-99cf-b640991c72a9] 22644 --- [nio-8080-exec-8] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:04:54.675  INFO [d7e44f22-b70b-4abd-99cf-b640991c72a9] 22644 --- [nio-8080-exec-8] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 20:04:54.681 DEBUG [f77f5764-f45c-45a8-8b59-92f5b020f3c0] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:04:54.813 DEBUG [f77f5764-f45c-45a8-8b59-92f5b020f3c0] 22644 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:04:54.815 DEBUG [f77f5764-f45c-45a8-8b59-92f5b020f3c0] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:04:54.816  INFO [f77f5764-f45c-45a8-8b59-92f5b020f3c0] 22644 --- [nio-8080-exec-7] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:04:54.912  INFO [f77f5764-f45c-45a8-8b59-92f5b020f3c0] 22644 --- [nio-8080-exec-7] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 20:05:10.978 DEBUG [968976d7-7d21-4255-928d-45c7b505e984] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing POST /api/checkout/create-payment-intent
2025-06-29 20:05:10.979 DEBUG [968976d7-7d21-4255-928d-45c7b505e984] 22644 --- [nio-8080-exec-9] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 20:05:10.979 DEBUG [968976d7-7d21-4255-928d-45c7b505e984] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured POST /api/checkout/create-payment-intent
2025-06-29 20:05:10.985  INFO [968976d7-7d21-4255-928d-45c7b505e984] 22644 --- [nio-8080-exec-9] o.e.x.controllers.PaymentController      : Creating payment intent for amount: 23995 ron
2025-06-29 20:05:11.468  INFO [968976d7-7d21-4255-928d-45c7b505e984] 22644 --- [nio-8080-exec-9] o.e.x.controllers.PaymentController      : Payment intent created successfully: pi_3RfOfDGf8s1WZJnq1EuDHziL
2025-06-29 20:05:12.698 DEBUG [53f5f7d6-946e-4d06-8c75-cff4f802ff15] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/checkout/confirm
2025-06-29 20:05:12.812 DEBUG [53f5f7d6-946e-4d06-8c75-cff4f802ff15] 22644 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:05:12.813 DEBUG [53f5f7d6-946e-4d06-8c75-cff4f802ff15] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/checkout/confirm
2025-06-29 20:05:12.814  INFO [53f5f7d6-946e-4d06-8c75-cff4f802ff15] 22644 --- [nio-8080-exec-6] o.e.x.controllers.CheckoutController     : Received purchase confirmation request.
2025-06-29 20:05:12.911  INFO [53f5f7d6-946e-4d06-8c75-cff4f802ff15] 22644 --- [nio-8080-exec-6] o.e.x.controllers.CheckoutController     : Processing purchase for user: ****@****.***
2025-06-29 20:05:12.920  INFO [53f5f7d6-946e-4d06-8c75-cff4f802ff15] 22644 --- [nio-8080-exec-6] o.e.x.controllers.CheckoutController     : User ****@****.*** persistent cart has 1 items.
2025-06-29 20:05:12.920  WARN [53f5f7d6-946e-4d06-8c75-cff4f802ff15] 22644 --- [nio-8080-exec-6] o.e.x.controllers.CheckoutController     : !!! SIMULATING successful payment processing for user ****@****.*** !!!
2025-06-29 20:05:12.922  INFO [53f5f7d6-946e-4d06-8c75-cff4f802ff15] 22644 --- [nio-8080-exec-6] o.e.x.services.OrderServiceImpl          : Creating order from persistent cart for user: ****@****.***
2025-06-29 20:05:12.928  INFO [53f5f7d6-946e-4d06-8c75-cff4f802ff15] 22644 --- [nio-8080-exec-6] o.e.x.services.OrderServiceImpl          : Order 3 created for user ****@****.***, status: PENDING_PAYMENT. Total: 37.99
2025-06-29 20:05:12.928  INFO [53f5f7d6-946e-4d06-8c75-cff4f802ff15] 22644 --- [nio-8080-exec-6] o.e.x.services.OrderServiceImpl          : Created ticket with deferred seat selection (fallback) for flight XT-OTP-CDG-2 for user ****@****.***
2025-06-29 20:05:12.928  INFO [53f5f7d6-946e-4d06-8c75-cff4f802ff15] 22644 --- [nio-8080-exec-6] o.e.x.services.OrderServiceImpl          : Ticket has baggage type: BAGGAGE_TYPE_WEIGHT_CARRY_ON_0
2025-06-29 20:05:14.149  INFO [53f5f7d6-946e-4d06-8c75-cff4f802ff15] 22644 --- [nio-8080-exec-6] o.e.x.services.EmailServiceImpl          : Purchase confirmation email sent to ****@****.***
2025-06-29 20:05:14.149  INFO [53f5f7d6-946e-4d06-8c75-cff4f802ff15] 22644 --- [nio-8080-exec-6] o.e.x.services.OrderServiceImpl          : Purchase confirmation email sent to user: ****@****.***
2025-06-29 20:05:14.162  INFO [53f5f7d6-946e-4d06-8c75-cff4f802ff15] 22644 --- [nio-8080-exec-6] o.e.x.controllers.CheckoutController     : Order successfully created for user ****@****.***. Confirmation: 3
2025-06-29 20:05:14.167  INFO [53f5f7d6-946e-4d06-8c75-cff4f802ff15] 22644 --- [nio-8080-exec-6] o.e.xlr8travel.services.CartServiceImpl  : Clearing 1 items from cart for user ****@****.***
2025-06-29 20:05:14.189  INFO [53f5f7d6-946e-4d06-8c75-cff4f802ff15] 22644 --- [nio-8080-exec-6] o.e.x.controllers.CheckoutController     : Persistent cart cleared for user ****@****.***.
2025-06-29 20:05:14.204 DEBUG [34988a9f-bf73-4467-958c-45e0dba29f2b] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing DELETE /api/cart/remove/16
2025-06-29 20:05:14.325 DEBUG [34988a9f-bf73-4467-958c-45e0dba29f2b] 22644 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:05:14.327 DEBUG [34988a9f-bf73-4467-958c-45e0dba29f2b] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured DELETE /api/cart/remove/16
2025-06-29 20:05:14.427  INFO [34988a9f-bf73-4467-958c-45e0dba29f2b] 22644 --- [nio-8080-exec-2] o.e.x.controllers.CartController         : User ****@****.*** request to remove flight ID 16 from persistent cart
2025-06-29 20:05:14.435  WARN [34988a9f-bf73-4467-958c-45e0dba29f2b] 22644 --- [nio-8080-exec-2] o.e.xlr8travel.services.CartServiceImpl  : Attempted to remove flight ID 16 not found in cart for user ****@****.***
2025-06-29 20:05:14.436  WARN [34988a9f-bf73-4467-958c-45e0dba29f2b] 22644 --- [nio-8080-exec-2] o.e.x.controllers.CartController         : Attempted to remove flight ID 16 not found in persistent cart for user ****@****.***
2025-06-29 20:05:14.447 DEBUG [769e7a99-ec05-4dd5-a83a-8522cc543315] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:05:14.592 DEBUG [769e7a99-ec05-4dd5-a83a-8522cc543315] 22644 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:05:14.594 DEBUG [769e7a99-ec05-4dd5-a83a-8522cc543315] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:05:14.595  INFO [769e7a99-ec05-4dd5-a83a-8522cc543315] 22644 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:05:14.698  INFO [769e7a99-ec05-4dd5-a83a-8522cc543315] 22644 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 20:05:25.051 DEBUG [ed47d934-d246-4a4a-9d65-f0c14f3888ff] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 20:05:25.052 DEBUG [867c9491-7b1d-4bd4-a5a9-3fb220b4c823] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 20:05:25.185 DEBUG [867c9491-7b1d-4bd4-a5a9-3fb220b4c823] 22644 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:05:25.187 DEBUG [ed47d934-d246-4a4a-9d65-f0c14f3888ff] 22644 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:05:25.187 DEBUG [867c9491-7b1d-4bd4-a5a9-3fb220b4c823] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 20:05:25.189 DEBUG [ed47d934-d246-4a4a-9d65-f0c14f3888ff] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 20:05:25.296  INFO [ed47d934-d246-4a4a-9d65-f0c14f3888ff] 22644 --- [io-8080-exec-10] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 20:05:25.296  INFO [867c9491-7b1d-4bd4-a5a9-3fb220b4c823] 22644 --- [nio-8080-exec-1] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 20:05:25.297  INFO [ed47d934-d246-4a4a-9d65-f0c14f3888ff] 22644 --- [io-8080-exec-10] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 20:05:25.297  INFO [867c9491-7b1d-4bd4-a5a9-3fb220b4c823] 22644 --- [nio-8080-exec-1] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 20:05:25.302  INFO [867c9491-7b1d-4bd4-a5a9-3fb220b4c823] 22644 --- [nio-8080-exec-1] o.e.x.services.TicketServiceImpl         : Found 2 tickets eligible for check-in for user 4
2025-06-29 20:05:25.302  INFO [ed47d934-d246-4a4a-9d65-f0c14f3888ff] 22644 --- [io-8080-exec-10] o.e.x.services.TicketServiceImpl         : Found 2 tickets eligible for check-in for user 4
2025-06-29 20:08:53.884 DEBUG [6fe9b8d1-5a4a-42d4-a2c8-b08ea7738de0] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/nearby?origin=OTP
2025-06-29 20:08:53.890 DEBUG [6fe9b8d1-5a4a-42d4-a2c8-b08ea7738de0] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/nearby?origin=OTP
2025-06-29 20:08:53.896  INFO [6fe9b8d1-5a4a-42d4-a2c8-b08ea7738de0] 22644 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Received request for nearby flights from origin: OTP, departureDate: null
2025-06-29 20:08:53.898  INFO [6fe9b8d1-5a4a-42d4-a2c8-b08ea7738de0] 22644 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Using search date: 2025-06-29
2025-06-29 20:08:53.899  INFO [6fe9b8d1-5a4a-42d4-a2c8-b08ea7738de0] 22644 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Cache key: OTP-2025-06-29
2025-06-29 20:08:53.903  INFO [6fe9b8d1-5a4a-42d4-a2c8-b08ea7738de0] 22644 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Returning cached nearby flights for origin: OTP, found 6 flights
2025-06-29 20:08:53.907 DEBUG [6fe9b8d1-5a4a-42d4-a2c8-b08ea7738de0] 22644 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:09:00.984 DEBUG [f57ce211-ee32-4d0d-a7d0-46e08eaebb8d] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-29 20:09:00.985 DEBUG [f57ce211-ee32-4d0d-a7d0-46e08eaebb8d] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-29 20:09:00.987  INFO [f57ce211-ee32-4d0d-a7d0-46e08eaebb8d] 22644 --- [nio-8080-exec-8] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris
2025-06-29 20:09:00.987  INFO [f57ce211-ee32-4d0d-a7d0-46e08eaebb8d] 22644 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-29 20:09:00.987  INFO [f57ce211-ee32-4d0d-a7d0-46e08eaebb8d] 22644 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-29 20:09:00.988 DEBUG [f57ce211-ee32-4d0d-a7d0-46e08eaebb8d] 22644 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-29).    For example, if today is 2025-06-29, a good departure date would be between 2025-07-06 and 2025-07-13, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris";
2025-06-29 20:09:00.990  INFO [f57ce211-ee32-4d0d-a7d0-46e08eaebb8d] 22644 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-29 20:09:00.990  INFO [f57ce211-ee32-4d0d-a7d0-46e08eaebb8d] 22644 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-29 20:09:00.990  INFO [f57ce211-ee32-4d0d-a7d0-46e08eaebb8d] 22644 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-29 20:09:00.991  INFO [f57ce211-ee32-4d0d-a7d0-46e08eaebb8d] 22644 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 20:09:00.991  INFO [f57ce211-ee32-4d0d-a7d0-46e08eaebb8d] 22644 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-29 20:09:00.993  INFO [f57ce211-ee32-4d0d-a7d0-46e08eaebb8d] 22644 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-29 20:09:00.994  INFO [f57ce211-ee32-4d0d-a7d0-46e08eaebb8d] 22644 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-29 20:09:00.994  INFO [f57ce211-ee32-4d0d-a7d0-46e08eaebb8d] 22644 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-29 20:09:00.994  INFO [f57ce211-ee32-4d0d-a7d0-46e08eaebb8d] 22644 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-29 20:09:02.919  INFO [f57ce211-ee32-4d0d-a7d0-46e08eaebb8d] 22644 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-29 20:09:02.920  INFO [f57ce211-ee32-4d0d-a7d0-46e08eaebb8d] 22644 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Response length: 195 characters
2025-06-29 20:09:02.920 DEBUG [f57ce211-ee32-4d0d-a7d0-46e08eaebb8d] 22644 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-06",
  "returnDate": "2025-07-08",
  "tripType": "roundTrip",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-29 20:09:02.921 DEBUG [f57ce211-ee32-4d0d-a7d0-46e08eaebb8d] 22644 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-29 20:09:02.921 DEBUG [f57ce211-ee32-4d0d-a7d0-46e08eaebb8d] 22644 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-29 20:09:02.921 DEBUG [f57ce211-ee32-4d0d-a7d0-46e08eaebb8d] 22644 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-29 20:09:02.922 DEBUG [f57ce211-ee32-4d0d-a7d0-46e08eaebb8d] 22644 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 20:09:02.922  INFO [f57ce211-ee32-4d0d-a7d0-46e08eaebb8d] 22644 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 20:09:02.922  INFO [f57ce211-ee32-4d0d-a7d0-46e08eaebb8d] 22644 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-06, returnDate=2025-07-08, tripType=roundTrip, adults=1, children=0, infants=0
2025-06-29 20:09:02.922  INFO [f57ce211-ee32-4d0d-a7d0-46e08eaebb8d] 22644 --- [nio-8080-exec-8] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-29 20:09:02.924 DEBUG [f57ce211-ee32-4d0d-a7d0-46e08eaebb8d] 22644 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:09:05.777 DEBUG [0405481b-1150-4247-b884-4fca6dc24f95] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-29 20:09:05.778 DEBUG [0405481b-1150-4247-b884-4fca6dc24f95] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-29 20:09:05.779  INFO [0405481b-1150-4247-b884-4fca6dc24f95] 22644 --- [nio-8080-exec-7] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris one way
2025-06-29 20:09:05.779  INFO [0405481b-1150-4247-b884-4fca6dc24f95] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-29 20:09:05.779  INFO [0405481b-1150-4247-b884-4fca6dc24f95] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-29 20:09:05.780 DEBUG [0405481b-1150-4247-b884-4fca6dc24f95] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-29).    For example, if today is 2025-06-29, a good departure date would be between 2025-07-06 and 2025-07-13, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris one way";
2025-06-29 20:09:05.781  INFO [0405481b-1150-4247-b884-4fca6dc24f95] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-29 20:09:05.782  INFO [0405481b-1150-4247-b884-4fca6dc24f95] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-29 20:09:05.782  INFO [0405481b-1150-4247-b884-4fca6dc24f95] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-29 20:09:05.782  INFO [0405481b-1150-4247-b884-4fca6dc24f95] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 20:09:05.782  INFO [0405481b-1150-4247-b884-4fca6dc24f95] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-29 20:09:05.784  INFO [0405481b-1150-4247-b884-4fca6dc24f95] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-29 20:09:05.784  INFO [0405481b-1150-4247-b884-4fca6dc24f95] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-29 20:09:05.784  INFO [0405481b-1150-4247-b884-4fca6dc24f95] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-29 20:09:05.785  INFO [0405481b-1150-4247-b884-4fca6dc24f95] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-29 20:09:07.433  INFO [0405481b-1150-4247-b884-4fca6dc24f95] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-29 20:09:07.433  INFO [0405481b-1150-4247-b884-4fca6dc24f95] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Response length: 184 characters
2025-06-29 20:09:07.433 DEBUG [0405481b-1150-4247-b884-4fca6dc24f95] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-06",
  "returnDate": null,
  "tripType": "oneWay",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-29 20:09:07.434 DEBUG [0405481b-1150-4247-b884-4fca6dc24f95] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-29 20:09:07.434 DEBUG [0405481b-1150-4247-b884-4fca6dc24f95] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-29 20:09:07.435 DEBUG [0405481b-1150-4247-b884-4fca6dc24f95] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-29 20:09:07.435 DEBUG [0405481b-1150-4247-b884-4fca6dc24f95] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 20:09:07.435  INFO [0405481b-1150-4247-b884-4fca6dc24f95] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 20:09:07.435  INFO [0405481b-1150-4247-b884-4fca6dc24f95] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-06, returnDate=null, tripType=oneWay, adults=1, children=0, infants=0
2025-06-29 20:09:07.436  INFO [0405481b-1150-4247-b884-4fca6dc24f95] 22644 --- [nio-8080-exec-7] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-29 20:09:07.437 DEBUG [0405481b-1150-4247-b884-4fca6dc24f95] 22644 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:09:10.282 DEBUG [5ef10cec-e45c-4bf6-b941-a1e28c1bec13] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 20:09:10.472 DEBUG [5ef10cec-e45c-4bf6-b941-a1e28c1bec13] 22644 --- [nio-8080-exec-9] o.s.s.core.session.SessionRegistryImpl   : Registering session 2DFD8B08C98DE9F5A86C1776B1AB66D5, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}])
2025-06-29 20:09:10.473 DEBUG [5ef10cec-e45c-4bf6-b941-a1e28c1bec13] 22644 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@416d8646]
2025-06-29 20:09:10.474 DEBUG [5ef10cec-e45c-4bf6-b941-a1e28c1bec13] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me
2025-06-29 20:09:10.475  INFO [5ef10cec-e45c-4bf6-b941-a1e28c1bec13] 22644 --- [nio-8080-exec-9] o.e.x.controllers.UserController         : Request received for current user details: ****@****.***
2025-06-29 20:09:10.611  INFO [5ef10cec-e45c-4bf6-b941-a1e28c1bec13] 22644 --- [nio-8080-exec-9] o.e.x.controllers.UserController         : Returning details for user: ****@****.***
2025-06-29 20:09:10.723 DEBUG [092d88c6-248e-4d2d-8af3-3dd7b3783b5b] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 20:09:10.730 DEBUG [47dc9b23-207f-4fc6-8968-4f133561a3ad] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:09:10.732 DEBUG [47dc9b23-207f-4fc6-8968-4f133561a3ad] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:09:10.734  INFO [47dc9b23-207f-4fc6-8968-4f133561a3ad] 22644 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 20:09:10.735  INFO [47dc9b23-207f-4fc6-8968-4f133561a3ad] 22644 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 20:09:10.748 DEBUG [4bf93475-e87c-44ae-b2de-4c489db38041] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 20:09:10.748 DEBUG [bc284f0c-26e3-4513-baa5-4f0ba5407210] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:09:10.749 DEBUG [70168894-1909-4954-81e9-7689075ed474] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:09:10.755 DEBUG [70168894-1909-4954-81e9-7689075ed474] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:09:10.762  INFO [70168894-1909-4954-81e9-7689075ed474] 22644 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 20:09:10.765  INFO [70168894-1909-4954-81e9-7689075ed474] 22644 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 20:09:10.897  INFO [47dc9b23-207f-4fc6-8968-4f133561a3ad] 22644 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 20:09:10.900 DEBUG [47dc9b23-207f-4fc6-8968-4f133561a3ad] 22644 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:09:10.916  INFO [70168894-1909-4954-81e9-7689075ed474] 22644 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 20:09:10.919 DEBUG [70168894-1909-4954-81e9-7689075ed474] 22644 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:09:10.973 DEBUG [5fc7788b-4742-4832-97a8-166483ff77e1] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 20:09:10.975 DEBUG [5fc7788b-4742-4832-97a8-166483ff77e1] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 20:09:10.977  INFO [5fc7788b-4742-4832-97a8-166483ff77e1] 22644 --- [nio-8080-exec-5] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 20:09:10.980 DEBUG [ae1e040e-4ba4-4b4f-b8bd-cc430d541b55] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 20:09:10.984 DEBUG [ae1e040e-4ba4-4b4f-b8bd-cc430d541b55] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 20:09:10.986  INFO [ae1e040e-4ba4-4b4f-b8bd-cc430d541b55] 22644 --- [nio-8080-exec-4] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 20:09:11.016 DEBUG [092d88c6-248e-4d2d-8af3-3dd7b3783b5b] 22644 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:09:11.020 DEBUG [092d88c6-248e-4d2d-8af3-3dd7b3783b5b] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 20:09:11.032 DEBUG [4bf93475-e87c-44ae-b2de-4c489db38041] 22644 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:09:11.034 DEBUG [bc284f0c-26e3-4513-baa5-4f0ba5407210] 22644 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:09:11.035 DEBUG [4bf93475-e87c-44ae-b2de-4c489db38041] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 20:09:11.035 DEBUG [bc284f0c-26e3-4513-baa5-4f0ba5407210] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:09:11.035  INFO [bc284f0c-26e3-4513-baa5-4f0ba5407210] 22644 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:09:11.128  WARN [092d88c6-248e-4d2d-8af3-3dd7b3783b5b] 22644 --- [nio-8080-exec-6] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 20:09:11.129  WARN [092d88c6-248e-4d2d-8af3-3dd7b3783b5b] 22644 --- [nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 20:09:11.148  WARN [4bf93475-e87c-44ae-b2de-4c489db38041] 22644 --- [io-8080-exec-10] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 20:09:11.150  WARN [4bf93475-e87c-44ae-b2de-4c489db38041] 22644 --- [io-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 20:09:11.155  INFO [bc284f0c-26e3-4513-baa5-4f0ba5407210] 22644 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 20:09:11.158  INFO [5fc7788b-4742-4832-97a8-166483ff77e1] 22644 --- [nio-8080-exec-5] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 20:09:11.161  INFO [ae1e040e-4ba4-4b4f-b8bd-cc430d541b55] 22644 --- [nio-8080-exec-4] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 20:09:11.160 DEBUG [5fc7788b-4742-4832-97a8-166483ff77e1] 22644 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:09:11.162 DEBUG [ae1e040e-4ba4-4b4f-b8bd-cc430d541b55] 22644 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:09:11.217 DEBUG [f253063d-ac2d-4327-b42b-efad23a0c83d] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:09:11.217 DEBUG [e2ea0865-23ee-439d-8cde-4ce99377a5d7] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:09:11.219 DEBUG [f253063d-ac2d-4327-b42b-efad23a0c83d] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:09:11.220 DEBUG [e2ea0865-23ee-439d-8cde-4ce99377a5d7] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:09:11.221  INFO [f253063d-ac2d-4327-b42b-efad23a0c83d] 22644 --- [nio-8080-exec-8] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 20:09:11.221  INFO [e2ea0865-23ee-439d-8cde-4ce99377a5d7] 22644 --- [nio-8080-exec-7] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 20:09:11.304  INFO [f253063d-ac2d-4327-b42b-efad23a0c83d] 22644 --- [nio-8080-exec-8] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 20:09:11.304  INFO [e2ea0865-23ee-439d-8cde-4ce99377a5d7] 22644 --- [nio-8080-exec-7] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 20:09:11.306 DEBUG [e2ea0865-23ee-439d-8cde-4ce99377a5d7] 22644 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:09:11.306 DEBUG [f253063d-ac2d-4327-b42b-efad23a0c83d] 22644 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:09:18.199 DEBUG [62c83dbe-71cf-42b7-80de-cd7951ea7c92] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:09:18.202 DEBUG [b959f3f9-8481-4ef7-85e3-d7f3145f3632] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:09:18.332 DEBUG [b959f3f9-8481-4ef7-85e3-d7f3145f3632] 22644 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:09:18.332 DEBUG [62c83dbe-71cf-42b7-80de-cd7951ea7c92] 22644 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:09:18.334 DEBUG [62c83dbe-71cf-42b7-80de-cd7951ea7c92] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:09:18.334 DEBUG [b959f3f9-8481-4ef7-85e3-d7f3145f3632] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:09:18.335  INFO [62c83dbe-71cf-42b7-80de-cd7951ea7c92] 22644 --- [nio-8080-exec-9] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:09:18.335  INFO [b959f3f9-8481-4ef7-85e3-d7f3145f3632] 22644 --- [nio-8080-exec-2] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:09:18.335  INFO [62c83dbe-71cf-42b7-80de-cd7951ea7c92] 22644 --- [nio-8080-exec-9] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:09:18.335  INFO [b959f3f9-8481-4ef7-85e3-d7f3145f3632] 22644 --- [nio-8080-exec-2] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:09:18.673 DEBUG [19e8ae07-2f5e-4f7f-b6e0-b00ab8032ecf] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:09:18.785 DEBUG [19e8ae07-2f5e-4f7f-b6e0-b00ab8032ecf] 22644 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:09:18.788 DEBUG [19e8ae07-2f5e-4f7f-b6e0-b00ab8032ecf] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:09:18.789  INFO [19e8ae07-2f5e-4f7f-b6e0-b00ab8032ecf] 22644 --- [nio-8080-exec-1] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:09:18.789  INFO [19e8ae07-2f5e-4f7f-b6e0-b00ab8032ecf] 22644 --- [nio-8080-exec-1] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:09:34.795 DEBUG [47f132f7-f6a4-49e9-9924-1e31360e9962] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/cart/add
2025-06-29 20:09:34.900 DEBUG [47f132f7-f6a4-49e9-9924-1e31360e9962] 22644 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:09:34.902 DEBUG [47f132f7-f6a4-49e9-9924-1e31360e9962] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/cart/add
2025-06-29 20:09:35.004  INFO [47f132f7-f6a4-49e9-9924-1e31360e9962] 22644 --- [nio-8080-exec-6] o.e.x.controllers.CartController         : User ****@****.*** request to add flight ID 16 to persistent cart
2025-06-29 20:09:35.008  INFO [47f132f7-f6a4-49e9-9924-1e31360e9962] 22644 --- [nio-8080-exec-6] o.e.x.controllers.CartController         : AddToCart request: flightId=16, seatNumber=1D, seatType=SEAT_TYPE_UPFRONT, deferSeat=false, randomSeat=false
2025-06-29 20:09:35.013  INFO [47f132f7-f6a4-49e9-9924-1e31360e9962] 22644 --- [nio-8080-exec-6] o.e.xlr8travel.services.CartServiceImpl  : Added new flight ID 16 to cart for user ****@****.***
2025-06-29 20:09:35.033  INFO [47f132f7-f6a4-49e9-9924-1e31360e9962] 22644 --- [nio-8080-exec-6] o.e.x.controllers.CartController         : Flight ID 16 added/incremented in persistent cart for user ****@****.***.
2025-06-29 20:09:35.217 DEBUG [dac374c1-9efe-47cb-98ee-646a65214f30] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:09:35.414 DEBUG [dac374c1-9efe-47cb-98ee-646a65214f30] 22644 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:09:35.417 DEBUG [dac374c1-9efe-47cb-98ee-646a65214f30] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:09:35.418  INFO [dac374c1-9efe-47cb-98ee-646a65214f30] 22644 --- [io-8080-exec-10] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:09:35.583  INFO [dac374c1-9efe-47cb-98ee-646a65214f30] 22644 --- [io-8080-exec-10] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 20:09:36.535 DEBUG [23f0cb2d-7e62-405d-b148-1c208412e413] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:09:36.535 DEBUG [97b357bd-a94c-43ea-84e7-d07fce643895] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:09:36.703 DEBUG [23f0cb2d-7e62-405d-b148-1c208412e413] 22644 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:09:36.703 DEBUG [97b357bd-a94c-43ea-84e7-d07fce643895] 22644 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:09:36.705 DEBUG [23f0cb2d-7e62-405d-b148-1c208412e413] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:09:36.705 DEBUG [97b357bd-a94c-43ea-84e7-d07fce643895] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:09:36.705  INFO [97b357bd-a94c-43ea-84e7-d07fce643895] 22644 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:09:36.705  INFO [23f0cb2d-7e62-405d-b148-1c208412e413] 22644 --- [nio-8080-exec-5] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:09:36.838  INFO [23f0cb2d-7e62-405d-b148-1c208412e413] 22644 --- [nio-8080-exec-5] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 20:09:36.838  INFO [97b357bd-a94c-43ea-84e7-d07fce643895] 22644 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 20:09:57.784 DEBUG [782f84f0-2ec8-4a42-8ebe-cda40103bb09] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:09:57.785 DEBUG [e1f6f446-d5c0-4c78-8a2c-fbed38fd4416] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:09:57.917 DEBUG [782f84f0-2ec8-4a42-8ebe-cda40103bb09] 22644 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:09:57.917 DEBUG [e1f6f446-d5c0-4c78-8a2c-fbed38fd4416] 22644 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:09:57.919 DEBUG [782f84f0-2ec8-4a42-8ebe-cda40103bb09] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:09:57.919 DEBUG [e1f6f446-d5c0-4c78-8a2c-fbed38fd4416] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:09:57.919  INFO [e1f6f446-d5c0-4c78-8a2c-fbed38fd4416] 22644 --- [nio-8080-exec-8] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:09:57.919  INFO [782f84f0-2ec8-4a42-8ebe-cda40103bb09] 22644 --- [nio-8080-exec-4] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:09:58.025  INFO [782f84f0-2ec8-4a42-8ebe-cda40103bb09] 22644 --- [nio-8080-exec-4] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 20:09:58.025  INFO [e1f6f446-d5c0-4c78-8a2c-fbed38fd4416] 22644 --- [nio-8080-exec-8] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 20:22:40.873 DEBUG [623096b9-2b49-439c-90a3-9c5498b0de44] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/nearby?origin=OTP
2025-06-29 20:22:40.877 DEBUG [623096b9-2b49-439c-90a3-9c5498b0de44] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/nearby?origin=OTP
2025-06-29 20:22:40.880  INFO [623096b9-2b49-439c-90a3-9c5498b0de44] 22644 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Received request for nearby flights from origin: OTP, departureDate: null
2025-06-29 20:22:40.880  INFO [623096b9-2b49-439c-90a3-9c5498b0de44] 22644 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Using search date: 2025-06-29
2025-06-29 20:22:40.881  INFO [623096b9-2b49-439c-90a3-9c5498b0de44] 22644 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Cache key: OTP-2025-06-29
2025-06-29 20:22:40.881  INFO [623096b9-2b49-439c-90a3-9c5498b0de44] 22644 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : No valid cache found. Searching nearby flights from origin: OTP, after date: 2025-06-29
2025-06-29 20:22:40.881  INFO [623096b9-2b49-439c-90a3-9c5498b0de44] 22644 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Calling flightService.findByOriginAndDepartureDateAfter for origin: OTP, date: 2025-06-29
2025-06-29 20:22:40.970  INFO [623096b9-2b49-439c-90a3-9c5498b0de44] 22644 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Database query completed, found 16 flights
2025-06-29 20:22:40.970  INFO [623096b9-2b49-439c-90a3-9c5498b0de44] 22644 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Converting 16 Flight entities to FlightDTOs
2025-06-29 20:22:40.971  INFO [623096b9-2b49-439c-90a3-9c5498b0de44] 22644 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Converted to 16 FlightDTOs
2025-06-29 20:22:40.971  INFO [623096b9-2b49-439c-90a3-9c5498b0de44] 22644 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Grouping flights by destination country
2025-06-29 20:22:40.971  INFO [623096b9-2b49-439c-90a3-9c5498b0de44] 22644 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Grouped flights into 7 countries
2025-06-29 20:22:40.971  INFO [623096b9-2b49-439c-90a3-9c5498b0de44] 22644 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Selecting diverse flights - one from each country first
2025-06-29 20:22:40.972  INFO [623096b9-2b49-439c-90a3-9c5498b0de44] 22644 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Adding first flight from Greece (has 2 flights)
2025-06-29 20:22:40.972  INFO [623096b9-2b49-439c-90a3-9c5498b0de44] 22644 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Adding first flight from Netherlands (has 2 flights)
2025-06-29 20:22:40.972  INFO [623096b9-2b49-439c-90a3-9c5498b0de44] 22644 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Adding first flight from Italy (has 2 flights)
2025-06-29 20:22:40.972  INFO [623096b9-2b49-439c-90a3-9c5498b0de44] 22644 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Adding first flight from United Kingdom (has 2 flights)
2025-06-29 20:22:40.972  INFO [623096b9-2b49-439c-90a3-9c5498b0de44] 22644 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Adding first flight from France (has 2 flights)
2025-06-29 20:22:40.973  INFO [623096b9-2b49-439c-90a3-9c5498b0de44] 22644 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Adding first flight from Switzerland (has 2 flights)
2025-06-29 20:22:40.973  INFO [623096b9-2b49-439c-90a3-9c5498b0de44] 22644 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Reached 6 flights after first pass, stopping
2025-06-29 20:22:40.973  INFO [623096b9-2b49-439c-90a3-9c5498b0de44] 22644 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Caching 6 diverse flights with key: OTP-2025-06-29
2025-06-29 20:22:40.973  INFO [623096b9-2b49-439c-90a3-9c5498b0de44] 22644 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Returning 6 diverse nearby flights from: OTP
2025-06-29 20:22:40.978 DEBUG [623096b9-2b49-439c-90a3-9c5498b0de44] 22644 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:22:43.783 DEBUG [285cfff4-2c79-4959-b2df-54c2cc62f4c2] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-29 20:22:43.784 DEBUG [285cfff4-2c79-4959-b2df-54c2cc62f4c2] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-29 20:22:43.786  INFO [285cfff4-2c79-4959-b2df-54c2cc62f4c2] 22644 --- [nio-8080-exec-9] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris
2025-06-29 20:22:43.786  INFO [285cfff4-2c79-4959-b2df-54c2cc62f4c2] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-29 20:22:43.786  INFO [285cfff4-2c79-4959-b2df-54c2cc62f4c2] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-29 20:22:43.786 DEBUG [285cfff4-2c79-4959-b2df-54c2cc62f4c2] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-29).    For example, if today is 2025-06-29, a good departure date would be between 2025-07-06 and 2025-07-13, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris";
2025-06-29 20:22:43.789  INFO [285cfff4-2c79-4959-b2df-54c2cc62f4c2] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-29 20:22:43.789  INFO [285cfff4-2c79-4959-b2df-54c2cc62f4c2] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-29 20:22:43.789  INFO [285cfff4-2c79-4959-b2df-54c2cc62f4c2] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-29 20:22:43.789  INFO [285cfff4-2c79-4959-b2df-54c2cc62f4c2] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 20:22:43.790  INFO [285cfff4-2c79-4959-b2df-54c2cc62f4c2] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-29 20:22:43.796  INFO [285cfff4-2c79-4959-b2df-54c2cc62f4c2] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-29 20:22:43.796  INFO [285cfff4-2c79-4959-b2df-54c2cc62f4c2] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-29 20:22:43.797  INFO [285cfff4-2c79-4959-b2df-54c2cc62f4c2] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-29 20:22:43.797  INFO [285cfff4-2c79-4959-b2df-54c2cc62f4c2] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-29 20:22:45.718  INFO [285cfff4-2c79-4959-b2df-54c2cc62f4c2] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-29 20:22:45.718  INFO [285cfff4-2c79-4959-b2df-54c2cc62f4c2] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Response length: 195 characters
2025-06-29 20:22:45.718 DEBUG [285cfff4-2c79-4959-b2df-54c2cc62f4c2] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-06",
  "returnDate": "2025-07-08",
  "tripType": "roundTrip",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-29 20:22:45.719 DEBUG [285cfff4-2c79-4959-b2df-54c2cc62f4c2] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-29 20:22:45.719 DEBUG [285cfff4-2c79-4959-b2df-54c2cc62f4c2] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-29 20:22:45.719 DEBUG [285cfff4-2c79-4959-b2df-54c2cc62f4c2] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-29 20:22:45.720 DEBUG [285cfff4-2c79-4959-b2df-54c2cc62f4c2] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 20:22:45.720  INFO [285cfff4-2c79-4959-b2df-54c2cc62f4c2] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 20:22:45.720  INFO [285cfff4-2c79-4959-b2df-54c2cc62f4c2] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-06, returnDate=2025-07-08, tripType=roundTrip, adults=1, children=0, infants=0
2025-06-29 20:22:45.721  INFO [285cfff4-2c79-4959-b2df-54c2cc62f4c2] 22644 --- [nio-8080-exec-9] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-29 20:22:45.722 DEBUG [285cfff4-2c79-4959-b2df-54c2cc62f4c2] 22644 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:22:47.879 DEBUG [7e2be40a-e937-4bb8-b821-9d53131993e7] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-29 20:22:47.880 DEBUG [7e2be40a-e937-4bb8-b821-9d53131993e7] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-29 20:22:47.884  INFO [7e2be40a-e937-4bb8-b821-9d53131993e7] 22644 --- [nio-8080-exec-1] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris one way
2025-06-29 20:22:47.885  INFO [7e2be40a-e937-4bb8-b821-9d53131993e7] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-29 20:22:47.885  INFO [7e2be40a-e937-4bb8-b821-9d53131993e7] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-29 20:22:47.886 DEBUG [7e2be40a-e937-4bb8-b821-9d53131993e7] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-29).    For example, if today is 2025-06-29, a good departure date would be between 2025-07-06 and 2025-07-13, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris one way";
2025-06-29 20:22:47.889  INFO [7e2be40a-e937-4bb8-b821-9d53131993e7] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-29 20:22:47.889  INFO [7e2be40a-e937-4bb8-b821-9d53131993e7] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-29 20:22:47.890  INFO [7e2be40a-e937-4bb8-b821-9d53131993e7] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-29 20:22:47.890  INFO [7e2be40a-e937-4bb8-b821-9d53131993e7] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 20:22:47.890  INFO [7e2be40a-e937-4bb8-b821-9d53131993e7] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-29 20:22:47.892  INFO [7e2be40a-e937-4bb8-b821-9d53131993e7] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-29 20:22:47.892  INFO [7e2be40a-e937-4bb8-b821-9d53131993e7] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-29 20:22:47.893  INFO [7e2be40a-e937-4bb8-b821-9d53131993e7] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-29 20:22:47.893  INFO [7e2be40a-e937-4bb8-b821-9d53131993e7] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-29 20:22:49.546  INFO [7e2be40a-e937-4bb8-b821-9d53131993e7] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-29 20:22:49.547  INFO [7e2be40a-e937-4bb8-b821-9d53131993e7] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Response length: 184 characters
2025-06-29 20:22:49.547 DEBUG [7e2be40a-e937-4bb8-b821-9d53131993e7] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-06",
  "returnDate": null,
  "tripType": "oneWay",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-29 20:22:49.548 DEBUG [7e2be40a-e937-4bb8-b821-9d53131993e7] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-29 20:22:49.548 DEBUG [7e2be40a-e937-4bb8-b821-9d53131993e7] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-29 20:22:49.549 DEBUG [7e2be40a-e937-4bb8-b821-9d53131993e7] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-29 20:22:49.549 DEBUG [7e2be40a-e937-4bb8-b821-9d53131993e7] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 20:22:49.549  INFO [7e2be40a-e937-4bb8-b821-9d53131993e7] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 20:22:49.549  INFO [7e2be40a-e937-4bb8-b821-9d53131993e7] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-06, returnDate=null, tripType=oneWay, adults=1, children=0, infants=0
2025-06-29 20:22:49.550  INFO [7e2be40a-e937-4bb8-b821-9d53131993e7] 22644 --- [nio-8080-exec-1] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-29 20:22:49.551 DEBUG [7e2be40a-e937-4bb8-b821-9d53131993e7] 22644 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:22:51.305 DEBUG [91921546-05c2-4af0-902c-c38be7fc0aae] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 20:22:51.416 DEBUG [91921546-05c2-4af0-902c-c38be7fc0aae] 22644 --- [nio-8080-exec-6] o.s.s.core.session.SessionRegistryImpl   : Registering session CAF3AE65F4489B6B32F508222216F61B, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}])
2025-06-29 20:22:51.416 DEBUG [91921546-05c2-4af0-902c-c38be7fc0aae] 22644 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@26e937c4]
2025-06-29 20:22:51.418 DEBUG [91921546-05c2-4af0-902c-c38be7fc0aae] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me
2025-06-29 20:22:51.418  INFO [91921546-05c2-4af0-902c-c38be7fc0aae] 22644 --- [nio-8080-exec-6] o.e.x.controllers.UserController         : Request received for current user details: ****@****.***
2025-06-29 20:22:51.532  INFO [91921546-05c2-4af0-902c-c38be7fc0aae] 22644 --- [nio-8080-exec-6] o.e.x.controllers.UserController         : Returning details for user: ****@****.***
2025-06-29 20:22:51.609 DEBUG [622a735f-98d0-4780-9d34-037f97513f29] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 20:22:51.609 DEBUG [f775d802-e4f2-4b43-99ac-1a3d76f520ad] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:22:51.610 DEBUG [f775d802-e4f2-4b43-99ac-1a3d76f520ad] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:22:51.616  INFO [f775d802-e4f2-4b43-99ac-1a3d76f520ad] 22644 --- [nio-8080-exec-5] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 20:22:51.622  INFO [f775d802-e4f2-4b43-99ac-1a3d76f520ad] 22644 --- [nio-8080-exec-5] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 20:22:51.619 DEBUG [8c7e18ef-26a8-47e3-a1c5-569a30d5a833] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:22:51.707  INFO [f775d802-e4f2-4b43-99ac-1a3d76f520ad] 22644 --- [nio-8080-exec-5] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 20:22:51.709 DEBUG [f775d802-e4f2-4b43-99ac-1a3d76f520ad] 22644 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:22:51.719 DEBUG [c74890ec-83e3-4f5b-9cf4-522fe730255c] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:22:51.721 DEBUG [c74890ec-83e3-4f5b-9cf4-522fe730255c] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:22:51.723  INFO [c74890ec-83e3-4f5b-9cf4-522fe730255c] 22644 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 20:22:51.723  INFO [c74890ec-83e3-4f5b-9cf4-522fe730255c] 22644 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 20:22:51.752 DEBUG [fc3bb54b-0414-448c-8e84-63f48a1b6e2e] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 20:22:51.753 DEBUG [fc3bb54b-0414-448c-8e84-63f48a1b6e2e] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 20:22:51.755  INFO [fc3bb54b-0414-448c-8e84-63f48a1b6e2e] 22644 --- [nio-8080-exec-8] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 20:22:51.786 DEBUG [8c7e18ef-26a8-47e3-a1c5-569a30d5a833] 22644 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:22:51.788 DEBUG [8c7e18ef-26a8-47e3-a1c5-569a30d5a833] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:22:51.789  INFO [8c7e18ef-26a8-47e3-a1c5-569a30d5a833] 22644 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:22:51.789 DEBUG [622a735f-98d0-4780-9d34-037f97513f29] 22644 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:22:51.790  INFO [c74890ec-83e3-4f5b-9cf4-522fe730255c] 22644 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 20:22:51.791 DEBUG [622a735f-98d0-4780-9d34-037f97513f29] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 20:22:51.791 DEBUG [c74890ec-83e3-4f5b-9cf4-522fe730255c] 22644 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:22:51.904  WARN [622a735f-98d0-4780-9d34-037f97513f29] 22644 --- [io-8080-exec-10] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 20:22:51.906  WARN [622a735f-98d0-4780-9d34-037f97513f29] 22644 --- [io-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 20:22:51.912 DEBUG [860376df-2b7f-4c53-9ac0-7ed1ebf58a37] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 20:22:51.912  INFO [8c7e18ef-26a8-47e3-a1c5-569a30d5a833] 22644 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 20:22:51.929  INFO [fc3bb54b-0414-448c-8e84-63f48a1b6e2e] 22644 --- [nio-8080-exec-8] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 20:22:51.930 DEBUG [fc3bb54b-0414-448c-8e84-63f48a1b6e2e] 22644 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:22:51.938 DEBUG [b5c29ff1-057e-43b3-8d3e-0ab414cebdbe] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 20:22:51.940 DEBUG [b5c29ff1-057e-43b3-8d3e-0ab414cebdbe] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 20:22:51.940  INFO [b5c29ff1-057e-43b3-8d3e-0ab414cebdbe] 22644 --- [nio-8080-exec-2] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 20:22:51.967 DEBUG [e0ff07d6-b194-4080-b674-c3631adc4ab7] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:22:51.968 DEBUG [e0ff07d6-b194-4080-b674-c3631adc4ab7] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:22:51.969  INFO [e0ff07d6-b194-4080-b674-c3631adc4ab7] 22644 --- [nio-8080-exec-9] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 20:22:51.985  INFO [b5c29ff1-057e-43b3-8d3e-0ab414cebdbe] 22644 --- [nio-8080-exec-2] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 20:22:51.986 DEBUG [b5c29ff1-057e-43b3-8d3e-0ab414cebdbe] 22644 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:22:52.030 DEBUG [860376df-2b7f-4c53-9ac0-7ed1ebf58a37] 22644 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:22:52.032 DEBUG [860376df-2b7f-4c53-9ac0-7ed1ebf58a37] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 20:22:52.126  WARN [860376df-2b7f-4c53-9ac0-7ed1ebf58a37] 22644 --- [nio-8080-exec-7] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 20:22:52.127  WARN [860376df-2b7f-4c53-9ac0-7ed1ebf58a37] 22644 --- [nio-8080-exec-7] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 20:22:52.174  INFO [e0ff07d6-b194-4080-b674-c3631adc4ab7] 22644 --- [nio-8080-exec-9] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 20:22:52.175 DEBUG [e0ff07d6-b194-4080-b674-c3631adc4ab7] 22644 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:22:52.182 DEBUG [41074575-edec-4df2-9475-916ab8a13ef1] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:22:52.183 DEBUG [41074575-edec-4df2-9475-916ab8a13ef1] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:22:52.184  INFO [41074575-edec-4df2-9475-916ab8a13ef1] 22644 --- [nio-8080-exec-1] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 20:22:52.233  INFO [41074575-edec-4df2-9475-916ab8a13ef1] 22644 --- [nio-8080-exec-1] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 20:22:52.234 DEBUG [41074575-edec-4df2-9475-916ab8a13ef1] 22644 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:22:58.024 DEBUG [4d22d6ff-5654-4093-93ef-8505f0487d26] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:22:58.147 DEBUG [4d22d6ff-5654-4093-93ef-8505f0487d26] 22644 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:22:58.150 DEBUG [4d22d6ff-5654-4093-93ef-8505f0487d26] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:22:58.151  INFO [4d22d6ff-5654-4093-93ef-8505f0487d26] 22644 --- [nio-8080-exec-6] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:22:58.151  INFO [4d22d6ff-5654-4093-93ef-8505f0487d26] 22644 --- [nio-8080-exec-6] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:22:58.213 DEBUG [3e2a4bec-4a1d-468b-8393-ff369b5deb13] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:22:58.319 DEBUG [3e2a4bec-4a1d-468b-8393-ff369b5deb13] 22644 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:22:58.324 DEBUG [3e2a4bec-4a1d-468b-8393-ff369b5deb13] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:22:58.324  INFO [3e2a4bec-4a1d-468b-8393-ff369b5deb13] 22644 --- [nio-8080-exec-5] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:22:58.325  INFO [3e2a4bec-4a1d-468b-8393-ff369b5deb13] 22644 --- [nio-8080-exec-5] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:22:58.373 DEBUG [90159193-9e11-4a3d-ad79-4dd5be579e7b] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:22:58.504 DEBUG [90159193-9e11-4a3d-ad79-4dd5be579e7b] 22644 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:22:58.509 DEBUG [90159193-9e11-4a3d-ad79-4dd5be579e7b] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:22:58.510  INFO [90159193-9e11-4a3d-ad79-4dd5be579e7b] 22644 --- [nio-8080-exec-4] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:22:58.510  INFO [90159193-9e11-4a3d-ad79-4dd5be579e7b] 22644 --- [nio-8080-exec-4] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:23:05.087 DEBUG [14eb503d-7565-4195-916a-337690061145] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:23:05.195 DEBUG [14eb503d-7565-4195-916a-337690061145] 22644 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:23:05.197 DEBUG [14eb503d-7565-4195-916a-337690061145] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:23:05.198  INFO [14eb503d-7565-4195-916a-337690061145] 22644 --- [io-8080-exec-10] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:23:05.198  INFO [14eb503d-7565-4195-916a-337690061145] 22644 --- [io-8080-exec-10] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:23:05.244 DEBUG [514bbbb5-d89e-4535-832e-111f218f4ae1] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:23:05.368 DEBUG [514bbbb5-d89e-4535-832e-111f218f4ae1] 22644 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:23:05.370 DEBUG [514bbbb5-d89e-4535-832e-111f218f4ae1] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:23:05.371  INFO [514bbbb5-d89e-4535-832e-111f218f4ae1] 22644 --- [nio-8080-exec-3] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:23:05.372  INFO [514bbbb5-d89e-4535-832e-111f218f4ae1] 22644 --- [nio-8080-exec-3] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:23:05.427 DEBUG [6bfd34ff-21ef-400f-9390-9a2582cfd453] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:23:05.543 DEBUG [6bfd34ff-21ef-400f-9390-9a2582cfd453] 22644 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:23:05.548 DEBUG [6bfd34ff-21ef-400f-9390-9a2582cfd453] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:23:05.549  INFO [6bfd34ff-21ef-400f-9390-9a2582cfd453] 22644 --- [nio-8080-exec-8] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:23:05.550  INFO [6bfd34ff-21ef-400f-9390-9a2582cfd453] 22644 --- [nio-8080-exec-8] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:23:11.182 DEBUG [4c59a60b-8c6f-4013-b323-cc2d1e23652c] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/cart/add
2025-06-29 20:23:11.285 DEBUG [4c59a60b-8c6f-4013-b323-cc2d1e23652c] 22644 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:23:11.287 DEBUG [4c59a60b-8c6f-4013-b323-cc2d1e23652c] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /api/cart/add
2025-06-29 20:23:11.388  INFO [4c59a60b-8c6f-4013-b323-cc2d1e23652c] 22644 --- [nio-8080-exec-2] o.e.x.controllers.CartController         : User ****@****.*** request to add flight ID 16 to persistent cart
2025-06-29 20:23:11.392  INFO [4c59a60b-8c6f-4013-b323-cc2d1e23652c] 22644 --- [nio-8080-exec-2] o.e.x.controllers.CartController         : AddToCart request: flightId=16, seatNumber=13D, seatType=SEAT_TYPE_STANDARD, deferSeat=false, randomSeat=false
2025-06-29 20:23:11.398  INFO [4c59a60b-8c6f-4013-b323-cc2d1e23652c] 22644 --- [nio-8080-exec-2] o.e.xlr8travel.services.CartServiceImpl  : Updated flight ID 16 in cart for user ****@****.***
2025-06-29 20:23:11.417  INFO [4c59a60b-8c6f-4013-b323-cc2d1e23652c] 22644 --- [nio-8080-exec-2] o.e.x.controllers.CartController         : Flight ID 16 added/incremented in persistent cart for user ****@****.***.
2025-06-29 20:23:11.432 DEBUG [d94c99b2-335b-44db-b8c7-64bb87c120d6] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:23:11.551 DEBUG [d94c99b2-335b-44db-b8c7-64bb87c120d6] 22644 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:23:11.553 DEBUG [d94c99b2-335b-44db-b8c7-64bb87c120d6] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:23:11.554  INFO [d94c99b2-335b-44db-b8c7-64bb87c120d6] 22644 --- [nio-8080-exec-7] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:23:11.699  INFO [d94c99b2-335b-44db-b8c7-64bb87c120d6] 22644 --- [nio-8080-exec-7] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 2 total quantity.
2025-06-29 20:23:12.024 DEBUG [264dbcab-222e-4e4f-a6b5-1800f9c2a740] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:23:12.136 DEBUG [264dbcab-222e-4e4f-a6b5-1800f9c2a740] 22644 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:23:12.138 DEBUG [264dbcab-222e-4e4f-a6b5-1800f9c2a740] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:23:12.138  INFO [264dbcab-222e-4e4f-a6b5-1800f9c2a740] 22644 --- [nio-8080-exec-9] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:23:12.241  INFO [264dbcab-222e-4e4f-a6b5-1800f9c2a740] 22644 --- [nio-8080-exec-9] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 2 total quantity.
2025-06-29 20:23:12.249 DEBUG [06ce08ae-da60-4bc5-ba7d-07569178cb53] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:23:12.348 DEBUG [06ce08ae-da60-4bc5-ba7d-07569178cb53] 22644 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:23:12.350 DEBUG [06ce08ae-da60-4bc5-ba7d-07569178cb53] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:23:12.351  INFO [06ce08ae-da60-4bc5-ba7d-07569178cb53] 22644 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:23:12.530  INFO [06ce08ae-da60-4bc5-ba7d-07569178cb53] 22644 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 2 total quantity.
2025-06-29 20:23:16.501 DEBUG [93028ad2-ecf0-4622-be5e-766667842b78] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:23:16.606 DEBUG [93028ad2-ecf0-4622-be5e-766667842b78] 22644 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:23:16.608 DEBUG [93028ad2-ecf0-4622-be5e-766667842b78] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:23:16.608  INFO [93028ad2-ecf0-4622-be5e-766667842b78] 22644 --- [nio-8080-exec-6] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:23:16.709  INFO [93028ad2-ecf0-4622-be5e-766667842b78] 22644 --- [nio-8080-exec-6] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 2 total quantity.
2025-06-29 20:23:16.716 DEBUG [44cf12f4-921e-47cb-b1ce-f89bc730bfb5] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:23:16.851 DEBUG [44cf12f4-921e-47cb-b1ce-f89bc730bfb5] 22644 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:23:16.853 DEBUG [44cf12f4-921e-47cb-b1ce-f89bc730bfb5] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:23:16.854  INFO [44cf12f4-921e-47cb-b1ce-f89bc730bfb5] 22644 --- [nio-8080-exec-5] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:23:16.974  INFO [44cf12f4-921e-47cb-b1ce-f89bc730bfb5] 22644 --- [nio-8080-exec-5] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 2 total quantity.
2025-06-29 20:23:24.277 DEBUG [cd5b4aa1-d94e-4fa4-9516-7f3df204be2a] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing POST /api/checkout/create-payment-intent
2025-06-29 20:23:24.278 DEBUG [cd5b4aa1-d94e-4fa4-9516-7f3df204be2a] 22644 --- [nio-8080-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 20:23:24.278 DEBUG [cd5b4aa1-d94e-4fa4-9516-7f3df204be2a] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured POST /api/checkout/create-payment-intent
2025-06-29 20:23:24.282  INFO [cd5b4aa1-d94e-4fa4-9516-7f3df204be2a] 22644 --- [nio-8080-exec-4] o.e.x.controllers.PaymentController      : Creating payment intent for amount: 41490 ron
2025-06-29 20:23:24.776  INFO [cd5b4aa1-d94e-4fa4-9516-7f3df204be2a] 22644 --- [nio-8080-exec-4] o.e.x.controllers.PaymentController      : Payment intent created successfully: pi_3RfOwrGf8s1WZJnq1orM42NK
2025-06-29 20:23:26.020 DEBUG [1b03e979-c52a-4990-8503-76982fea337f] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing POST /api/checkout/confirm
2025-06-29 20:23:26.116 DEBUG [1b03e979-c52a-4990-8503-76982fea337f] 22644 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:23:26.118 DEBUG [1b03e979-c52a-4990-8503-76982fea337f] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured POST /api/checkout/confirm
2025-06-29 20:23:26.119  INFO [1b03e979-c52a-4990-8503-76982fea337f] 22644 --- [io-8080-exec-10] o.e.x.controllers.CheckoutController     : Received purchase confirmation request.
2025-06-29 20:23:26.204  INFO [1b03e979-c52a-4990-8503-76982fea337f] 22644 --- [io-8080-exec-10] o.e.x.controllers.CheckoutController     : Processing purchase for user: ****@****.***
2025-06-29 20:23:26.211  INFO [1b03e979-c52a-4990-8503-76982fea337f] 22644 --- [io-8080-exec-10] o.e.x.controllers.CheckoutController     : User ****@****.*** persistent cart has 1 items.
2025-06-29 20:23:26.211  WARN [1b03e979-c52a-4990-8503-76982fea337f] 22644 --- [io-8080-exec-10] o.e.x.controllers.CheckoutController     : !!! SIMULATING successful payment processing for user ****@****.*** !!!
2025-06-29 20:23:26.212  INFO [1b03e979-c52a-4990-8503-76982fea337f] 22644 --- [io-8080-exec-10] o.e.x.services.OrderServiceImpl          : Creating order from persistent cart for user: ****@****.***
2025-06-29 20:23:26.217  INFO [1b03e979-c52a-4990-8503-76982fea337f] 22644 --- [io-8080-exec-10] o.e.x.services.OrderServiceImpl          : Order 4 created for user ****@****.***, status: PENDING_PAYMENT. Total: 75.98
2025-06-29 20:23:26.218  INFO [1b03e979-c52a-4990-8503-76982fea337f] 22644 --- [io-8080-exec-10] o.e.x.services.OrderServiceImpl          : Created ticket with seat 13D of type SEAT_TYPE_STANDARD for flight XT-OTP-CDG-2 for user ****@****.***
2025-06-29 20:23:26.218  INFO [1b03e979-c52a-4990-8503-76982fea337f] 22644 --- [io-8080-exec-10] o.e.x.services.OrderServiceImpl          : Ticket has baggage type: BAGGAGE_TYPE_WEIGHT_CARRY_ON_0
2025-06-29 20:23:26.218  INFO [1b03e979-c52a-4990-8503-76982fea337f] 22644 --- [io-8080-exec-10] o.e.x.services.OrderServiceImpl          : Created ticket with seat 13D of type SEAT_TYPE_STANDARD for flight XT-OTP-CDG-2 for user ****@****.***
2025-06-29 20:23:26.219  INFO [1b03e979-c52a-4990-8503-76982fea337f] 22644 --- [io-8080-exec-10] o.e.x.services.OrderServiceImpl          : Ticket has baggage type: BAGGAGE_TYPE_WEIGHT_CARRY_ON_0
2025-06-29 20:23:27.671  INFO [1b03e979-c52a-4990-8503-76982fea337f] 22644 --- [io-8080-exec-10] o.e.x.services.EmailServiceImpl          : Purchase confirmation email sent to ****@****.***
2025-06-29 20:23:27.672  INFO [1b03e979-c52a-4990-8503-76982fea337f] 22644 --- [io-8080-exec-10] o.e.x.services.OrderServiceImpl          : Purchase confirmation email sent to user: ****@****.***
2025-06-29 20:23:27.690  INFO [1b03e979-c52a-4990-8503-76982fea337f] 22644 --- [io-8080-exec-10] o.e.x.controllers.CheckoutController     : Order successfully created for user ****@****.***. Confirmation: 4
2025-06-29 20:23:27.694  INFO [1b03e979-c52a-4990-8503-76982fea337f] 22644 --- [io-8080-exec-10] o.e.xlr8travel.services.CartServiceImpl  : Clearing 1 items from cart for user ****@****.***
2025-06-29 20:23:27.711  INFO [1b03e979-c52a-4990-8503-76982fea337f] 22644 --- [io-8080-exec-10] o.e.x.controllers.CheckoutController     : Persistent cart cleared for user ****@****.***.
2025-06-29 20:23:27.722 DEBUG [06c8426a-0a92-4c3e-8e8e-a69d12d8120f] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing DELETE /api/cart/remove/16
2025-06-29 20:23:27.809 DEBUG [06c8426a-0a92-4c3e-8e8e-a69d12d8120f] 22644 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:23:27.811 DEBUG [06c8426a-0a92-4c3e-8e8e-a69d12d8120f] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured DELETE /api/cart/remove/16
2025-06-29 20:23:27.895  INFO [06c8426a-0a92-4c3e-8e8e-a69d12d8120f] 22644 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : User ****@****.*** request to remove flight ID 16 from persistent cart
2025-06-29 20:23:27.903  WARN [06c8426a-0a92-4c3e-8e8e-a69d12d8120f] 22644 --- [nio-8080-exec-3] o.e.xlr8travel.services.CartServiceImpl  : Attempted to remove flight ID 16 not found in cart for user ****@****.***
2025-06-29 20:23:27.905  WARN [06c8426a-0a92-4c3e-8e8e-a69d12d8120f] 22644 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : Attempted to remove flight ID 16 not found in persistent cart for user ****@****.***
2025-06-29 20:23:27.914 DEBUG [04071bb8-e872-4a37-86dc-cd87c544c98e] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:23:28.036 DEBUG [04071bb8-e872-4a37-86dc-cd87c544c98e] 22644 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:23:28.039 DEBUG [04071bb8-e872-4a37-86dc-cd87c544c98e] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:23:28.040  INFO [04071bb8-e872-4a37-86dc-cd87c544c98e] 22644 --- [nio-8080-exec-8] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:23:28.165  INFO [04071bb8-e872-4a37-86dc-cd87c544c98e] 22644 --- [nio-8080-exec-8] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 20:23:29.990 DEBUG [bfa0bb31-c321-4174-abcd-58c78e27ff5f] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 20:23:30.096 DEBUG [bfa0bb31-c321-4174-abcd-58c78e27ff5f] 22644 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:23:30.099 DEBUG [bfa0bb31-c321-4174-abcd-58c78e27ff5f] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 20:23:30.185  INFO [bfa0bb31-c321-4174-abcd-58c78e27ff5f] 22644 --- [nio-8080-exec-2] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 20:23:30.185  INFO [bfa0bb31-c321-4174-abcd-58c78e27ff5f] 22644 --- [nio-8080-exec-2] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 20:23:30.190  INFO [bfa0bb31-c321-4174-abcd-58c78e27ff5f] 22644 --- [nio-8080-exec-2] o.e.x.services.TicketServiceImpl         : Found 4 tickets eligible for check-in for user 4
2025-06-29 20:23:30.198 DEBUG [07b4e30a-bdea-4218-9a62-8cc7aa0741fd] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 20:23:30.291 DEBUG [07b4e30a-bdea-4218-9a62-8cc7aa0741fd] 22644 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:23:30.293 DEBUG [07b4e30a-bdea-4218-9a62-8cc7aa0741fd] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 20:23:30.377  INFO [07b4e30a-bdea-4218-9a62-8cc7aa0741fd] 22644 --- [nio-8080-exec-7] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 20:23:30.377  INFO [07b4e30a-bdea-4218-9a62-8cc7aa0741fd] 22644 --- [nio-8080-exec-7] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 20:23:30.381  INFO [07b4e30a-bdea-4218-9a62-8cc7aa0741fd] 22644 --- [nio-8080-exec-7] o.e.x.services.TicketServiceImpl         : Found 4 tickets eligible for check-in for user 4
2025-06-29 20:23:37.227 DEBUG [0e40da89-026d-41ac-801d-c7bfe416c843] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/nearby?origin=OTP
2025-06-29 20:23:37.228 DEBUG [0e40da89-026d-41ac-801d-c7bfe416c843] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/nearby?origin=OTP
2025-06-29 20:23:37.229  INFO [0e40da89-026d-41ac-801d-c7bfe416c843] 22644 --- [nio-8080-exec-9] o.e.x.controllers.FlightController       : Received request for nearby flights from origin: OTP, departureDate: null
2025-06-29 20:23:37.229  INFO [0e40da89-026d-41ac-801d-c7bfe416c843] 22644 --- [nio-8080-exec-9] o.e.x.controllers.FlightController       : Using search date: 2025-06-29
2025-06-29 20:23:37.232  INFO [0e40da89-026d-41ac-801d-c7bfe416c843] 22644 --- [nio-8080-exec-9] o.e.x.controllers.FlightController       : Cache key: OTP-2025-06-29
2025-06-29 20:23:37.233  INFO [0e40da89-026d-41ac-801d-c7bfe416c843] 22644 --- [nio-8080-exec-9] o.e.x.controllers.FlightController       : Returning cached nearby flights for origin: OTP, found 6 flights
2025-06-29 20:23:37.234 DEBUG [0e40da89-026d-41ac-801d-c7bfe416c843] 22644 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:23:40.992 DEBUG [aaec4814-c593-47a1-beae-340e668118ec] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-29 20:23:40.993 DEBUG [aaec4814-c593-47a1-beae-340e668118ec] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-29 20:23:40.994  INFO [aaec4814-c593-47a1-beae-340e668118ec] 22644 --- [nio-8080-exec-1] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris
2025-06-29 20:23:40.995  INFO [aaec4814-c593-47a1-beae-340e668118ec] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-29 20:23:40.995  INFO [aaec4814-c593-47a1-beae-340e668118ec] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-29 20:23:40.995 DEBUG [aaec4814-c593-47a1-beae-340e668118ec] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-29).    For example, if today is 2025-06-29, a good departure date would be between 2025-07-06 and 2025-07-13, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris";
2025-06-29 20:23:40.997  INFO [aaec4814-c593-47a1-beae-340e668118ec] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-29 20:23:40.998  INFO [aaec4814-c593-47a1-beae-340e668118ec] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-29 20:23:40.998  INFO [aaec4814-c593-47a1-beae-340e668118ec] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-29 20:23:40.998  INFO [aaec4814-c593-47a1-beae-340e668118ec] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 20:23:40.998  INFO [aaec4814-c593-47a1-beae-340e668118ec] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-29 20:23:41.000  INFO [aaec4814-c593-47a1-beae-340e668118ec] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-29 20:23:41.000  INFO [aaec4814-c593-47a1-beae-340e668118ec] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-29 20:23:41.001  INFO [aaec4814-c593-47a1-beae-340e668118ec] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-29 20:23:41.001  INFO [aaec4814-c593-47a1-beae-340e668118ec] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-29 20:23:42.918  INFO [aaec4814-c593-47a1-beae-340e668118ec] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-29 20:23:42.918  INFO [aaec4814-c593-47a1-beae-340e668118ec] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Response length: 195 characters
2025-06-29 20:23:42.918 DEBUG [aaec4814-c593-47a1-beae-340e668118ec] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-06",
  "returnDate": "2025-07-08",
  "tripType": "roundTrip",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-29 20:23:42.919 DEBUG [aaec4814-c593-47a1-beae-340e668118ec] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-29 20:23:42.919 DEBUG [aaec4814-c593-47a1-beae-340e668118ec] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-29 20:23:42.919 DEBUG [aaec4814-c593-47a1-beae-340e668118ec] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-29 20:23:42.920 DEBUG [aaec4814-c593-47a1-beae-340e668118ec] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 20:23:42.920  INFO [aaec4814-c593-47a1-beae-340e668118ec] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 20:23:42.920  INFO [aaec4814-c593-47a1-beae-340e668118ec] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-06, returnDate=2025-07-08, tripType=roundTrip, adults=1, children=0, infants=0
2025-06-29 20:23:42.920  INFO [aaec4814-c593-47a1-beae-340e668118ec] 22644 --- [nio-8080-exec-1] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-29 20:23:42.921 DEBUG [aaec4814-c593-47a1-beae-340e668118ec] 22644 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:23:46.676 DEBUG [11ed8d30-47d2-4399-a4c2-d242522c3bad] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-29 20:23:46.677 DEBUG [11ed8d30-47d2-4399-a4c2-d242522c3bad] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-29 20:23:46.678  INFO [11ed8d30-47d2-4399-a4c2-d242522c3bad] 22644 --- [nio-8080-exec-6] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris one way
2025-06-29 20:23:46.679  INFO [11ed8d30-47d2-4399-a4c2-d242522c3bad] 22644 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-29 20:23:46.679  INFO [11ed8d30-47d2-4399-a4c2-d242522c3bad] 22644 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-29 20:23:46.680 DEBUG [11ed8d30-47d2-4399-a4c2-d242522c3bad] 22644 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-29).    For example, if today is 2025-06-29, a good departure date would be between 2025-07-06 and 2025-07-13, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris one way";
2025-06-29 20:23:46.682  INFO [11ed8d30-47d2-4399-a4c2-d242522c3bad] 22644 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-29 20:23:46.682  INFO [11ed8d30-47d2-4399-a4c2-d242522c3bad] 22644 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-29 20:23:46.683  INFO [11ed8d30-47d2-4399-a4c2-d242522c3bad] 22644 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-29 20:23:46.683  INFO [11ed8d30-47d2-4399-a4c2-d242522c3bad] 22644 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 20:23:46.683  INFO [11ed8d30-47d2-4399-a4c2-d242522c3bad] 22644 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-29 20:23:46.685  INFO [11ed8d30-47d2-4399-a4c2-d242522c3bad] 22644 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-29 20:23:46.685  INFO [11ed8d30-47d2-4399-a4c2-d242522c3bad] 22644 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-29 20:23:46.685  INFO [11ed8d30-47d2-4399-a4c2-d242522c3bad] 22644 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-29 20:23:46.685  INFO [11ed8d30-47d2-4399-a4c2-d242522c3bad] 22644 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-29 20:23:48.572  INFO [11ed8d30-47d2-4399-a4c2-d242522c3bad] 22644 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-29 20:23:48.573  INFO [11ed8d30-47d2-4399-a4c2-d242522c3bad] 22644 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Response length: 184 characters
2025-06-29 20:23:48.573 DEBUG [11ed8d30-47d2-4399-a4c2-d242522c3bad] 22644 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-06",
  "returnDate": null,
  "tripType": "oneWay",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-29 20:23:48.574 DEBUG [11ed8d30-47d2-4399-a4c2-d242522c3bad] 22644 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-29 20:23:48.574 DEBUG [11ed8d30-47d2-4399-a4c2-d242522c3bad] 22644 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-29 20:23:48.574 DEBUG [11ed8d30-47d2-4399-a4c2-d242522c3bad] 22644 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-29 20:23:48.574 DEBUG [11ed8d30-47d2-4399-a4c2-d242522c3bad] 22644 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 20:23:48.574  INFO [11ed8d30-47d2-4399-a4c2-d242522c3bad] 22644 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 20:23:48.575  INFO [11ed8d30-47d2-4399-a4c2-d242522c3bad] 22644 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-06, returnDate=null, tripType=oneWay, adults=1, children=0, infants=0
2025-06-29 20:23:48.575  INFO [11ed8d30-47d2-4399-a4c2-d242522c3bad] 22644 --- [nio-8080-exec-6] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-29 20:23:48.576 DEBUG [11ed8d30-47d2-4399-a4c2-d242522c3bad] 22644 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:23:50.424 DEBUG [d93897ce-105c-447f-915a-c9bb32d624bb] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 20:23:50.530 DEBUG [d93897ce-105c-447f-915a-c9bb32d624bb] 22644 --- [nio-8080-exec-5] o.s.s.core.session.SessionRegistryImpl   : Registering session 4FE6BE14B3DD872BBBB14731BF2F9755, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}])
2025-06-29 20:23:50.530 DEBUG [d93897ce-105c-447f-915a-c9bb32d624bb] 22644 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@4f4a4d74]
2025-06-29 20:23:50.532 DEBUG [d93897ce-105c-447f-915a-c9bb32d624bb] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me
2025-06-29 20:23:50.532  INFO [d93897ce-105c-447f-915a-c9bb32d624bb] 22644 --- [nio-8080-exec-5] o.e.x.controllers.UserController         : Request received for current user details: ****@****.***
2025-06-29 20:23:50.640  INFO [d93897ce-105c-447f-915a-c9bb32d624bb] 22644 --- [nio-8080-exec-5] o.e.x.controllers.UserController         : Returning details for user: ****@****.***
2025-06-29 20:23:50.698 DEBUG [ab9bcbcc-bb6a-436c-bc3a-8bca3ff01864] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 20:23:50.699 DEBUG [ef3aee25-d034-44fe-b115-c28448a9ddf3] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:23:50.699 DEBUG [42642118-bee5-486c-935a-e6a80475fd78] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:23:50.700 DEBUG [ef3aee25-d034-44fe-b115-c28448a9ddf3] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:23:50.701  INFO [ef3aee25-d034-44fe-b115-c28448a9ddf3] 22644 --- [io-8080-exec-10] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 20:23:50.701  INFO [ef3aee25-d034-44fe-b115-c28448a9ddf3] 22644 --- [io-8080-exec-10] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 20:23:50.776  INFO [ef3aee25-d034-44fe-b115-c28448a9ddf3] 22644 --- [io-8080-exec-10] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 20:23:50.778 DEBUG [ef3aee25-d034-44fe-b115-c28448a9ddf3] 22644 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:23:50.784 DEBUG [d901e999-be2c-4619-bef6-42439e8e86c7] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:23:50.785 DEBUG [d901e999-be2c-4619-bef6-42439e8e86c7] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:23:50.787  INFO [d901e999-be2c-4619-bef6-42439e8e86c7] 22644 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 20:23:50.787  INFO [d901e999-be2c-4619-bef6-42439e8e86c7] 22644 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 20:23:50.807 DEBUG [b2b46522-7460-438a-bb76-b7db62ad025e] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 20:23:50.809 DEBUG [b2b46522-7460-438a-bb76-b7db62ad025e] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 20:23:50.810  INFO [b2b46522-7460-438a-bb76-b7db62ad025e] 22644 --- [nio-8080-exec-2] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 20:23:50.834 DEBUG [ab9bcbcc-bb6a-436c-bc3a-8bca3ff01864] 22644 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:23:50.836 DEBUG [42642118-bee5-486c-935a-e6a80475fd78] 22644 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:23:50.836 DEBUG [ab9bcbcc-bb6a-436c-bc3a-8bca3ff01864] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 20:23:50.837 DEBUG [42642118-bee5-486c-935a-e6a80475fd78] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:23:50.838  INFO [42642118-bee5-486c-935a-e6a80475fd78] 22644 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:23:50.841  INFO [d901e999-be2c-4619-bef6-42439e8e86c7] 22644 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 20:23:50.842 DEBUG [d901e999-be2c-4619-bef6-42439e8e86c7] 22644 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:23:50.939  WARN [ab9bcbcc-bb6a-436c-bc3a-8bca3ff01864] 22644 --- [nio-8080-exec-4] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 20:23:50.940  WARN [ab9bcbcc-bb6a-436c-bc3a-8bca3ff01864] 22644 --- [nio-8080-exec-4] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 20:23:50.946 DEBUG [6208a0fd-3f6e-4b1a-bb7f-3b61ad12fd1a] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 20:23:50.946  INFO [42642118-bee5-486c-935a-e6a80475fd78] 22644 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 20:23:50.963  INFO [b2b46522-7460-438a-bb76-b7db62ad025e] 22644 --- [nio-8080-exec-2] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 20:23:50.965 DEBUG [b2b46522-7460-438a-bb76-b7db62ad025e] 22644 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:23:50.972 DEBUG [60a4c771-6ab8-4c8a-be50-8dc0a629152a] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 20:23:50.977 DEBUG [60a4c771-6ab8-4c8a-be50-8dc0a629152a] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 20:23:50.978  INFO [60a4c771-6ab8-4c8a-be50-8dc0a629152a] 22644 --- [nio-8080-exec-9] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 20:23:50.985 DEBUG [95fff95b-24fa-4c67-832d-87102fd02634] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:23:50.985 DEBUG [95fff95b-24fa-4c67-832d-87102fd02634] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:23:50.986  INFO [95fff95b-24fa-4c67-832d-87102fd02634] 22644 --- [nio-8080-exec-1] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 20:23:51.019  INFO [60a4c771-6ab8-4c8a-be50-8dc0a629152a] 22644 --- [nio-8080-exec-9] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 20:23:51.020 DEBUG [60a4c771-6ab8-4c8a-be50-8dc0a629152a] 22644 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:23:51.065 DEBUG [6208a0fd-3f6e-4b1a-bb7f-3b61ad12fd1a] 22644 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:23:51.067 DEBUG [6208a0fd-3f6e-4b1a-bb7f-3b61ad12fd1a] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 20:23:51.162  INFO [95fff95b-24fa-4c67-832d-87102fd02634] 22644 --- [nio-8080-exec-1] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 20:23:51.164 DEBUG [95fff95b-24fa-4c67-832d-87102fd02634] 22644 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:23:51.171  WARN [6208a0fd-3f6e-4b1a-bb7f-3b61ad12fd1a] 22644 --- [nio-8080-exec-7] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 20:23:51.171 DEBUG [e44488b9-47b5-4014-bd50-aeafe19b665c] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:23:51.172  WARN [6208a0fd-3f6e-4b1a-bb7f-3b61ad12fd1a] 22644 --- [nio-8080-exec-7] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 20:23:51.173 DEBUG [e44488b9-47b5-4014-bd50-aeafe19b665c] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:23:51.173  INFO [e44488b9-47b5-4014-bd50-aeafe19b665c] 22644 --- [nio-8080-exec-6] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 20:23:51.217  INFO [e44488b9-47b5-4014-bd50-aeafe19b665c] 22644 --- [nio-8080-exec-6] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 20:23:51.218 DEBUG [e44488b9-47b5-4014-bd50-aeafe19b665c] 22644 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:23:55.786 DEBUG [dc1b1494-d929-4c14-a97d-83c9675539cf] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:23:55.876 DEBUG [dc1b1494-d929-4c14-a97d-83c9675539cf] 22644 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:23:55.878 DEBUG [dc1b1494-d929-4c14-a97d-83c9675539cf] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:23:55.879  INFO [dc1b1494-d929-4c14-a97d-83c9675539cf] 22644 --- [nio-8080-exec-5] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:23:55.879  INFO [dc1b1494-d929-4c14-a97d-83c9675539cf] 22644 --- [nio-8080-exec-5] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:23:55.929 DEBUG [43670682-fe15-47d2-b56f-1ca6682cdd4a] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:23:56.035 DEBUG [43670682-fe15-47d2-b56f-1ca6682cdd4a] 22644 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:23:56.038 DEBUG [43670682-fe15-47d2-b56f-1ca6682cdd4a] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:23:56.038  INFO [43670682-fe15-47d2-b56f-1ca6682cdd4a] 22644 --- [io-8080-exec-10] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:23:56.039  INFO [43670682-fe15-47d2-b56f-1ca6682cdd4a] 22644 --- [io-8080-exec-10] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:23:56.094 DEBUG [af5687f0-0136-47ab-88e7-e589d880bcdb] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:23:56.213 DEBUG [af5687f0-0136-47ab-88e7-e589d880bcdb] 22644 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:23:56.216 DEBUG [af5687f0-0136-47ab-88e7-e589d880bcdb] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:23:56.217  INFO [af5687f0-0136-47ab-88e7-e589d880bcdb] 22644 --- [nio-8080-exec-8] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:23:56.217  INFO [af5687f0-0136-47ab-88e7-e589d880bcdb] 22644 --- [nio-8080-exec-8] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:24:06.816 DEBUG [16dd5555-6274-48d5-9cb3-2b2336a06887] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing POST /api/cart/add
2025-06-29 20:24:06.924 DEBUG [16dd5555-6274-48d5-9cb3-2b2336a06887] 22644 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:24:06.925 DEBUG [16dd5555-6274-48d5-9cb3-2b2336a06887] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured POST /api/cart/add
2025-06-29 20:24:07.057  INFO [16dd5555-6274-48d5-9cb3-2b2336a06887] 22644 --- [nio-8080-exec-4] o.e.x.controllers.CartController         : User ****@****.*** request to add flight ID 16 to persistent cart
2025-06-29 20:24:07.062  INFO [16dd5555-6274-48d5-9cb3-2b2336a06887] 22644 --- [nio-8080-exec-4] o.e.x.controllers.CartController         : AddToCart request: flightId=16, seatNumber=10A, seatType=SEAT_TYPE_STANDARD, deferSeat=false, randomSeat=false
2025-06-29 20:24:07.070  INFO [16dd5555-6274-48d5-9cb3-2b2336a06887] 22644 --- [nio-8080-exec-4] o.e.xlr8travel.services.CartServiceImpl  : Added new flight ID 16 to cart for user ****@****.***
2025-06-29 20:24:07.090  INFO [16dd5555-6274-48d5-9cb3-2b2336a06887] 22644 --- [nio-8080-exec-4] o.e.x.controllers.CartController         : Flight ID 16 added/incremented in persistent cart for user ****@****.***.
2025-06-29 20:24:07.106 DEBUG [eeab4e0a-a41f-439c-8ed2-ea67ff4fdd6f] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:24:07.279 DEBUG [eeab4e0a-a41f-439c-8ed2-ea67ff4fdd6f] 22644 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:24:07.281 DEBUG [eeab4e0a-a41f-439c-8ed2-ea67ff4fdd6f] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:24:07.282  INFO [eeab4e0a-a41f-439c-8ed2-ea67ff4fdd6f] 22644 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:24:07.466  INFO [eeab4e0a-a41f-439c-8ed2-ea67ff4fdd6f] 22644 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 20:24:07.842 DEBUG [9fc7354d-f239-4bfb-82e4-925b4e341c1c] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:24:07.951 DEBUG [9fc7354d-f239-4bfb-82e4-925b4e341c1c] 22644 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:24:07.953 DEBUG [9fc7354d-f239-4bfb-82e4-925b4e341c1c] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:24:07.954  INFO [9fc7354d-f239-4bfb-82e4-925b4e341c1c] 22644 --- [nio-8080-exec-2] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:24:08.066  INFO [9fc7354d-f239-4bfb-82e4-925b4e341c1c] 22644 --- [nio-8080-exec-2] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 20:24:08.074 DEBUG [19df942d-ff72-47fc-97ba-8fd2332986bd] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:24:08.212 DEBUG [19df942d-ff72-47fc-97ba-8fd2332986bd] 22644 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:24:08.213 DEBUG [19df942d-ff72-47fc-97ba-8fd2332986bd] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:24:08.214  INFO [19df942d-ff72-47fc-97ba-8fd2332986bd] 22644 --- [nio-8080-exec-9] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:24:08.363  INFO [19df942d-ff72-47fc-97ba-8fd2332986bd] 22644 --- [nio-8080-exec-9] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 20:24:16.956 DEBUG [2857606a-cceb-442f-85b4-44e3ec1d8d18] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:24:17.072 DEBUG [2857606a-cceb-442f-85b4-44e3ec1d8d18] 22644 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:24:17.073 DEBUG [2857606a-cceb-442f-85b4-44e3ec1d8d18] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:24:17.073  INFO [2857606a-cceb-442f-85b4-44e3ec1d8d18] 22644 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:24:17.177  INFO [2857606a-cceb-442f-85b4-44e3ec1d8d18] 22644 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 20:24:17.184 DEBUG [296c47f7-cc7e-4890-8ef0-0c8e56ec912a] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:24:17.314 DEBUG [296c47f7-cc7e-4890-8ef0-0c8e56ec912a] 22644 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:24:17.316 DEBUG [296c47f7-cc7e-4890-8ef0-0c8e56ec912a] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:24:17.318  INFO [296c47f7-cc7e-4890-8ef0-0c8e56ec912a] 22644 --- [nio-8080-exec-7] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:24:17.448  INFO [296c47f7-cc7e-4890-8ef0-0c8e56ec912a] 22644 --- [nio-8080-exec-7] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 20:24:25.199 DEBUG [60b9cb9d-f90c-4e06-a832-6217a339d986] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/checkout/create-payment-intent
2025-06-29 20:24:25.200 DEBUG [60b9cb9d-f90c-4e06-a832-6217a339d986] 22644 --- [nio-8080-exec-6] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 20:24:25.200 DEBUG [60b9cb9d-f90c-4e06-a832-6217a339d986] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/checkout/create-payment-intent
2025-06-29 20:24:25.202  INFO [60b9cb9d-f90c-4e06-a832-6217a339d986] 22644 --- [nio-8080-exec-6] o.e.x.controllers.PaymentController      : Creating payment intent for amount: 22495 ron
2025-06-29 20:24:25.697  INFO [60b9cb9d-f90c-4e06-a832-6217a339d986] 22644 --- [nio-8080-exec-6] o.e.x.controllers.PaymentController      : Payment intent created successfully: pi_3RfOxqGf8s1WZJnq1imiCnQg
2025-06-29 20:24:26.807 DEBUG [d4914992-92b9-41be-bddf-a87964b4790d] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /api/checkout/confirm
2025-06-29 20:24:27.069 DEBUG [d4914992-92b9-41be-bddf-a87964b4790d] 22644 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:24:27.071 DEBUG [d4914992-92b9-41be-bddf-a87964b4790d] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured POST /api/checkout/confirm
2025-06-29 20:24:27.072  INFO [d4914992-92b9-41be-bddf-a87964b4790d] 22644 --- [nio-8080-exec-5] o.e.x.controllers.CheckoutController     : Received purchase confirmation request.
2025-06-29 20:24:27.199  INFO [d4914992-92b9-41be-bddf-a87964b4790d] 22644 --- [nio-8080-exec-5] o.e.x.controllers.CheckoutController     : Processing purchase for user: ****@****.***
2025-06-29 20:24:27.210  INFO [d4914992-92b9-41be-bddf-a87964b4790d] 22644 --- [nio-8080-exec-5] o.e.x.controllers.CheckoutController     : User ****@****.*** persistent cart has 1 items.
2025-06-29 20:24:27.210  WARN [d4914992-92b9-41be-bddf-a87964b4790d] 22644 --- [nio-8080-exec-5] o.e.x.controllers.CheckoutController     : !!! SIMULATING successful payment processing for user ****@****.*** !!!
2025-06-29 20:24:27.211  INFO [d4914992-92b9-41be-bddf-a87964b4790d] 22644 --- [nio-8080-exec-5] o.e.x.services.OrderServiceImpl          : Creating order from persistent cart for user: ****@****.***
2025-06-29 20:24:27.216  INFO [d4914992-92b9-41be-bddf-a87964b4790d] 22644 --- [nio-8080-exec-5] o.e.x.services.OrderServiceImpl          : Order 5 created for user ****@****.***, status: PENDING_PAYMENT. Total: 37.99
2025-06-29 20:24:27.216  INFO [d4914992-92b9-41be-bddf-a87964b4790d] 22644 --- [nio-8080-exec-5] o.e.x.services.OrderServiceImpl          : Created ticket with deferred seat selection (fallback) for flight XT-OTP-CDG-2 for user ****@****.***
2025-06-29 20:24:27.216  INFO [d4914992-92b9-41be-bddf-a87964b4790d] 22644 --- [nio-8080-exec-5] o.e.x.services.OrderServiceImpl          : Ticket has baggage type: BAGGAGE_TYPE_WEIGHT_CARRY_ON_0
2025-06-29 20:24:28.388  INFO [d4914992-92b9-41be-bddf-a87964b4790d] 22644 --- [nio-8080-exec-5] o.e.x.services.EmailServiceImpl          : Purchase confirmation email sent to ****@****.***
2025-06-29 20:24:28.388  INFO [d4914992-92b9-41be-bddf-a87964b4790d] 22644 --- [nio-8080-exec-5] o.e.x.services.OrderServiceImpl          : Purchase confirmation email sent to user: ****@****.***
2025-06-29 20:24:28.406  INFO [d4914992-92b9-41be-bddf-a87964b4790d] 22644 --- [nio-8080-exec-5] o.e.x.controllers.CheckoutController     : Order successfully created for user ****@****.***. Confirmation: 5
2025-06-29 20:24:28.412  INFO [d4914992-92b9-41be-bddf-a87964b4790d] 22644 --- [nio-8080-exec-5] o.e.xlr8travel.services.CartServiceImpl  : Clearing 1 items from cart for user ****@****.***
2025-06-29 20:24:28.432  INFO [d4914992-92b9-41be-bddf-a87964b4790d] 22644 --- [nio-8080-exec-5] o.e.x.controllers.CheckoutController     : Persistent cart cleared for user ****@****.***.
2025-06-29 20:24:28.445 DEBUG [2f5fcf14-19f4-48f8-a841-d5f39be6bd4e] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing DELETE /api/cart/remove/16
2025-06-29 20:24:28.584 DEBUG [2f5fcf14-19f4-48f8-a841-d5f39be6bd4e] 22644 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:24:28.586 DEBUG [2f5fcf14-19f4-48f8-a841-d5f39be6bd4e] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured DELETE /api/cart/remove/16
2025-06-29 20:24:28.744  INFO [2f5fcf14-19f4-48f8-a841-d5f39be6bd4e] 22644 --- [io-8080-exec-10] o.e.x.controllers.CartController         : User ****@****.*** request to remove flight ID 16 from persistent cart
2025-06-29 20:24:28.755  WARN [2f5fcf14-19f4-48f8-a841-d5f39be6bd4e] 22644 --- [io-8080-exec-10] o.e.xlr8travel.services.CartServiceImpl  : Attempted to remove flight ID 16 not found in cart for user ****@****.***
2025-06-29 20:24:28.757  WARN [2f5fcf14-19f4-48f8-a841-d5f39be6bd4e] 22644 --- [io-8080-exec-10] o.e.x.controllers.CartController         : Attempted to remove flight ID 16 not found in persistent cart for user ****@****.***
2025-06-29 20:24:28.777 DEBUG [e27c7867-7d1f-4871-84a6-5f632bd69d79] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:24:28.932 DEBUG [e27c7867-7d1f-4871-84a6-5f632bd69d79] 22644 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:24:28.934 DEBUG [e27c7867-7d1f-4871-84a6-5f632bd69d79] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:24:28.934  INFO [e27c7867-7d1f-4871-84a6-5f632bd69d79] 22644 --- [nio-8080-exec-8] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:24:29.064  INFO [e27c7867-7d1f-4871-84a6-5f632bd69d79] 22644 --- [nio-8080-exec-8] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 20:24:29.832 DEBUG [f5c8a198-1d86-41cc-a3c8-4b46a0ed1436] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 20:24:29.967 DEBUG [f5c8a198-1d86-41cc-a3c8-4b46a0ed1436] 22644 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:24:29.969 DEBUG [f5c8a198-1d86-41cc-a3c8-4b46a0ed1436] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 20:24:30.073  INFO [f5c8a198-1d86-41cc-a3c8-4b46a0ed1436] 22644 --- [nio-8080-exec-4] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 20:24:30.073  INFO [f5c8a198-1d86-41cc-a3c8-4b46a0ed1436] 22644 --- [nio-8080-exec-4] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 20:24:30.078  INFO [f5c8a198-1d86-41cc-a3c8-4b46a0ed1436] 22644 --- [nio-8080-exec-4] o.e.x.services.TicketServiceImpl         : Found 5 tickets eligible for check-in for user 4
2025-06-29 20:24:30.086 DEBUG [9721aa6a-973b-4e72-9d49-8e558e48ed59] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 20:24:30.190 DEBUG [9721aa6a-973b-4e72-9d49-8e558e48ed59] 22644 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:24:30.191 DEBUG [9721aa6a-973b-4e72-9d49-8e558e48ed59] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 20:24:30.292  INFO [9721aa6a-973b-4e72-9d49-8e558e48ed59] 22644 --- [nio-8080-exec-3] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 20:24:30.292  INFO [9721aa6a-973b-4e72-9d49-8e558e48ed59] 22644 --- [nio-8080-exec-3] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 20:24:30.298  INFO [9721aa6a-973b-4e72-9d49-8e558e48ed59] 22644 --- [nio-8080-exec-3] o.e.x.services.TicketServiceImpl         : Found 5 tickets eligible for check-in for user 4
2025-06-29 20:24:40.869 DEBUG [bd37fa9c-b7a8-4857-888e-90b9722e792b] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/nearby?origin=OTP
2025-06-29 20:24:40.870 DEBUG [bd37fa9c-b7a8-4857-888e-90b9722e792b] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/nearby?origin=OTP
2025-06-29 20:24:40.871  INFO [bd37fa9c-b7a8-4857-888e-90b9722e792b] 22644 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Received request for nearby flights from origin: OTP, departureDate: null
2025-06-29 20:24:40.871  INFO [bd37fa9c-b7a8-4857-888e-90b9722e792b] 22644 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Using search date: 2025-06-29
2025-06-29 20:24:40.871  INFO [bd37fa9c-b7a8-4857-888e-90b9722e792b] 22644 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Cache key: OTP-2025-06-29
2025-06-29 20:24:40.871  INFO [bd37fa9c-b7a8-4857-888e-90b9722e792b] 22644 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Returning cached nearby flights for origin: OTP, found 6 flights
2025-06-29 20:24:40.873 DEBUG [bd37fa9c-b7a8-4857-888e-90b9722e792b] 22644 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:24:44.816 DEBUG [3f6eba5c-9dfe-4fd1-b99f-c2e29f169078] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-29 20:24:44.817 DEBUG [3f6eba5c-9dfe-4fd1-b99f-c2e29f169078] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-29 20:24:44.818  INFO [3f6eba5c-9dfe-4fd1-b99f-c2e29f169078] 22644 --- [nio-8080-exec-9] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris
2025-06-29 20:24:44.818  INFO [3f6eba5c-9dfe-4fd1-b99f-c2e29f169078] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-29 20:24:44.819  INFO [3f6eba5c-9dfe-4fd1-b99f-c2e29f169078] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-29 20:24:44.819 DEBUG [3f6eba5c-9dfe-4fd1-b99f-c2e29f169078] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-29).    For example, if today is 2025-06-29, a good departure date would be between 2025-07-06 and 2025-07-13, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris";
2025-06-29 20:24:44.821  INFO [3f6eba5c-9dfe-4fd1-b99f-c2e29f169078] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-29 20:24:44.821  INFO [3f6eba5c-9dfe-4fd1-b99f-c2e29f169078] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-29 20:24:44.822  INFO [3f6eba5c-9dfe-4fd1-b99f-c2e29f169078] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-29 20:24:44.822  INFO [3f6eba5c-9dfe-4fd1-b99f-c2e29f169078] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 20:24:44.822  INFO [3f6eba5c-9dfe-4fd1-b99f-c2e29f169078] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-29 20:24:44.824  INFO [3f6eba5c-9dfe-4fd1-b99f-c2e29f169078] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-29 20:24:44.824  INFO [3f6eba5c-9dfe-4fd1-b99f-c2e29f169078] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-29 20:24:44.827  INFO [3f6eba5c-9dfe-4fd1-b99f-c2e29f169078] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-29 20:24:44.827  INFO [3f6eba5c-9dfe-4fd1-b99f-c2e29f169078] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-29 20:24:46.602  INFO [3f6eba5c-9dfe-4fd1-b99f-c2e29f169078] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-29 20:24:46.602  INFO [3f6eba5c-9dfe-4fd1-b99f-c2e29f169078] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Response length: 195 characters
2025-06-29 20:24:46.602 DEBUG [3f6eba5c-9dfe-4fd1-b99f-c2e29f169078] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-06",
  "returnDate": "2025-07-08",
  "tripType": "roundTrip",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-29 20:24:46.603 DEBUG [3f6eba5c-9dfe-4fd1-b99f-c2e29f169078] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-29 20:24:46.604 DEBUG [3f6eba5c-9dfe-4fd1-b99f-c2e29f169078] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-29 20:24:46.604 DEBUG [3f6eba5c-9dfe-4fd1-b99f-c2e29f169078] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-29 20:24:46.605 DEBUG [3f6eba5c-9dfe-4fd1-b99f-c2e29f169078] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 20:24:46.605  INFO [3f6eba5c-9dfe-4fd1-b99f-c2e29f169078] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 20:24:46.605  INFO [3f6eba5c-9dfe-4fd1-b99f-c2e29f169078] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-06, returnDate=2025-07-08, tripType=roundTrip, adults=1, children=0, infants=0
2025-06-29 20:24:46.606  INFO [3f6eba5c-9dfe-4fd1-b99f-c2e29f169078] 22644 --- [nio-8080-exec-9] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-29 20:24:46.608 DEBUG [3f6eba5c-9dfe-4fd1-b99f-c2e29f169078] 22644 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:24:47.990 DEBUG [4b35a8ca-99ad-4c5c-bd6a-4036fa7ee06e] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-29 20:24:47.992 DEBUG [4b35a8ca-99ad-4c5c-bd6a-4036fa7ee06e] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-29 20:24:47.994  INFO [4b35a8ca-99ad-4c5c-bd6a-4036fa7ee06e] 22644 --- [nio-8080-exec-1] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris one way
2025-06-29 20:24:47.994  INFO [4b35a8ca-99ad-4c5c-bd6a-4036fa7ee06e] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-29 20:24:47.994  INFO [4b35a8ca-99ad-4c5c-bd6a-4036fa7ee06e] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-29 20:24:47.994 DEBUG [4b35a8ca-99ad-4c5c-bd6a-4036fa7ee06e] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-29).    For example, if today is 2025-06-29, a good departure date would be between 2025-07-06 and 2025-07-13, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris one way";
2025-06-29 20:24:47.996  INFO [4b35a8ca-99ad-4c5c-bd6a-4036fa7ee06e] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-29 20:24:47.996  INFO [4b35a8ca-99ad-4c5c-bd6a-4036fa7ee06e] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-29 20:24:47.996  INFO [4b35a8ca-99ad-4c5c-bd6a-4036fa7ee06e] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-29 20:24:47.997  INFO [4b35a8ca-99ad-4c5c-bd6a-4036fa7ee06e] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 20:24:47.997  INFO [4b35a8ca-99ad-4c5c-bd6a-4036fa7ee06e] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-29 20:24:47.999  INFO [4b35a8ca-99ad-4c5c-bd6a-4036fa7ee06e] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-29 20:24:48.000  INFO [4b35a8ca-99ad-4c5c-bd6a-4036fa7ee06e] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-29 20:24:48.000  INFO [4b35a8ca-99ad-4c5c-bd6a-4036fa7ee06e] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-29 20:24:48.000  INFO [4b35a8ca-99ad-4c5c-bd6a-4036fa7ee06e] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-29 20:24:49.678  INFO [4b35a8ca-99ad-4c5c-bd6a-4036fa7ee06e] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-29 20:24:49.678  INFO [4b35a8ca-99ad-4c5c-bd6a-4036fa7ee06e] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Response length: 184 characters
2025-06-29 20:24:49.679 DEBUG [4b35a8ca-99ad-4c5c-bd6a-4036fa7ee06e] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-06",
  "returnDate": null,
  "tripType": "oneWay",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-29 20:24:49.679 DEBUG [4b35a8ca-99ad-4c5c-bd6a-4036fa7ee06e] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-29 20:24:49.679 DEBUG [4b35a8ca-99ad-4c5c-bd6a-4036fa7ee06e] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-29 20:24:49.680 DEBUG [4b35a8ca-99ad-4c5c-bd6a-4036fa7ee06e] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-29 20:24:49.680 DEBUG [4b35a8ca-99ad-4c5c-bd6a-4036fa7ee06e] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 20:24:49.680  INFO [4b35a8ca-99ad-4c5c-bd6a-4036fa7ee06e] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 20:24:49.680  INFO [4b35a8ca-99ad-4c5c-bd6a-4036fa7ee06e] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-06, returnDate=null, tripType=oneWay, adults=1, children=0, infants=0
2025-06-29 20:24:49.681  INFO [4b35a8ca-99ad-4c5c-bd6a-4036fa7ee06e] 22644 --- [nio-8080-exec-1] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-29 20:24:49.682 DEBUG [4b35a8ca-99ad-4c5c-bd6a-4036fa7ee06e] 22644 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:24:51.433 DEBUG [f0ea527d-7896-4c58-a9ba-a2c991ab8471] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 20:24:51.544 DEBUG [f0ea527d-7896-4c58-a9ba-a2c991ab8471] 22644 --- [nio-8080-exec-7] o.s.s.core.session.SessionRegistryImpl   : Registering session AABB57652C1CE6782B1147CD9BB871B8, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}])
2025-06-29 20:24:51.545 DEBUG [f0ea527d-7896-4c58-a9ba-a2c991ab8471] 22644 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@1534d2a4]
2025-06-29 20:24:51.547 DEBUG [f0ea527d-7896-4c58-a9ba-a2c991ab8471] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me
2025-06-29 20:24:51.547  INFO [f0ea527d-7896-4c58-a9ba-a2c991ab8471] 22644 --- [nio-8080-exec-7] o.e.x.controllers.UserController         : Request received for current user details: ****@****.***
2025-06-29 20:24:51.643  INFO [f0ea527d-7896-4c58-a9ba-a2c991ab8471] 22644 --- [nio-8080-exec-7] o.e.x.controllers.UserController         : Returning details for user: ****@****.***
2025-06-29 20:24:51.702 DEBUG [814778a2-5c41-4833-b9ad-73f72b01a940] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 20:24:51.702 DEBUG [e44c1843-f150-419b-a026-556aaa228d1f] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:24:51.702 DEBUG [d4b58de8-7125-496c-b730-b61a9da0338e] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:24:51.705 DEBUG [e44c1843-f150-419b-a026-556aaa228d1f] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:24:51.707  INFO [e44c1843-f150-419b-a026-556aaa228d1f] 22644 --- [nio-8080-exec-5] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 20:24:51.707  INFO [e44c1843-f150-419b-a026-556aaa228d1f] 22644 --- [nio-8080-exec-5] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 20:24:51.796  INFO [e44c1843-f150-419b-a026-556aaa228d1f] 22644 --- [nio-8080-exec-5] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 20:24:51.797 DEBUG [e44c1843-f150-419b-a026-556aaa228d1f] 22644 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:24:51.805 DEBUG [3073c4de-89d6-40f7-b7af-e3e05a0d7319] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:24:51.806 DEBUG [3073c4de-89d6-40f7-b7af-e3e05a0d7319] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:24:51.807  INFO [3073c4de-89d6-40f7-b7af-e3e05a0d7319] 22644 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 20:24:51.808  INFO [3073c4de-89d6-40f7-b7af-e3e05a0d7319] 22644 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 20:24:51.834 DEBUG [fd982b0a-86e8-437d-a19a-548885ba6fa9] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 20:24:51.836 DEBUG [fd982b0a-86e8-437d-a19a-548885ba6fa9] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 20:24:51.837  INFO [fd982b0a-86e8-437d-a19a-548885ba6fa9] 22644 --- [nio-8080-exec-4] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 20:24:51.863 DEBUG [814778a2-5c41-4833-b9ad-73f72b01a940] 22644 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:24:51.866 DEBUG [814778a2-5c41-4833-b9ad-73f72b01a940] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 20:24:51.866 DEBUG [d4b58de8-7125-496c-b730-b61a9da0338e] 22644 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:24:51.868 DEBUG [d4b58de8-7125-496c-b730-b61a9da0338e] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:24:51.868  INFO [d4b58de8-7125-496c-b730-b61a9da0338e] 22644 --- [io-8080-exec-10] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:24:51.873  INFO [3073c4de-89d6-40f7-b7af-e3e05a0d7319] 22644 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 20:24:51.874 DEBUG [3073c4de-89d6-40f7-b7af-e3e05a0d7319] 22644 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:24:51.985  WARN [814778a2-5c41-4833-b9ad-73f72b01a940] 22644 --- [nio-8080-exec-6] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 20:24:51.986  WARN [814778a2-5c41-4833-b9ad-73f72b01a940] 22644 --- [nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 20:24:51.994 DEBUG [b7e3d563-0f18-4a04-84bc-f7c03ddf99d0] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 20:24:51.998  INFO [d4b58de8-7125-496c-b730-b61a9da0338e] 22644 --- [io-8080-exec-10] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 20:24:52.013  INFO [fd982b0a-86e8-437d-a19a-548885ba6fa9] 22644 --- [nio-8080-exec-4] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 20:24:52.015 DEBUG [fd982b0a-86e8-437d-a19a-548885ba6fa9] 22644 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:24:52.024 DEBUG [478cccef-9404-4cb9-928f-f93bb1201b3d] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 20:24:52.027 DEBUG [478cccef-9404-4cb9-928f-f93bb1201b3d] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 20:24:52.028  INFO [478cccef-9404-4cb9-928f-f93bb1201b3d] 22644 --- [nio-8080-exec-2] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 20:24:52.038 DEBUG [bc83d404-03ba-46ff-b846-eb8e5f6e5f0f] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:24:52.040 DEBUG [bc83d404-03ba-46ff-b846-eb8e5f6e5f0f] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:24:52.040  INFO [bc83d404-03ba-46ff-b846-eb8e5f6e5f0f] 22644 --- [nio-8080-exec-9] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 20:24:52.070  INFO [478cccef-9404-4cb9-928f-f93bb1201b3d] 22644 --- [nio-8080-exec-2] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 20:24:52.072 DEBUG [478cccef-9404-4cb9-928f-f93bb1201b3d] 22644 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:24:52.146 DEBUG [b7e3d563-0f18-4a04-84bc-f7c03ddf99d0] 22644 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:24:52.148 DEBUG [b7e3d563-0f18-4a04-84bc-f7c03ddf99d0] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 20:24:52.228  INFO [bc83d404-03ba-46ff-b846-eb8e5f6e5f0f] 22644 --- [nio-8080-exec-9] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 20:24:52.229 DEBUG [bc83d404-03ba-46ff-b846-eb8e5f6e5f0f] 22644 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:24:52.238 DEBUG [14d16ea8-02d8-458f-b22d-4b848971bbff] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:24:52.239 DEBUG [14d16ea8-02d8-458f-b22d-4b848971bbff] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:24:52.240  INFO [14d16ea8-02d8-458f-b22d-4b848971bbff] 22644 --- [nio-8080-exec-1] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 20:24:52.260  WARN [b7e3d563-0f18-4a04-84bc-f7c03ddf99d0] 22644 --- [nio-8080-exec-3] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 20:24:52.260  WARN [b7e3d563-0f18-4a04-84bc-f7c03ddf99d0] 22644 --- [nio-8080-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 20:24:52.345  INFO [14d16ea8-02d8-458f-b22d-4b848971bbff] 22644 --- [nio-8080-exec-1] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 20:24:52.347 DEBUG [14d16ea8-02d8-458f-b22d-4b848971bbff] 22644 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:24:57.792 DEBUG [2cd96eac-27bc-4025-934e-13acdb5e07c1] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:24:57.881 DEBUG [2cd96eac-27bc-4025-934e-13acdb5e07c1] 22644 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:24:57.884 DEBUG [2cd96eac-27bc-4025-934e-13acdb5e07c1] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:24:57.885  INFO [2cd96eac-27bc-4025-934e-13acdb5e07c1] 22644 --- [nio-8080-exec-7] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:24:57.885  INFO [2cd96eac-27bc-4025-934e-13acdb5e07c1] 22644 --- [nio-8080-exec-7] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:24:57.927 DEBUG [5de01967-9a0a-497a-9063-a40bb6603806] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:24:58.022 DEBUG [5de01967-9a0a-497a-9063-a40bb6603806] 22644 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:24:58.025 DEBUG [5de01967-9a0a-497a-9063-a40bb6603806] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:24:58.025  INFO [5de01967-9a0a-497a-9063-a40bb6603806] 22644 --- [nio-8080-exec-5] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:24:58.026  INFO [5de01967-9a0a-497a-9063-a40bb6603806] 22644 --- [nio-8080-exec-5] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:24:58.074 DEBUG [4dec5831-1544-4dc1-8c63-6393cadc178f] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:24:58.214 DEBUG [4dec5831-1544-4dc1-8c63-6393cadc178f] 22644 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:24:58.218 DEBUG [4dec5831-1544-4dc1-8c63-6393cadc178f] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:24:58.219  INFO [4dec5831-1544-4dc1-8c63-6393cadc178f] 22644 --- [nio-8080-exec-8] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:24:58.220  INFO [4dec5831-1544-4dc1-8c63-6393cadc178f] 22644 --- [nio-8080-exec-8] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:25:00.323 DEBUG [6633aeb2-d261-41bc-a787-d0b9d38dd438] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:25:00.427 DEBUG [6633aeb2-d261-41bc-a787-d0b9d38dd438] 22644 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:25:00.430 DEBUG [6633aeb2-d261-41bc-a787-d0b9d38dd438] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:25:00.431  INFO [6633aeb2-d261-41bc-a787-d0b9d38dd438] 22644 --- [nio-8080-exec-6] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:25:00.431  INFO [6633aeb2-d261-41bc-a787-d0b9d38dd438] 22644 --- [nio-8080-exec-6] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:25:00.481 DEBUG [793df90a-1d30-466c-ab88-f817af47ea82] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:25:00.587 DEBUG [793df90a-1d30-466c-ab88-f817af47ea82] 22644 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:25:00.590 DEBUG [793df90a-1d30-466c-ab88-f817af47ea82] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:25:00.590  INFO [793df90a-1d30-466c-ab88-f817af47ea82] 22644 --- [io-8080-exec-10] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:25:00.590  INFO [793df90a-1d30-466c-ab88-f817af47ea82] 22644 --- [io-8080-exec-10] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:25:00.641 DEBUG [d7f9d24e-9be1-428e-9fab-a0c6a728336b] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:25:00.752 DEBUG [d7f9d24e-9be1-428e-9fab-a0c6a728336b] 22644 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:25:00.755 DEBUG [d7f9d24e-9be1-428e-9fab-a0c6a728336b] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:25:00.756  INFO [d7f9d24e-9be1-428e-9fab-a0c6a728336b] 22644 --- [nio-8080-exec-4] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:25:00.756  INFO [d7f9d24e-9be1-428e-9fab-a0c6a728336b] 22644 --- [nio-8080-exec-4] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:25:05.750 DEBUG [b3b0f587-73b2-46c8-aa6a-0d4d6fde8ed1] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/cart/add
2025-06-29 20:25:05.849 DEBUG [b3b0f587-73b2-46c8-aa6a-0d4d6fde8ed1] 22644 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:25:05.850 DEBUG [b3b0f587-73b2-46c8-aa6a-0d4d6fde8ed1] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /api/cart/add
2025-06-29 20:25:05.952  INFO [b3b0f587-73b2-46c8-aa6a-0d4d6fde8ed1] 22644 --- [nio-8080-exec-2] o.e.x.controllers.CartController         : User ****@****.*** request to add flight ID 16 to persistent cart
2025-06-29 20:25:05.956  INFO [b3b0f587-73b2-46c8-aa6a-0d4d6fde8ed1] 22644 --- [nio-8080-exec-2] o.e.x.controllers.CartController         : AddToCart request: flightId=16, seatNumber=2C, seatType=SEAT_TYPE_UPFRONT, deferSeat=false, randomSeat=false
2025-06-29 20:25:05.961  INFO [b3b0f587-73b2-46c8-aa6a-0d4d6fde8ed1] 22644 --- [nio-8080-exec-2] o.e.xlr8travel.services.CartServiceImpl  : Added new flight ID 16 to cart for user ****@****.***
2025-06-29 20:25:05.980  INFO [b3b0f587-73b2-46c8-aa6a-0d4d6fde8ed1] 22644 --- [nio-8080-exec-2] o.e.x.controllers.CartController         : Flight ID 16 added/incremented in persistent cart for user ****@****.***.
2025-06-29 20:25:05.992 DEBUG [a350bbc8-81f9-469e-bd11-a771b14f03dc] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:25:06.111 DEBUG [a350bbc8-81f9-469e-bd11-a771b14f03dc] 22644 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:25:06.113 DEBUG [a350bbc8-81f9-469e-bd11-a771b14f03dc] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:25:06.113  INFO [a350bbc8-81f9-469e-bd11-a771b14f03dc] 22644 --- [nio-8080-exec-9] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:25:06.236  INFO [a350bbc8-81f9-469e-bd11-a771b14f03dc] 22644 --- [nio-8080-exec-9] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 20:25:06.552 DEBUG [80051441-ada8-406c-abbc-385e68ace6f3] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:25:06.653 DEBUG [80051441-ada8-406c-abbc-385e68ace6f3] 22644 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:25:06.655 DEBUG [80051441-ada8-406c-abbc-385e68ace6f3] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:25:06.655  INFO [80051441-ada8-406c-abbc-385e68ace6f3] 22644 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:25:06.749  INFO [80051441-ada8-406c-abbc-385e68ace6f3] 22644 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 20:25:06.757 DEBUG [07759920-0278-4502-b9d6-d55c8459d690] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:25:06.858 DEBUG [07759920-0278-4502-b9d6-d55c8459d690] 22644 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:25:06.860 DEBUG [07759920-0278-4502-b9d6-d55c8459d690] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:25:06.861  INFO [07759920-0278-4502-b9d6-d55c8459d690] 22644 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:25:06.967  INFO [07759920-0278-4502-b9d6-d55c8459d690] 22644 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 20:25:08.730 DEBUG [617e0ec4-d79c-413f-bcbf-39177e6ef215] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:25:08.845 DEBUG [617e0ec4-d79c-413f-bcbf-39177e6ef215] 22644 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:25:08.847 DEBUG [617e0ec4-d79c-413f-bcbf-39177e6ef215] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:25:08.848  INFO [617e0ec4-d79c-413f-bcbf-39177e6ef215] 22644 --- [nio-8080-exec-7] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:25:08.941  INFO [617e0ec4-d79c-413f-bcbf-39177e6ef215] 22644 --- [nio-8080-exec-7] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 20:25:08.949 DEBUG [bdcf4916-55b4-465d-a5e2-8d9a39e35e40] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:25:09.085 DEBUG [bdcf4916-55b4-465d-a5e2-8d9a39e35e40] 22644 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:25:09.088 DEBUG [bdcf4916-55b4-465d-a5e2-8d9a39e35e40] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:25:09.089  INFO [bdcf4916-55b4-465d-a5e2-8d9a39e35e40] 22644 --- [nio-8080-exec-5] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:25:09.192  INFO [bdcf4916-55b4-465d-a5e2-8d9a39e35e40] 22644 --- [nio-8080-exec-5] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 20:25:15.378 DEBUG [2a21efcd-ac5d-48b9-9f50-def1538590d4] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /api/checkout/create-payment-intent
2025-06-29 20:25:15.379 DEBUG [2a21efcd-ac5d-48b9-9f50-def1538590d4] 22644 --- [nio-8080-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 20:25:15.380 DEBUG [2a21efcd-ac5d-48b9-9f50-def1538590d4] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured POST /api/checkout/create-payment-intent
2025-06-29 20:25:15.382  INFO [2a21efcd-ac5d-48b9-9f50-def1538590d4] 22644 --- [nio-8080-exec-8] o.e.x.controllers.PaymentController      : Creating payment intent for amount: 23995 ron
2025-06-29 20:25:15.859  INFO [2a21efcd-ac5d-48b9-9f50-def1538590d4] 22644 --- [nio-8080-exec-8] o.e.x.controllers.PaymentController      : Payment intent created successfully: pi_3RfOyeGf8s1WZJnq0y32rWHS
2025-06-29 20:25:16.897 DEBUG [1921dbef-9003-4564-b45d-fd1c6298e024] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/checkout/confirm
2025-06-29 20:25:17.011 DEBUG [1921dbef-9003-4564-b45d-fd1c6298e024] 22644 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:25:17.013 DEBUG [1921dbef-9003-4564-b45d-fd1c6298e024] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/checkout/confirm
2025-06-29 20:25:17.014  INFO [1921dbef-9003-4564-b45d-fd1c6298e024] 22644 --- [nio-8080-exec-6] o.e.x.controllers.CheckoutController     : Received purchase confirmation request.
2025-06-29 20:25:17.130  INFO [1921dbef-9003-4564-b45d-fd1c6298e024] 22644 --- [nio-8080-exec-6] o.e.x.controllers.CheckoutController     : Processing purchase for user: ****@****.***
2025-06-29 20:25:17.140  INFO [1921dbef-9003-4564-b45d-fd1c6298e024] 22644 --- [nio-8080-exec-6] o.e.x.controllers.CheckoutController     : User ****@****.*** persistent cart has 1 items.
2025-06-29 20:25:17.140  WARN [1921dbef-9003-4564-b45d-fd1c6298e024] 22644 --- [nio-8080-exec-6] o.e.x.controllers.CheckoutController     : !!! SIMULATING successful payment processing for user ****@****.*** !!!
2025-06-29 20:25:17.143  INFO [1921dbef-9003-4564-b45d-fd1c6298e024] 22644 --- [nio-8080-exec-6] o.e.x.services.OrderServiceImpl          : Creating order from persistent cart for user: ****@****.***
2025-06-29 20:25:17.151  INFO [1921dbef-9003-4564-b45d-fd1c6298e024] 22644 --- [nio-8080-exec-6] o.e.x.services.OrderServiceImpl          : Order 6 created for user ****@****.***, status: PENDING_PAYMENT. Total: 37.99
2025-06-29 20:25:17.151  INFO [1921dbef-9003-4564-b45d-fd1c6298e024] 22644 --- [nio-8080-exec-6] o.e.x.services.OrderServiceImpl          : Created ticket with deferred seat selection (fallback) for flight XT-OTP-CDG-2 for user ****@****.***
2025-06-29 20:25:17.151  INFO [1921dbef-9003-4564-b45d-fd1c6298e024] 22644 --- [nio-8080-exec-6] o.e.x.services.OrderServiceImpl          : Ticket has baggage type: BAGGAGE_TYPE_WEIGHT_CARRY_ON_0
2025-06-29 20:25:18.280  INFO [1921dbef-9003-4564-b45d-fd1c6298e024] 22644 --- [nio-8080-exec-6] o.e.x.services.EmailServiceImpl          : Purchase confirmation email sent to ****@****.***
2025-06-29 20:25:18.280  INFO [1921dbef-9003-4564-b45d-fd1c6298e024] 22644 --- [nio-8080-exec-6] o.e.x.services.OrderServiceImpl          : Purchase confirmation email sent to user: ****@****.***
2025-06-29 20:25:18.305  INFO [1921dbef-9003-4564-b45d-fd1c6298e024] 22644 --- [nio-8080-exec-6] o.e.x.controllers.CheckoutController     : Order successfully created for user ****@****.***. Confirmation: 6
2025-06-29 20:25:18.312  INFO [1921dbef-9003-4564-b45d-fd1c6298e024] 22644 --- [nio-8080-exec-6] o.e.xlr8travel.services.CartServiceImpl  : Clearing 1 items from cart for user ****@****.***
2025-06-29 20:25:18.338  INFO [1921dbef-9003-4564-b45d-fd1c6298e024] 22644 --- [nio-8080-exec-6] o.e.x.controllers.CheckoutController     : Persistent cart cleared for user ****@****.***.
2025-06-29 20:25:18.351 DEBUG [a1bd2265-3f34-4732-b422-af4f00cf493e] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing DELETE /api/cart/remove/16
2025-06-29 20:25:18.469 DEBUG [a1bd2265-3f34-4732-b422-af4f00cf493e] 22644 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:25:18.471 DEBUG [a1bd2265-3f34-4732-b422-af4f00cf493e] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured DELETE /api/cart/remove/16
2025-06-29 20:25:18.565  INFO [a1bd2265-3f34-4732-b422-af4f00cf493e] 22644 --- [io-8080-exec-10] o.e.x.controllers.CartController         : User ****@****.*** request to remove flight ID 16 from persistent cart
2025-06-29 20:25:18.572  WARN [a1bd2265-3f34-4732-b422-af4f00cf493e] 22644 --- [io-8080-exec-10] o.e.xlr8travel.services.CartServiceImpl  : Attempted to remove flight ID 16 not found in cart for user ****@****.***
2025-06-29 20:25:18.574  WARN [a1bd2265-3f34-4732-b422-af4f00cf493e] 22644 --- [io-8080-exec-10] o.e.x.controllers.CartController         : Attempted to remove flight ID 16 not found in persistent cart for user ****@****.***
2025-06-29 20:25:18.586 DEBUG [539e559b-61f3-4000-8c12-bc4d399b9912] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:25:18.692 DEBUG [539e559b-61f3-4000-8c12-bc4d399b9912] 22644 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:25:18.693 DEBUG [539e559b-61f3-4000-8c12-bc4d399b9912] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:25:18.694  INFO [539e559b-61f3-4000-8c12-bc4d399b9912] 22644 --- [nio-8080-exec-4] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:25:18.803  INFO [539e559b-61f3-4000-8c12-bc4d399b9912] 22644 --- [nio-8080-exec-4] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 20:25:20.560 DEBUG [08114bc0-c900-4c38-a874-449325f1596d] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 20:25:20.689 DEBUG [08114bc0-c900-4c38-a874-449325f1596d] 22644 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:25:20.690 DEBUG [08114bc0-c900-4c38-a874-449325f1596d] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 20:25:20.795  INFO [08114bc0-c900-4c38-a874-449325f1596d] 22644 --- [nio-8080-exec-2] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 20:25:20.795  INFO [08114bc0-c900-4c38-a874-449325f1596d] 22644 --- [nio-8080-exec-2] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 20:25:20.801  INFO [08114bc0-c900-4c38-a874-449325f1596d] 22644 --- [nio-8080-exec-2] o.e.x.services.TicketServiceImpl         : Found 6 tickets eligible for check-in for user 4
2025-06-29 20:25:20.809 DEBUG [eba2f7f8-e328-4599-bce7-181a804c2eda] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 20:25:20.918 DEBUG [eba2f7f8-e328-4599-bce7-181a804c2eda] 22644 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:25:20.920 DEBUG [eba2f7f8-e328-4599-bce7-181a804c2eda] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 20:25:21.035  INFO [eba2f7f8-e328-4599-bce7-181a804c2eda] 22644 --- [nio-8080-exec-9] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 20:25:21.035  INFO [eba2f7f8-e328-4599-bce7-181a804c2eda] 22644 --- [nio-8080-exec-9] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 20:25:21.040  INFO [eba2f7f8-e328-4599-bce7-181a804c2eda] 22644 --- [nio-8080-exec-9] o.e.x.services.TicketServiceImpl         : Found 6 tickets eligible for check-in for user 4
2025-06-29 20:25:30.727 DEBUG [3679aaa8-a523-48a9-93df-27b1d2ac791d] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/nearby?origin=OTP
2025-06-29 20:25:30.728 DEBUG [3679aaa8-a523-48a9-93df-27b1d2ac791d] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/nearby?origin=OTP
2025-06-29 20:25:30.730  INFO [3679aaa8-a523-48a9-93df-27b1d2ac791d] 22644 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : Received request for nearby flights from origin: OTP, departureDate: null
2025-06-29 20:25:30.730  INFO [3679aaa8-a523-48a9-93df-27b1d2ac791d] 22644 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : Using search date: 2025-06-29
2025-06-29 20:25:30.730  INFO [3679aaa8-a523-48a9-93df-27b1d2ac791d] 22644 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : Cache key: OTP-2025-06-29
2025-06-29 20:25:30.731  INFO [3679aaa8-a523-48a9-93df-27b1d2ac791d] 22644 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : Returning cached nearby flights for origin: OTP, found 6 flights
2025-06-29 20:25:30.732 DEBUG [3679aaa8-a523-48a9-93df-27b1d2ac791d] 22644 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:25:33.925 DEBUG [acb81cc6-86a1-44a6-b416-c4b1c92b7378] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-29 20:25:33.926 DEBUG [acb81cc6-86a1-44a6-b416-c4b1c92b7378] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-29 20:25:33.927  INFO [acb81cc6-86a1-44a6-b416-c4b1c92b7378] 22644 --- [nio-8080-exec-1] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris
2025-06-29 20:25:33.928  INFO [acb81cc6-86a1-44a6-b416-c4b1c92b7378] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-29 20:25:33.928  INFO [acb81cc6-86a1-44a6-b416-c4b1c92b7378] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-29 20:25:33.928 DEBUG [acb81cc6-86a1-44a6-b416-c4b1c92b7378] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-29).    For example, if today is 2025-06-29, a good departure date would be between 2025-07-06 and 2025-07-13, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris";
2025-06-29 20:25:33.930  INFO [acb81cc6-86a1-44a6-b416-c4b1c92b7378] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-29 20:25:33.930  INFO [acb81cc6-86a1-44a6-b416-c4b1c92b7378] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-29 20:25:33.930  INFO [acb81cc6-86a1-44a6-b416-c4b1c92b7378] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-29 20:25:33.930  INFO [acb81cc6-86a1-44a6-b416-c4b1c92b7378] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 20:25:33.931  INFO [acb81cc6-86a1-44a6-b416-c4b1c92b7378] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-29 20:25:33.933  INFO [acb81cc6-86a1-44a6-b416-c4b1c92b7378] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-29 20:25:33.933  INFO [acb81cc6-86a1-44a6-b416-c4b1c92b7378] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-29 20:25:33.933  INFO [acb81cc6-86a1-44a6-b416-c4b1c92b7378] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-29 20:25:33.933  INFO [acb81cc6-86a1-44a6-b416-c4b1c92b7378] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-29 20:25:35.747  INFO [acb81cc6-86a1-44a6-b416-c4b1c92b7378] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-29 20:25:35.747  INFO [acb81cc6-86a1-44a6-b416-c4b1c92b7378] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Response length: 195 characters
2025-06-29 20:25:35.748 DEBUG [acb81cc6-86a1-44a6-b416-c4b1c92b7378] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-06",
  "returnDate": "2025-07-08",
  "tripType": "roundTrip",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-29 20:25:35.748 DEBUG [acb81cc6-86a1-44a6-b416-c4b1c92b7378] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-29 20:25:35.748 DEBUG [acb81cc6-86a1-44a6-b416-c4b1c92b7378] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-29 20:25:35.749 DEBUG [acb81cc6-86a1-44a6-b416-c4b1c92b7378] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-29 20:25:35.749 DEBUG [acb81cc6-86a1-44a6-b416-c4b1c92b7378] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 20:25:35.749  INFO [acb81cc6-86a1-44a6-b416-c4b1c92b7378] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 20:25:35.749  INFO [acb81cc6-86a1-44a6-b416-c4b1c92b7378] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-06, returnDate=2025-07-08, tripType=roundTrip, adults=1, children=0, infants=0
2025-06-29 20:25:35.750  INFO [acb81cc6-86a1-44a6-b416-c4b1c92b7378] 22644 --- [nio-8080-exec-1] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-29 20:25:35.750 DEBUG [acb81cc6-86a1-44a6-b416-c4b1c92b7378] 22644 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:25:39.072 DEBUG [efbb48bf-b46f-4305-973e-817e8ce52428] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-29 20:25:39.073 DEBUG [efbb48bf-b46f-4305-973e-817e8ce52428] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-29 20:25:39.074  INFO [efbb48bf-b46f-4305-973e-817e8ce52428] 22644 --- [nio-8080-exec-7] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris one way
2025-06-29 20:25:39.075  INFO [efbb48bf-b46f-4305-973e-817e8ce52428] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-29 20:25:39.075  INFO [efbb48bf-b46f-4305-973e-817e8ce52428] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-29 20:25:39.076 DEBUG [efbb48bf-b46f-4305-973e-817e8ce52428] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-29).    For example, if today is 2025-06-29, a good departure date would be between 2025-07-06 and 2025-07-13, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris one way";
2025-06-29 20:25:39.078  INFO [efbb48bf-b46f-4305-973e-817e8ce52428] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-29 20:25:39.078  INFO [efbb48bf-b46f-4305-973e-817e8ce52428] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-29 20:25:39.079  INFO [efbb48bf-b46f-4305-973e-817e8ce52428] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-29 20:25:39.079  INFO [efbb48bf-b46f-4305-973e-817e8ce52428] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 20:25:39.079  INFO [efbb48bf-b46f-4305-973e-817e8ce52428] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-29 20:25:39.081  INFO [efbb48bf-b46f-4305-973e-817e8ce52428] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-29 20:25:39.081  INFO [efbb48bf-b46f-4305-973e-817e8ce52428] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-29 20:25:39.082  INFO [efbb48bf-b46f-4305-973e-817e8ce52428] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-29 20:25:39.082  INFO [efbb48bf-b46f-4305-973e-817e8ce52428] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-29 20:25:40.787  INFO [efbb48bf-b46f-4305-973e-817e8ce52428] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-29 20:25:40.788  INFO [efbb48bf-b46f-4305-973e-817e8ce52428] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Response length: 184 characters
2025-06-29 20:25:40.788 DEBUG [efbb48bf-b46f-4305-973e-817e8ce52428] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-06",
  "returnDate": null,
  "tripType": "oneWay",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-29 20:25:40.788 DEBUG [efbb48bf-b46f-4305-973e-817e8ce52428] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-29 20:25:40.789 DEBUG [efbb48bf-b46f-4305-973e-817e8ce52428] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-29 20:25:40.789 DEBUG [efbb48bf-b46f-4305-973e-817e8ce52428] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-29 20:25:40.789 DEBUG [efbb48bf-b46f-4305-973e-817e8ce52428] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 20:25:40.789  INFO [efbb48bf-b46f-4305-973e-817e8ce52428] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 20:25:40.790  INFO [efbb48bf-b46f-4305-973e-817e8ce52428] 22644 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-06, returnDate=null, tripType=oneWay, adults=1, children=0, infants=0
2025-06-29 20:25:40.790  INFO [efbb48bf-b46f-4305-973e-817e8ce52428] 22644 --- [nio-8080-exec-7] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-29 20:25:40.791 DEBUG [efbb48bf-b46f-4305-973e-817e8ce52428] 22644 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:25:42.530 DEBUG [7560e42d-5734-4d8e-9286-c78b715f834e] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 20:25:42.635 DEBUG [7560e42d-5734-4d8e-9286-c78b715f834e] 22644 --- [nio-8080-exec-5] o.s.s.core.session.SessionRegistryImpl   : Registering session EEDF11C543574F3E57DFB17DCAA69AC7, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}])
2025-06-29 20:25:42.636 DEBUG [7560e42d-5734-4d8e-9286-c78b715f834e] 22644 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@51abf64e]
2025-06-29 20:25:42.637 DEBUG [7560e42d-5734-4d8e-9286-c78b715f834e] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me
2025-06-29 20:25:42.638  INFO [7560e42d-5734-4d8e-9286-c78b715f834e] 22644 --- [nio-8080-exec-5] o.e.x.controllers.UserController         : Request received for current user details: ****@****.***
2025-06-29 20:25:42.755  INFO [7560e42d-5734-4d8e-9286-c78b715f834e] 22644 --- [nio-8080-exec-5] o.e.x.controllers.UserController         : Returning details for user: ****@****.***
2025-06-29 20:25:42.814 DEBUG [4d515bb5-43b1-4bf6-8c65-2868e69cb3ff] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 20:25:42.817 DEBUG [ff2b5e6e-96a5-4f6d-a4c0-8961f68c7224] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:25:42.817 DEBUG [97134229-921a-4027-a6eb-eb9a28a84639] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:25:42.819 DEBUG [97134229-921a-4027-a6eb-eb9a28a84639] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:25:42.821  INFO [97134229-921a-4027-a6eb-eb9a28a84639] 22644 --- [nio-8080-exec-6] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 20:25:42.821  INFO [97134229-921a-4027-a6eb-eb9a28a84639] 22644 --- [nio-8080-exec-6] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 20:25:42.906  INFO [97134229-921a-4027-a6eb-eb9a28a84639] 22644 --- [nio-8080-exec-6] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 20:25:42.907 DEBUG [97134229-921a-4027-a6eb-eb9a28a84639] 22644 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:25:42.914 DEBUG [e2e80838-0b01-4554-b2a3-9943dea202d8] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:25:42.915 DEBUG [e2e80838-0b01-4554-b2a3-9943dea202d8] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:25:42.916  INFO [e2e80838-0b01-4554-b2a3-9943dea202d8] 22644 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 20:25:42.916  INFO [e2e80838-0b01-4554-b2a3-9943dea202d8] 22644 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 20:25:42.936 DEBUG [466616e5-a3de-4b7b-818d-45ab53ea709e] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 20:25:42.938 DEBUG [466616e5-a3de-4b7b-818d-45ab53ea709e] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 20:25:42.938  INFO [466616e5-a3de-4b7b-818d-45ab53ea709e] 22644 --- [nio-8080-exec-2] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 20:25:42.966 DEBUG [4d515bb5-43b1-4bf6-8c65-2868e69cb3ff] 22644 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:25:42.966 DEBUG [ff2b5e6e-96a5-4f6d-a4c0-8961f68c7224] 22644 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:25:42.967 DEBUG [ff2b5e6e-96a5-4f6d-a4c0-8961f68c7224] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:25:42.968  INFO [ff2b5e6e-96a5-4f6d-a4c0-8961f68c7224] 22644 --- [io-8080-exec-10] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:25:42.968 DEBUG [4d515bb5-43b1-4bf6-8c65-2868e69cb3ff] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 20:25:42.971  INFO [e2e80838-0b01-4554-b2a3-9943dea202d8] 22644 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 20:25:42.972 DEBUG [e2e80838-0b01-4554-b2a3-9943dea202d8] 22644 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:25:43.072  WARN [4d515bb5-43b1-4bf6-8c65-2868e69cb3ff] 22644 --- [nio-8080-exec-8] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 20:25:43.073  WARN [4d515bb5-43b1-4bf6-8c65-2868e69cb3ff] 22644 --- [nio-8080-exec-8] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 20:25:43.080 DEBUG [1d2ab321-0424-41db-95d8-bd2465e44e47] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 20:25:43.083  INFO [ff2b5e6e-96a5-4f6d-a4c0-8961f68c7224] 22644 --- [io-8080-exec-10] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 20:25:43.087  INFO [466616e5-a3de-4b7b-818d-45ab53ea709e] 22644 --- [nio-8080-exec-2] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 20:25:43.090 DEBUG [466616e5-a3de-4b7b-818d-45ab53ea709e] 22644 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:25:43.101 DEBUG [f114e9d7-6c2a-42ff-87a1-43f05c4c2588] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 20:25:43.103 DEBUG [f114e9d7-6c2a-42ff-87a1-43f05c4c2588] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 20:25:43.104  INFO [f114e9d7-6c2a-42ff-87a1-43f05c4c2588] 22644 --- [nio-8080-exec-3] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 20:25:43.121 DEBUG [0b7722b3-934d-4e53-b65a-bbff850d6450] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:25:43.123 DEBUG [0b7722b3-934d-4e53-b65a-bbff850d6450] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:25:43.125  INFO [0b7722b3-934d-4e53-b65a-bbff850d6450] 22644 --- [nio-8080-exec-1] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 20:25:43.147  INFO [f114e9d7-6c2a-42ff-87a1-43f05c4c2588] 22644 --- [nio-8080-exec-3] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 20:25:43.149 DEBUG [f114e9d7-6c2a-42ff-87a1-43f05c4c2588] 22644 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:25:43.230 DEBUG [1d2ab321-0424-41db-95d8-bd2465e44e47] 22644 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:25:43.232 DEBUG [1d2ab321-0424-41db-95d8-bd2465e44e47] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 20:25:43.304  INFO [0b7722b3-934d-4e53-b65a-bbff850d6450] 22644 --- [nio-8080-exec-1] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 20:25:43.305 DEBUG [0b7722b3-934d-4e53-b65a-bbff850d6450] 22644 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:25:43.316 DEBUG [2e422a76-51b6-464f-9775-4849eab83f9a] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:25:43.317 DEBUG [2e422a76-51b6-464f-9775-4849eab83f9a] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:25:43.317  INFO [2e422a76-51b6-464f-9775-4849eab83f9a] 22644 --- [nio-8080-exec-7] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 20:25:43.345  WARN [1d2ab321-0424-41db-95d8-bd2465e44e47] 22644 --- [nio-8080-exec-9] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 20:25:43.345  WARN [1d2ab321-0424-41db-95d8-bd2465e44e47] 22644 --- [nio-8080-exec-9] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 20:25:43.358  INFO [2e422a76-51b6-464f-9775-4849eab83f9a] 22644 --- [nio-8080-exec-7] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 20:25:43.360 DEBUG [2e422a76-51b6-464f-9775-4849eab83f9a] 22644 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:25:46.849 DEBUG [98821755-e0b0-4240-851b-81dd59f9fe47] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:25:46.949 DEBUG [98821755-e0b0-4240-851b-81dd59f9fe47] 22644 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:25:46.951 DEBUG [98821755-e0b0-4240-851b-81dd59f9fe47] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:25:46.952  INFO [98821755-e0b0-4240-851b-81dd59f9fe47] 22644 --- [nio-8080-exec-5] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:25:46.952  INFO [98821755-e0b0-4240-851b-81dd59f9fe47] 22644 --- [nio-8080-exec-5] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:25:46.998 DEBUG [e90bfafe-5e41-4e5f-94ee-ddfb369dfab0] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:25:47.102 DEBUG [e90bfafe-5e41-4e5f-94ee-ddfb369dfab0] 22644 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:25:47.105 DEBUG [e90bfafe-5e41-4e5f-94ee-ddfb369dfab0] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:25:47.106  INFO [e90bfafe-5e41-4e5f-94ee-ddfb369dfab0] 22644 --- [nio-8080-exec-6] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:25:47.106  INFO [e90bfafe-5e41-4e5f-94ee-ddfb369dfab0] 22644 --- [nio-8080-exec-6] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:25:47.155 DEBUG [4d8c1d80-24a0-450e-9bdd-bb718c0ebb04] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:25:47.290 DEBUG [4d8c1d80-24a0-450e-9bdd-bb718c0ebb04] 22644 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:25:47.294 DEBUG [4d8c1d80-24a0-450e-9bdd-bb718c0ebb04] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:25:47.295  INFO [4d8c1d80-24a0-450e-9bdd-bb718c0ebb04] 22644 --- [nio-8080-exec-4] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:25:47.295  INFO [4d8c1d80-24a0-450e-9bdd-bb718c0ebb04] 22644 --- [nio-8080-exec-4] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:25:49.281 DEBUG [7c390668-6cf6-4360-89d2-e7957608f997] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/nearby?origin=OTP
2025-06-29 20:25:49.283 DEBUG [7c390668-6cf6-4360-89d2-e7957608f997] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/nearby?origin=OTP
2025-06-29 20:25:49.284  INFO [7c390668-6cf6-4360-89d2-e7957608f997] 22644 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Received request for nearby flights from origin: OTP, departureDate: null
2025-06-29 20:25:49.284  INFO [7c390668-6cf6-4360-89d2-e7957608f997] 22644 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Using search date: 2025-06-29
2025-06-29 20:25:49.284  INFO [7c390668-6cf6-4360-89d2-e7957608f997] 22644 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Cache key: OTP-2025-06-29
2025-06-29 20:25:49.285  INFO [7c390668-6cf6-4360-89d2-e7957608f997] 22644 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Returning cached nearby flights for origin: OTP, found 6 flights
2025-06-29 20:25:49.286 DEBUG [7c390668-6cf6-4360-89d2-e7957608f997] 22644 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:25:50.576 DEBUG [c67f3af7-f530-4103-a5e2-090664bec856] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:25:50.578 DEBUG [c67f3af7-f530-4103-a5e2-090664bec856] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:25:50.579  INFO [c67f3af7-f530-4103-a5e2-090664bec856] 22644 --- [io-8080-exec-10] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 20:25:50.579  INFO [c67f3af7-f530-4103-a5e2-090664bec856] 22644 --- [io-8080-exec-10] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 20:25:50.640  INFO [c67f3af7-f530-4103-a5e2-090664bec856] 22644 --- [io-8080-exec-10] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 20:25:50.642 DEBUG [c67f3af7-f530-4103-a5e2-090664bec856] 22644 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:25:50.648 DEBUG [75f47729-419d-4206-b16a-d7e93a5f1d1b] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:25:50.649 DEBUG [75f47729-419d-4206-b16a-d7e93a5f1d1b] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:25:50.650  INFO [75f47729-419d-4206-b16a-d7e93a5f1d1b] 22644 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 20:25:50.650  INFO [75f47729-419d-4206-b16a-d7e93a5f1d1b] 22644 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 20:25:50.667 DEBUG [2b9e7100-89b2-4f6e-985a-bb58099bfd1c] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 20:25:50.668 DEBUG [2b9e7100-89b2-4f6e-985a-bb58099bfd1c] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 20:25:50.669  INFO [2b9e7100-89b2-4f6e-985a-bb58099bfd1c] 22644 --- [nio-8080-exec-3] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 20:25:50.711  INFO [75f47729-419d-4206-b16a-d7e93a5f1d1b] 22644 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 20:25:50.712 DEBUG [75f47729-419d-4206-b16a-d7e93a5f1d1b] 22644 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:25:50.815  INFO [2b9e7100-89b2-4f6e-985a-bb58099bfd1c] 22644 --- [nio-8080-exec-3] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 20:25:50.816 DEBUG [2b9e7100-89b2-4f6e-985a-bb58099bfd1c] 22644 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:25:50.822 DEBUG [5dee0170-42ae-407d-b8ac-ea88568fe97a] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 20:25:50.824 DEBUG [5dee0170-42ae-407d-b8ac-ea88568fe97a] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 20:25:50.824  INFO [5dee0170-42ae-407d-b8ac-ea88568fe97a] 22644 --- [nio-8080-exec-1] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 20:25:50.825 DEBUG [08d25359-7ecb-4a97-945f-e62565c1bd5d] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:25:50.826 DEBUG [08d25359-7ecb-4a97-945f-e62565c1bd5d] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:25:50.826  INFO [08d25359-7ecb-4a97-945f-e62565c1bd5d] 22644 --- [nio-8080-exec-9] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 20:25:50.866  INFO [5dee0170-42ae-407d-b8ac-ea88568fe97a] 22644 --- [nio-8080-exec-1] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 20:25:50.867 DEBUG [5dee0170-42ae-407d-b8ac-ea88568fe97a] 22644 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:25:51.023  INFO [08d25359-7ecb-4a97-945f-e62565c1bd5d] 22644 --- [nio-8080-exec-9] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 20:25:51.024 DEBUG [08d25359-7ecb-4a97-945f-e62565c1bd5d] 22644 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:25:51.031 DEBUG [d2007aa2-a5b5-4a52-857f-0be6d19661c6] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:25:51.032 DEBUG [d2007aa2-a5b5-4a52-857f-0be6d19661c6] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:25:51.033  INFO [d2007aa2-a5b5-4a52-857f-0be6d19661c6] 22644 --- [nio-8080-exec-7] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 20:25:51.082  INFO [d2007aa2-a5b5-4a52-857f-0be6d19661c6] 22644 --- [nio-8080-exec-7] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 20:25:51.083 DEBUG [d2007aa2-a5b5-4a52-857f-0be6d19661c6] 22644 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:25:55.029 DEBUG [74885c1b-b68e-45ad-b590-315fbf9e95c6] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:25:55.151 DEBUG [74885c1b-b68e-45ad-b590-315fbf9e95c6] 22644 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:25:55.154 DEBUG [74885c1b-b68e-45ad-b590-315fbf9e95c6] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:25:55.155  INFO [74885c1b-b68e-45ad-b590-315fbf9e95c6] 22644 --- [nio-8080-exec-5] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:25:55.155  INFO [74885c1b-b68e-45ad-b590-315fbf9e95c6] 22644 --- [nio-8080-exec-5] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:25:55.206 DEBUG [0f16fe51-0091-4459-a27e-b6334681559d] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:25:55.318 DEBUG [0f16fe51-0091-4459-a27e-b6334681559d] 22644 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:25:55.320 DEBUG [0f16fe51-0091-4459-a27e-b6334681559d] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:25:55.321  INFO [0f16fe51-0091-4459-a27e-b6334681559d] 22644 --- [nio-8080-exec-6] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:25:55.321  INFO [0f16fe51-0091-4459-a27e-b6334681559d] 22644 --- [nio-8080-exec-6] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:25:55.374 DEBUG [3d897b6e-f193-419f-9158-bbcfdb33a2d0] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:25:55.482 DEBUG [3d897b6e-f193-419f-9158-bbcfdb33a2d0] 22644 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:25:55.484 DEBUG [3d897b6e-f193-419f-9158-bbcfdb33a2d0] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:25:55.484  INFO [3d897b6e-f193-419f-9158-bbcfdb33a2d0] 22644 --- [nio-8080-exec-4] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:25:55.485  INFO [3d897b6e-f193-419f-9158-bbcfdb33a2d0] 22644 --- [nio-8080-exec-4] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:25:57.506 DEBUG [f973dd32-2bcd-4800-a461-04d399c34ef9] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:25:57.600 DEBUG [f973dd32-2bcd-4800-a461-04d399c34ef9] 22644 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:25:57.603 DEBUG [f973dd32-2bcd-4800-a461-04d399c34ef9] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:25:57.603  INFO [f973dd32-2bcd-4800-a461-04d399c34ef9] 22644 --- [nio-8080-exec-8] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:25:57.604  INFO [f973dd32-2bcd-4800-a461-04d399c34ef9] 22644 --- [nio-8080-exec-8] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:25:57.648 DEBUG [22936eb8-2c7b-44ed-ac0f-1b0d422677a9] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:25:57.746 DEBUG [22936eb8-2c7b-44ed-ac0f-1b0d422677a9] 22644 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:25:57.748 DEBUG [22936eb8-2c7b-44ed-ac0f-1b0d422677a9] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:25:57.748  INFO [22936eb8-2c7b-44ed-ac0f-1b0d422677a9] 22644 --- [io-8080-exec-10] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:25:57.749  INFO [22936eb8-2c7b-44ed-ac0f-1b0d422677a9] 22644 --- [io-8080-exec-10] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:25:57.803 DEBUG [b4d3ad24-82c7-4055-a0d3-d37cbb6e982c] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:25:57.901 DEBUG [b4d3ad24-82c7-4055-a0d3-d37cbb6e982c] 22644 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:25:57.905 DEBUG [b4d3ad24-82c7-4055-a0d3-d37cbb6e982c] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:25:57.906  INFO [b4d3ad24-82c7-4055-a0d3-d37cbb6e982c] 22644 --- [nio-8080-exec-2] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:25:57.906  INFO [b4d3ad24-82c7-4055-a0d3-d37cbb6e982c] 22644 --- [nio-8080-exec-2] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:26:00.143 DEBUG [9b61fbf2-5f8f-443f-883c-279eeb13ff20] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:26:00.250 DEBUG [9b61fbf2-5f8f-443f-883c-279eeb13ff20] 22644 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:26:00.252 DEBUG [9b61fbf2-5f8f-443f-883c-279eeb13ff20] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:26:00.253  INFO [9b61fbf2-5f8f-443f-883c-279eeb13ff20] 22644 --- [nio-8080-exec-3] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:26:00.253  INFO [9b61fbf2-5f8f-443f-883c-279eeb13ff20] 22644 --- [nio-8080-exec-3] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:26:00.304 DEBUG [74defd1f-c052-4ed6-a205-b2183cf3b0e4] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:26:00.405 DEBUG [74defd1f-c052-4ed6-a205-b2183cf3b0e4] 22644 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:26:00.408 DEBUG [74defd1f-c052-4ed6-a205-b2183cf3b0e4] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:26:00.408  INFO [74defd1f-c052-4ed6-a205-b2183cf3b0e4] 22644 --- [nio-8080-exec-1] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:26:00.409  INFO [74defd1f-c052-4ed6-a205-b2183cf3b0e4] 22644 --- [nio-8080-exec-1] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:26:00.458 DEBUG [2f643d58-b884-4e6f-a10a-9afbdadaa43f] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:26:00.564 DEBUG [2f643d58-b884-4e6f-a10a-9afbdadaa43f] 22644 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:26:00.567 DEBUG [2f643d58-b884-4e6f-a10a-9afbdadaa43f] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:26:00.568  INFO [2f643d58-b884-4e6f-a10a-9afbdadaa43f] 22644 --- [nio-8080-exec-9] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:26:00.568  INFO [2f643d58-b884-4e6f-a10a-9afbdadaa43f] 22644 --- [nio-8080-exec-9] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:26:05.682 DEBUG [f834bc20-844f-40d1-a037-f712542db7cf] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/cart/add
2025-06-29 20:26:05.814 DEBUG [f834bc20-844f-40d1-a037-f712542db7cf] 22644 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:26:05.815 DEBUG [f834bc20-844f-40d1-a037-f712542db7cf] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/cart/add
2025-06-29 20:26:05.912  INFO [f834bc20-844f-40d1-a037-f712542db7cf] 22644 --- [nio-8080-exec-7] o.e.x.controllers.CartController         : User ****@****.*** request to add flight ID 16 to persistent cart
2025-06-29 20:26:05.916  INFO [f834bc20-844f-40d1-a037-f712542db7cf] 22644 --- [nio-8080-exec-7] o.e.x.controllers.CartController         : AddToCart request: flightId=16, seatNumber=4E, seatType=SEAT_TYPE_UPFRONT, deferSeat=false, randomSeat=false
2025-06-29 20:26:05.921  INFO [f834bc20-844f-40d1-a037-f712542db7cf] 22644 --- [nio-8080-exec-7] o.e.xlr8travel.services.CartServiceImpl  : Added new flight ID 16 to cart for user ****@****.***
2025-06-29 20:26:05.944  INFO [f834bc20-844f-40d1-a037-f712542db7cf] 22644 --- [nio-8080-exec-7] o.e.x.controllers.CartController         : Flight ID 16 added/incremented in persistent cart for user ****@****.***.
2025-06-29 20:26:05.959 DEBUG [3fbd12f9-dfee-41a5-a425-2f30a55e8507] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:26:06.073 DEBUG [3fbd12f9-dfee-41a5-a425-2f30a55e8507] 22644 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:26:06.075 DEBUG [3fbd12f9-dfee-41a5-a425-2f30a55e8507] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:26:06.076  INFO [3fbd12f9-dfee-41a5-a425-2f30a55e8507] 22644 --- [nio-8080-exec-5] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:26:06.195  INFO [3fbd12f9-dfee-41a5-a425-2f30a55e8507] 22644 --- [nio-8080-exec-5] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 20:26:06.499 DEBUG [b6492014-451c-4065-8080-029ba67c08dd] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:26:06.598 DEBUG [b6492014-451c-4065-8080-029ba67c08dd] 22644 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:26:06.600 DEBUG [b6492014-451c-4065-8080-029ba67c08dd] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:26:06.600  INFO [b6492014-451c-4065-8080-029ba67c08dd] 22644 --- [nio-8080-exec-6] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:26:06.693  INFO [b6492014-451c-4065-8080-029ba67c08dd] 22644 --- [nio-8080-exec-6] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 20:26:06.701 DEBUG [1e2bb3cf-0a20-4ca9-b71d-962070133fa4] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:26:06.790 DEBUG [1e2bb3cf-0a20-4ca9-b71d-962070133fa4] 22644 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:26:06.792 DEBUG [1e2bb3cf-0a20-4ca9-b71d-962070133fa4] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:26:06.793  INFO [1e2bb3cf-0a20-4ca9-b71d-962070133fa4] 22644 --- [nio-8080-exec-4] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:26:06.884  INFO [1e2bb3cf-0a20-4ca9-b71d-962070133fa4] 22644 --- [nio-8080-exec-4] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 20:26:08.567 DEBUG [1963696d-6b1c-4542-9879-a23c0cfc0d75] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:26:08.674 DEBUG [1963696d-6b1c-4542-9879-a23c0cfc0d75] 22644 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:26:08.676 DEBUG [1963696d-6b1c-4542-9879-a23c0cfc0d75] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:26:08.677  INFO [1963696d-6b1c-4542-9879-a23c0cfc0d75] 22644 --- [nio-8080-exec-8] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:26:08.771  INFO [1963696d-6b1c-4542-9879-a23c0cfc0d75] 22644 --- [nio-8080-exec-8] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 20:26:08.778 DEBUG [ae7a08c7-63a7-4c65-86e9-7b3fe2416578] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:26:08.894 DEBUG [ae7a08c7-63a7-4c65-86e9-7b3fe2416578] 22644 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:26:08.896 DEBUG [ae7a08c7-63a7-4c65-86e9-7b3fe2416578] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:26:08.897  INFO [ae7a08c7-63a7-4c65-86e9-7b3fe2416578] 22644 --- [io-8080-exec-10] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:26:08.996  INFO [ae7a08c7-63a7-4c65-86e9-7b3fe2416578] 22644 --- [io-8080-exec-10] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 20:26:18.237 DEBUG [8ba3e1ec-7d04-45b8-ba8a-6521db66f2c8] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/checkout/create-payment-intent
2025-06-29 20:26:18.238 DEBUG [8ba3e1ec-7d04-45b8-ba8a-6521db66f2c8] 22644 --- [nio-8080-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 20:26:18.238 DEBUG [8ba3e1ec-7d04-45b8-ba8a-6521db66f2c8] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /api/checkout/create-payment-intent
2025-06-29 20:26:18.239  INFO [8ba3e1ec-7d04-45b8-ba8a-6521db66f2c8] 22644 --- [nio-8080-exec-2] o.e.x.controllers.PaymentController      : Creating payment intent for amount: 23995 ron
2025-06-29 20:26:18.796  INFO [8ba3e1ec-7d04-45b8-ba8a-6521db66f2c8] 22644 --- [nio-8080-exec-2] o.e.x.controllers.PaymentController      : Payment intent created successfully: pi_3RfOzfGf8s1WZJnq04WGW6wk
2025-06-29 20:26:19.872 DEBUG [4f0bde5f-ddbb-427c-80ca-81842d08ccc0] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /api/checkout/confirm
2025-06-29 20:26:19.993 DEBUG [4f0bde5f-ddbb-427c-80ca-81842d08ccc0] 22644 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:26:19.994 DEBUG [4f0bde5f-ddbb-427c-80ca-81842d08ccc0] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /api/checkout/confirm
2025-06-29 20:26:19.995  INFO [4f0bde5f-ddbb-427c-80ca-81842d08ccc0] 22644 --- [nio-8080-exec-3] o.e.x.controllers.CheckoutController     : Received purchase confirmation request.
2025-06-29 20:26:20.118  INFO [4f0bde5f-ddbb-427c-80ca-81842d08ccc0] 22644 --- [nio-8080-exec-3] o.e.x.controllers.CheckoutController     : Processing purchase for user: ****@****.***
2025-06-29 20:26:20.127  INFO [4f0bde5f-ddbb-427c-80ca-81842d08ccc0] 22644 --- [nio-8080-exec-3] o.e.x.controllers.CheckoutController     : User ****@****.*** persistent cart has 1 items.
2025-06-29 20:26:20.127  WARN [4f0bde5f-ddbb-427c-80ca-81842d08ccc0] 22644 --- [nio-8080-exec-3] o.e.x.controllers.CheckoutController     : !!! SIMULATING successful payment processing for user ****@****.*** !!!
2025-06-29 20:26:20.128  INFO [4f0bde5f-ddbb-427c-80ca-81842d08ccc0] 22644 --- [nio-8080-exec-3] o.e.x.services.OrderServiceImpl          : Creating order from persistent cart for user: ****@****.***
2025-06-29 20:26:20.132  INFO [4f0bde5f-ddbb-427c-80ca-81842d08ccc0] 22644 --- [nio-8080-exec-3] o.e.x.services.OrderServiceImpl          : Order 7 created for user ****@****.***, status: PENDING_PAYMENT. Total: 37.99
2025-06-29 20:26:20.132  INFO [4f0bde5f-ddbb-427c-80ca-81842d08ccc0] 22644 --- [nio-8080-exec-3] o.e.x.services.OrderServiceImpl          : Created ticket with deferred seat selection (fallback) for flight XT-OTP-CDG-2 for user ****@****.***
2025-06-29 20:26:20.132  INFO [4f0bde5f-ddbb-427c-80ca-81842d08ccc0] 22644 --- [nio-8080-exec-3] o.e.x.services.OrderServiceImpl          : Ticket has baggage type: BAGGAGE_TYPE_WEIGHT_CARRY_ON_0
2025-06-29 20:26:21.261  INFO [4f0bde5f-ddbb-427c-80ca-81842d08ccc0] 22644 --- [nio-8080-exec-3] o.e.x.services.EmailServiceImpl          : Purchase confirmation email sent to ****@****.***
2025-06-29 20:26:21.262  INFO [4f0bde5f-ddbb-427c-80ca-81842d08ccc0] 22644 --- [nio-8080-exec-3] o.e.x.services.OrderServiceImpl          : Purchase confirmation email sent to user: ****@****.***
2025-06-29 20:26:21.274  INFO [4f0bde5f-ddbb-427c-80ca-81842d08ccc0] 22644 --- [nio-8080-exec-3] o.e.x.controllers.CheckoutController     : Order successfully created for user ****@****.***. Confirmation: 7
2025-06-29 20:26:21.278  INFO [4f0bde5f-ddbb-427c-80ca-81842d08ccc0] 22644 --- [nio-8080-exec-3] o.e.xlr8travel.services.CartServiceImpl  : Clearing 1 items from cart for user ****@****.***
2025-06-29 20:26:21.295  INFO [4f0bde5f-ddbb-427c-80ca-81842d08ccc0] 22644 --- [nio-8080-exec-3] o.e.x.controllers.CheckoutController     : Persistent cart cleared for user ****@****.***.
2025-06-29 20:26:21.304 DEBUG [167fa076-d0d0-495e-b6dc-81c818e64219] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing DELETE /api/cart/remove/16
2025-06-29 20:26:21.402 DEBUG [167fa076-d0d0-495e-b6dc-81c818e64219] 22644 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:26:21.404 DEBUG [167fa076-d0d0-495e-b6dc-81c818e64219] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured DELETE /api/cart/remove/16
2025-06-29 20:26:21.500  INFO [167fa076-d0d0-495e-b6dc-81c818e64219] 22644 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : User ****@****.*** request to remove flight ID 16 from persistent cart
2025-06-29 20:26:21.507  WARN [167fa076-d0d0-495e-b6dc-81c818e64219] 22644 --- [nio-8080-exec-1] o.e.xlr8travel.services.CartServiceImpl  : Attempted to remove flight ID 16 not found in cart for user ****@****.***
2025-06-29 20:26:21.508  WARN [167fa076-d0d0-495e-b6dc-81c818e64219] 22644 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Attempted to remove flight ID 16 not found in persistent cart for user ****@****.***
2025-06-29 20:26:21.518 DEBUG [08fcbb20-8e46-45e9-b2fb-feefe2263929] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:26:21.616 DEBUG [08fcbb20-8e46-45e9-b2fb-feefe2263929] 22644 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:26:21.620 DEBUG [08fcbb20-8e46-45e9-b2fb-feefe2263929] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:26:21.621  INFO [08fcbb20-8e46-45e9-b2fb-feefe2263929] 22644 --- [nio-8080-exec-9] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:26:21.742  INFO [08fcbb20-8e46-45e9-b2fb-feefe2263929] 22644 --- [nio-8080-exec-9] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 20:26:27.613 DEBUG [2c750866-26cf-482f-9a53-8867a6aa68bd] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 20:26:27.740 DEBUG [2c750866-26cf-482f-9a53-8867a6aa68bd] 22644 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:26:27.742 DEBUG [2c750866-26cf-482f-9a53-8867a6aa68bd] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 20:26:27.835  INFO [2c750866-26cf-482f-9a53-8867a6aa68bd] 22644 --- [nio-8080-exec-7] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 20:26:27.835  INFO [2c750866-26cf-482f-9a53-8867a6aa68bd] 22644 --- [nio-8080-exec-7] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 20:26:27.841  INFO [2c750866-26cf-482f-9a53-8867a6aa68bd] 22644 --- [nio-8080-exec-7] o.e.x.services.TicketServiceImpl         : Found 7 tickets eligible for check-in for user 4
2025-06-29 20:26:27.849 DEBUG [a1bd318d-a212-48af-96fa-e76c6ec8262e] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 20:26:27.946 DEBUG [a1bd318d-a212-48af-96fa-e76c6ec8262e] 22644 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:26:27.948 DEBUG [a1bd318d-a212-48af-96fa-e76c6ec8262e] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 20:26:28.037  INFO [a1bd318d-a212-48af-96fa-e76c6ec8262e] 22644 --- [nio-8080-exec-5] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 20:26:28.038  INFO [a1bd318d-a212-48af-96fa-e76c6ec8262e] 22644 --- [nio-8080-exec-5] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 20:26:28.042  INFO [a1bd318d-a212-48af-96fa-e76c6ec8262e] 22644 --- [nio-8080-exec-5] o.e.x.services.TicketServiceImpl         : Found 7 tickets eligible for check-in for user 4
2025-06-29 20:26:33.653 DEBUG [aab13a66-88ea-4d1a-82af-6274ec69c3de] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/check-in/7/with-seat
2025-06-29 20:26:33.762 DEBUG [aab13a66-88ea-4d1a-82af-6274ec69c3de] 22644 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:26:33.765 DEBUG [aab13a66-88ea-4d1a-82af-6274ec69c3de] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/check-in/7/with-seat
2025-06-29 20:26:33.869  INFO [aab13a66-88ea-4d1a-82af-6274ec69c3de] 22644 --- [nio-8080-exec-6] o.e.x.controllers.CheckinController      : Checking in ticket 7 with seat for user: ****@****.***
2025-06-29 20:26:33.874  INFO [aab13a66-88ea-4d1a-82af-6274ec69c3de] 22644 --- [nio-8080-exec-6] o.e.x.services.TicketServiceImpl         : Checking in ticket 7 with seat 13D of type SEAT_TYPE_STANDARD
2025-06-29 20:26:33.875  INFO [aab13a66-88ea-4d1a-82af-6274ec69c3de] 22644 --- [nio-8080-exec-6] o.e.x.services.TicketServiceImpl         : Checking if seat 13D is booked for flight 16
2025-06-29 20:26:33.885  INFO [aab13a66-88ea-4d1a-82af-6274ec69c3de] 22644 --- [nio-8080-exec-6] o.e.x.services.TicketServiceImpl         : Successfully checked in ticket 7 with seat 13D
2025-06-29 20:26:37.788 DEBUG [8cea0e6d-28a8-4239-8269-fdd513ef1644] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:26:37.917 DEBUG [8cea0e6d-28a8-4239-8269-fdd513ef1644] 22644 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=7, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:26:37.920 DEBUG [8cea0e6d-28a8-4239-8269-fdd513ef1644] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:26:37.920  INFO [8cea0e6d-28a8-4239-8269-fdd513ef1644] 22644 --- [nio-8080-exec-4] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:26:37.921  INFO [8cea0e6d-28a8-4239-8269-fdd513ef1644] 22644 --- [nio-8080-exec-4] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:26:37.982 DEBUG [41ae258b-f775-4c5a-8bdf-c36c58bd4fc0] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:26:38.111 DEBUG [41ae258b-f775-4c5a-8bdf-c36c58bd4fc0] 22644 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D00BC53B7143F7E518C587A12694FC0F], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:26:38.114 DEBUG [41ae258b-f775-4c5a-8bdf-c36c58bd4fc0] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:26:38.115  INFO [41ae258b-f775-4c5a-8bdf-c36c58bd4fc0] 22644 --- [nio-8080-exec-8] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:26:38.115  INFO [41ae258b-f775-4c5a-8bdf-c36c58bd4fc0] 22644 --- [nio-8080-exec-8] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:26:43.134 DEBUG [7300f442-e19b-4210-9e98-6ced1b6b9a43] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing POST /api/check-in/6/with-seat
2025-06-29 20:26:43.218 DEBUG [7300f442-e19b-4210-9e98-6ced1b6b9a43] 22644 --- [io-8080-exec-10] o.s.s.core.session.SessionRegistryImpl   : Registering session 8E82DC0AE9D5936E6BB1935147C2F8A8, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}])
2025-06-29 20:26:43.219 DEBUG [7300f442-e19b-4210-9e98-6ced1b6b9a43] 22644 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@1c86f374]
2025-06-29 20:26:43.221 DEBUG [7300f442-e19b-4210-9e98-6ced1b6b9a43] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured POST /api/check-in/6/with-seat
2025-06-29 20:26:43.314  INFO [7300f442-e19b-4210-9e98-6ced1b6b9a43] 22644 --- [io-8080-exec-10] o.e.x.controllers.CheckinController      : Checking in ticket 6 with seat for user: ****@****.***
2025-06-29 20:26:43.318  INFO [7300f442-e19b-4210-9e98-6ced1b6b9a43] 22644 --- [io-8080-exec-10] o.e.x.services.TicketServiceImpl         : Checking in ticket 6 with seat 13D of type SEAT_TYPE_STANDARD
2025-06-29 20:26:43.318  INFO [7300f442-e19b-4210-9e98-6ced1b6b9a43] 22644 --- [io-8080-exec-10] o.e.x.services.TicketServiceImpl         : Checking if seat 13D is booked for flight 16
2025-06-29 20:26:43.322  WARN [7300f442-e19b-4210-9e98-6ced1b6b9a43] 22644 --- [io-8080-exec-10] o.e.x.services.TicketServiceImpl         : Seat 13D is already booked for flight 16
2025-06-29 20:26:45.038 DEBUG [30a0d60a-aaa8-4d0d-a6c8-a2e3dba6d72a] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/nearby?origin=OTP
2025-06-29 20:26:45.039 DEBUG [30a0d60a-aaa8-4d0d-a6c8-a2e3dba6d72a] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/nearby?origin=OTP
2025-06-29 20:26:45.040  INFO [30a0d60a-aaa8-4d0d-a6c8-a2e3dba6d72a] 22644 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Received request for nearby flights from origin: OTP, departureDate: null
2025-06-29 20:26:45.040  INFO [30a0d60a-aaa8-4d0d-a6c8-a2e3dba6d72a] 22644 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Using search date: 2025-06-29
2025-06-29 20:26:45.040  INFO [30a0d60a-aaa8-4d0d-a6c8-a2e3dba6d72a] 22644 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Cache key: OTP-2025-06-29
2025-06-29 20:26:45.040  INFO [30a0d60a-aaa8-4d0d-a6c8-a2e3dba6d72a] 22644 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Returning cached nearby flights for origin: OTP, found 6 flights
2025-06-29 20:26:45.041 DEBUG [30a0d60a-aaa8-4d0d-a6c8-a2e3dba6d72a] 22644 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:26:50.953 DEBUG [5f1be43a-345b-48dc-875a-5471b5b423c5] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-29 20:26:50.954 DEBUG [5f1be43a-345b-48dc-875a-5471b5b423c5] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-29 20:26:50.955  INFO [5f1be43a-345b-48dc-875a-5471b5b423c5] 22644 --- [nio-8080-exec-3] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris
2025-06-29 20:26:50.955  INFO [5f1be43a-345b-48dc-875a-5471b5b423c5] 22644 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-29 20:26:50.955  INFO [5f1be43a-345b-48dc-875a-5471b5b423c5] 22644 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-29 20:26:50.955 DEBUG [5f1be43a-345b-48dc-875a-5471b5b423c5] 22644 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-29).    For example, if today is 2025-06-29, a good departure date would be between 2025-07-06 and 2025-07-13, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris";
2025-06-29 20:26:50.957  INFO [5f1be43a-345b-48dc-875a-5471b5b423c5] 22644 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-29 20:26:50.958  INFO [5f1be43a-345b-48dc-875a-5471b5b423c5] 22644 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-29 20:26:50.958  INFO [5f1be43a-345b-48dc-875a-5471b5b423c5] 22644 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-29 20:26:50.958  INFO [5f1be43a-345b-48dc-875a-5471b5b423c5] 22644 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 20:26:50.958  INFO [5f1be43a-345b-48dc-875a-5471b5b423c5] 22644 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-29 20:26:50.960  INFO [5f1be43a-345b-48dc-875a-5471b5b423c5] 22644 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-29 20:26:50.960  INFO [5f1be43a-345b-48dc-875a-5471b5b423c5] 22644 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-29 20:26:50.960  INFO [5f1be43a-345b-48dc-875a-5471b5b423c5] 22644 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-29 20:26:50.961  INFO [5f1be43a-345b-48dc-875a-5471b5b423c5] 22644 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-29 20:26:52.843  INFO [5f1be43a-345b-48dc-875a-5471b5b423c5] 22644 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-29 20:26:52.843  INFO [5f1be43a-345b-48dc-875a-5471b5b423c5] 22644 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Response length: 195 characters
2025-06-29 20:26:52.843 DEBUG [5f1be43a-345b-48dc-875a-5471b5b423c5] 22644 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-06",
  "returnDate": "2025-07-08",
  "tripType": "roundTrip",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-29 20:26:52.844 DEBUG [5f1be43a-345b-48dc-875a-5471b5b423c5] 22644 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-29 20:26:52.844 DEBUG [5f1be43a-345b-48dc-875a-5471b5b423c5] 22644 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-29 20:26:52.844 DEBUG [5f1be43a-345b-48dc-875a-5471b5b423c5] 22644 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-29 20:26:52.844 DEBUG [5f1be43a-345b-48dc-875a-5471b5b423c5] 22644 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 20:26:52.845  INFO [5f1be43a-345b-48dc-875a-5471b5b423c5] 22644 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 20:26:52.845  INFO [5f1be43a-345b-48dc-875a-5471b5b423c5] 22644 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-06, returnDate=2025-07-08, tripType=roundTrip, adults=1, children=0, infants=0
2025-06-29 20:26:52.845  INFO [5f1be43a-345b-48dc-875a-5471b5b423c5] 22644 --- [nio-8080-exec-3] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-29 20:26:52.846 DEBUG [5f1be43a-345b-48dc-875a-5471b5b423c5] 22644 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:26:54.331 DEBUG [3e6733bd-696a-479a-b680-8d686903136d] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-29 20:26:54.332 DEBUG [3e6733bd-696a-479a-b680-8d686903136d] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-29 20:26:54.333  INFO [3e6733bd-696a-479a-b680-8d686903136d] 22644 --- [nio-8080-exec-1] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris one way
2025-06-29 20:26:54.333  INFO [3e6733bd-696a-479a-b680-8d686903136d] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-29 20:26:54.334  INFO [3e6733bd-696a-479a-b680-8d686903136d] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-29 20:26:54.334 DEBUG [3e6733bd-696a-479a-b680-8d686903136d] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-29).    For example, if today is 2025-06-29, a good departure date would be between 2025-07-06 and 2025-07-13, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris one way";
2025-06-29 20:26:54.344  INFO [3e6733bd-696a-479a-b680-8d686903136d] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-29 20:26:54.345  INFO [3e6733bd-696a-479a-b680-8d686903136d] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-29 20:26:54.346  INFO [3e6733bd-696a-479a-b680-8d686903136d] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-29 20:26:54.346  INFO [3e6733bd-696a-479a-b680-8d686903136d] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 20:26:54.346  INFO [3e6733bd-696a-479a-b680-8d686903136d] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-29 20:26:54.348  INFO [3e6733bd-696a-479a-b680-8d686903136d] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-29 20:26:54.348  INFO [3e6733bd-696a-479a-b680-8d686903136d] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-29 20:26:54.348  INFO [3e6733bd-696a-479a-b680-8d686903136d] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-29 20:26:54.349  INFO [3e6733bd-696a-479a-b680-8d686903136d] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-29 20:26:55.983  INFO [3e6733bd-696a-479a-b680-8d686903136d] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-29 20:26:55.983  INFO [3e6733bd-696a-479a-b680-8d686903136d] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Response length: 184 characters
2025-06-29 20:26:55.984 DEBUG [3e6733bd-696a-479a-b680-8d686903136d] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-06",
  "returnDate": null,
  "tripType": "oneWay",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-29 20:26:55.985 DEBUG [3e6733bd-696a-479a-b680-8d686903136d] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-29 20:26:55.985 DEBUG [3e6733bd-696a-479a-b680-8d686903136d] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-29 20:26:55.985 DEBUG [3e6733bd-696a-479a-b680-8d686903136d] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-29 20:26:55.985 DEBUG [3e6733bd-696a-479a-b680-8d686903136d] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 20:26:55.986  INFO [3e6733bd-696a-479a-b680-8d686903136d] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 20:26:55.986  INFO [3e6733bd-696a-479a-b680-8d686903136d] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-06, returnDate=null, tripType=oneWay, adults=1, children=0, infants=0
2025-06-29 20:26:55.986  INFO [3e6733bd-696a-479a-b680-8d686903136d] 22644 --- [nio-8080-exec-1] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-29 20:26:55.987 DEBUG [3e6733bd-696a-479a-b680-8d686903136d] 22644 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:26:58.004 DEBUG [3d25aa0a-f4cc-4458-9175-b7a2a344c3e1] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 20:26:58.182 DEBUG [3d25aa0a-f4cc-4458-9175-b7a2a344c3e1] 22644 --- [nio-8080-exec-9] o.s.s.core.session.SessionRegistryImpl   : Registering session 0692770AF0B730772D04AA7A2F72B43A, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}])
2025-06-29 20:26:58.183 DEBUG [3d25aa0a-f4cc-4458-9175-b7a2a344c3e1] 22644 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@4fa21f0d]
2025-06-29 20:26:58.184 DEBUG [3d25aa0a-f4cc-4458-9175-b7a2a344c3e1] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me
2025-06-29 20:26:58.184  INFO [3d25aa0a-f4cc-4458-9175-b7a2a344c3e1] 22644 --- [nio-8080-exec-9] o.e.x.controllers.UserController         : Request received for current user details: ****@****.***
2025-06-29 20:26:58.311  INFO [3d25aa0a-f4cc-4458-9175-b7a2a344c3e1] 22644 --- [nio-8080-exec-9] o.e.x.controllers.UserController         : Returning details for user: ****@****.***
2025-06-29 20:26:58.414 DEBUG [23bdbf03-8368-4f66-b0ee-fd7e5cd915a0] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 20:26:58.416 DEBUG [9c6ec2be-6b0f-47a5-a96e-ed6319032039] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:26:58.417 DEBUG [37af43ed-4b0e-4275-a388-c2566e0567b0] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:26:58.439 DEBUG [9c6ec2be-6b0f-47a5-a96e-ed6319032039] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:26:58.443  INFO [9c6ec2be-6b0f-47a5-a96e-ed6319032039] 22644 --- [nio-8080-exec-5] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 20:26:58.443  INFO [9c6ec2be-6b0f-47a5-a96e-ed6319032039] 22644 --- [nio-8080-exec-5] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 20:26:58.509  INFO [9c6ec2be-6b0f-47a5-a96e-ed6319032039] 22644 --- [nio-8080-exec-5] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 20:26:58.510 DEBUG [9c6ec2be-6b0f-47a5-a96e-ed6319032039] 22644 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:26:58.522 DEBUG [14b286c7-b259-4a4e-9208-1201b2a69e06] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:26:58.523 DEBUG [14b286c7-b259-4a4e-9208-1201b2a69e06] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:26:58.524  INFO [14b286c7-b259-4a4e-9208-1201b2a69e06] 22644 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 20:26:58.524  INFO [14b286c7-b259-4a4e-9208-1201b2a69e06] 22644 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 20:26:58.543 DEBUG [00949156-7452-4319-b58b-272f0818d9bf] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 20:26:58.545 DEBUG [00949156-7452-4319-b58b-272f0818d9bf] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 20:26:58.547  INFO [00949156-7452-4319-b58b-272f0818d9bf] 22644 --- [nio-8080-exec-8] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 20:26:58.584 DEBUG [37af43ed-4b0e-4275-a388-c2566e0567b0] 22644 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:26:58.584 DEBUG [23bdbf03-8368-4f66-b0ee-fd7e5cd915a0] 22644 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:26:58.586 DEBUG [37af43ed-4b0e-4275-a388-c2566e0567b0] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:26:58.587 DEBUG [23bdbf03-8368-4f66-b0ee-fd7e5cd915a0] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 20:26:58.587  INFO [37af43ed-4b0e-4275-a388-c2566e0567b0] 22644 --- [nio-8080-exec-6] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:26:58.596  INFO [14b286c7-b259-4a4e-9208-1201b2a69e06] 22644 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 20:26:58.597 DEBUG [14b286c7-b259-4a4e-9208-1201b2a69e06] 22644 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:26:58.707  INFO [00949156-7452-4319-b58b-272f0818d9bf] 22644 --- [nio-8080-exec-8] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 20:26:58.708 DEBUG [00949156-7452-4319-b58b-272f0818d9bf] 22644 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:26:58.717 DEBUG [6ca3b5b5-fd8c-48a9-9110-50712c627bfa] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 20:26:58.718 DEBUG [6ca3b5b5-fd8c-48a9-9110-50712c627bfa] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 20:26:58.719  INFO [6ca3b5b5-fd8c-48a9-9110-50712c627bfa] 22644 --- [io-8080-exec-10] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 20:26:58.722 DEBUG [385a3008-242c-47d2-81de-6fd9fadbab04] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:26:58.723 DEBUG [385a3008-242c-47d2-81de-6fd9fadbab04] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:26:58.723  INFO [385a3008-242c-47d2-81de-6fd9fadbab04] 22644 --- [nio-8080-exec-2] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 20:26:58.725  WARN [23bdbf03-8368-4f66-b0ee-fd7e5cd915a0] 22644 --- [nio-8080-exec-7] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 20:26:58.726  WARN [23bdbf03-8368-4f66-b0ee-fd7e5cd915a0] 22644 --- [nio-8080-exec-7] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 20:26:58.734 DEBUG [a2662f22-f281-49b4-a365-52d26a7ca140] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 20:26:58.745  INFO [37af43ed-4b0e-4275-a388-c2566e0567b0] 22644 --- [nio-8080-exec-6] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 20:26:58.760  INFO [6ca3b5b5-fd8c-48a9-9110-50712c627bfa] 22644 --- [io-8080-exec-10] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 20:26:58.761 DEBUG [6ca3b5b5-fd8c-48a9-9110-50712c627bfa] 22644 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:26:58.906  INFO [385a3008-242c-47d2-81de-6fd9fadbab04] 22644 --- [nio-8080-exec-2] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 20:26:58.908 DEBUG [385a3008-242c-47d2-81de-6fd9fadbab04] 22644 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:26:58.923 DEBUG [f1044b85-35e7-4f04-bfb6-2929f4409e13] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:26:58.923 DEBUG [a2662f22-f281-49b4-a365-52d26a7ca140] 22644 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:26:58.925 DEBUG [f1044b85-35e7-4f04-bfb6-2929f4409e13] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:26:58.925 DEBUG [a2662f22-f281-49b4-a365-52d26a7ca140] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 20:26:58.926  INFO [f1044b85-35e7-4f04-bfb6-2929f4409e13] 22644 --- [nio-8080-exec-1] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 20:26:58.970  INFO [f1044b85-35e7-4f04-bfb6-2929f4409e13] 22644 --- [nio-8080-exec-1] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 20:26:58.971 DEBUG [f1044b85-35e7-4f04-bfb6-2929f4409e13] 22644 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:26:59.094  WARN [a2662f22-f281-49b4-a365-52d26a7ca140] 22644 --- [nio-8080-exec-3] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 20:26:59.094  WARN [a2662f22-f281-49b4-a365-52d26a7ca140] 22644 --- [nio-8080-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 20:27:05.739 DEBUG [99a54f80-6c9c-425b-83db-8da50e52099e] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:27:05.856 DEBUG [99a54f80-6c9c-425b-83db-8da50e52099e] 22644 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:27:05.859 DEBUG [99a54f80-6c9c-425b-83db-8da50e52099e] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:27:05.860  INFO [99a54f80-6c9c-425b-83db-8da50e52099e] 22644 --- [nio-8080-exec-9] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:27:05.860  INFO [99a54f80-6c9c-425b-83db-8da50e52099e] 22644 --- [nio-8080-exec-9] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:27:05.904 DEBUG [62c1136a-7302-49b8-b918-d4820896fc90] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:27:06.011 DEBUG [62c1136a-7302-49b8-b918-d4820896fc90] 22644 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:27:06.014 DEBUG [62c1136a-7302-49b8-b918-d4820896fc90] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:27:06.015  INFO [62c1136a-7302-49b8-b918-d4820896fc90] 22644 --- [nio-8080-exec-5] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:27:06.015  INFO [62c1136a-7302-49b8-b918-d4820896fc90] 22644 --- [nio-8080-exec-5] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:27:06.071 DEBUG [d15bf4a2-3029-4daf-9de6-c5a00990ab3b] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:27:06.169 DEBUG [d15bf4a2-3029-4daf-9de6-c5a00990ab3b] 22644 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:27:06.171 DEBUG [d15bf4a2-3029-4daf-9de6-c5a00990ab3b] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:27:06.172  INFO [d15bf4a2-3029-4daf-9de6-c5a00990ab3b] 22644 --- [nio-8080-exec-4] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:27:06.172  INFO [d15bf4a2-3029-4daf-9de6-c5a00990ab3b] 22644 --- [nio-8080-exec-4] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:27:24.274 DEBUG [186f6bde-33c8-48bf-8862-387e3782a657] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /api/cart/add
2025-06-29 20:27:24.364 DEBUG [186f6bde-33c8-48bf-8862-387e3782a657] 22644 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:27:24.366 DEBUG [186f6bde-33c8-48bf-8862-387e3782a657] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured POST /api/cart/add
2025-06-29 20:27:24.462  INFO [186f6bde-33c8-48bf-8862-387e3782a657] 22644 --- [nio-8080-exec-8] o.e.x.controllers.CartController         : User ****@****.*** request to add flight ID 16 to persistent cart
2025-06-29 20:27:24.467  INFO [186f6bde-33c8-48bf-8862-387e3782a657] 22644 --- [nio-8080-exec-8] o.e.x.controllers.CartController         : AddToCart request: flightId=16, seatNumber=17C, seatType=SEAT_TYPE_STANDARD, deferSeat=false, randomSeat=false
2025-06-29 20:27:24.471  INFO [186f6bde-33c8-48bf-8862-387e3782a657] 22644 --- [nio-8080-exec-8] o.e.xlr8travel.services.CartServiceImpl  : Added new flight ID 16 to cart for user ****@****.***
2025-06-29 20:27:24.494  INFO [186f6bde-33c8-48bf-8862-387e3782a657] 22644 --- [nio-8080-exec-8] o.e.x.controllers.CartController         : Flight ID 16 added/incremented in persistent cart for user ****@****.***.
2025-06-29 20:27:24.511 DEBUG [82691731-ecff-4f39-bea8-67e3f68f3c22] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:27:24.642 DEBUG [82691731-ecff-4f39-bea8-67e3f68f3c22] 22644 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:27:24.643 DEBUG [82691731-ecff-4f39-bea8-67e3f68f3c22] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:27:24.644  INFO [82691731-ecff-4f39-bea8-67e3f68f3c22] 22644 --- [nio-8080-exec-7] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:27:24.780  INFO [82691731-ecff-4f39-bea8-67e3f68f3c22] 22644 --- [nio-8080-exec-7] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 20:27:25.124 DEBUG [f56428d4-4d90-4151-871b-cdf0171e297b] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:27:25.225 DEBUG [f56428d4-4d90-4151-871b-cdf0171e297b] 22644 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:27:25.227 DEBUG [f56428d4-4d90-4151-871b-cdf0171e297b] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:27:25.227  INFO [f56428d4-4d90-4151-871b-cdf0171e297b] 22644 --- [nio-8080-exec-6] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:27:25.320  INFO [f56428d4-4d90-4151-871b-cdf0171e297b] 22644 --- [nio-8080-exec-6] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 20:27:25.326 DEBUG [40025f6c-0190-4598-a3a3-1ca828ec77a0] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:27:25.418 DEBUG [40025f6c-0190-4598-a3a3-1ca828ec77a0] 22644 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:27:25.419 DEBUG [40025f6c-0190-4598-a3a3-1ca828ec77a0] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:27:25.420  INFO [40025f6c-0190-4598-a3a3-1ca828ec77a0] 22644 --- [io-8080-exec-10] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:27:25.509  INFO [40025f6c-0190-4598-a3a3-1ca828ec77a0] 22644 --- [io-8080-exec-10] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 20:27:32.581 DEBUG [6db2fff6-7fad-45e3-8ae2-307d5561ee14] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:27:32.728 DEBUG [6db2fff6-7fad-45e3-8ae2-307d5561ee14] 22644 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:27:32.731 DEBUG [6db2fff6-7fad-45e3-8ae2-307d5561ee14] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:27:32.732  INFO [6db2fff6-7fad-45e3-8ae2-307d5561ee14] 22644 --- [nio-8080-exec-2] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:27:32.843  INFO [6db2fff6-7fad-45e3-8ae2-307d5561ee14] 22644 --- [nio-8080-exec-2] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 20:27:32.852 DEBUG [e2254a1f-27a3-4fdf-9a28-82f43578c692] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:27:33.008 DEBUG [e2254a1f-27a3-4fdf-9a28-82f43578c692] 22644 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:27:33.010 DEBUG [e2254a1f-27a3-4fdf-9a28-82f43578c692] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:27:33.011  INFO [e2254a1f-27a3-4fdf-9a28-82f43578c692] 22644 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:27:33.136  INFO [e2254a1f-27a3-4fdf-9a28-82f43578c692] 22644 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 20:27:41.074 DEBUG [e58911a3-3587-4aa3-9023-88ae618ba90e] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /api/checkout/create-payment-intent
2025-06-29 20:27:41.074 DEBUG [e58911a3-3587-4aa3-9023-88ae618ba90e] 22644 --- [nio-8080-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 20:27:41.075 DEBUG [e58911a3-3587-4aa3-9023-88ae618ba90e] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /api/checkout/create-payment-intent
2025-06-29 20:27:41.083  INFO [e58911a3-3587-4aa3-9023-88ae618ba90e] 22644 --- [nio-8080-exec-3] o.e.x.controllers.PaymentController      : Creating payment intent for amount: 37495 ron
2025-06-29 20:27:41.583  INFO [e58911a3-3587-4aa3-9023-88ae618ba90e] 22644 --- [nio-8080-exec-3] o.e.x.controllers.PaymentController      : Payment intent created successfully: pi_3RfP0zGf8s1WZJnq0wlvBlpN
2025-06-29 20:27:42.821 DEBUG [8a64db2b-1ecb-4717-95c8-284de4ce4ec2] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing POST /api/checkout/confirm
2025-06-29 20:27:42.935 DEBUG [8a64db2b-1ecb-4717-95c8-284de4ce4ec2] 22644 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:27:42.937 DEBUG [8a64db2b-1ecb-4717-95c8-284de4ce4ec2] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured POST /api/checkout/confirm
2025-06-29 20:27:42.938  INFO [8a64db2b-1ecb-4717-95c8-284de4ce4ec2] 22644 --- [nio-8080-exec-9] o.e.x.controllers.CheckoutController     : Received purchase confirmation request.
2025-06-29 20:27:43.036  INFO [8a64db2b-1ecb-4717-95c8-284de4ce4ec2] 22644 --- [nio-8080-exec-9] o.e.x.controllers.CheckoutController     : Processing purchase for user: ****@****.***
2025-06-29 20:27:43.043  INFO [8a64db2b-1ecb-4717-95c8-284de4ce4ec2] 22644 --- [nio-8080-exec-9] o.e.x.controllers.CheckoutController     : User ****@****.*** persistent cart has 1 items.
2025-06-29 20:27:43.043  WARN [8a64db2b-1ecb-4717-95c8-284de4ce4ec2] 22644 --- [nio-8080-exec-9] o.e.x.controllers.CheckoutController     : !!! SIMULATING successful payment processing for user ****@****.*** !!!
2025-06-29 20:27:43.044  INFO [8a64db2b-1ecb-4717-95c8-284de4ce4ec2] 22644 --- [nio-8080-exec-9] o.e.x.services.OrderServiceImpl          : Creating order from persistent cart for user: ****@****.***
2025-06-29 20:27:43.052  INFO [8a64db2b-1ecb-4717-95c8-284de4ce4ec2] 22644 --- [nio-8080-exec-9] o.e.x.services.OrderServiceImpl          : Order 8 created for user ****@****.***, status: PENDING_PAYMENT. Total: 37.99
2025-06-29 20:27:43.052  INFO [8a64db2b-1ecb-4717-95c8-284de4ce4ec2] 22644 --- [nio-8080-exec-9] o.e.x.services.OrderServiceImpl          : Created ticket with deferred seat selection (fallback) for flight XT-OTP-CDG-2 for user ****@****.***
2025-06-29 20:27:43.053  INFO [8a64db2b-1ecb-4717-95c8-284de4ce4ec2] 22644 --- [nio-8080-exec-9] o.e.x.services.OrderServiceImpl          : Ticket has baggage type: BAGGAGE_TYPE_WEIGHT_CHECKED_20
2025-06-29 20:27:44.263  INFO [8a64db2b-1ecb-4717-95c8-284de4ce4ec2] 22644 --- [nio-8080-exec-9] o.e.x.services.EmailServiceImpl          : Purchase confirmation email sent to ****@****.***
2025-06-29 20:27:44.264  INFO [8a64db2b-1ecb-4717-95c8-284de4ce4ec2] 22644 --- [nio-8080-exec-9] o.e.x.services.OrderServiceImpl          : Purchase confirmation email sent to user: ****@****.***
2025-06-29 20:27:44.279  INFO [8a64db2b-1ecb-4717-95c8-284de4ce4ec2] 22644 --- [nio-8080-exec-9] o.e.x.controllers.CheckoutController     : Order successfully created for user ****@****.***. Confirmation: 8
2025-06-29 20:27:44.283  INFO [8a64db2b-1ecb-4717-95c8-284de4ce4ec2] 22644 --- [nio-8080-exec-9] o.e.xlr8travel.services.CartServiceImpl  : Clearing 1 items from cart for user ****@****.***
2025-06-29 20:27:44.300  INFO [8a64db2b-1ecb-4717-95c8-284de4ce4ec2] 22644 --- [nio-8080-exec-9] o.e.x.controllers.CheckoutController     : Persistent cart cleared for user ****@****.***.
2025-06-29 20:27:44.310 DEBUG [ccb9c643-f313-46b2-b6b5-7952b701b4b4] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing DELETE /api/cart/remove/16
2025-06-29 20:27:44.396 DEBUG [ccb9c643-f313-46b2-b6b5-7952b701b4b4] 22644 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:27:44.398 DEBUG [ccb9c643-f313-46b2-b6b5-7952b701b4b4] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured DELETE /api/cart/remove/16
2025-06-29 20:27:44.488  INFO [ccb9c643-f313-46b2-b6b5-7952b701b4b4] 22644 --- [nio-8080-exec-5] o.e.x.controllers.CartController         : User ****@****.*** request to remove flight ID 16 from persistent cart
2025-06-29 20:27:44.495  WARN [ccb9c643-f313-46b2-b6b5-7952b701b4b4] 22644 --- [nio-8080-exec-5] o.e.xlr8travel.services.CartServiceImpl  : Attempted to remove flight ID 16 not found in cart for user ****@****.***
2025-06-29 20:27:44.497  WARN [ccb9c643-f313-46b2-b6b5-7952b701b4b4] 22644 --- [nio-8080-exec-5] o.e.x.controllers.CartController         : Attempted to remove flight ID 16 not found in persistent cart for user ****@****.***
2025-06-29 20:27:44.509 DEBUG [fa279c7e-68ea-4217-a494-948565417c94] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:27:44.609 DEBUG [fa279c7e-68ea-4217-a494-948565417c94] 22644 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:27:44.611 DEBUG [fa279c7e-68ea-4217-a494-948565417c94] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:27:44.611  INFO [fa279c7e-68ea-4217-a494-948565417c94] 22644 --- [nio-8080-exec-4] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:27:44.711  INFO [fa279c7e-68ea-4217-a494-948565417c94] 22644 --- [nio-8080-exec-4] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 20:27:46.081 DEBUG [06552e68-1a6e-46c3-be26-4701297ac164] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 20:27:46.196 DEBUG [06552e68-1a6e-46c3-be26-4701297ac164] 22644 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:27:46.198 DEBUG [06552e68-1a6e-46c3-be26-4701297ac164] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 20:27:46.286  INFO [06552e68-1a6e-46c3-be26-4701297ac164] 22644 --- [nio-8080-exec-8] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 20:27:46.286  INFO [06552e68-1a6e-46c3-be26-4701297ac164] 22644 --- [nio-8080-exec-8] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 20:27:46.291  INFO [06552e68-1a6e-46c3-be26-4701297ac164] 22644 --- [nio-8080-exec-8] o.e.x.services.TicketServiceImpl         : Found 7 tickets eligible for check-in for user 4
2025-06-29 20:27:46.298 DEBUG [b5fb2ac8-01f8-434d-a3d1-1330e84c5da8] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 20:27:46.386 DEBUG [b5fb2ac8-01f8-434d-a3d1-1330e84c5da8] 22644 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:27:46.388 DEBUG [b5fb2ac8-01f8-434d-a3d1-1330e84c5da8] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 20:27:46.473  INFO [b5fb2ac8-01f8-434d-a3d1-1330e84c5da8] 22644 --- [nio-8080-exec-7] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 20:27:46.473  INFO [b5fb2ac8-01f8-434d-a3d1-1330e84c5da8] 22644 --- [nio-8080-exec-7] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 20:27:46.478  INFO [b5fb2ac8-01f8-434d-a3d1-1330e84c5da8] 22644 --- [nio-8080-exec-7] o.e.x.services.TicketServiceImpl         : Found 7 tickets eligible for check-in for user 4
2025-06-29 20:27:52.481 DEBUG [5d96d984-dfa9-409e-af42-edde2a978e58] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:27:52.626 DEBUG [5d96d984-dfa9-409e-af42-edde2a978e58] 22644 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:27:52.629 DEBUG [5d96d984-dfa9-409e-af42-edde2a978e58] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:27:52.630  INFO [5d96d984-dfa9-409e-af42-edde2a978e58] 22644 --- [nio-8080-exec-6] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:27:52.630  INFO [5d96d984-dfa9-409e-af42-edde2a978e58] 22644 --- [nio-8080-exec-6] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:27:52.687 DEBUG [104230a7-fc76-4432-af1f-e7d5abdf11ca] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:27:52.807 DEBUG [104230a7-fc76-4432-af1f-e7d5abdf11ca] 22644 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:27:52.810 DEBUG [104230a7-fc76-4432-af1f-e7d5abdf11ca] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:27:52.811  INFO [104230a7-fc76-4432-af1f-e7d5abdf11ca] 22644 --- [io-8080-exec-10] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:27:52.811  INFO [104230a7-fc76-4432-af1f-e7d5abdf11ca] 22644 --- [io-8080-exec-10] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:28:17.355 DEBUG [beb04266-7bc1-41f4-b29c-f07a33c9ce86] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/nearby?origin=OTP
2025-06-29 20:28:17.356 DEBUG [beb04266-7bc1-41f4-b29c-f07a33c9ce86] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/nearby?origin=OTP
2025-06-29 20:28:17.357  INFO [beb04266-7bc1-41f4-b29c-f07a33c9ce86] 22644 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Received request for nearby flights from origin: OTP, departureDate: null
2025-06-29 20:28:17.357  INFO [beb04266-7bc1-41f4-b29c-f07a33c9ce86] 22644 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Using search date: 2025-06-29
2025-06-29 20:28:17.358  INFO [beb04266-7bc1-41f4-b29c-f07a33c9ce86] 22644 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Cache key: OTP-2025-06-29
2025-06-29 20:28:17.358  INFO [beb04266-7bc1-41f4-b29c-f07a33c9ce86] 22644 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : No valid cache found. Searching nearby flights from origin: OTP, after date: 2025-06-29
2025-06-29 20:28:17.359  INFO [beb04266-7bc1-41f4-b29c-f07a33c9ce86] 22644 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Calling flightService.findByOriginAndDepartureDateAfter for origin: OTP, date: 2025-06-29
2025-06-29 20:28:17.421  INFO [beb04266-7bc1-41f4-b29c-f07a33c9ce86] 22644 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Database query completed, found 16 flights
2025-06-29 20:28:17.421  INFO [beb04266-7bc1-41f4-b29c-f07a33c9ce86] 22644 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Converting 16 Flight entities to FlightDTOs
2025-06-29 20:28:17.422  INFO [beb04266-7bc1-41f4-b29c-f07a33c9ce86] 22644 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Converted to 16 FlightDTOs
2025-06-29 20:28:17.422  INFO [beb04266-7bc1-41f4-b29c-f07a33c9ce86] 22644 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Grouping flights by destination country
2025-06-29 20:28:17.422  INFO [beb04266-7bc1-41f4-b29c-f07a33c9ce86] 22644 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Grouped flights into 7 countries
2025-06-29 20:28:17.422  INFO [beb04266-7bc1-41f4-b29c-f07a33c9ce86] 22644 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Selecting diverse flights - one from each country first
2025-06-29 20:28:17.422  INFO [beb04266-7bc1-41f4-b29c-f07a33c9ce86] 22644 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Adding first flight from Greece (has 2 flights)
2025-06-29 20:28:17.423  INFO [beb04266-7bc1-41f4-b29c-f07a33c9ce86] 22644 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Adding first flight from Netherlands (has 2 flights)
2025-06-29 20:28:17.423  INFO [beb04266-7bc1-41f4-b29c-f07a33c9ce86] 22644 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Adding first flight from Italy (has 2 flights)
2025-06-29 20:28:17.423  INFO [beb04266-7bc1-41f4-b29c-f07a33c9ce86] 22644 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Adding first flight from United Kingdom (has 2 flights)
2025-06-29 20:28:17.423  INFO [beb04266-7bc1-41f4-b29c-f07a33c9ce86] 22644 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Adding first flight from France (has 2 flights)
2025-06-29 20:28:17.423  INFO [beb04266-7bc1-41f4-b29c-f07a33c9ce86] 22644 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Adding first flight from Switzerland (has 2 flights)
2025-06-29 20:28:17.423  INFO [beb04266-7bc1-41f4-b29c-f07a33c9ce86] 22644 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Reached 6 flights after first pass, stopping
2025-06-29 20:28:17.424  INFO [beb04266-7bc1-41f4-b29c-f07a33c9ce86] 22644 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Caching 6 diverse flights with key: OTP-2025-06-29
2025-06-29 20:28:17.424  INFO [beb04266-7bc1-41f4-b29c-f07a33c9ce86] 22644 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Returning 6 diverse nearby flights from: OTP
2025-06-29 20:28:17.425 DEBUG [beb04266-7bc1-41f4-b29c-f07a33c9ce86] 22644 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:28:22.617 DEBUG [d41a6862-60cf-4acb-b820-30f267b8e98b] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-29 20:28:22.619 DEBUG [d41a6862-60cf-4acb-b820-30f267b8e98b] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-29 20:28:22.620  INFO [d41a6862-60cf-4acb-b820-30f267b8e98b] 22644 --- [nio-8080-exec-1] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris
2025-06-29 20:28:22.620  INFO [d41a6862-60cf-4acb-b820-30f267b8e98b] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-29 20:28:22.621  INFO [d41a6862-60cf-4acb-b820-30f267b8e98b] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-29 20:28:22.621 DEBUG [d41a6862-60cf-4acb-b820-30f267b8e98b] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-29).    For example, if today is 2025-06-29, a good departure date would be between 2025-07-06 and 2025-07-13, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris";
2025-06-29 20:28:22.623  INFO [d41a6862-60cf-4acb-b820-30f267b8e98b] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-29 20:28:22.629  INFO [d41a6862-60cf-4acb-b820-30f267b8e98b] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-29 20:28:22.632  INFO [d41a6862-60cf-4acb-b820-30f267b8e98b] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-29 20:28:22.634  INFO [d41a6862-60cf-4acb-b820-30f267b8e98b] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 20:28:22.636  INFO [d41a6862-60cf-4acb-b820-30f267b8e98b] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-29 20:28:22.638  INFO [d41a6862-60cf-4acb-b820-30f267b8e98b] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-29 20:28:22.638  INFO [d41a6862-60cf-4acb-b820-30f267b8e98b] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-29 20:28:22.638  INFO [d41a6862-60cf-4acb-b820-30f267b8e98b] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-29 20:28:22.639  INFO [d41a6862-60cf-4acb-b820-30f267b8e98b] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-29 20:28:24.550  INFO [d41a6862-60cf-4acb-b820-30f267b8e98b] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-29 20:28:24.550  INFO [d41a6862-60cf-4acb-b820-30f267b8e98b] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Response length: 195 characters
2025-06-29 20:28:24.550 DEBUG [d41a6862-60cf-4acb-b820-30f267b8e98b] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-06",
  "returnDate": "2025-07-08",
  "tripType": "roundTrip",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-29 20:28:24.551 DEBUG [d41a6862-60cf-4acb-b820-30f267b8e98b] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-29 20:28:24.551 DEBUG [d41a6862-60cf-4acb-b820-30f267b8e98b] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-29 20:28:24.552 DEBUG [d41a6862-60cf-4acb-b820-30f267b8e98b] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-29 20:28:24.552 DEBUG [d41a6862-60cf-4acb-b820-30f267b8e98b] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 20:28:24.552  INFO [d41a6862-60cf-4acb-b820-30f267b8e98b] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 20:28:24.552  INFO [d41a6862-60cf-4acb-b820-30f267b8e98b] 22644 --- [nio-8080-exec-1] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-06, returnDate=2025-07-08, tripType=roundTrip, adults=1, children=0, infants=0
2025-06-29 20:28:24.553  INFO [d41a6862-60cf-4acb-b820-30f267b8e98b] 22644 --- [nio-8080-exec-1] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-29 20:28:24.554 DEBUG [d41a6862-60cf-4acb-b820-30f267b8e98b] 22644 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:28:26.483 DEBUG [2ac81248-a865-40b3-adc7-c106dbfe1e84] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-29 20:28:26.485 DEBUG [2ac81248-a865-40b3-adc7-c106dbfe1e84] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-29 20:28:26.486  INFO [2ac81248-a865-40b3-adc7-c106dbfe1e84] 22644 --- [nio-8080-exec-3] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris one way
2025-06-29 20:28:26.486  INFO [2ac81248-a865-40b3-adc7-c106dbfe1e84] 22644 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-29 20:28:26.486  INFO [2ac81248-a865-40b3-adc7-c106dbfe1e84] 22644 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-29 20:28:26.487 DEBUG [2ac81248-a865-40b3-adc7-c106dbfe1e84] 22644 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-29).    For example, if today is 2025-06-29, a good departure date would be between 2025-07-06 and 2025-07-13, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris one way";
2025-06-29 20:28:26.489  INFO [2ac81248-a865-40b3-adc7-c106dbfe1e84] 22644 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-29 20:28:26.490  INFO [2ac81248-a865-40b3-adc7-c106dbfe1e84] 22644 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-29 20:28:26.490  INFO [2ac81248-a865-40b3-adc7-c106dbfe1e84] 22644 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-29 20:28:26.490  INFO [2ac81248-a865-40b3-adc7-c106dbfe1e84] 22644 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 20:28:26.490  INFO [2ac81248-a865-40b3-adc7-c106dbfe1e84] 22644 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-29 20:28:26.492  INFO [2ac81248-a865-40b3-adc7-c106dbfe1e84] 22644 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-29 20:28:26.492  INFO [2ac81248-a865-40b3-adc7-c106dbfe1e84] 22644 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-29 20:28:26.492  INFO [2ac81248-a865-40b3-adc7-c106dbfe1e84] 22644 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-29 20:28:26.493  INFO [2ac81248-a865-40b3-adc7-c106dbfe1e84] 22644 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-29 20:28:28.082  INFO [2ac81248-a865-40b3-adc7-c106dbfe1e84] 22644 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-29 20:28:28.083  INFO [2ac81248-a865-40b3-adc7-c106dbfe1e84] 22644 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Response length: 184 characters
2025-06-29 20:28:28.083 DEBUG [2ac81248-a865-40b3-adc7-c106dbfe1e84] 22644 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-06",
  "returnDate": null,
  "tripType": "oneWay",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-29 20:28:28.083 DEBUG [2ac81248-a865-40b3-adc7-c106dbfe1e84] 22644 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-29 20:28:28.084 DEBUG [2ac81248-a865-40b3-adc7-c106dbfe1e84] 22644 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-29 20:28:28.084 DEBUG [2ac81248-a865-40b3-adc7-c106dbfe1e84] 22644 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-29 20:28:28.084 DEBUG [2ac81248-a865-40b3-adc7-c106dbfe1e84] 22644 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 20:28:28.084  INFO [2ac81248-a865-40b3-adc7-c106dbfe1e84] 22644 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 20:28:28.084  INFO [2ac81248-a865-40b3-adc7-c106dbfe1e84] 22644 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-06, returnDate=null, tripType=oneWay, adults=1, children=0, infants=0
2025-06-29 20:28:28.085  INFO [2ac81248-a865-40b3-adc7-c106dbfe1e84] 22644 --- [nio-8080-exec-3] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-29 20:28:28.086 DEBUG [2ac81248-a865-40b3-adc7-c106dbfe1e84] 22644 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:28:29.996 DEBUG [5bdbd1d9-47c9-475c-add1-90131c71ad7d] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 20:28:30.105 DEBUG [5bdbd1d9-47c9-475c-add1-90131c71ad7d] 22644 --- [nio-8080-exec-9] o.s.s.core.session.SessionRegistryImpl   : Registering session D0634736898532944B21ABA01F2F46E8, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}])
2025-06-29 20:28:30.106 DEBUG [5bdbd1d9-47c9-475c-add1-90131c71ad7d] 22644 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@7c781cf3]
2025-06-29 20:28:30.107 DEBUG [5bdbd1d9-47c9-475c-add1-90131c71ad7d] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me
2025-06-29 20:28:30.108  INFO [5bdbd1d9-47c9-475c-add1-90131c71ad7d] 22644 --- [nio-8080-exec-9] o.e.x.controllers.UserController         : Request received for current user details: ****@****.***
2025-06-29 20:28:30.210  INFO [5bdbd1d9-47c9-475c-add1-90131c71ad7d] 22644 --- [nio-8080-exec-9] o.e.x.controllers.UserController         : Returning details for user: ****@****.***
2025-06-29 20:28:30.268 DEBUG [24916b64-8768-4fd2-9d9b-54a7162d4d2a] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 20:28:30.280 DEBUG [c46a1aad-2ae3-4b83-917d-9e9e497df863] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:28:30.280 DEBUG [138a2af7-2326-4e7e-8b09-540635da5209] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:28:30.282 DEBUG [c46a1aad-2ae3-4b83-917d-9e9e497df863] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:28:30.283  INFO [c46a1aad-2ae3-4b83-917d-9e9e497df863] 22644 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 20:28:30.283  INFO [c46a1aad-2ae3-4b83-917d-9e9e497df863] 22644 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 20:28:30.377  INFO [c46a1aad-2ae3-4b83-917d-9e9e497df863] 22644 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 20:28:30.378 DEBUG [c46a1aad-2ae3-4b83-917d-9e9e497df863] 22644 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:28:30.385 DEBUG [94baa722-48ff-4325-a599-200864d8e11b] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:28:30.388 DEBUG [94baa722-48ff-4325-a599-200864d8e11b] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:28:30.389  INFO [94baa722-48ff-4325-a599-200864d8e11b] 22644 --- [nio-8080-exec-7] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 20:28:30.389  INFO [94baa722-48ff-4325-a599-200864d8e11b] 22644 --- [nio-8080-exec-7] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 20:28:30.413 DEBUG [2e7955c0-c1b6-4611-baa2-c3fc934e947f] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 20:28:30.415 DEBUG [2e7955c0-c1b6-4611-baa2-c3fc934e947f] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 20:28:30.416  INFO [2e7955c0-c1b6-4611-baa2-c3fc934e947f] 22644 --- [nio-8080-exec-6] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 20:28:30.447 DEBUG [24916b64-8768-4fd2-9d9b-54a7162d4d2a] 22644 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:28:30.447 DEBUG [138a2af7-2326-4e7e-8b09-540635da5209] 22644 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:28:30.449 DEBUG [138a2af7-2326-4e7e-8b09-540635da5209] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:28:30.450 DEBUG [24916b64-8768-4fd2-9d9b-54a7162d4d2a] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 20:28:30.450  INFO [138a2af7-2326-4e7e-8b09-540635da5209] 22644 --- [nio-8080-exec-8] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:28:30.460  INFO [94baa722-48ff-4325-a599-200864d8e11b] 22644 --- [nio-8080-exec-7] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 20:28:30.461 DEBUG [94baa722-48ff-4325-a599-200864d8e11b] 22644 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:28:30.569  INFO [2e7955c0-c1b6-4611-baa2-c3fc934e947f] 22644 --- [nio-8080-exec-6] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 20:28:30.569  WARN [24916b64-8768-4fd2-9d9b-54a7162d4d2a] 22644 --- [nio-8080-exec-5] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 20:28:30.570  WARN [24916b64-8768-4fd2-9d9b-54a7162d4d2a] 22644 --- [nio-8080-exec-5] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 20:28:30.570 DEBUG [2e7955c0-c1b6-4611-baa2-c3fc934e947f] 22644 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:28:30.581  INFO [138a2af7-2326-4e7e-8b09-540635da5209] 22644 --- [nio-8080-exec-8] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 20:28:30.581 DEBUG [1b41703b-3ca3-4b47-bda3-e427979d88cf] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 20:28:30.582 DEBUG [f94d742f-6748-4cf4-b646-d478483e5ac2] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 20:28:30.583 DEBUG [f94d742f-6748-4cf4-b646-d478483e5ac2] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 20:28:30.584  INFO [f94d742f-6748-4cf4-b646-d478483e5ac2] 22644 --- [nio-8080-exec-2] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 20:28:30.593 DEBUG [2b70fb78-6d9a-4d5c-8941-e032e1471d70] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:28:30.594 DEBUG [2b70fb78-6d9a-4d5c-8941-e032e1471d70] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:28:30.595  INFO [2b70fb78-6d9a-4d5c-8941-e032e1471d70] 22644 --- [nio-8080-exec-1] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 20:28:30.622  INFO [f94d742f-6748-4cf4-b646-d478483e5ac2] 22644 --- [nio-8080-exec-2] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 20:28:30.624 DEBUG [f94d742f-6748-4cf4-b646-d478483e5ac2] 22644 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:28:30.699 DEBUG [1b41703b-3ca3-4b47-bda3-e427979d88cf] 22644 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:28:30.701 DEBUG [1b41703b-3ca3-4b47-bda3-e427979d88cf] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 20:28:30.788  INFO [2b70fb78-6d9a-4d5c-8941-e032e1471d70] 22644 --- [nio-8080-exec-1] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 20:28:30.789 DEBUG [2b70fb78-6d9a-4d5c-8941-e032e1471d70] 22644 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:28:30.796 DEBUG [8c776c4a-b5fc-42d2-88e7-facb0b272b35] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:28:30.798 DEBUG [8c776c4a-b5fc-42d2-88e7-facb0b272b35] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:28:30.798  INFO [8c776c4a-b5fc-42d2-88e7-facb0b272b35] 22644 --- [nio-8080-exec-3] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 20:28:30.809  WARN [1b41703b-3ca3-4b47-bda3-e427979d88cf] 22644 --- [io-8080-exec-10] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 20:28:30.810  WARN [1b41703b-3ca3-4b47-bda3-e427979d88cf] 22644 --- [io-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 20:28:30.845  INFO [8c776c4a-b5fc-42d2-88e7-facb0b272b35] 22644 --- [nio-8080-exec-3] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 20:28:30.848 DEBUG [8c776c4a-b5fc-42d2-88e7-facb0b272b35] 22644 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:28:36.319 DEBUG [d11d8031-b784-431a-93a3-21349e0a6183] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:28:36.436 DEBUG [d11d8031-b784-431a-93a3-21349e0a6183] 22644 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:28:36.439 DEBUG [d11d8031-b784-431a-93a3-21349e0a6183] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:28:36.440  INFO [d11d8031-b784-431a-93a3-21349e0a6183] 22644 --- [nio-8080-exec-9] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:28:36.440  INFO [d11d8031-b784-431a-93a3-21349e0a6183] 22644 --- [nio-8080-exec-9] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:28:36.495 DEBUG [069cf773-22a6-4314-984e-72f40ee1dc3d] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:28:36.620 DEBUG [069cf773-22a6-4314-984e-72f40ee1dc3d] 22644 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:28:36.623 DEBUG [069cf773-22a6-4314-984e-72f40ee1dc3d] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:28:36.624  INFO [069cf773-22a6-4314-984e-72f40ee1dc3d] 22644 --- [nio-8080-exec-4] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:28:36.624  INFO [069cf773-22a6-4314-984e-72f40ee1dc3d] 22644 --- [nio-8080-exec-4] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:28:36.680 DEBUG [53197b9c-ac70-4655-96d5-6ba89d608d4c] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:28:36.813 DEBUG [53197b9c-ac70-4655-96d5-6ba89d608d4c] 22644 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:28:36.816 DEBUG [53197b9c-ac70-4655-96d5-6ba89d608d4c] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:28:36.817  INFO [53197b9c-ac70-4655-96d5-6ba89d608d4c] 22644 --- [nio-8080-exec-7] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:28:36.817  INFO [53197b9c-ac70-4655-96d5-6ba89d608d4c] 22644 --- [nio-8080-exec-7] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:28:41.707 DEBUG [e064eade-f377-4b1b-b534-7e9a2994b69e] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 20:28:41.873 DEBUG [e064eade-f377-4b1b-b534-7e9a2994b69e] 22644 --- [nio-8080-exec-5] o.s.s.core.session.SessionRegistryImpl   : Registering session 39C9AD9DFEDFCC0EDB3F499C9561D33B, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}])
2025-06-29 20:28:41.874 DEBUG [e064eade-f377-4b1b-b534-7e9a2994b69e] 22644 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@43fc0ed9]
2025-06-29 20:28:41.877 DEBUG [e064eade-f377-4b1b-b534-7e9a2994b69e] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me
2025-06-29 20:28:41.878  INFO [e064eade-f377-4b1b-b534-7e9a2994b69e] 22644 --- [nio-8080-exec-5] o.e.x.controllers.UserController         : Request received for current user details: ****@****.***
2025-06-29 20:28:42.036  INFO [e064eade-f377-4b1b-b534-7e9a2994b69e] 22644 --- [nio-8080-exec-5] o.e.x.controllers.UserController         : Returning details for user: ****@****.***
2025-06-29 20:28:42.177 DEBUG [11c486b2-b95b-43db-8708-82fa002bd0c4] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 20:28:42.188 DEBUG [748065c7-e1c3-4a7c-91a7-15c9ef53bdcc] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:28:42.188 DEBUG [c0aa6d5a-6d04-4446-a167-9854a88bfe77] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:28:42.189 DEBUG [c0aa6d5a-6d04-4446-a167-9854a88bfe77] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:28:42.190  INFO [c0aa6d5a-6d04-4446-a167-9854a88bfe77] 22644 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 20:28:42.191  INFO [c0aa6d5a-6d04-4446-a167-9854a88bfe77] 22644 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 20:28:42.195 DEBUG [7c0b6a45-f7d9-4568-9648-7083cce313ed] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 20:28:42.195 DEBUG [5dea813f-f7e1-476a-8ac6-6b12477b91b3] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:28:42.197 DEBUG [5dea813f-f7e1-476a-8ac6-6b12477b91b3] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:28:42.198  INFO [5dea813f-f7e1-476a-8ac6-6b12477b91b3] 22644 --- [io-8080-exec-10] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 20:28:42.199  INFO [5dea813f-f7e1-476a-8ac6-6b12477b91b3] 22644 --- [io-8080-exec-10] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 20:28:42.294  INFO [c0aa6d5a-6d04-4446-a167-9854a88bfe77] 22644 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 20:28:42.295 DEBUG [c0aa6d5a-6d04-4446-a167-9854a88bfe77] 22644 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:28:42.319  INFO [5dea813f-f7e1-476a-8ac6-6b12477b91b3] 22644 --- [io-8080-exec-10] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 20:28:42.321 DEBUG [5dea813f-f7e1-476a-8ac6-6b12477b91b3] 22644 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:28:42.443 DEBUG [11c486b2-b95b-43db-8708-82fa002bd0c4] 22644 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:28:42.449 DEBUG [11c486b2-b95b-43db-8708-82fa002bd0c4] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 20:28:42.471 DEBUG [7c0b6a45-f7d9-4568-9648-7083cce313ed] 22644 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:28:42.471 DEBUG [748065c7-e1c3-4a7c-91a7-15c9ef53bdcc] 22644 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:28:42.474 DEBUG [748065c7-e1c3-4a7c-91a7-15c9ef53bdcc] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:28:42.474 DEBUG [7c0b6a45-f7d9-4568-9648-7083cce313ed] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 20:28:42.475  INFO [748065c7-e1c3-4a7c-91a7-15c9ef53bdcc] 22644 --- [nio-8080-exec-2] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:28:42.566 DEBUG [7e99b282-e6f0-4de6-ae7a-782e835f2897] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 20:28:42.566 DEBUG [dbc33bbe-40ec-436f-9424-9491ef3a3a4c] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 20:28:42.567 DEBUG [dbc33bbe-40ec-436f-9424-9491ef3a3a4c] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 20:28:42.568 DEBUG [7e99b282-e6f0-4de6-ae7a-782e835f2897] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 20:28:42.569  INFO [dbc33bbe-40ec-436f-9424-9491ef3a3a4c] 22644 --- [nio-8080-exec-9] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 20:28:42.569  INFO [7e99b282-e6f0-4de6-ae7a-782e835f2897] 22644 --- [nio-8080-exec-3] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 20:28:42.696  WARN [11c486b2-b95b-43db-8708-82fa002bd0c4] 22644 --- [nio-8080-exec-6] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 20:28:42.698  WARN [11c486b2-b95b-43db-8708-82fa002bd0c4] 22644 --- [nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 20:28:42.722  WARN [7c0b6a45-f7d9-4568-9648-7083cce313ed] 22644 --- [nio-8080-exec-1] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 20:28:42.723  WARN [7c0b6a45-f7d9-4568-9648-7083cce313ed] 22644 --- [nio-8080-exec-1] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 20:28:42.771  INFO [7e99b282-e6f0-4de6-ae7a-782e835f2897] 22644 --- [nio-8080-exec-3] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 20:28:42.774  INFO [dbc33bbe-40ec-436f-9424-9491ef3a3a4c] 22644 --- [nio-8080-exec-9] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 20:28:42.774 DEBUG [7e99b282-e6f0-4de6-ae7a-782e835f2897] 22644 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:28:42.775 DEBUG [dbc33bbe-40ec-436f-9424-9491ef3a3a4c] 22644 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:28:42.787  INFO [748065c7-e1c3-4a7c-91a7-15c9ef53bdcc] 22644 --- [nio-8080-exec-2] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 20:28:42.862 DEBUG [07dfb51a-3778-4a15-bbc9-82a8fb410e32] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:28:42.863 DEBUG [4c8b61a4-ab62-459a-953a-60b1744b0235] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:28:42.865 DEBUG [4c8b61a4-ab62-459a-953a-60b1744b0235] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:28:42.865 DEBUG [07dfb51a-3778-4a15-bbc9-82a8fb410e32] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:28:42.866  INFO [4c8b61a4-ab62-459a-953a-60b1744b0235] 22644 --- [nio-8080-exec-7] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 20:28:42.866  INFO [07dfb51a-3778-4a15-bbc9-82a8fb410e32] 22644 --- [nio-8080-exec-4] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 20:28:42.963  INFO [07dfb51a-3778-4a15-bbc9-82a8fb410e32] 22644 --- [nio-8080-exec-4] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 20:28:42.963  INFO [4c8b61a4-ab62-459a-953a-60b1744b0235] 22644 --- [nio-8080-exec-7] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 20:28:42.964 DEBUG [4c8b61a4-ab62-459a-953a-60b1744b0235] 22644 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:28:42.964 DEBUG [07dfb51a-3778-4a15-bbc9-82a8fb410e32] 22644 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:28:48.232 DEBUG [82630535-4574-4b68-912e-542d24407171] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:28:48.235 DEBUG [b2d260f1-461b-408e-89af-21f820db68bc] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:28:48.798 DEBUG [b2d260f1-461b-408e-89af-21f820db68bc] 22644 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:28:48.802 DEBUG [b2d260f1-461b-408e-89af-21f820db68bc] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:28:48.802  INFO [b2d260f1-461b-408e-89af-21f820db68bc] 22644 --- [nio-8080-exec-8] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:28:48.803  INFO [b2d260f1-461b-408e-89af-21f820db68bc] 22644 --- [nio-8080-exec-8] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:28:48.810 DEBUG [82630535-4574-4b68-912e-542d24407171] 22644 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:28:48.814 DEBUG [82630535-4574-4b68-912e-542d24407171] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:28:48.815  INFO [82630535-4574-4b68-912e-542d24407171] 22644 --- [nio-8080-exec-5] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:28:48.815  INFO [82630535-4574-4b68-912e-542d24407171] 22644 --- [nio-8080-exec-5] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:28:48.840 DEBUG [b48a62eb-ac78-48d3-9800-bbfcdab77d90] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:28:49.021 DEBUG [b48a62eb-ac78-48d3-9800-bbfcdab77d90] 22644 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:28:49.025 DEBUG [b48a62eb-ac78-48d3-9800-bbfcdab77d90] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:28:49.026  INFO [b48a62eb-ac78-48d3-9800-bbfcdab77d90] 22644 --- [io-8080-exec-10] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:28:49.026  INFO [b48a62eb-ac78-48d3-9800-bbfcdab77d90] 22644 --- [io-8080-exec-10] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:29:23.707 DEBUG [85e01faa-6541-4f7b-81c7-cfddd8db2f9b] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:29:23.710 DEBUG [f9b867b5-a967-48cc-81c3-9f6b1170ae75] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:29:23.832 DEBUG [85e01faa-6541-4f7b-81c7-cfddd8db2f9b] 22644 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:29:23.834 DEBUG [85e01faa-6541-4f7b-81c7-cfddd8db2f9b] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:29:23.833 DEBUG [f9b867b5-a967-48cc-81c3-9f6b1170ae75] 22644 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:29:23.834  INFO [85e01faa-6541-4f7b-81c7-cfddd8db2f9b] 22644 --- [nio-8080-exec-6] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:29:23.835  INFO [85e01faa-6541-4f7b-81c7-cfddd8db2f9b] 22644 --- [nio-8080-exec-6] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:29:23.836 DEBUG [f9b867b5-a967-48cc-81c3-9f6b1170ae75] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:29:23.836  INFO [f9b867b5-a967-48cc-81c3-9f6b1170ae75] 22644 --- [nio-8080-exec-1] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:29:23.837  INFO [f9b867b5-a967-48cc-81c3-9f6b1170ae75] 22644 --- [nio-8080-exec-1] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:29:24.209 DEBUG [194932fc-cc57-46e5-a72b-64b3702f2276] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:29:24.319 DEBUG [194932fc-cc57-46e5-a72b-64b3702f2276] 22644 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:29:24.322 DEBUG [194932fc-cc57-46e5-a72b-64b3702f2276] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:29:24.323  INFO [194932fc-cc57-46e5-a72b-64b3702f2276] 22644 --- [nio-8080-exec-9] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:29:24.323  INFO [194932fc-cc57-46e5-a72b-64b3702f2276] 22644 --- [nio-8080-exec-9] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:29:28.646 DEBUG [1719f24e-a8ff-458b-b94f-aeb9c9e458d3] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:29:28.648 DEBUG [5c189c7b-3ccd-4504-81e2-166426d61ec8] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:29:28.762 DEBUG [5c189c7b-3ccd-4504-81e2-166426d61ec8] 22644 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:29:28.762 DEBUG [1719f24e-a8ff-458b-b94f-aeb9c9e458d3] 22644 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:29:28.764 DEBUG [5c189c7b-3ccd-4504-81e2-166426d61ec8] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:29:28.765 DEBUG [1719f24e-a8ff-458b-b94f-aeb9c9e458d3] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:29:28.765  INFO [5c189c7b-3ccd-4504-81e2-166426d61ec8] 22644 --- [nio-8080-exec-2] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:29:28.765  INFO [5c189c7b-3ccd-4504-81e2-166426d61ec8] 22644 --- [nio-8080-exec-2] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:29:28.765  INFO [1719f24e-a8ff-458b-b94f-aeb9c9e458d3] 22644 --- [nio-8080-exec-3] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:29:28.765  INFO [1719f24e-a8ff-458b-b94f-aeb9c9e458d3] 22644 --- [nio-8080-exec-3] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:29:29.153 DEBUG [edaedc1f-62d7-4c74-8eca-ff034af21abb] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:29:29.278 DEBUG [edaedc1f-62d7-4c74-8eca-ff034af21abb] 22644 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:29:29.281 DEBUG [edaedc1f-62d7-4c74-8eca-ff034af21abb] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:29:29.283  INFO [edaedc1f-62d7-4c74-8eca-ff034af21abb] 22644 --- [nio-8080-exec-7] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:29:29.283  INFO [edaedc1f-62d7-4c74-8eca-ff034af21abb] 22644 --- [nio-8080-exec-7] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:29:37.182 DEBUG [32820016-293f-49f0-81f2-05e78f32b51a] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing POST /api/cart/add
2025-06-29 20:29:37.288 DEBUG [32820016-293f-49f0-81f2-05e78f32b51a] 22644 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:29:37.291 DEBUG [32820016-293f-49f0-81f2-05e78f32b51a] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured POST /api/cart/add
2025-06-29 20:29:37.407  INFO [32820016-293f-49f0-81f2-05e78f32b51a] 22644 --- [nio-8080-exec-4] o.e.x.controllers.CartController         : User ****@****.*** request to add flight ID 16 to persistent cart
2025-06-29 20:29:37.413  INFO [32820016-293f-49f0-81f2-05e78f32b51a] 22644 --- [nio-8080-exec-4] o.e.x.controllers.CartController         : AddToCart request: flightId=16, seatNumber=1C, seatType=SEAT_TYPE_UPFRONT, deferSeat=false, randomSeat=false
2025-06-29 20:29:37.420  INFO [32820016-293f-49f0-81f2-05e78f32b51a] 22644 --- [nio-8080-exec-4] o.e.xlr8travel.services.CartServiceImpl  : Added new flight ID 16 to cart for user ****@****.***
2025-06-29 20:29:37.439  INFO [32820016-293f-49f0-81f2-05e78f32b51a] 22644 --- [nio-8080-exec-4] o.e.x.controllers.CartController         : Flight ID 16 added/incremented in persistent cart for user ****@****.***.
2025-06-29 20:29:37.454 DEBUG [84319599-6958-4632-98e9-26237802e4ee] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:29:37.574 DEBUG [84319599-6958-4632-98e9-26237802e4ee] 22644 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:29:37.576 DEBUG [84319599-6958-4632-98e9-26237802e4ee] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:29:37.577  INFO [84319599-6958-4632-98e9-26237802e4ee] 22644 --- [nio-8080-exec-8] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:29:37.769  INFO [84319599-6958-4632-98e9-26237802e4ee] 22644 --- [nio-8080-exec-8] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 20:29:38.663 DEBUG [c22d398f-63d2-4457-9a83-f33d0f9f8860] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:29:38.663 DEBUG [27a5c6d4-8632-4479-a004-1fefe9307746] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:29:39.822 DEBUG [c22d398f-63d2-4457-9a83-f33d0f9f8860] 22644 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:29:39.825 DEBUG [c22d398f-63d2-4457-9a83-f33d0f9f8860] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:29:39.822 DEBUG [27a5c6d4-8632-4479-a004-1fefe9307746] 22644 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:29:39.825  INFO [c22d398f-63d2-4457-9a83-f33d0f9f8860] 22644 --- [io-8080-exec-10] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:29:39.826 DEBUG [27a5c6d4-8632-4479-a004-1fefe9307746] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:29:39.827  INFO [27a5c6d4-8632-4479-a004-1fefe9307746] 22644 --- [nio-8080-exec-5] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:29:40.110  INFO [27a5c6d4-8632-4479-a004-1fefe9307746] 22644 --- [nio-8080-exec-5] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 20:29:40.127  INFO [c22d398f-63d2-4457-9a83-f33d0f9f8860] 22644 --- [io-8080-exec-10] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 20:29:47.539 DEBUG [0cbd8942-daac-4edc-81b5-a42988ada4ac] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:29:47.541 DEBUG [0cbd8942-daac-4edc-81b5-a42988ada4ac] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:29:47.543  INFO [0cbd8942-daac-4edc-81b5-a42988ada4ac] 22644 --- [nio-8080-exec-6] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 20:29:47.543  INFO [0cbd8942-daac-4edc-81b5-a42988ada4ac] 22644 --- [nio-8080-exec-6] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 20:29:47.546 DEBUG [1109be56-a3e4-4dca-824f-b254a92b7cce] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:29:47.547 DEBUG [1109be56-a3e4-4dca-824f-b254a92b7cce] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:29:47.548  INFO [1109be56-a3e4-4dca-824f-b254a92b7cce] 22644 --- [nio-8080-exec-9] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 20:29:47.549  INFO [1109be56-a3e4-4dca-824f-b254a92b7cce] 22644 --- [nio-8080-exec-9] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 20:29:47.617  INFO [0cbd8942-daac-4edc-81b5-a42988ada4ac] 22644 --- [nio-8080-exec-6] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 20:29:47.617  INFO [1109be56-a3e4-4dca-824f-b254a92b7cce] 22644 --- [nio-8080-exec-9] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 20:29:47.618 DEBUG [1109be56-a3e4-4dca-824f-b254a92b7cce] 22644 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:29:47.618 DEBUG [0cbd8942-daac-4edc-81b5-a42988ada4ac] 22644 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:29:47.661 DEBUG [a856cce8-85c6-4c6c-a51f-4d9c761d31f4] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 20:29:47.663 DEBUG [a856cce8-85c6-4c6c-a51f-4d9c761d31f4] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 20:29:47.665  INFO [a856cce8-85c6-4c6c-a51f-4d9c761d31f4] 22644 --- [nio-8080-exec-2] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 20:29:47.668 DEBUG [137a5c51-8655-4430-a29e-960b035ebc33] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 20:29:47.671 DEBUG [137a5c51-8655-4430-a29e-960b035ebc33] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 20:29:47.671  INFO [137a5c51-8655-4430-a29e-960b035ebc33] 22644 --- [nio-8080-exec-3] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 20:29:47.819  INFO [a856cce8-85c6-4c6c-a51f-4d9c761d31f4] 22644 --- [nio-8080-exec-2] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 20:29:47.820 DEBUG [a856cce8-85c6-4c6c-a51f-4d9c761d31f4] 22644 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:29:47.831 DEBUG [e067b6fb-9daf-40d8-be35-a54725cea925] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:29:47.832 DEBUG [e067b6fb-9daf-40d8-be35-a54725cea925] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:29:47.832  INFO [e067b6fb-9daf-40d8-be35-a54725cea925] 22644 --- [nio-8080-exec-7] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 20:29:47.867  INFO [137a5c51-8655-4430-a29e-960b035ebc33] 22644 --- [nio-8080-exec-3] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 20:29:47.867 DEBUG [137a5c51-8655-4430-a29e-960b035ebc33] 22644 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:29:47.879 DEBUG [9c86e1f8-63a1-4844-8481-64a93446f434] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:29:47.880 DEBUG [9c86e1f8-63a1-4844-8481-64a93446f434] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:29:47.881  INFO [9c86e1f8-63a1-4844-8481-64a93446f434] 22644 --- [nio-8080-exec-4] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 20:29:47.911  INFO [e067b6fb-9daf-40d8-be35-a54725cea925] 22644 --- [nio-8080-exec-7] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 20:29:47.912 DEBUG [e067b6fb-9daf-40d8-be35-a54725cea925] 22644 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:29:47.981  INFO [9c86e1f8-63a1-4844-8481-64a93446f434] 22644 --- [nio-8080-exec-4] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 20:29:47.982 DEBUG [9c86e1f8-63a1-4844-8481-64a93446f434] 22644 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:29:54.036 DEBUG [2e43d0f0-ce6f-4591-a798-be7b718b8310] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:29:54.038 DEBUG [5a39c1d3-4fdd-4d6d-9a5c-8f7b60a6d2d4] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:29:54.164 DEBUG [2e43d0f0-ce6f-4591-a798-be7b718b8310] 22644 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:29:54.166 DEBUG [5a39c1d3-4fdd-4d6d-9a5c-8f7b60a6d2d4] 22644 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:29:54.166 DEBUG [2e43d0f0-ce6f-4591-a798-be7b718b8310] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:29:54.167  INFO [2e43d0f0-ce6f-4591-a798-be7b718b8310] 22644 --- [nio-8080-exec-8] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:29:54.167  INFO [2e43d0f0-ce6f-4591-a798-be7b718b8310] 22644 --- [nio-8080-exec-8] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:29:54.168 DEBUG [5a39c1d3-4fdd-4d6d-9a5c-8f7b60a6d2d4] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:29:54.169  INFO [5a39c1d3-4fdd-4d6d-9a5c-8f7b60a6d2d4] 22644 --- [nio-8080-exec-1] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:29:54.169  INFO [5a39c1d3-4fdd-4d6d-9a5c-8f7b60a6d2d4] 22644 --- [nio-8080-exec-1] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:29:54.580 DEBUG [c007e452-95b7-4279-9950-26b090abc3bd] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:29:54.699 DEBUG [c007e452-95b7-4279-9950-26b090abc3bd] 22644 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:29:54.701 DEBUG [c007e452-95b7-4279-9950-26b090abc3bd] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:29:54.702  INFO [c007e452-95b7-4279-9950-26b090abc3bd] 22644 --- [nio-8080-exec-5] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:29:54.702  INFO [c007e452-95b7-4279-9950-26b090abc3bd] 22644 --- [nio-8080-exec-5] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:30:00.944 DEBUG [7ad9125d-f627-4f56-94b8-40a0977b4764] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing POST /api/cart/add
2025-06-29 20:30:01.047 DEBUG [7ad9125d-f627-4f56-94b8-40a0977b4764] 22644 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:30:01.048 DEBUG [7ad9125d-f627-4f56-94b8-40a0977b4764] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured POST /api/cart/add
2025-06-29 20:30:01.160  INFO [7ad9125d-f627-4f56-94b8-40a0977b4764] 22644 --- [io-8080-exec-10] o.e.x.controllers.CartController         : User ****@****.*** request to add flight ID 16 to persistent cart
2025-06-29 20:30:01.164  INFO [7ad9125d-f627-4f56-94b8-40a0977b4764] 22644 --- [io-8080-exec-10] o.e.x.controllers.CartController         : AddToCart request: flightId=16, seatNumber=1C, seatType=SEAT_TYPE_UPFRONT, deferSeat=false, randomSeat=false
2025-06-29 20:30:01.172  INFO [7ad9125d-f627-4f56-94b8-40a0977b4764] 22644 --- [io-8080-exec-10] o.e.xlr8travel.services.CartServiceImpl  : Updated flight ID 16 in cart for user ****@****.***
2025-06-29 20:30:01.190  INFO [7ad9125d-f627-4f56-94b8-40a0977b4764] 22644 --- [io-8080-exec-10] o.e.x.controllers.CartController         : Flight ID 16 added/incremented in persistent cart for user ****@****.***.
2025-06-29 20:30:01.204 DEBUG [476ebba5-a80b-4f8f-b236-4a41f89a1e76] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:30:01.348 DEBUG [476ebba5-a80b-4f8f-b236-4a41f89a1e76] 22644 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:30:01.350 DEBUG [476ebba5-a80b-4f8f-b236-4a41f89a1e76] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:30:01.351  INFO [476ebba5-a80b-4f8f-b236-4a41f89a1e76] 22644 --- [nio-8080-exec-9] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:30:01.469  INFO [476ebba5-a80b-4f8f-b236-4a41f89a1e76] 22644 --- [nio-8080-exec-9] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 2 total quantity.
2025-06-29 20:30:02.192 DEBUG [d0b13db9-10ca-41ff-98b1-dac74433ba10] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:30:02.197 DEBUG [df3d6de2-9840-4280-9233-a7672c768614] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:30:02.323 DEBUG [d0b13db9-10ca-41ff-98b1-dac74433ba10] 22644 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:30:02.326 DEBUG [d0b13db9-10ca-41ff-98b1-dac74433ba10] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:30:02.326  INFO [d0b13db9-10ca-41ff-98b1-dac74433ba10] 22644 --- [nio-8080-exec-6] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:30:02.328 DEBUG [df3d6de2-9840-4280-9233-a7672c768614] 22644 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:30:02.330 DEBUG [df3d6de2-9840-4280-9233-a7672c768614] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:30:02.331  INFO [df3d6de2-9840-4280-9233-a7672c768614] 22644 --- [nio-8080-exec-2] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:30:02.447  INFO [d0b13db9-10ca-41ff-98b1-dac74433ba10] 22644 --- [nio-8080-exec-6] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 2 total quantity.
2025-06-29 20:30:02.449  INFO [df3d6de2-9840-4280-9233-a7672c768614] 22644 --- [nio-8080-exec-2] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 2 total quantity.
2025-06-29 20:30:16.756 DEBUG [93b19d3d-89bd-44a4-a235-a466c052db68] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /api/cart/add
2025-06-29 20:30:16.850 DEBUG [93b19d3d-89bd-44a4-a235-a466c052db68] 22644 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:30:16.852 DEBUG [93b19d3d-89bd-44a4-a235-a466c052db68] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /api/cart/add
2025-06-29 20:30:16.945  INFO [93b19d3d-89bd-44a4-a235-a466c052db68] 22644 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : User ****@****.*** request to add flight ID 16 to persistent cart
2025-06-29 20:30:16.948  INFO [93b19d3d-89bd-44a4-a235-a466c052db68] 22644 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : AddToCart request: flightId=16, seatNumber=null, seatType=null, deferSeat=false, randomSeat=false
2025-06-29 20:30:16.953  INFO [93b19d3d-89bd-44a4-a235-a466c052db68] 22644 --- [nio-8080-exec-3] o.e.xlr8travel.services.CartServiceImpl  : Updated flight ID 16 in cart for user ****@****.***
2025-06-29 20:30:16.971  INFO [93b19d3d-89bd-44a4-a235-a466c052db68] 22644 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : Flight ID 16 added/incremented in persistent cart for user ****@****.***.
2025-06-29 20:30:16.986 DEBUG [fe010f2c-ec76-4d5c-a53d-0488aa69f806] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:30:17.089 DEBUG [fe010f2c-ec76-4d5c-a53d-0488aa69f806] 22644 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:30:17.091 DEBUG [fe010f2c-ec76-4d5c-a53d-0488aa69f806] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:30:17.091  INFO [fe010f2c-ec76-4d5c-a53d-0488aa69f806] 22644 --- [nio-8080-exec-7] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:30:17.184  INFO [fe010f2c-ec76-4d5c-a53d-0488aa69f806] 22644 --- [nio-8080-exec-7] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 3 total quantity.
2025-06-29 20:30:19.254 DEBUG [e8f856d0-2c21-44c2-909d-6f04cab946fe] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing POST /api/cart/decrease/16
2025-06-29 20:30:19.362 DEBUG [e8f856d0-2c21-44c2-909d-6f04cab946fe] 22644 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:30:19.364 DEBUG [e8f856d0-2c21-44c2-909d-6f04cab946fe] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured POST /api/cart/decrease/16
2025-06-29 20:30:19.461  INFO [e8f856d0-2c21-44c2-909d-6f04cab946fe] 22644 --- [nio-8080-exec-4] o.e.x.controllers.CartController         : User ****@****.*** request to decrease quantity for flight ID 16
2025-06-29 20:30:19.470  INFO [e8f856d0-2c21-44c2-909d-6f04cab946fe] 22644 --- [nio-8080-exec-4] o.e.xlr8travel.services.CartServiceImpl  : Decreased quantity for flight ID 16. New quantity: 2
2025-06-29 20:30:19.486  INFO [e8f856d0-2c21-44c2-909d-6f04cab946fe] 22644 --- [nio-8080-exec-4] o.e.x.controllers.CartController         : Quantity decreased/item potentially removed for flight ID 16 in persistent cart for user ****@****.***.
2025-06-29 20:30:19.499 DEBUG [4bc095af-9187-4c38-8b41-0ed662921cd9] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:30:19.593 DEBUG [4bc095af-9187-4c38-8b41-0ed662921cd9] 22644 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:30:19.595 DEBUG [4bc095af-9187-4c38-8b41-0ed662921cd9] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:30:19.596  INFO [4bc095af-9187-4c38-8b41-0ed662921cd9] 22644 --- [nio-8080-exec-8] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:30:19.650 DEBUG [c5d7b94a-8fe7-4ec3-a47d-93526df55bb6] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/cart/decrease/16
2025-06-29 20:30:19.734  INFO [4bc095af-9187-4c38-8b41-0ed662921cd9] 22644 --- [nio-8080-exec-8] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 2 total quantity.
2025-06-29 20:30:19.790 DEBUG [c5d7b94a-8fe7-4ec3-a47d-93526df55bb6] 22644 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:30:19.793 DEBUG [c5d7b94a-8fe7-4ec3-a47d-93526df55bb6] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/cart/decrease/16
2025-06-29 20:30:19.896  INFO [c5d7b94a-8fe7-4ec3-a47d-93526df55bb6] 22644 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : User ****@****.*** request to decrease quantity for flight ID 16
2025-06-29 20:30:19.903  INFO [c5d7b94a-8fe7-4ec3-a47d-93526df55bb6] 22644 --- [nio-8080-exec-1] o.e.xlr8travel.services.CartServiceImpl  : Decreased quantity for flight ID 16. New quantity: 1
2025-06-29 20:30:19.919  INFO [c5d7b94a-8fe7-4ec3-a47d-93526df55bb6] 22644 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Quantity decreased/item potentially removed for flight ID 16 in persistent cart for user ****@****.***.
2025-06-29 20:30:19.930 DEBUG [3f273cd3-82fd-48d8-a322-e92cae7fa75b] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:30:20.020 DEBUG [3f273cd3-82fd-48d8-a322-e92cae7fa75b] 22644 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:30:20.022 DEBUG [3f273cd3-82fd-48d8-a322-e92cae7fa75b] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:30:20.022  INFO [3f273cd3-82fd-48d8-a322-e92cae7fa75b] 22644 --- [nio-8080-exec-5] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:30:20.115  INFO [3f273cd3-82fd-48d8-a322-e92cae7fa75b] 22644 --- [nio-8080-exec-5] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 20:30:53.455 DEBUG [89e68a66-2b54-465b-a492-0dc2effc2907] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/nearby?origin=OTP
2025-06-29 20:30:53.457 DEBUG [89e68a66-2b54-465b-a492-0dc2effc2907] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/nearby?origin=OTP
2025-06-29 20:30:53.458  INFO [89e68a66-2b54-465b-a492-0dc2effc2907] 22644 --- [io-8080-exec-10] o.e.x.controllers.FlightController       : Received request for nearby flights from origin: OTP, departureDate: null
2025-06-29 20:30:53.459  INFO [89e68a66-2b54-465b-a492-0dc2effc2907] 22644 --- [io-8080-exec-10] o.e.x.controllers.FlightController       : Using search date: 2025-06-29
2025-06-29 20:30:53.459  INFO [89e68a66-2b54-465b-a492-0dc2effc2907] 22644 --- [io-8080-exec-10] o.e.x.controllers.FlightController       : Cache key: OTP-2025-06-29
2025-06-29 20:30:53.459  INFO [89e68a66-2b54-465b-a492-0dc2effc2907] 22644 --- [io-8080-exec-10] o.e.x.controllers.FlightController       : Returning cached nearby flights for origin: OTP, found 6 flights
2025-06-29 20:30:53.460 DEBUG [89e68a66-2b54-465b-a492-0dc2effc2907] 22644 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:30:55.887 DEBUG [a515cf44-e555-4d35-b800-f4d5a67ec0ce] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-29 20:30:55.888 DEBUG [a515cf44-e555-4d35-b800-f4d5a67ec0ce] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-29 20:30:55.889  INFO [a515cf44-e555-4d35-b800-f4d5a67ec0ce] 22644 --- [nio-8080-exec-9] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris
2025-06-29 20:30:55.890  INFO [a515cf44-e555-4d35-b800-f4d5a67ec0ce] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-29 20:30:55.890  INFO [a515cf44-e555-4d35-b800-f4d5a67ec0ce] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-29 20:30:55.890 DEBUG [a515cf44-e555-4d35-b800-f4d5a67ec0ce] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-29).    For example, if today is 2025-06-29, a good departure date would be between 2025-07-06 and 2025-07-13, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris";
2025-06-29 20:30:55.891  INFO [a515cf44-e555-4d35-b800-f4d5a67ec0ce] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-29 20:30:55.892  INFO [a515cf44-e555-4d35-b800-f4d5a67ec0ce] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-29 20:30:55.892  INFO [a515cf44-e555-4d35-b800-f4d5a67ec0ce] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-29 20:30:55.892  INFO [a515cf44-e555-4d35-b800-f4d5a67ec0ce] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 20:30:55.892  INFO [a515cf44-e555-4d35-b800-f4d5a67ec0ce] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-29 20:30:55.894  INFO [a515cf44-e555-4d35-b800-f4d5a67ec0ce] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-29 20:30:55.894  INFO [a515cf44-e555-4d35-b800-f4d5a67ec0ce] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-29 20:30:55.895  INFO [a515cf44-e555-4d35-b800-f4d5a67ec0ce] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-29 20:30:55.896  INFO [a515cf44-e555-4d35-b800-f4d5a67ec0ce] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-29 20:30:57.806  INFO [a515cf44-e555-4d35-b800-f4d5a67ec0ce] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-29 20:30:57.806  INFO [a515cf44-e555-4d35-b800-f4d5a67ec0ce] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Response length: 195 characters
2025-06-29 20:30:57.807 DEBUG [a515cf44-e555-4d35-b800-f4d5a67ec0ce] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-06",
  "returnDate": "2025-07-08",
  "tripType": "roundTrip",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-29 20:30:57.808 DEBUG [a515cf44-e555-4d35-b800-f4d5a67ec0ce] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-29 20:30:57.808 DEBUG [a515cf44-e555-4d35-b800-f4d5a67ec0ce] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-29 20:30:57.808 DEBUG [a515cf44-e555-4d35-b800-f4d5a67ec0ce] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-29 20:30:57.809 DEBUG [a515cf44-e555-4d35-b800-f4d5a67ec0ce] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 20:30:57.809  INFO [a515cf44-e555-4d35-b800-f4d5a67ec0ce] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 20:30:57.809  INFO [a515cf44-e555-4d35-b800-f4d5a67ec0ce] 22644 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-06, returnDate=2025-07-08, tripType=roundTrip, adults=1, children=0, infants=0
2025-06-29 20:30:57.809  INFO [a515cf44-e555-4d35-b800-f4d5a67ec0ce] 22644 --- [nio-8080-exec-9] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-29 20:30:57.810 DEBUG [a515cf44-e555-4d35-b800-f4d5a67ec0ce] 22644 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:31:00.849 DEBUG [080857be-9e3f-4913-9e38-8eaf5c33ba03] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-29 20:31:00.850 DEBUG [080857be-9e3f-4913-9e38-8eaf5c33ba03] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-29 20:31:00.851  INFO [080857be-9e3f-4913-9e38-8eaf5c33ba03] 22644 --- [nio-8080-exec-6] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris one way
2025-06-29 20:31:00.851  INFO [080857be-9e3f-4913-9e38-8eaf5c33ba03] 22644 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-29 20:31:00.852  INFO [080857be-9e3f-4913-9e38-8eaf5c33ba03] 22644 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-29 20:31:00.852 DEBUG [080857be-9e3f-4913-9e38-8eaf5c33ba03] 22644 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-29).    For example, if today is 2025-06-29, a good departure date would be between 2025-07-06 and 2025-07-13, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris one way";
2025-06-29 20:31:00.854  INFO [080857be-9e3f-4913-9e38-8eaf5c33ba03] 22644 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-29 20:31:00.854  INFO [080857be-9e3f-4913-9e38-8eaf5c33ba03] 22644 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-29 20:31:00.855  INFO [080857be-9e3f-4913-9e38-8eaf5c33ba03] 22644 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-29 20:31:00.855  INFO [080857be-9e3f-4913-9e38-8eaf5c33ba03] 22644 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 20:31:00.855  INFO [080857be-9e3f-4913-9e38-8eaf5c33ba03] 22644 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-29 20:31:00.857  INFO [080857be-9e3f-4913-9e38-8eaf5c33ba03] 22644 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-29 20:31:00.858  INFO [080857be-9e3f-4913-9e38-8eaf5c33ba03] 22644 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-29 20:31:00.858  INFO [080857be-9e3f-4913-9e38-8eaf5c33ba03] 22644 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-29 20:31:00.858  INFO [080857be-9e3f-4913-9e38-8eaf5c33ba03] 22644 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-29 20:31:02.612  INFO [080857be-9e3f-4913-9e38-8eaf5c33ba03] 22644 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-29 20:31:02.612  INFO [080857be-9e3f-4913-9e38-8eaf5c33ba03] 22644 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Response length: 184 characters
2025-06-29 20:31:02.613 DEBUG [080857be-9e3f-4913-9e38-8eaf5c33ba03] 22644 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-06",
  "returnDate": null,
  "tripType": "oneWay",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-29 20:31:02.613 DEBUG [080857be-9e3f-4913-9e38-8eaf5c33ba03] 22644 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-29 20:31:02.613 DEBUG [080857be-9e3f-4913-9e38-8eaf5c33ba03] 22644 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-29 20:31:02.614 DEBUG [080857be-9e3f-4913-9e38-8eaf5c33ba03] 22644 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-29 20:31:02.614 DEBUG [080857be-9e3f-4913-9e38-8eaf5c33ba03] 22644 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 20:31:02.614  INFO [080857be-9e3f-4913-9e38-8eaf5c33ba03] 22644 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 20:31:02.614  INFO [080857be-9e3f-4913-9e38-8eaf5c33ba03] 22644 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-06, returnDate=null, tripType=oneWay, adults=1, children=0, infants=0
2025-06-29 20:31:02.614  INFO [080857be-9e3f-4913-9e38-8eaf5c33ba03] 22644 --- [nio-8080-exec-6] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-29 20:31:02.615 DEBUG [080857be-9e3f-4913-9e38-8eaf5c33ba03] 22644 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:31:04.728 DEBUG [e7abef0c-d58d-495a-b5e6-30ceea36cb3e] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 20:31:04.881 DEBUG [e7abef0c-d58d-495a-b5e6-30ceea36cb3e] 22644 --- [nio-8080-exec-2] o.s.s.core.session.SessionRegistryImpl   : Registering session 47C167A19534AD497555CFF858C00857, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}])
2025-06-29 20:31:04.882 DEBUG [e7abef0c-d58d-495a-b5e6-30ceea36cb3e] 22644 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@7d2e7f9a]
2025-06-29 20:31:04.883 DEBUG [e7abef0c-d58d-495a-b5e6-30ceea36cb3e] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me
2025-06-29 20:31:04.884  INFO [e7abef0c-d58d-495a-b5e6-30ceea36cb3e] 22644 --- [nio-8080-exec-2] o.e.x.controllers.UserController         : Request received for current user details: ****@****.***
2025-06-29 20:31:04.995  INFO [e7abef0c-d58d-495a-b5e6-30ceea36cb3e] 22644 --- [nio-8080-exec-2] o.e.x.controllers.UserController         : Returning details for user: ****@****.***
2025-06-29 20:31:05.091 DEBUG [54cb515c-d7c9-4e14-8549-2fe0c3f049dc] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 20:31:05.108 DEBUG [c1b33851-2f2d-4ddf-a6bb-1fefd4cd148d] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:31:05.109 DEBUG [c1b33851-2f2d-4ddf-a6bb-1fefd4cd148d] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:31:05.110  INFO [c1b33851-2f2d-4ddf-a6bb-1fefd4cd148d] 22644 --- [nio-8080-exec-7] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 20:31:05.111  INFO [c1b33851-2f2d-4ddf-a6bb-1fefd4cd148d] 22644 --- [nio-8080-exec-7] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 20:31:05.116 DEBUG [981f7f1c-df5b-490b-8f33-d6f8d92022eb] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:31:05.117 DEBUG [6f4ffb77-0af7-471b-8bf5-7319d98e9f2c] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:31:05.117 DEBUG [7a941bae-a9a7-44fb-a8d6-5f8407b948ef] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 20:31:05.119 DEBUG [6f4ffb77-0af7-471b-8bf5-7319d98e9f2c] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:31:05.121  INFO [6f4ffb77-0af7-471b-8bf5-7319d98e9f2c] 22644 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 20:31:05.123  INFO [6f4ffb77-0af7-471b-8bf5-7319d98e9f2c] 22644 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 20:31:05.228  INFO [c1b33851-2f2d-4ddf-a6bb-1fefd4cd148d] 22644 --- [nio-8080-exec-7] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 20:31:05.229 DEBUG [c1b33851-2f2d-4ddf-a6bb-1fefd4cd148d] 22644 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:31:05.243  INFO [6f4ffb77-0af7-471b-8bf5-7319d98e9f2c] 22644 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 20:31:05.244 DEBUG [6f4ffb77-0af7-471b-8bf5-7319d98e9f2c] 22644 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:31:05.304 DEBUG [403bd7db-f988-4d7f-a514-1194bfe6dbb2] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 20:31:05.307 DEBUG [403bd7db-f988-4d7f-a514-1194bfe6dbb2] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 20:31:05.308  INFO [403bd7db-f988-4d7f-a514-1194bfe6dbb2] 22644 --- [nio-8080-exec-5] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 20:31:05.321 DEBUG [f8dbb50b-a282-426a-94a3-3150d4e2eeee] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 20:31:05.324 DEBUG [f8dbb50b-a282-426a-94a3-3150d4e2eeee] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 20:31:05.325  INFO [f8dbb50b-a282-426a-94a3-3150d4e2eeee] 22644 --- [io-8080-exec-10] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 20:31:05.356 DEBUG [54cb515c-d7c9-4e14-8549-2fe0c3f049dc] 22644 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:31:05.360 DEBUG [54cb515c-d7c9-4e14-8549-2fe0c3f049dc] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 20:31:05.363 DEBUG [981f7f1c-df5b-490b-8f33-d6f8d92022eb] 22644 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:31:05.365 DEBUG [981f7f1c-df5b-490b-8f33-d6f8d92022eb] 22644 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:31:05.365  INFO [981f7f1c-df5b-490b-8f33-d6f8d92022eb] 22644 --- [nio-8080-exec-4] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:31:05.366 DEBUG [7a941bae-a9a7-44fb-a8d6-5f8407b948ef] 22644 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:31:05.369 DEBUG [7a941bae-a9a7-44fb-a8d6-5f8407b948ef] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 20:31:05.483  INFO [403bd7db-f988-4d7f-a514-1194bfe6dbb2] 22644 --- [nio-8080-exec-5] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 20:31:05.486 DEBUG [403bd7db-f988-4d7f-a514-1194bfe6dbb2] 22644 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:31:05.490  INFO [f8dbb50b-a282-426a-94a3-3150d4e2eeee] 22644 --- [io-8080-exec-10] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 20:31:05.493 DEBUG [f8dbb50b-a282-426a-94a3-3150d4e2eeee] 22644 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:31:05.520 DEBUG [d407de3d-46c0-458d-aef7-d65511d33cda] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:31:05.523 DEBUG [d407de3d-46c0-458d-aef7-d65511d33cda] 22644 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:31:05.526  INFO [d407de3d-46c0-458d-aef7-d65511d33cda] 22644 --- [nio-8080-exec-9] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 20:31:05.538 DEBUG [76ce9df4-94ab-4947-8668-44d14b3688c7] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:31:05.539 DEBUG [76ce9df4-94ab-4947-8668-44d14b3688c7] 22644 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:31:05.540  INFO [76ce9df4-94ab-4947-8668-44d14b3688c7] 22644 --- [nio-8080-exec-6] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 20:31:05.554  WARN [54cb515c-d7c9-4e14-8549-2fe0c3f049dc] 22644 --- [nio-8080-exec-3] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 20:31:05.555  WARN [54cb515c-d7c9-4e14-8549-2fe0c3f049dc] 22644 --- [nio-8080-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 20:31:05.565  WARN [7a941bae-a9a7-44fb-a8d6-5f8407b948ef] 22644 --- [nio-8080-exec-8] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 20:31:05.566  WARN [7a941bae-a9a7-44fb-a8d6-5f8407b948ef] 22644 --- [nio-8080-exec-8] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 20:31:05.580  INFO [981f7f1c-df5b-490b-8f33-d6f8d92022eb] 22644 --- [nio-8080-exec-4] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 20:31:05.623  INFO [d407de3d-46c0-458d-aef7-d65511d33cda] 22644 --- [nio-8080-exec-9] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 20:31:05.624 DEBUG [d407de3d-46c0-458d-aef7-d65511d33cda] 22644 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:31:05.630  INFO [76ce9df4-94ab-4947-8668-44d14b3688c7] 22644 --- [nio-8080-exec-6] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 20:31:05.631 DEBUG [76ce9df4-94ab-4947-8668-44d14b3688c7] 22644 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:31:11.066 DEBUG [9ecdc0cf-8992-4d24-b35e-c22e1bed6e34] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:31:11.069 DEBUG [73c29132-dfea-4844-9a7a-3f8e0b5693e9] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:31:11.189 DEBUG [73c29132-dfea-4844-9a7a-3f8e0b5693e9] 22644 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:31:11.191 DEBUG [9ecdc0cf-8992-4d24-b35e-c22e1bed6e34] 22644 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:31:11.192 DEBUG [73c29132-dfea-4844-9a7a-3f8e0b5693e9] 22644 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:31:11.193  INFO [73c29132-dfea-4844-9a7a-3f8e0b5693e9] 22644 --- [nio-8080-exec-7] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:31:11.193  INFO [73c29132-dfea-4844-9a7a-3f8e0b5693e9] 22644 --- [nio-8080-exec-7] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:31:11.194 DEBUG [9ecdc0cf-8992-4d24-b35e-c22e1bed6e34] 22644 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:31:11.194  INFO [9ecdc0cf-8992-4d24-b35e-c22e1bed6e34] 22644 --- [nio-8080-exec-2] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:31:11.194  INFO [9ecdc0cf-8992-4d24-b35e-c22e1bed6e34] 22644 --- [nio-8080-exec-2] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:31:11.576 DEBUG [6682d5fa-a82a-4674-9090-652c516f7a57] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:31:11.730 DEBUG [6682d5fa-a82a-4674-9090-652c516f7a57] 22644 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:31:11.733 DEBUG [6682d5fa-a82a-4674-9090-652c516f7a57] 22644 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:31:11.734  INFO [6682d5fa-a82a-4674-9090-652c516f7a57] 22644 --- [nio-8080-exec-1] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:31:11.734  INFO [6682d5fa-a82a-4674-9090-652c516f7a57] 22644 --- [nio-8080-exec-1] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:31:15.379 DEBUG [437753d2-3bb5-46f3-aa39-74ce9f4aa24e] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /api/cart/add
2025-06-29 20:31:15.500 DEBUG [437753d2-3bb5-46f3-aa39-74ce9f4aa24e] 22644 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:31:15.502 DEBUG [437753d2-3bb5-46f3-aa39-74ce9f4aa24e] 22644 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured POST /api/cart/add
2025-06-29 20:31:15.617  INFO [437753d2-3bb5-46f3-aa39-74ce9f4aa24e] 22644 --- [nio-8080-exec-5] o.e.x.controllers.CartController         : User ****@****.*** request to add flight ID 16 to persistent cart
2025-06-29 20:31:15.621  INFO [437753d2-3bb5-46f3-aa39-74ce9f4aa24e] 22644 --- [nio-8080-exec-5] o.e.x.controllers.CartController         : AddToCart request: flightId=16, seatNumber=1D, seatType=SEAT_TYPE_UPFRONT, deferSeat=false, randomSeat=false
2025-06-29 20:31:15.626  INFO [437753d2-3bb5-46f3-aa39-74ce9f4aa24e] 22644 --- [nio-8080-exec-5] o.e.xlr8travel.services.CartServiceImpl  : Updated flight ID 16 in cart for user ****@****.***
2025-06-29 20:31:15.644  INFO [437753d2-3bb5-46f3-aa39-74ce9f4aa24e] 22644 --- [nio-8080-exec-5] o.e.x.controllers.CartController         : Flight ID 16 added/incremented in persistent cart for user ****@****.***.
2025-06-29 20:31:15.659 DEBUG [6b227b6a-2e95-4884-bdbc-b8a5ffbcf705] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:31:15.775 DEBUG [6b227b6a-2e95-4884-bdbc-b8a5ffbcf705] 22644 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:31:15.777 DEBUG [6b227b6a-2e95-4884-bdbc-b8a5ffbcf705] 22644 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:31:15.777  INFO [6b227b6a-2e95-4884-bdbc-b8a5ffbcf705] 22644 --- [io-8080-exec-10] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:31:15.898  INFO [6b227b6a-2e95-4884-bdbc-b8a5ffbcf705] 22644 --- [io-8080-exec-10] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 2 total quantity.
2025-06-29 20:31:16.703 DEBUG [9854aa80-b4e7-4020-be57-b7836d61d91e] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:31:16.708 DEBUG [d618b400-ce47-4e49-bbaf-eeb71a936254] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:31:16.841 DEBUG [9854aa80-b4e7-4020-be57-b7836d61d91e] 22644 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:31:16.843 DEBUG [9854aa80-b4e7-4020-be57-b7836d61d91e] 22644 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:31:16.843  INFO [9854aa80-b4e7-4020-be57-b7836d61d91e] 22644 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:31:16.846 DEBUG [d618b400-ce47-4e49-bbaf-eeb71a936254] 22644 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T19:56:40.790993, lastLogin=null, addresses=[], tickets=[Country{id=7, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}, Country{id=8, name='TICKET_STATUS_CONFIRMED'}, Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=9, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=6, name='TICKET_STATUS_CONFIRMED'}, Country{id=10, name='TICKET_STATUS_CONFIRMED'}, Country{id=11, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8E82DC0AE9D5936E6BB1935147C2F8A8], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:31:16.848 DEBUG [d618b400-ce47-4e49-bbaf-eeb71a936254] 22644 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:31:16.848  INFO [d618b400-ce47-4e49-bbaf-eeb71a936254] 22644 --- [nio-8080-exec-8] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:31:16.956  INFO [9854aa80-b4e7-4020-be57-b7836d61d91e] 22644 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 2 total quantity.
2025-06-29 20:31:16.960  INFO [d618b400-ce47-4e49-bbaf-eeb71a936254] 22644 --- [nio-8080-exec-8] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 2 total quantity.
2025-06-29 20:33:11.478  INFO [NONE] 22644 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-29 20:33:11.525  INFO [NONE] 22644 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-06-29 20:33:11.542  INFO [NONE] 22644 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-06-29 20:33:34.161  INFO [NONE] 24036 --- [  restartedMain] o.e.xlr8travel.Xlr8travelApplication     : Starting Xlr8travelApplication using Java 21.0.5 with PID 24036 (C:\Users\razvi\Desktop\Licenta\backend\target\classes started by razvi in C:\Users\razvi\Desktop\Licenta\backend)
2025-06-29 20:33:34.167 DEBUG [NONE] 24036 --- [  restartedMain] o.e.xlr8travel.Xlr8travelApplication     : Running with Spring Boot v3.2.4, Spring v6.1.5
2025-06-29 20:33:34.168  INFO [NONE] 24036 --- [  restartedMain] o.e.xlr8travel.Xlr8travelApplication     : The following 1 profile is active: "local"
2025-06-29 20:33:34.208  INFO [NONE] 24036 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-29 20:33:34.208  INFO [NONE] 24036 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-29 20:33:35.272  INFO [NONE] 24036 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-29 20:33:35.383  INFO [NONE] 24036 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 103 ms. Found 9 JPA repository interfaces.
2025-06-29 20:33:38.989  INFO [NONE] 24036 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-29 20:33:39.008  INFO [NONE] 24036 --- [  restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-29 20:33:39.009  INFO [NONE] 24036 --- [  restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.19]
2025-06-29 20:33:39.150  INFO [NONE] 24036 --- [  restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-06-29 20:33:39.151  INFO [NONE] 24036 --- [  restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4942 ms
2025-06-29 20:33:39.512  INFO [NONE] 24036 --- [  restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-29 20:33:39.602  INFO [NONE] 24036 --- [  restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.4.Final
2025-06-29 20:33:39.653  INFO [NONE] 24036 --- [  restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-06-29 20:33:40.075  INFO [NONE] 24036 --- [  restartedMain] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-29 20:33:40.122  INFO [NONE] 24036 --- [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-06-29 20:33:40.436  INFO [NONE] 24036 --- [  restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@1edc3339
2025-06-29 20:33:40.440  INFO [NONE] 24036 --- [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-06-29 20:33:40.500  WARN [NONE] 24036 --- [  restartedMain] org.hibernate.orm.deprecation            : HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-29 20:33:42.080  INFO [NONE] 24036 --- [  restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-29 20:33:49.264  INFO [NONE] 24036 --- [  restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-29 20:33:49.569  INFO [NONE] 24036 --- [  restartedMain] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-29 20:33:50.046  WARN [NONE] 24036 --- [  restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Cannot deserialize session attribute [SPRING_SECURITY_CONTEXT] for session [EEDF11C543574F3E57DFB17DCAA69AC7]
2025-06-29 20:33:50.048 ERROR [NONE] 24036 --- [  restartedMain] o.a.catalina.session.StandardManager     : Exception loading sessions from persistent storage

java.io.StreamCorruptedException: invalid type code: 00
	at java.base/java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1793)
	at java.base/java.io.ObjectInputStream$FieldValues.<init>(ObjectInputStream.java:2618)
	at java.base/java.io.ObjectInputStream.defaultReadObject(ObjectInputStream.java:678)
	at java.base/java.lang.Throwable.readObject(Throwable.java:936)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1102)
	at java.base/java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2444)
	at java.base/java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2284)
	at java.base/java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1762)
	at java.base/java.io.ObjectInputStream.readObject(ObjectInputStream.java:540)
	at java.base/java.io.ObjectInputStream.readObject(ObjectInputStream.java:498)
	at org.apache.catalina.session.StandardSession.doReadObject(StandardSession.java:1348)
	at org.apache.catalina.session.StandardSession.readObjectData(StandardSession.java:985)
	at org.apache.catalina.session.StandardManager.doLoad(StandardManager.java:210)
	at org.apache.catalina.session.StandardManager.load(StandardManager.java:156)
	at org.apache.catalina.session.StandardManager.startInternal(StandardManager.java:346)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4893)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1332)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1322)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:866)
	at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:845)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1332)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1322)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:866)
	at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:240)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.StandardService.startInternal(StandardService.java:433)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:921)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.startup.Tomcat.start(Tomcat.java:437)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:126)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.<init>(TomcatWebServer.java:105)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getTomcatWebServer(TomcatServletWebServerFactory.java:499)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getWebServer(TomcatServletWebServerFactory.java:218)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.createWebServer(ServletWebServerApplicationContext.java:188)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:162)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:618)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at org.example.xlr8travel.Xlr8travelApplication.main(Xlr8travelApplication.java:10)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)

2025-06-29 20:33:50.057 DEBUG [NONE] 24036 --- [  restartedMain] o.e.x.security.JwtAuthenticationFilter   : Filter 'jwtAuthenticationFilter' configured for use
2025-06-29 20:33:50.059 DEBUG [NONE] 24036 --- [  restartedMain] o.e.x.security.RateLimitingFilter        : Filter 'rateLimitingFilter' configured for use
2025-06-29 20:33:50.265  INFO [NONE] 24036 --- [  restartedMain] o.e.x.config.LocalPropertiesConfig       : Loaded application-local.properties
2025-06-29 20:33:50.612  INFO [NONE] 24036 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : === GEMINI SERVICE CONFIGURATION ===
2025-06-29 20:33:50.613  INFO [NONE] 24036 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : Project ID: xlr8travel
2025-06-29 20:33:50.613  INFO [NONE] 24036 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : Location ID: us-east1
2025-06-29 20:33:50.613  INFO [NONE] 24036 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : Model: gemini-2.0-flash-001
2025-06-29 20:33:50.614  INFO [NONE] 24036 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : Credentials Path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 20:33:50.614  INFO [NONE] 24036 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : API Key: ***SET***
2025-06-29 20:33:50.614  INFO [NONE] 24036 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : ✅ Credentials file exists: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 20:33:50.615  INFO [NONE] 24036 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : ✅ Credentials file size: 2376 bytes
2025-06-29 20:33:50.615  INFO [NONE] 24036 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : ✅ GOOGLE_APPLICATION_CREDENTIALS env var is set: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 20:33:50.616  INFO [NONE] 24036 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : =====================================
2025-06-29 20:33:50.641  INFO [NONE] 24036 --- [  restartedMain] o.e.x.config.SensitiveDataConfig         : Validating sensitive data configuration for profile: local
2025-06-29 20:33:50.641  WARN [NONE] 24036 --- [  restartedMain] o.e.x.config.SensitiveDataConfig         : Environment variable SPRING_DATASOURCE_URL is not set
2025-06-29 20:33:50.641  WARN [NONE] 24036 --- [  restartedMain] o.e.x.config.SensitiveDataConfig         : Environment variable SPRING_DATASOURCE_USERNAME is not set
2025-06-29 20:33:50.642  WARN [NONE] 24036 --- [  restartedMain] o.e.x.config.SensitiveDataConfig         : Environment variable SPRING_DATASOURCE_PASSWORD is not set
2025-06-29 20:33:50.642  WARN [NONE] 24036 --- [  restartedMain] o.e.x.config.SensitiveDataConfig         : Environment variable STRIPE_SECRET_KEY is not set
2025-06-29 20:33:50.691  WARN [NONE] 24036 --- [  restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-29 20:33:50.818  INFO [NONE] 24036 --- [  restartedMain] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2025-06-29 20:33:51.104  INFO [NONE] 24036 --- [  restartedMain] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 4 endpoint(s) beneath base path '/actuator'
2025-06-29 20:33:51.206  INFO [NONE] 24036 --- [  restartedMain] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@631a50d9, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@27b2017a, org.springframework.security.web.context.SecurityContextHolderFilter@41239f00, org.springframework.security.web.header.HeaderWriterFilter@74c0bc5, org.springframework.web.filter.CorsFilter@17670be4, org.springframework.security.web.authentication.logout.LogoutFilter@55c6e7cf, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@31a756d3, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@a9b20bb, org.example.xlr8travel.security.JwtAuthenticationFilter@3d9c3a35, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@7d273971, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@1e622b0, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@64e68341, org.springframework.security.web.session.ConcurrentSessionFilter@2026f463, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@53041d86, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@9f30c0b, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2427dded, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@55cb9b9c, org.springframework.security.web.session.SessionManagementFilter@13bedc83, org.springframework.security.web.access.ExceptionTranslationFilter@1296f219, org.springframework.security.web.access.intercept.AuthorizationFilter@103ed97e]
2025-06-29 20:33:51.789  INFO [NONE] 24036 --- [  restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2025-06-29 20:33:51.874  INFO [NONE] 24036 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path ''
2025-06-29 20:33:51.886  INFO [NONE] 24036 --- [  restartedMain] o.e.xlr8travel.Xlr8travelApplication     : Started Xlr8travelApplication in 18.174 seconds (process running for 18.837)
2025-06-29 20:34:03.347  INFO [NONE] 24036 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-29 20:34:03.348  INFO [NONE] 24036 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-06-29 20:34:03.351  INFO [NONE] 24036 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2025-06-29 20:34:03.385 DEBUG [7d05e52d-87ef-4936-ae1f-ab6e59ab776b] 24036 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 20:34:03.551 ERROR [7d05e52d-87ef-4936-ae1f-ab6e59ab776b] 24036 --- [nio-8080-exec-1] o.e.x.security.JwtAuthenticationFilter   : Cannot set user authentication: User ****@****.*** not found
2025-06-29 20:34:03.554 DEBUG [7d05e52d-87ef-4936-ae1f-ab6e59ab776b] 24036 --- [nio-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 20:34:03.558  WARN [7d05e52d-87ef-4936-ae1f-ab6e59ab776b] 24036 --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/api/user/me' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2025-06-29 20:34:03.586 DEBUG [7d05e52d-87ef-4936-ae1f-ab6e59ab776b] 24036 --- [nio-8080-exec-1] o.s.s.w.s.HttpSessionRequestCache        : Saved request http://localhost:8080/api/user/me?continue to session
2025-06-29 20:34:03.586 DEBUG [7d05e52d-87ef-4936-ae1f-ab6e59ab776b] 24036 --- [nio-8080-exec-1] s.w.a.DelegatingAuthenticationEntryPoint : Trying to match using Ant [pattern='/api/**']
2025-06-29 20:34:03.587 DEBUG [7d05e52d-87ef-4936-ae1f-ab6e59ab776b] 24036 --- [nio-8080-exec-1] s.w.a.DelegatingAuthenticationEntryPoint : Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@6a597fd
2025-06-29 20:34:03.873 DEBUG [ec63e8fb-daf3-43e7-8bf9-d4496dd263b4] 24036 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/token/refresh
2025-06-29 20:34:03.875 DEBUG [ec63e8fb-daf3-43e7-8bf9-d4496dd263b4] 24036 --- [nio-8080-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 20:34:03.878 DEBUG [ec63e8fb-daf3-43e7-8bf9-d4496dd263b4] 24036 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /api/token/refresh
2025-06-29 20:34:03.970  INFO [ec63e8fb-daf3-43e7-8bf9-d4496dd263b4] 24036 --- [nio-8080-exec-2] o.e.x.controllers.TokenController        : Generated new access token for user: ****@****.***
2025-06-29 20:34:04.198 DEBUG [61fd2227-9fd7-4e1e-ba51-77bbbd3b523d] 24036 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 20:34:04.209 ERROR [61fd2227-9fd7-4e1e-ba51-77bbbd3b523d] 24036 --- [nio-8080-exec-3] o.e.x.security.JwtAuthenticationFilter   : Cannot set user authentication: User ****@****.*** not found
2025-06-29 20:34:04.210 DEBUG [61fd2227-9fd7-4e1e-ba51-77bbbd3b523d] 24036 --- [nio-8080-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 20:34:04.214 DEBUG [61fd2227-9fd7-4e1e-ba51-77bbbd3b523d] 24036 --- [nio-8080-exec-3] o.s.s.w.s.HttpSessionRequestCache        : Saved request http://localhost:8080/api/user/me?continue to session
2025-06-29 20:34:04.214 DEBUG [61fd2227-9fd7-4e1e-ba51-77bbbd3b523d] 24036 --- [nio-8080-exec-3] s.w.a.DelegatingAuthenticationEntryPoint : Trying to match using Ant [pattern='/api/**']
2025-06-29 20:34:04.214 DEBUG [61fd2227-9fd7-4e1e-ba51-77bbbd3b523d] 24036 --- [nio-8080-exec-3] s.w.a.DelegatingAuthenticationEntryPoint : Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@6a597fd
2025-06-29 20:34:04.415 DEBUG [48182c48-b756-4093-acbf-be1f995a5aa2] 24036 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/nearby?origin=OTP
2025-06-29 20:34:04.435 DEBUG [48182c48-b756-4093-acbf-be1f995a5aa2] 24036 --- [nio-8080-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 20:34:04.437 DEBUG [48182c48-b756-4093-acbf-be1f995a5aa2] 24036 --- [nio-8080-exec-4] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 8E82DC0AE9D5936E6BB1935147C2F8A8
2025-06-29 20:34:04.443 DEBUG [48182c48-b756-4093-acbf-be1f995a5aa2] 24036 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/nearby?origin=OTP
2025-06-29 20:34:04.454  INFO [48182c48-b756-4093-acbf-be1f995a5aa2] 24036 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Received request for nearby flights from origin: OTP, departureDate: null
2025-06-29 20:34:04.464  INFO [48182c48-b756-4093-acbf-be1f995a5aa2] 24036 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Using search date: 2025-06-29
2025-06-29 20:34:04.466  INFO [48182c48-b756-4093-acbf-be1f995a5aa2] 24036 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Cache key: OTP-2025-06-29
2025-06-29 20:34:04.466  INFO [48182c48-b756-4093-acbf-be1f995a5aa2] 24036 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : No valid cache found. Searching nearby flights from origin: OTP, after date: 2025-06-29
2025-06-29 20:34:04.467  INFO [48182c48-b756-4093-acbf-be1f995a5aa2] 24036 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Calling flightService.findByOriginAndDepartureDateAfter for origin: OTP, date: 2025-06-29
2025-06-29 20:34:04.552  INFO [48182c48-b756-4093-acbf-be1f995a5aa2] 24036 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Database query completed, found 16 flights
2025-06-29 20:34:04.552  INFO [48182c48-b756-4093-acbf-be1f995a5aa2] 24036 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Converting 16 Flight entities to FlightDTOs
2025-06-29 20:34:04.553  INFO [48182c48-b756-4093-acbf-be1f995a5aa2] 24036 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Converted to 16 FlightDTOs
2025-06-29 20:34:04.553  INFO [48182c48-b756-4093-acbf-be1f995a5aa2] 24036 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Grouping flights by destination country
2025-06-29 20:34:04.555  INFO [48182c48-b756-4093-acbf-be1f995a5aa2] 24036 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Grouped flights into 7 countries
2025-06-29 20:34:04.556  INFO [48182c48-b756-4093-acbf-be1f995a5aa2] 24036 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Selecting diverse flights - one from each country first
2025-06-29 20:34:04.557  INFO [48182c48-b756-4093-acbf-be1f995a5aa2] 24036 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Adding first flight from Greece (has 2 flights)
2025-06-29 20:34:04.558  INFO [48182c48-b756-4093-acbf-be1f995a5aa2] 24036 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Adding first flight from Netherlands (has 2 flights)
2025-06-29 20:34:04.558  INFO [48182c48-b756-4093-acbf-be1f995a5aa2] 24036 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Adding first flight from Italy (has 2 flights)
2025-06-29 20:34:04.558  INFO [48182c48-b756-4093-acbf-be1f995a5aa2] 24036 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Adding first flight from United Kingdom (has 2 flights)
2025-06-29 20:34:04.559  INFO [48182c48-b756-4093-acbf-be1f995a5aa2] 24036 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Adding first flight from France (has 2 flights)
2025-06-29 20:34:04.559  INFO [48182c48-b756-4093-acbf-be1f995a5aa2] 24036 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Adding first flight from Switzerland (has 2 flights)
2025-06-29 20:34:04.559  INFO [48182c48-b756-4093-acbf-be1f995a5aa2] 24036 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Reached 6 flights after first pass, stopping
2025-06-29 20:34:04.559  INFO [48182c48-b756-4093-acbf-be1f995a5aa2] 24036 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Caching 6 diverse flights with key: OTP-2025-06-29
2025-06-29 20:34:04.560  INFO [48182c48-b756-4093-acbf-be1f995a5aa2] 24036 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Returning 6 diverse nearby flights from: OTP
2025-06-29 20:34:08.203 DEBUG [94008010-33bb-4caa-92a8-e9dc6b0ff785] 24036 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /oauth2/authorization/google
2025-06-29 20:34:08.260 DEBUG [94008010-33bb-4caa-92a8-e9dc6b0ff785] 24036 --- [nio-8080-exec-5] o.s.s.web.DefaultRedirectStrategy        : Redirecting to https://accounts.google.com/o/oauth2/v2/auth?response_type=code&client_id=280181287068-i92p696f0ja6qv5lecrhi4dmn2hsrvie.apps.googleusercontent.com&scope=email%20profile&state=3aom4K7Z0cS0J4pedXy8wXOpzoadXQQLdTPfdhOSHoA%3D&redirect_uri=http://localhost:8080/login/oauth2/code/google
2025-06-29 20:34:14.486 DEBUG [ed90089d-d4b7-46d0-bb90-9c63bec09b3b] 24036 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /login/oauth2/code/google?state=3aom4K7Z0cS0J4pedXy8wXOpzoadXQQLdTPfdhOSHoA%3D&code=4%2F0AVMBsJj-rxUUbTkXaB1GKpW5kQh7Ltnak_-tujyqUK5A5dCLMSODh6Hi94EBI35W6sNfAA&scope=email+profile+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile+openid&authuser=1&prompt=none
2025-06-29 20:34:15.085  INFO [ed90089d-d4b7-46d0-bb90-9c63bec09b3b] 24036 --- [nio-8080-exec-6] o.e.x.security.CustomOAuth2UserService   : Creating new user from OAuth2 login: ****@****.***
2025-06-29 20:34:15.165  INFO [ed90089d-d4b7-46d0-bb90-9c63bec09b3b] 24036 --- [nio-8080-exec-6] o.e.x.security.CustomOAuth2UserService   : Successfully created new user from OAuth2 login: ****@****.***
2025-06-29 20:34:15.168 DEBUG [ed90089d-d4b7-46d0-bb90-9c63bec09b3b] 24036 --- [nio-8080-exec-6] .s.ChangeSessionIdAuthenticationStrategy : Changed session id from 3C888333D7A68E48999D1357477495B6
2025-06-29 20:34:15.168 DEBUG [ed90089d-d4b7-46d0-bb90-9c63bec09b3b] 24036 --- [nio-8080-exec-6] o.s.s.core.session.SessionRegistryImpl   : Registering session 45512D94797730CD89823B5A6950FF31, for principal Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}]
2025-06-29 20:34:15.169 DEBUG [ed90089d-d4b7-46d0-bb90-9c63bec09b3b] 24036 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=3C888333D7A68E48999D1357477495B6], Granted Authorities=[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@32db420c]
2025-06-29 20:34:15.170 DEBUG [ed90089d-d4b7-46d0-bb90-9c63bec09b3b] 24036 --- [nio-8080-exec-6] .s.o.c.w.OAuth2LoginAuthenticationFilter : Set SecurityContextHolder to OAuth2AuthenticationToken [Principal=Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=3C888333D7A68E48999D1357477495B6], Granted Authorities=[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]]
2025-06-29 20:34:15.172  INFO [ed90089d-d4b7-46d0-bb90-9c63bec09b3b] 24036 --- [nio-8080-exec-6] e.x.s.OAuth2AuthenticationSuccessHandler : Extracting username from authentication: 104658082982173093135
2025-06-29 20:34:15.172  INFO [ed90089d-d4b7-46d0-bb90-9c63bec09b3b] 24036 --- [nio-8080-exec-6] e.x.s.OAuth2AuthenticationSuccessHandler : Principal class: org.springframework.security.oauth2.core.user.DefaultOAuth2User
2025-06-29 20:34:15.173  INFO [ed90089d-d4b7-46d0-bb90-9c63bec09b3b] 24036 --- [nio-8080-exec-6] e.x.s.OAuth2AuthenticationSuccessHandler : Principal is DefaultOAuth2User
2025-06-29 20:34:15.173  INFO [ed90089d-d4b7-46d0-bb90-9c63bec09b3b] 24036 --- [nio-8080-exec-6] e.x.s.OAuth2AuthenticationSuccessHandler : OAuth2User attributes: {sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}
2025-06-29 20:34:15.173  INFO [ed90089d-d4b7-46d0-bb90-9c63bec09b3b] 24036 --- [nio-8080-exec-6] e.x.s.OAuth2AuthenticationSuccessHandler : Using email as username: ****@****.***
2025-06-29 20:34:15.174  INFO [ed90089d-d4b7-46d0-bb90-9c63bec09b3b] 24036 --- [nio-8080-exec-6] e.x.s.OAuth2AuthenticationSuccessHandler : Extracting username from authentication: 104658082982173093135
2025-06-29 20:34:15.174  INFO [ed90089d-d4b7-46d0-bb90-9c63bec09b3b] 24036 --- [nio-8080-exec-6] e.x.s.OAuth2AuthenticationSuccessHandler : Principal class: org.springframework.security.oauth2.core.user.DefaultOAuth2User
2025-06-29 20:34:15.174  INFO [ed90089d-d4b7-46d0-bb90-9c63bec09b3b] 24036 --- [nio-8080-exec-6] e.x.s.OAuth2AuthenticationSuccessHandler : Principal is DefaultOAuth2User
2025-06-29 20:34:15.174  INFO [ed90089d-d4b7-46d0-bb90-9c63bec09b3b] 24036 --- [nio-8080-exec-6] e.x.s.OAuth2AuthenticationSuccessHandler : OAuth2User attributes: {sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}
2025-06-29 20:34:15.175  INFO [ed90089d-d4b7-46d0-bb90-9c63bec09b3b] 24036 --- [nio-8080-exec-6] e.x.s.OAuth2AuthenticationSuccessHandler : Using email as username: ****@****.***
2025-06-29 20:34:15.175  INFO [ed90089d-d4b7-46d0-bb90-9c63bec09b3b] 24036 --- [nio-8080-exec-6] e.x.s.OAuth2AuthenticationSuccessHandler : OAuth tokens stored in session for user: ****@****.***
2025-06-29 20:34:15.175 DEBUG [ed90089d-d4b7-46d0-bb90-9c63bec09b3b] 24036 --- [nio-8080-exec-6] o.s.s.web.DefaultRedirectStrategy        : Redirecting to http://localhost:3000?oauth=success
2025-06-29 20:34:15.856 DEBUG [672d03a2-be1c-4f77-b4d2-b32c47b7646e] 24036 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/oauth/complete
2025-06-29 20:34:15.857 DEBUG [f05eab47-f6b2-43b6-93ce-9d3d4bb992eb] 24036 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/oauth/complete
2025-06-29 20:34:15.863 DEBUG [bd7afc3e-0233-4cc1-8067-40901cf57ecf] 24036 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing POST /api/oauth/complete
2025-06-29 20:34:15.864 DEBUG [9b78fd71-914b-4fdd-a8a7-6d7fbfe0d06e] 24036 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing POST /api/oauth/complete
2025-06-29 20:34:15.870 DEBUG [bd7afc3e-0233-4cc1-8067-40901cf57ecf] 24036 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured POST /api/oauth/complete
2025-06-29 20:34:15.870 DEBUG [9b78fd71-914b-4fdd-a8a7-6d7fbfe0d06e] 24036 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured POST /api/oauth/complete
2025-06-29 20:34:15.873  INFO [9b78fd71-914b-4fdd-a8a7-6d7fbfe0d06e] 24036 --- [io-8080-exec-10] o.e.x.controllers.OAuthController        : OAuth tokens retrieved and cleared from session for user: ****@****.***
2025-06-29 20:34:15.874  INFO [bd7afc3e-0233-4cc1-8067-40901cf57ecf] 24036 --- [nio-8080-exec-9] o.e.x.controllers.OAuthController        : OAuth tokens retrieved and cleared from session for user: ****@****.***
2025-06-29 20:34:15.877 DEBUG [bd7afc3e-0233-4cc1-8067-40901cf57ecf] 24036 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=3C888333D7A68E48999D1357477495B6], Granted Authorities=[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]]]
2025-06-29 20:34:15.877 DEBUG [9b78fd71-914b-4fdd-a8a7-6d7fbfe0d06e] 24036 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=3C888333D7A68E48999D1357477495B6], Granted Authorities=[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]]]
2025-06-29 20:34:15.979 DEBUG [7de2219a-63f0-4e11-b240-b4f1061f603c] 24036 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/nearby?origin=OTP
2025-06-29 20:34:15.981 DEBUG [7de2219a-63f0-4e11-b240-b4f1061f603c] 24036 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/nearby?origin=OTP
2025-06-29 20:34:15.982  INFO [7de2219a-63f0-4e11-b240-b4f1061f603c] 24036 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Received request for nearby flights from origin: OTP, departureDate: null
2025-06-29 20:34:15.983  INFO [7de2219a-63f0-4e11-b240-b4f1061f603c] 24036 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Using search date: 2025-06-29
2025-06-29 20:34:15.983  INFO [7de2219a-63f0-4e11-b240-b4f1061f603c] 24036 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Cache key: OTP-2025-06-29
2025-06-29 20:34:15.983  INFO [7de2219a-63f0-4e11-b240-b4f1061f603c] 24036 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Returning cached nearby flights for origin: OTP, found 6 flights
2025-06-29 20:34:15.985 DEBUG [7de2219a-63f0-4e11-b240-b4f1061f603c] 24036 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=3C888333D7A68E48999D1357477495B6], Granted Authorities=[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]]]
2025-06-29 20:34:16.243 DEBUG [bd617e0f-eae5-4ef9-8e31-3d1fd95a3701] 24036 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 20:34:16.275 DEBUG [bd617e0f-eae5-4ef9-8e31-3d1fd95a3701] 24036 --- [nio-8080-exec-2] o.s.s.core.session.SessionRegistryImpl   : Registering session BE76567DA59B37F500A9009A9DF1CC27, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[])
2025-06-29 20:34:16.276 DEBUG [bd617e0f-eae5-4ef9-8e31-3d1fd95a3701] 24036 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@5ab2f904]
2025-06-29 20:34:16.281 DEBUG [bd617e0f-eae5-4ef9-8e31-3d1fd95a3701] 24036 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me
2025-06-29 20:34:16.283  INFO [bd617e0f-eae5-4ef9-8e31-3d1fd95a3701] 24036 --- [nio-8080-exec-2] o.e.x.controllers.UserController         : Request received for current user details: ****@****.***
2025-06-29 20:34:16.293  INFO [bd617e0f-eae5-4ef9-8e31-3d1fd95a3701] 24036 --- [nio-8080-exec-2] o.e.x.controllers.UserController         : Returning details for user: ****@****.***
2025-06-29 20:34:16.335 DEBUG [845afa59-8800-40c4-b24f-66f4c9c7e7e8] 24036 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 20:34:16.335 DEBUG [2e6a2731-9f5b-4046-bd1b-ece6aeb3fbbc] 24036 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:34:16.364 DEBUG [845afa59-8800-40c4-b24f-66f4c9c7e7e8] 24036 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [104658082982173093135], Granted Authorities: [[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]], User Attributes: [{sub=104658082982173093135, name=Razvan Uleia, given_name=Razvan, family_name=Uleia, picture=https://lh3.googleusercontent.com/a/ACg8ocJi61HPFJ4MxC53TnL4U_AL4Tuu_gASX5yvf0NxGSQWc6-YeA=s96-c, email=****@****.***, email_verified=true}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=3C888333D7A68E48999D1357477495B6], Granted Authorities=[OAUTH2_USER, SCOPE_https://www.googleapis.com/auth/userinfo.email, SCOPE_https://www.googleapis.com/auth/userinfo.profile, SCOPE_openid]]]
2025-06-29 20:34:16.369 DEBUG [2e6a2731-9f5b-4046-bd1b-ece6aeb3fbbc] 24036 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:34:16.371 DEBUG [845afa59-8800-40c4-b24f-66f4c9c7e7e8] 24036 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 20:34:16.372 DEBUG [2e6a2731-9f5b-4046-bd1b-ece6aeb3fbbc] 24036 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:34:16.374  INFO [2e6a2731-9f5b-4046-bd1b-ece6aeb3fbbc] 24036 --- [nio-8080-exec-4] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:34:16.401  WARN [845afa59-8800-40c4-b24f-66f4c9c7e7e8] 24036 --- [nio-8080-exec-3] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 20:34:16.408  INFO [2e6a2731-9f5b-4046-bd1b-ece6aeb3fbbc] 24036 --- [nio-8080-exec-4] o.e.xlr8travel.services.CartServiceImpl  : No existing cart found for user ****@****.*** with ID 4, creating a new one.
2025-06-29 20:34:16.412  WARN [845afa59-8800-40c4-b24f-66f4c9c7e7e8] 24036 --- [nio-8080-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 20:34:16.436  INFO [2e6a2731-9f5b-4046-bd1b-ece6aeb3fbbc] 24036 --- [nio-8080-exec-4] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 20:34:16.620 DEBUG [e0840015-a9bf-4021-87e0-62bddd70fd0f] 24036 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 20:34:16.632 DEBUG [e0840015-a9bf-4021-87e0-62bddd70fd0f] 24036 --- [nio-8080-exec-5] o.s.s.core.session.SessionRegistryImpl   : Registering session D40677340B14346678B4BFFD73A38BAE, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[])
2025-06-29 20:34:16.632 DEBUG [e0840015-a9bf-4021-87e0-62bddd70fd0f] 24036 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@4bddcf68]
2025-06-29 20:34:16.635 DEBUG [e0840015-a9bf-4021-87e0-62bddd70fd0f] 24036 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me
2025-06-29 20:34:16.636  INFO [e0840015-a9bf-4021-87e0-62bddd70fd0f] 24036 --- [nio-8080-exec-5] o.e.x.controllers.UserController         : Request received for current user details: ****@****.***
2025-06-29 20:34:16.645  INFO [e0840015-a9bf-4021-87e0-62bddd70fd0f] 24036 --- [nio-8080-exec-5] o.e.x.controllers.UserController         : Returning details for user: ****@****.***
2025-06-29 20:34:19.534 DEBUG [2ac365a0-e776-48e6-ac49-9890ec1dcd82] 24036 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-29 20:34:19.535 DEBUG [2ac365a0-e776-48e6-ac49-9890ec1dcd82] 24036 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-29 20:34:19.539  INFO [2ac365a0-e776-48e6-ac49-9890ec1dcd82] 24036 --- [nio-8080-exec-6] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris
2025-06-29 20:34:19.540  INFO [2ac365a0-e776-48e6-ac49-9890ec1dcd82] 24036 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-29 20:34:19.540  INFO [2ac365a0-e776-48e6-ac49-9890ec1dcd82] 24036 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-29 20:34:19.543 DEBUG [2ac365a0-e776-48e6-ac49-9890ec1dcd82] 24036 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-29).    For example, if today is 2025-06-29, a good departure date would be between 2025-07-06 and 2025-07-13, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris";
2025-06-29 20:34:19.546  INFO [2ac365a0-e776-48e6-ac49-9890ec1dcd82] 24036 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-29 20:34:19.546  INFO [2ac365a0-e776-48e6-ac49-9890ec1dcd82] 24036 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-29 20:34:19.546  INFO [2ac365a0-e776-48e6-ac49-9890ec1dcd82] 24036 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-29 20:34:19.546  INFO [2ac365a0-e776-48e6-ac49-9890ec1dcd82] 24036 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 20:34:19.547  INFO [2ac365a0-e776-48e6-ac49-9890ec1dcd82] 24036 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-29 20:34:19.621  INFO [2ac365a0-e776-48e6-ac49-9890ec1dcd82] 24036 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-29 20:34:19.624  INFO [2ac365a0-e776-48e6-ac49-9890ec1dcd82] 24036 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-29 20:34:19.627  INFO [2ac365a0-e776-48e6-ac49-9890ec1dcd82] 24036 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-29 20:34:19.658  INFO [2ac365a0-e776-48e6-ac49-9890ec1dcd82] 24036 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-29 20:34:22.582  INFO [2ac365a0-e776-48e6-ac49-9890ec1dcd82] 24036 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-29 20:34:22.588  INFO [2ac365a0-e776-48e6-ac49-9890ec1dcd82] 24036 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Response length: 195 characters
2025-06-29 20:34:22.596 DEBUG [2ac365a0-e776-48e6-ac49-9890ec1dcd82] 24036 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-06",
  "returnDate": "2025-07-08",
  "tripType": "roundTrip",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-29 20:34:22.670 DEBUG [2ac365a0-e776-48e6-ac49-9890ec1dcd82] 24036 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-29 20:34:22.706 DEBUG [2ac365a0-e776-48e6-ac49-9890ec1dcd82] 24036 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-29 20:34:22.748 DEBUG [2ac365a0-e776-48e6-ac49-9890ec1dcd82] 24036 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-29 20:34:22.758 DEBUG [2ac365a0-e776-48e6-ac49-9890ec1dcd82] 24036 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 20:34:22.766  INFO [2ac365a0-e776-48e6-ac49-9890ec1dcd82] 24036 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 20:34:22.769  INFO [2ac365a0-e776-48e6-ac49-9890ec1dcd82] 24036 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-06, returnDate=2025-07-08, tripType=roundTrip, adults=1, children=0, infants=0
2025-06-29 20:34:22.770  INFO [2ac365a0-e776-48e6-ac49-9890ec1dcd82] 24036 --- [nio-8080-exec-6] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-29 20:34:22.810 DEBUG [2ac365a0-e776-48e6-ac49-9890ec1dcd82] 24036 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:34:24.863 DEBUG [9e528bf8-1487-4c48-8f09-91d71f0f205b] 24036 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-29 20:34:24.866 DEBUG [9e528bf8-1487-4c48-8f09-91d71f0f205b] 24036 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-29 20:34:24.868  INFO [9e528bf8-1487-4c48-8f09-91d71f0f205b] 24036 --- [nio-8080-exec-7] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris one way
2025-06-29 20:34:24.868  INFO [9e528bf8-1487-4c48-8f09-91d71f0f205b] 24036 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-29 20:34:24.869  INFO [9e528bf8-1487-4c48-8f09-91d71f0f205b] 24036 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-29 20:34:24.869 DEBUG [9e528bf8-1487-4c48-8f09-91d71f0f205b] 24036 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-29).    For example, if today is 2025-06-29, a good departure date would be between 2025-07-06 and 2025-07-13, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris one way";
2025-06-29 20:34:24.871  INFO [9e528bf8-1487-4c48-8f09-91d71f0f205b] 24036 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-29 20:34:24.871  INFO [9e528bf8-1487-4c48-8f09-91d71f0f205b] 24036 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-29 20:34:24.871  INFO [9e528bf8-1487-4c48-8f09-91d71f0f205b] 24036 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-29 20:34:24.871  INFO [9e528bf8-1487-4c48-8f09-91d71f0f205b] 24036 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 20:34:24.872  INFO [9e528bf8-1487-4c48-8f09-91d71f0f205b] 24036 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-29 20:34:24.874  INFO [9e528bf8-1487-4c48-8f09-91d71f0f205b] 24036 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-29 20:34:24.874  INFO [9e528bf8-1487-4c48-8f09-91d71f0f205b] 24036 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-29 20:34:24.874  INFO [9e528bf8-1487-4c48-8f09-91d71f0f205b] 24036 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-29 20:34:24.875  INFO [9e528bf8-1487-4c48-8f09-91d71f0f205b] 24036 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-29 20:34:26.636  INFO [9e528bf8-1487-4c48-8f09-91d71f0f205b] 24036 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-29 20:34:26.636  INFO [9e528bf8-1487-4c48-8f09-91d71f0f205b] 24036 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Response length: 184 characters
2025-06-29 20:34:26.636 DEBUG [9e528bf8-1487-4c48-8f09-91d71f0f205b] 24036 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-06",
  "returnDate": null,
  "tripType": "oneWay",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-29 20:34:26.637 DEBUG [9e528bf8-1487-4c48-8f09-91d71f0f205b] 24036 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-29 20:34:26.637 DEBUG [9e528bf8-1487-4c48-8f09-91d71f0f205b] 24036 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-29 20:34:26.637 DEBUG [9e528bf8-1487-4c48-8f09-91d71f0f205b] 24036 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-29 20:34:26.638 DEBUG [9e528bf8-1487-4c48-8f09-91d71f0f205b] 24036 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 20:34:26.638  INFO [9e528bf8-1487-4c48-8f09-91d71f0f205b] 24036 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 20:34:26.638  INFO [9e528bf8-1487-4c48-8f09-91d71f0f205b] 24036 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-06, returnDate=null, tripType=oneWay, adults=1, children=0, infants=0
2025-06-29 20:34:26.638  INFO [9e528bf8-1487-4c48-8f09-91d71f0f205b] 24036 --- [nio-8080-exec-7] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-29 20:34:26.640 DEBUG [9e528bf8-1487-4c48-8f09-91d71f0f205b] 24036 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:34:28.377 DEBUG [35d9ba62-84e3-42fb-88bc-823750898870] 24036 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 20:34:28.393 DEBUG [35d9ba62-84e3-42fb-88bc-823750898870] 24036 --- [nio-8080-exec-8] o.s.s.core.session.SessionRegistryImpl   : Registering session C95251450E8BF07063C8451C7D2D773B, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[])
2025-06-29 20:34:28.394 DEBUG [35d9ba62-84e3-42fb-88bc-823750898870] 24036 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@349376b8]
2025-06-29 20:34:28.397 DEBUG [35d9ba62-84e3-42fb-88bc-823750898870] 24036 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me
2025-06-29 20:34:28.397  INFO [35d9ba62-84e3-42fb-88bc-823750898870] 24036 --- [nio-8080-exec-8] o.e.x.controllers.UserController         : Request received for current user details: ****@****.***
2025-06-29 20:34:28.404  INFO [35d9ba62-84e3-42fb-88bc-823750898870] 24036 --- [nio-8080-exec-8] o.e.x.controllers.UserController         : Returning details for user: ****@****.***
2025-06-29 20:34:28.467 DEBUG [e0e84ab2-ad72-40b9-9d09-2776e9a30e4b] 24036 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 20:34:28.467 DEBUG [371132ea-9346-4bf6-9373-fd67ffc9f020] 24036 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:34:28.469 DEBUG [7d03435d-e034-4beb-82c4-8c1cb4294b3b] 24036 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:34:28.470 DEBUG [371132ea-9346-4bf6-9373-fd67ffc9f020] 24036 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:34:28.478  INFO [371132ea-9346-4bf6-9373-fd67ffc9f020] 24036 --- [io-8080-exec-10] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 20:34:28.478  INFO [371132ea-9346-4bf6-9373-fd67ffc9f020] 24036 --- [io-8080-exec-10] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 20:34:28.498 DEBUG [e0e84ab2-ad72-40b9-9d09-2776e9a30e4b] 24036 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:34:28.500 DEBUG [7d03435d-e034-4beb-82c4-8c1cb4294b3b] 24036 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:34:28.502 DEBUG [7d03435d-e034-4beb-82c4-8c1cb4294b3b] 24036 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:34:28.502 DEBUG [e0e84ab2-ad72-40b9-9d09-2776e9a30e4b] 24036 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 20:34:28.503  INFO [7d03435d-e034-4beb-82c4-8c1cb4294b3b] 24036 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:34:28.509  WARN [e0e84ab2-ad72-40b9-9d09-2776e9a30e4b] 24036 --- [nio-8080-exec-9] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 20:34:28.510  WARN [e0e84ab2-ad72-40b9-9d09-2776e9a30e4b] 24036 --- [nio-8080-exec-9] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 20:34:28.519 DEBUG [e312e66d-c8a3-43f2-8b88-05eac213b914] 24036 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 20:34:28.519  INFO [7d03435d-e034-4beb-82c4-8c1cb4294b3b] 24036 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 20:34:28.530 DEBUG [e312e66d-c8a3-43f2-8b88-05eac213b914] 24036 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:34:28.534 DEBUG [e312e66d-c8a3-43f2-8b88-05eac213b914] 24036 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 20:34:28.541  WARN [e312e66d-c8a3-43f2-8b88-05eac213b914] 24036 --- [nio-8080-exec-2] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 20:34:28.542  WARN [e312e66d-c8a3-43f2-8b88-05eac213b914] 24036 --- [nio-8080-exec-2] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 20:34:28.568  INFO [371132ea-9346-4bf6-9373-fd67ffc9f020] 24036 --- [io-8080-exec-10] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 20:34:28.570 DEBUG [371132ea-9346-4bf6-9373-fd67ffc9f020] 24036 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:34:28.578 DEBUG [44866ea2-1116-41c8-9091-32c823788a61] 24036 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:34:28.580 DEBUG [44866ea2-1116-41c8-9091-32c823788a61] 24036 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:34:28.581  INFO [44866ea2-1116-41c8-9091-32c823788a61] 24036 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 20:34:28.581  INFO [44866ea2-1116-41c8-9091-32c823788a61] 24036 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 20:34:28.614 DEBUG [c8994869-a23d-47ab-91e5-2c5cc95ddfb1] 24036 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 20:34:28.618 DEBUG [c8994869-a23d-47ab-91e5-2c5cc95ddfb1] 24036 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 20:34:28.619  INFO [c8994869-a23d-47ab-91e5-2c5cc95ddfb1] 24036 --- [nio-8080-exec-4] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 20:34:28.645  INFO [44866ea2-1116-41c8-9091-32c823788a61] 24036 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 20:34:28.646 DEBUG [44866ea2-1116-41c8-9091-32c823788a61] 24036 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:34:28.782  INFO [c8994869-a23d-47ab-91e5-2c5cc95ddfb1] 24036 --- [nio-8080-exec-4] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 20:34:28.788 DEBUG [c8994869-a23d-47ab-91e5-2c5cc95ddfb1] 24036 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:34:28.795 DEBUG [bb1661cb-d394-4395-80f6-a3a2d204916e] 24036 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 20:34:28.797 DEBUG [bb1661cb-d394-4395-80f6-a3a2d204916e] 24036 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 20:34:28.797 DEBUG [d53537f5-619f-4441-9d68-e03d8aaf86c8] 24036 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:34:28.798  INFO [bb1661cb-d394-4395-80f6-a3a2d204916e] 24036 --- [nio-8080-exec-5] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 20:34:28.799 DEBUG [d53537f5-619f-4441-9d68-e03d8aaf86c8] 24036 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:34:28.800  INFO [d53537f5-619f-4441-9d68-e03d8aaf86c8] 24036 --- [nio-8080-exec-6] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 20:34:28.836  INFO [bb1661cb-d394-4395-80f6-a3a2d204916e] 24036 --- [nio-8080-exec-5] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 20:34:28.837 DEBUG [bb1661cb-d394-4395-80f6-a3a2d204916e] 24036 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:34:29.000  INFO [d53537f5-619f-4441-9d68-e03d8aaf86c8] 24036 --- [nio-8080-exec-6] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 20:34:29.003 DEBUG [d53537f5-619f-4441-9d68-e03d8aaf86c8] 24036 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:34:29.013 DEBUG [bb88a7ea-a6e3-420d-bf63-0fa59220bc6a] 24036 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:34:29.016 DEBUG [bb88a7ea-a6e3-420d-bf63-0fa59220bc6a] 24036 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:34:29.018  INFO [bb88a7ea-a6e3-420d-bf63-0fa59220bc6a] 24036 --- [nio-8080-exec-7] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 20:34:29.065  INFO [bb88a7ea-a6e3-420d-bf63-0fa59220bc6a] 24036 --- [nio-8080-exec-7] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 20:34:29.067 DEBUG [bb88a7ea-a6e3-420d-bf63-0fa59220bc6a] 24036 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:34:34.109 DEBUG [1aece7c4-d3be-4665-a302-f54d39a92a5c] 24036 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:34:34.125 DEBUG [1aece7c4-d3be-4665-a302-f54d39a92a5c] 24036 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:34:34.131 DEBUG [1aece7c4-d3be-4665-a302-f54d39a92a5c] 24036 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:34:34.132  INFO [1aece7c4-d3be-4665-a302-f54d39a92a5c] 24036 --- [nio-8080-exec-8] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:34:34.133  INFO [1aece7c4-d3be-4665-a302-f54d39a92a5c] 24036 --- [nio-8080-exec-8] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:34:34.145 DEBUG [473bedb9-9177-4b7d-a0fa-d2f68e38de11] 24036 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:34:34.155 DEBUG [473bedb9-9177-4b7d-a0fa-d2f68e38de11] 24036 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:34:34.158 DEBUG [473bedb9-9177-4b7d-a0fa-d2f68e38de11] 24036 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:34:34.159  INFO [473bedb9-9177-4b7d-a0fa-d2f68e38de11] 24036 --- [nio-8080-exec-9] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:34:34.159  INFO [473bedb9-9177-4b7d-a0fa-d2f68e38de11] 24036 --- [nio-8080-exec-9] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:34:34.306 DEBUG [b9dddb65-b901-49a7-8cfb-74c546156145] 24036 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:34:34.317 DEBUG [b9dddb65-b901-49a7-8cfb-74c546156145] 24036 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:34:34.319 DEBUG [b9dddb65-b901-49a7-8cfb-74c546156145] 24036 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:34:34.320  INFO [b9dddb65-b901-49a7-8cfb-74c546156145] 24036 --- [nio-8080-exec-1] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:34:34.320  INFO [b9dddb65-b901-49a7-8cfb-74c546156145] 24036 --- [nio-8080-exec-1] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:34:45.552 DEBUG [e41d9505-e0f8-452d-b0a4-db118ac9b7ff] 24036 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/cart/add
2025-06-29 20:34:45.564 DEBUG [e41d9505-e0f8-452d-b0a4-db118ac9b7ff] 24036 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:34:45.566 DEBUG [e41d9505-e0f8-452d-b0a4-db118ac9b7ff] 24036 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /api/cart/add
2025-06-29 20:34:45.615  INFO [e41d9505-e0f8-452d-b0a4-db118ac9b7ff] 24036 --- [nio-8080-exec-2] o.e.x.controllers.CartController         : User ****@****.*** request to add flight ID 16 to persistent cart
2025-06-29 20:34:45.673  INFO [e41d9505-e0f8-452d-b0a4-db118ac9b7ff] 24036 --- [nio-8080-exec-2] o.e.x.controllers.CartController         : AddToCart request: flightId=16, seatNumber=4E, seatType=SEAT_TYPE_UPFRONT, deferSeat=false, randomSeat=false
2025-06-29 20:34:45.688  INFO [e41d9505-e0f8-452d-b0a4-db118ac9b7ff] 24036 --- [nio-8080-exec-2] o.e.xlr8travel.services.CartServiceImpl  : Added new flight ID 16 to cart for user ****@****.***
2025-06-29 20:34:45.721  INFO [e41d9505-e0f8-452d-b0a4-db118ac9b7ff] 24036 --- [nio-8080-exec-2] o.e.x.controllers.CartController         : Flight ID 16 added/incremented in persistent cart for user ****@****.***.
2025-06-29 20:34:45.738 DEBUG [e0546e98-d2bd-43c0-a3c7-46f4809d7c5c] 24036 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:34:45.755 DEBUG [e0546e98-d2bd-43c0-a3c7-46f4809d7c5c] 24036 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:34:45.758 DEBUG [e0546e98-d2bd-43c0-a3c7-46f4809d7c5c] 24036 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:34:45.759  INFO [e0546e98-d2bd-43c0-a3c7-46f4809d7c5c] 24036 --- [io-8080-exec-10] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:34:45.831  INFO [e0546e98-d2bd-43c0-a3c7-46f4809d7c5c] 24036 --- [io-8080-exec-10] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 20:34:46.212 DEBUG [dbdd9d6e-0347-4e4b-8931-29662e05cb45] 24036 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:34:46.224 DEBUG [dbdd9d6e-0347-4e4b-8931-29662e05cb45] 24036 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:34:46.226 DEBUG [dbdd9d6e-0347-4e4b-8931-29662e05cb45] 24036 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:34:46.226  INFO [dbdd9d6e-0347-4e4b-8931-29662e05cb45] 24036 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:34:46.275  INFO [dbdd9d6e-0347-4e4b-8931-29662e05cb45] 24036 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 20:34:46.284 DEBUG [9987067f-2458-4fd9-a4a1-80afc654bd0d] 24036 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:34:46.301 DEBUG [9987067f-2458-4fd9-a4a1-80afc654bd0d] 24036 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:34:46.302 DEBUG [9987067f-2458-4fd9-a4a1-80afc654bd0d] 24036 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:34:46.303  INFO [9987067f-2458-4fd9-a4a1-80afc654bd0d] 24036 --- [nio-8080-exec-4] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:34:46.353  INFO [9987067f-2458-4fd9-a4a1-80afc654bd0d] 24036 --- [nio-8080-exec-4] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 20:34:51.121 DEBUG [d5d3b2dc-bf96-46a7-8678-25466637b0a0] 24036 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:34:51.144 DEBUG [d5d3b2dc-bf96-46a7-8678-25466637b0a0] 24036 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:34:51.146 DEBUG [d5d3b2dc-bf96-46a7-8678-25466637b0a0] 24036 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:34:51.147  INFO [d5d3b2dc-bf96-46a7-8678-25466637b0a0] 24036 --- [nio-8080-exec-5] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:34:51.198  INFO [d5d3b2dc-bf96-46a7-8678-25466637b0a0] 24036 --- [nio-8080-exec-5] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 20:34:51.206 DEBUG [6fa053c4-d404-4f81-8e25-96c6ba6fbf9f] 24036 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:34:51.215 DEBUG [6fa053c4-d404-4f81-8e25-96c6ba6fbf9f] 24036 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:34:51.217 DEBUG [6fa053c4-d404-4f81-8e25-96c6ba6fbf9f] 24036 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:34:51.217  INFO [6fa053c4-d404-4f81-8e25-96c6ba6fbf9f] 24036 --- [nio-8080-exec-6] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:34:51.290  INFO [6fa053c4-d404-4f81-8e25-96c6ba6fbf9f] 24036 --- [nio-8080-exec-6] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 20:35:00.625 DEBUG [8805a633-2a1b-404d-8f74-198000b51011] 24036 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/checkout/create-payment-intent
2025-06-29 20:35:00.626 DEBUG [8805a633-2a1b-404d-8f74-198000b51011] 24036 --- [nio-8080-exec-7] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 20:35:00.627 DEBUG [8805a633-2a1b-404d-8f74-198000b51011] 24036 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/checkout/create-payment-intent
2025-06-29 20:35:00.645  INFO [8805a633-2a1b-404d-8f74-198000b51011] 24036 --- [nio-8080-exec-7] o.e.x.controllers.PaymentController      : Creating payment intent for amount: 23995 ron
2025-06-29 20:35:01.333  INFO [8805a633-2a1b-404d-8f74-198000b51011] 24036 --- [nio-8080-exec-7] o.e.x.controllers.PaymentController      : Payment intent created successfully: pi_3RfP85Gf8s1WZJnq1KVVUjAZ
2025-06-29 20:35:02.505 DEBUG [687a19f3-f8d2-4f30-9415-2141dc879bfb] 24036 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /api/checkout/confirm
2025-06-29 20:35:02.515 DEBUG [687a19f3-f8d2-4f30-9415-2141dc879bfb] 24036 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:35:02.516 DEBUG [687a19f3-f8d2-4f30-9415-2141dc879bfb] 24036 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured POST /api/checkout/confirm
2025-06-29 20:35:02.518  INFO [687a19f3-f8d2-4f30-9415-2141dc879bfb] 24036 --- [nio-8080-exec-8] o.e.x.controllers.CheckoutController     : Received purchase confirmation request.
2025-06-29 20:35:02.524  INFO [687a19f3-f8d2-4f30-9415-2141dc879bfb] 24036 --- [nio-8080-exec-8] o.e.x.controllers.CheckoutController     : Processing purchase for user: ****@****.***
2025-06-29 20:35:02.561  INFO [687a19f3-f8d2-4f30-9415-2141dc879bfb] 24036 --- [nio-8080-exec-8] o.e.x.controllers.CheckoutController     : User ****@****.*** persistent cart has 1 items.
2025-06-29 20:35:02.562  WARN [687a19f3-f8d2-4f30-9415-2141dc879bfb] 24036 --- [nio-8080-exec-8] o.e.x.controllers.CheckoutController     : !!! SIMULATING successful payment processing for user ****@****.*** !!!
2025-06-29 20:35:02.563  INFO [687a19f3-f8d2-4f30-9415-2141dc879bfb] 24036 --- [nio-8080-exec-8] o.e.x.services.OrderServiceImpl          : Creating order from persistent cart for user: ****@****.***
2025-06-29 20:35:02.567  INFO [687a19f3-f8d2-4f30-9415-2141dc879bfb] 24036 --- [nio-8080-exec-8] o.e.x.services.OrderServiceImpl          : Order 1 created for user ****@****.***, status: PENDING_PAYMENT. Total: 37.99
2025-06-29 20:35:02.568  INFO [687a19f3-f8d2-4f30-9415-2141dc879bfb] 24036 --- [nio-8080-exec-8] o.e.x.services.OrderServiceImpl          : Created ticket with seat 4E of type SEAT_TYPE_UPFRONT for flight XT-OTP-CDG-2 for user ****@****.***
2025-06-29 20:35:02.568  INFO [687a19f3-f8d2-4f30-9415-2141dc879bfb] 24036 --- [nio-8080-exec-8] o.e.x.services.OrderServiceImpl          : Ticket has baggage type: BAGGAGE_TYPE_WEIGHT_CARRY_ON_0
2025-06-29 20:35:03.750  INFO [687a19f3-f8d2-4f30-9415-2141dc879bfb] 24036 --- [nio-8080-exec-8] o.e.x.services.EmailServiceImpl          : Purchase confirmation email sent to ****@****.***
2025-06-29 20:35:03.751  INFO [687a19f3-f8d2-4f30-9415-2141dc879bfb] 24036 --- [nio-8080-exec-8] o.e.x.services.OrderServiceImpl          : Purchase confirmation email sent to user: ****@****.***
2025-06-29 20:35:03.764  INFO [687a19f3-f8d2-4f30-9415-2141dc879bfb] 24036 --- [nio-8080-exec-8] o.e.x.controllers.CheckoutController     : Order successfully created for user ****@****.***. Confirmation: 1
2025-06-29 20:35:03.769  INFO [687a19f3-f8d2-4f30-9415-2141dc879bfb] 24036 --- [nio-8080-exec-8] o.e.xlr8travel.services.CartServiceImpl  : Clearing 1 items from cart for user ****@****.***
2025-06-29 20:35:03.790  INFO [687a19f3-f8d2-4f30-9415-2141dc879bfb] 24036 --- [nio-8080-exec-8] o.e.x.controllers.CheckoutController     : Persistent cart cleared for user ****@****.***.
2025-06-29 20:35:03.800 DEBUG [b342e6d7-68ca-4606-9890-b4726edd8dae] 24036 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing DELETE /api/cart/remove/16
2025-06-29 20:35:03.889 DEBUG [b342e6d7-68ca-4606-9890-b4726edd8dae] 24036 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:35:03.891 DEBUG [b342e6d7-68ca-4606-9890-b4726edd8dae] 24036 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured DELETE /api/cart/remove/16
2025-06-29 20:35:03.976  INFO [b342e6d7-68ca-4606-9890-b4726edd8dae] 24036 --- [nio-8080-exec-9] o.e.x.controllers.CartController         : User ****@****.*** request to remove flight ID 16 from persistent cart
2025-06-29 20:35:03.986  WARN [b342e6d7-68ca-4606-9890-b4726edd8dae] 24036 --- [nio-8080-exec-9] o.e.xlr8travel.services.CartServiceImpl  : Attempted to remove flight ID 16 not found in cart for user ****@****.***
2025-06-29 20:35:03.989  WARN [b342e6d7-68ca-4606-9890-b4726edd8dae] 24036 --- [nio-8080-exec-9] o.e.x.controllers.CartController         : Attempted to remove flight ID 16 not found in persistent cart for user ****@****.***
2025-06-29 20:35:03.999 DEBUG [2e7a4122-e15a-4374-8af6-2e6792ccc9f8] 24036 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:35:04.110 DEBUG [2e7a4122-e15a-4374-8af6-2e6792ccc9f8] 24036 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:35:04.112 DEBUG [2e7a4122-e15a-4374-8af6-2e6792ccc9f8] 24036 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:35:04.113  INFO [2e7a4122-e15a-4374-8af6-2e6792ccc9f8] 24036 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:35:04.209  INFO [2e7a4122-e15a-4374-8af6-2e6792ccc9f8] 24036 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 20:35:05.364 DEBUG [6813e7c7-4316-4d17-9c83-8226f3acc8dd] 24036 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 20:35:05.468 DEBUG [6813e7c7-4316-4d17-9c83-8226f3acc8dd] 24036 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:35:05.469 DEBUG [6813e7c7-4316-4d17-9c83-8226f3acc8dd] 24036 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 20:35:05.555  INFO [6813e7c7-4316-4d17-9c83-8226f3acc8dd] 24036 --- [nio-8080-exec-2] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 20:35:05.556  INFO [6813e7c7-4316-4d17-9c83-8226f3acc8dd] 24036 --- [nio-8080-exec-2] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 20:35:05.562  INFO [6813e7c7-4316-4d17-9c83-8226f3acc8dd] 24036 --- [nio-8080-exec-2] o.e.x.services.TicketServiceImpl         : Found 1 tickets eligible for check-in for user 4
2025-06-29 20:35:05.582 DEBUG [d56e760f-9711-4303-9f1e-75e22ae8866a] 24036 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 20:35:05.682 DEBUG [d56e760f-9711-4303-9f1e-75e22ae8866a] 24036 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:35:05.684 DEBUG [d56e760f-9711-4303-9f1e-75e22ae8866a] 24036 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 20:35:05.860  INFO [d56e760f-9711-4303-9f1e-75e22ae8866a] 24036 --- [io-8080-exec-10] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 20:35:05.861  INFO [d56e760f-9711-4303-9f1e-75e22ae8866a] 24036 --- [io-8080-exec-10] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 20:35:05.866  INFO [d56e760f-9711-4303-9f1e-75e22ae8866a] 24036 --- [io-8080-exec-10] o.e.x.services.TicketServiceImpl         : Found 1 tickets eligible for check-in for user 4
2025-06-29 20:35:12.025 DEBUG [71d939ac-e61e-48dd-b905-7b50e11f07b5] 24036 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /api/check-in/3/with-seat
2025-06-29 20:35:12.119 DEBUG [71d939ac-e61e-48dd-b905-7b50e11f07b5] 24036 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:35:12.122 DEBUG [71d939ac-e61e-48dd-b905-7b50e11f07b5] 24036 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /api/check-in/3/with-seat
2025-06-29 20:35:12.207  INFO [71d939ac-e61e-48dd-b905-7b50e11f07b5] 24036 --- [nio-8080-exec-3] o.e.x.controllers.CheckinController      : Checking in ticket 3 with seat for user: ****@****.***
2025-06-29 20:35:12.212  INFO [71d939ac-e61e-48dd-b905-7b50e11f07b5] 24036 --- [nio-8080-exec-3] o.e.x.services.TicketServiceImpl         : Checking in ticket 3 with seat 4E of type SEAT_TYPE_UPFRONT
2025-06-29 20:35:12.213  INFO [71d939ac-e61e-48dd-b905-7b50e11f07b5] 24036 --- [nio-8080-exec-3] o.e.x.services.TicketServiceImpl         : Checking if seat 4E is booked for flight 16
2025-06-29 20:35:12.220  INFO [71d939ac-e61e-48dd-b905-7b50e11f07b5] 24036 --- [nio-8080-exec-3] o.e.x.services.TicketServiceImpl         : Successfully checked in ticket 3 with seat 4E
2025-06-29 20:35:16.424 DEBUG [aadbd2e6-bf48-4123-9770-cbc741badf56] 24036 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/check-in/boarding-passes
2025-06-29 20:35:16.424 DEBUG [2afbbd89-efc8-40ca-973f-b432216098b0] 24036 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/check-in/boarding-passes
2025-06-29 20:35:16.440 DEBUG [e084816f-3a3c-4fbe-8f90-118ce7131809] 24036 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/boarding-passes
2025-06-29 20:35:16.558 DEBUG [e084816f-3a3c-4fbe-8f90-118ce7131809] 24036 --- [nio-8080-exec-1] o.s.s.core.session.SessionRegistryImpl   : Registering session D7BC086A90BF32A72F0DCD713F4354CB, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}])
2025-06-29 20:35:16.558 DEBUG [e084816f-3a3c-4fbe-8f90-118ce7131809] 24036 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@7de92e20]
2025-06-29 20:35:16.561 DEBUG [e084816f-3a3c-4fbe-8f90-118ce7131809] 24036 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/boarding-passes
2025-06-29 20:35:16.654  INFO [e084816f-3a3c-4fbe-8f90-118ce7131809] 24036 --- [nio-8080-exec-1] o.e.x.services.TicketServiceImpl         : Finding checked-in tickets for user 4
2025-06-29 20:35:16.662 DEBUG [9221cff5-4a94-4890-9d10-d501aae43c43] 24036 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/boarding-passes
2025-06-29 20:35:16.765 DEBUG [9221cff5-4a94-4890-9d10-d501aae43c43] 24036 --- [nio-8080-exec-2] o.s.s.core.session.SessionRegistryImpl   : Registering session E82EE173E306CB7C736C0FEF4FCE42FE, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}])
2025-06-29 20:35:16.766 DEBUG [9221cff5-4a94-4890-9d10-d501aae43c43] 24036 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@25973f9b]
2025-06-29 20:35:16.768 DEBUG [9221cff5-4a94-4890-9d10-d501aae43c43] 24036 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/boarding-passes
2025-06-29 20:35:16.854  INFO [9221cff5-4a94-4890-9d10-d501aae43c43] 24036 --- [nio-8080-exec-2] o.e.x.services.TicketServiceImpl         : Finding checked-in tickets for user 4
2025-06-29 20:35:20.882 DEBUG [783e0ca6-bcc4-4028-a970-c63263aac3c6] 24036 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/check-in/boarding-passes/3/download
2025-06-29 20:35:20.886 DEBUG [f0de27bc-1419-4df6-9aba-7ea6e1b1ae19] 24036 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/boarding-passes/3/download
2025-06-29 20:35:21.003 DEBUG [f0de27bc-1419-4df6-9aba-7ea6e1b1ae19] 24036 --- [nio-8080-exec-3] o.s.s.core.session.SessionRegistryImpl   : Registering session 375686DA04C45C45A7BDFB6D357FCE08, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}])
2025-06-29 20:35:21.003 DEBUG [f0de27bc-1419-4df6-9aba-7ea6e1b1ae19] 24036 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@7d7484ee]
2025-06-29 20:35:21.006 DEBUG [f0de27bc-1419-4df6-9aba-7ea6e1b1ae19] 24036 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/boarding-passes/3/download
2025-06-29 20:36:51.489 DEBUG [123232e5-a287-4f29-b4b8-a08e4bf89b03] 24036 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/nearby?origin=OTP
2025-06-29 20:36:51.497 DEBUG [123232e5-a287-4f29-b4b8-a08e4bf89b03] 24036 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/nearby?origin=OTP
2025-06-29 20:36:51.508  INFO [123232e5-a287-4f29-b4b8-a08e4bf89b03] 24036 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Received request for nearby flights from origin: OTP, departureDate: null
2025-06-29 20:36:51.520  INFO [123232e5-a287-4f29-b4b8-a08e4bf89b03] 24036 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Using search date: 2025-06-29
2025-06-29 20:36:51.523  INFO [123232e5-a287-4f29-b4b8-a08e4bf89b03] 24036 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Cache key: OTP-2025-06-29
2025-06-29 20:36:51.524  INFO [123232e5-a287-4f29-b4b8-a08e4bf89b03] 24036 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Returning cached nearby flights for origin: OTP, found 6 flights
2025-06-29 20:36:51.528 DEBUG [123232e5-a287-4f29-b4b8-a08e4bf89b03] 24036 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:36:53.531 DEBUG [07140fd2-e330-4c0a-942a-2578b5b7068a] 24036 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-29 20:36:53.534 DEBUG [07140fd2-e330-4c0a-942a-2578b5b7068a] 24036 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-29 20:36:53.548  INFO [07140fd2-e330-4c0a-942a-2578b5b7068a] 24036 --- [nio-8080-exec-9] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris
2025-06-29 20:36:53.548  INFO [07140fd2-e330-4c0a-942a-2578b5b7068a] 24036 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-29 20:36:53.549  INFO [07140fd2-e330-4c0a-942a-2578b5b7068a] 24036 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-29 20:36:53.549 DEBUG [07140fd2-e330-4c0a-942a-2578b5b7068a] 24036 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-29).    For example, if today is 2025-06-29, a good departure date would be between 2025-07-06 and 2025-07-13, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris";
2025-06-29 20:36:53.553  INFO [07140fd2-e330-4c0a-942a-2578b5b7068a] 24036 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-29 20:36:53.553  INFO [07140fd2-e330-4c0a-942a-2578b5b7068a] 24036 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-29 20:36:53.553  INFO [07140fd2-e330-4c0a-942a-2578b5b7068a] 24036 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-29 20:36:53.554  INFO [07140fd2-e330-4c0a-942a-2578b5b7068a] 24036 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 20:36:53.554  INFO [07140fd2-e330-4c0a-942a-2578b5b7068a] 24036 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-29 20:36:53.557  INFO [07140fd2-e330-4c0a-942a-2578b5b7068a] 24036 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-29 20:36:53.557  INFO [07140fd2-e330-4c0a-942a-2578b5b7068a] 24036 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-29 20:36:53.558  INFO [07140fd2-e330-4c0a-942a-2578b5b7068a] 24036 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-29 20:36:53.559  INFO [07140fd2-e330-4c0a-942a-2578b5b7068a] 24036 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-29 20:36:55.520  INFO [07140fd2-e330-4c0a-942a-2578b5b7068a] 24036 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-29 20:36:55.521  INFO [07140fd2-e330-4c0a-942a-2578b5b7068a] 24036 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Response length: 195 characters
2025-06-29 20:36:55.521 DEBUG [07140fd2-e330-4c0a-942a-2578b5b7068a] 24036 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-06",
  "returnDate": "2025-07-08",
  "tripType": "roundTrip",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-29 20:36:55.522 DEBUG [07140fd2-e330-4c0a-942a-2578b5b7068a] 24036 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-29 20:36:55.522 DEBUG [07140fd2-e330-4c0a-942a-2578b5b7068a] 24036 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-29 20:36:55.523 DEBUG [07140fd2-e330-4c0a-942a-2578b5b7068a] 24036 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-29 20:36:55.523 DEBUG [07140fd2-e330-4c0a-942a-2578b5b7068a] 24036 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 20:36:55.523  INFO [07140fd2-e330-4c0a-942a-2578b5b7068a] 24036 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 20:36:55.523  INFO [07140fd2-e330-4c0a-942a-2578b5b7068a] 24036 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-06, returnDate=2025-07-08, tripType=roundTrip, adults=1, children=0, infants=0
2025-06-29 20:36:55.524  INFO [07140fd2-e330-4c0a-942a-2578b5b7068a] 24036 --- [nio-8080-exec-9] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-29 20:36:55.525 DEBUG [07140fd2-e330-4c0a-942a-2578b5b7068a] 24036 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:36:57.602 DEBUG [b5f38944-6322-4e89-9ce4-89ce6db7061f] 24036 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-29 20:36:57.604 DEBUG [b5f38944-6322-4e89-9ce4-89ce6db7061f] 24036 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-29 20:36:57.607  INFO [b5f38944-6322-4e89-9ce4-89ce6db7061f] 24036 --- [nio-8080-exec-8] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris one way
2025-06-29 20:36:57.607  INFO [b5f38944-6322-4e89-9ce4-89ce6db7061f] 24036 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-29 20:36:57.607  INFO [b5f38944-6322-4e89-9ce4-89ce6db7061f] 24036 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-29 20:36:57.608 DEBUG [b5f38944-6322-4e89-9ce4-89ce6db7061f] 24036 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-29).    For example, if today is 2025-06-29, a good departure date would be between 2025-07-06 and 2025-07-13, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris one way";
2025-06-29 20:36:57.611  INFO [b5f38944-6322-4e89-9ce4-89ce6db7061f] 24036 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-29 20:36:57.612  INFO [b5f38944-6322-4e89-9ce4-89ce6db7061f] 24036 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-29 20:36:57.612  INFO [b5f38944-6322-4e89-9ce4-89ce6db7061f] 24036 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-29 20:36:57.612  INFO [b5f38944-6322-4e89-9ce4-89ce6db7061f] 24036 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 20:36:57.613  INFO [b5f38944-6322-4e89-9ce4-89ce6db7061f] 24036 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-29 20:36:57.616  INFO [b5f38944-6322-4e89-9ce4-89ce6db7061f] 24036 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-29 20:36:57.616  INFO [b5f38944-6322-4e89-9ce4-89ce6db7061f] 24036 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-29 20:36:57.616  INFO [b5f38944-6322-4e89-9ce4-89ce6db7061f] 24036 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-29 20:36:57.617  INFO [b5f38944-6322-4e89-9ce4-89ce6db7061f] 24036 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-29 20:36:59.202  INFO [b5f38944-6322-4e89-9ce4-89ce6db7061f] 24036 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-29 20:36:59.202  INFO [b5f38944-6322-4e89-9ce4-89ce6db7061f] 24036 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Response length: 184 characters
2025-06-29 20:36:59.202 DEBUG [b5f38944-6322-4e89-9ce4-89ce6db7061f] 24036 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-06",
  "returnDate": null,
  "tripType": "oneWay",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-29 20:36:59.203 DEBUG [b5f38944-6322-4e89-9ce4-89ce6db7061f] 24036 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-29 20:36:59.203 DEBUG [b5f38944-6322-4e89-9ce4-89ce6db7061f] 24036 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-29 20:36:59.204 DEBUG [b5f38944-6322-4e89-9ce4-89ce6db7061f] 24036 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-29 20:36:59.204 DEBUG [b5f38944-6322-4e89-9ce4-89ce6db7061f] 24036 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 20:36:59.204  INFO [b5f38944-6322-4e89-9ce4-89ce6db7061f] 24036 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 20:36:59.204  INFO [b5f38944-6322-4e89-9ce4-89ce6db7061f] 24036 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-06, returnDate=null, tripType=oneWay, adults=1, children=0, infants=0
2025-06-29 20:36:59.205  INFO [b5f38944-6322-4e89-9ce4-89ce6db7061f] 24036 --- [nio-8080-exec-8] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-29 20:36:59.206 DEBUG [b5f38944-6322-4e89-9ce4-89ce6db7061f] 24036 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:37:01.081 DEBUG [b63600f9-24e7-4c82-b557-901dd63cc3fa] 24036 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 20:37:01.238 DEBUG [b63600f9-24e7-4c82-b557-901dd63cc3fa] 24036 --- [nio-8080-exec-1] o.s.s.core.session.SessionRegistryImpl   : Registering session 64FCC93603C0B3DFA876FE5C5208D2AA, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}])
2025-06-29 20:37:01.239 DEBUG [b63600f9-24e7-4c82-b557-901dd63cc3fa] 24036 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@1c39c12d]
2025-06-29 20:37:01.241 DEBUG [b63600f9-24e7-4c82-b557-901dd63cc3fa] 24036 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me
2025-06-29 20:37:01.241  INFO [b63600f9-24e7-4c82-b557-901dd63cc3fa] 24036 --- [nio-8080-exec-1] o.e.x.controllers.UserController         : Request received for current user details: ****@****.***
2025-06-29 20:37:01.364  INFO [b63600f9-24e7-4c82-b557-901dd63cc3fa] 24036 --- [nio-8080-exec-1] o.e.x.controllers.UserController         : Returning details for user: ****@****.***
2025-06-29 20:37:01.452 DEBUG [dc30eec6-8cb0-4582-8062-8c28ff80aaac] 24036 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 20:37:01.456 DEBUG [54afc2dc-78bd-4c23-99c9-89784dd1bf00] 24036 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:37:01.462 DEBUG [54afc2dc-78bd-4c23-99c9-89784dd1bf00] 24036 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:37:01.462 DEBUG [e127f106-06da-496e-83e1-eb517e45c397] 24036 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:37:01.466  INFO [54afc2dc-78bd-4c23-99c9-89784dd1bf00] 24036 --- [io-8080-exec-10] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 20:37:01.469  INFO [54afc2dc-78bd-4c23-99c9-89784dd1bf00] 24036 --- [io-8080-exec-10] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 20:37:01.584  INFO [54afc2dc-78bd-4c23-99c9-89784dd1bf00] 24036 --- [io-8080-exec-10] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 20:37:01.585 DEBUG [54afc2dc-78bd-4c23-99c9-89784dd1bf00] 24036 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:37:01.593 DEBUG [008cdb25-5b9e-4e3d-adac-d7f94f6a22d8] 24036 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:37:01.595 DEBUG [008cdb25-5b9e-4e3d-adac-d7f94f6a22d8] 24036 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:37:01.596  INFO [008cdb25-5b9e-4e3d-adac-d7f94f6a22d8] 24036 --- [nio-8080-exec-7] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 20:37:01.596  INFO [008cdb25-5b9e-4e3d-adac-d7f94f6a22d8] 24036 --- [nio-8080-exec-7] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 20:37:01.638 DEBUG [81708a76-738a-437c-9daf-107cd5b011ec] 24036 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 20:37:01.640 DEBUG [81708a76-738a-437c-9daf-107cd5b011ec] 24036 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 20:37:01.641  INFO [81708a76-738a-437c-9daf-107cd5b011ec] 24036 --- [nio-8080-exec-5] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 20:37:01.649 DEBUG [dc30eec6-8cb0-4582-8062-8c28ff80aaac] 24036 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:37:01.651 DEBUG [e127f106-06da-496e-83e1-eb517e45c397] 24036 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:37:01.652 DEBUG [dc30eec6-8cb0-4582-8062-8c28ff80aaac] 24036 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 20:37:01.653 DEBUG [e127f106-06da-496e-83e1-eb517e45c397] 24036 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:37:01.653  INFO [e127f106-06da-496e-83e1-eb517e45c397] 24036 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:37:01.658  INFO [008cdb25-5b9e-4e3d-adac-d7f94f6a22d8] 24036 --- [nio-8080-exec-7] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 20:37:01.660 DEBUG [008cdb25-5b9e-4e3d-adac-d7f94f6a22d8] 24036 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:37:01.750  WARN [dc30eec6-8cb0-4582-8062-8c28ff80aaac] 24036 --- [nio-8080-exec-2] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 20:37:01.751  WARN [dc30eec6-8cb0-4582-8062-8c28ff80aaac] 24036 --- [nio-8080-exec-2] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 20:37:01.756 DEBUG [b57d327b-bf94-4d02-a3e0-9a494e93e14a] 24036 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 20:37:01.757  INFO [e127f106-06da-496e-83e1-eb517e45c397] 24036 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 20:37:01.782  INFO [81708a76-738a-437c-9daf-107cd5b011ec] 24036 --- [nio-8080-exec-5] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 20:37:01.784 DEBUG [81708a76-738a-437c-9daf-107cd5b011ec] 24036 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:37:01.789 DEBUG [358c9d0b-7257-4a3c-b280-dd4dfa1a7724] 24036 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 20:37:01.791 DEBUG [358c9d0b-7257-4a3c-b280-dd4dfa1a7724] 24036 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 20:37:01.791  INFO [358c9d0b-7257-4a3c-b280-dd4dfa1a7724] 24036 --- [nio-8080-exec-4] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 20:37:01.812 DEBUG [9035d5a1-73e3-42d1-9725-967d2a21d1e0] 24036 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:37:01.814 DEBUG [9035d5a1-73e3-42d1-9725-967d2a21d1e0] 24036 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:37:01.814  INFO [9035d5a1-73e3-42d1-9725-967d2a21d1e0] 24036 --- [nio-8080-exec-9] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 20:37:01.827  INFO [358c9d0b-7257-4a3c-b280-dd4dfa1a7724] 24036 --- [nio-8080-exec-4] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 20:37:01.828 DEBUG [358c9d0b-7257-4a3c-b280-dd4dfa1a7724] 24036 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:37:01.858 DEBUG [b57d327b-bf94-4d02-a3e0-9a494e93e14a] 24036 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:37:01.860 DEBUG [b57d327b-bf94-4d02-a3e0-9a494e93e14a] 24036 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 20:37:01.975  WARN [b57d327b-bf94-4d02-a3e0-9a494e93e14a] 24036 --- [nio-8080-exec-6] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 20:37:01.977  WARN [b57d327b-bf94-4d02-a3e0-9a494e93e14a] 24036 --- [nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 20:37:01.985  INFO [9035d5a1-73e3-42d1-9725-967d2a21d1e0] 24036 --- [nio-8080-exec-9] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 20:37:01.987 DEBUG [9035d5a1-73e3-42d1-9725-967d2a21d1e0] 24036 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:37:01.995 DEBUG [c8f9814b-847a-46e0-a40c-3280668a47e5] 24036 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:37:01.996 DEBUG [c8f9814b-847a-46e0-a40c-3280668a47e5] 24036 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:37:01.997  INFO [c8f9814b-847a-46e0-a40c-3280668a47e5] 24036 --- [nio-8080-exec-8] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 20:37:02.035  INFO [c8f9814b-847a-46e0-a40c-3280668a47e5] 24036 --- [nio-8080-exec-8] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 20:37:02.037 DEBUG [c8f9814b-847a-46e0-a40c-3280668a47e5] 24036 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:37:11.281 DEBUG [ef8698bc-6fd3-4b28-a8eb-6af1e3feb440] 24036 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:37:11.388 DEBUG [ef8698bc-6fd3-4b28-a8eb-6af1e3feb440] 24036 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:37:11.391 DEBUG [ef8698bc-6fd3-4b28-a8eb-6af1e3feb440] 24036 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:37:11.392  INFO [ef8698bc-6fd3-4b28-a8eb-6af1e3feb440] 24036 --- [nio-8080-exec-1] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:37:11.392  INFO [ef8698bc-6fd3-4b28-a8eb-6af1e3feb440] 24036 --- [nio-8080-exec-1] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:37:11.433 DEBUG [4d90726b-da89-45d6-8ae7-27b034a270d3] 24036 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:37:11.531 DEBUG [4d90726b-da89-45d6-8ae7-27b034a270d3] 24036 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:37:11.534 DEBUG [4d90726b-da89-45d6-8ae7-27b034a270d3] 24036 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:37:11.534  INFO [4d90726b-da89-45d6-8ae7-27b034a270d3] 24036 --- [io-8080-exec-10] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:37:11.535  INFO [4d90726b-da89-45d6-8ae7-27b034a270d3] 24036 --- [io-8080-exec-10] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:37:11.647 DEBUG [ba28bf91-7527-4771-b95c-2c3c52ed9c2e] 24036 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:37:11.741 DEBUG [ba28bf91-7527-4771-b95c-2c3c52ed9c2e] 24036 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:37:11.744 DEBUG [ba28bf91-7527-4771-b95c-2c3c52ed9c2e] 24036 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:37:11.745  INFO [ba28bf91-7527-4771-b95c-2c3c52ed9c2e] 24036 --- [nio-8080-exec-7] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:37:11.745  INFO [ba28bf91-7527-4771-b95c-2c3c52ed9c2e] 24036 --- [nio-8080-exec-7] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:37:17.587 DEBUG [a40b7ede-6c41-4cfc-8329-f4ae2591e261] 24036 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/cart/add
2025-06-29 20:37:17.678 DEBUG [a40b7ede-6c41-4cfc-8329-f4ae2591e261] 24036 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:37:17.680 DEBUG [a40b7ede-6c41-4cfc-8329-f4ae2591e261] 24036 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /api/cart/add
2025-06-29 20:37:17.773  INFO [a40b7ede-6c41-4cfc-8329-f4ae2591e261] 24036 --- [nio-8080-exec-2] o.e.x.controllers.CartController         : User ****@****.*** request to add flight ID 16 to persistent cart
2025-06-29 20:37:17.777  INFO [a40b7ede-6c41-4cfc-8329-f4ae2591e261] 24036 --- [nio-8080-exec-2] o.e.x.controllers.CartController         : AddToCart request: flightId=16, seatNumber=null, seatType=null, deferSeat=true, randomSeat=false
2025-06-29 20:37:17.782  INFO [a40b7ede-6c41-4cfc-8329-f4ae2591e261] 24036 --- [nio-8080-exec-2] o.e.xlr8travel.services.CartServiceImpl  : Added new flight ID 16 to cart for user ****@****.***
2025-06-29 20:37:17.799  INFO [a40b7ede-6c41-4cfc-8329-f4ae2591e261] 24036 --- [nio-8080-exec-2] o.e.x.controllers.CartController         : Flight ID 16 added/incremented in persistent cart for user ****@****.***.
2025-06-29 20:37:17.809 DEBUG [b6937b03-cab5-488b-b4b3-3c1672b2f4c2] 24036 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:37:17.919 DEBUG [b6937b03-cab5-488b-b4b3-3c1672b2f4c2] 24036 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:37:17.920 DEBUG [b6937b03-cab5-488b-b4b3-3c1672b2f4c2] 24036 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:37:17.920  INFO [b6937b03-cab5-488b-b4b3-3c1672b2f4c2] 24036 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:37:18.026  INFO [b6937b03-cab5-488b-b4b3-3c1672b2f4c2] 24036 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 20:37:18.310 DEBUG [ce4b3376-5748-4da8-936f-5569f7dcb4ce] 24036 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:37:18.420 DEBUG [ce4b3376-5748-4da8-936f-5569f7dcb4ce] 24036 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:37:18.421 DEBUG [ce4b3376-5748-4da8-936f-5569f7dcb4ce] 24036 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:37:18.422  INFO [ce4b3376-5748-4da8-936f-5569f7dcb4ce] 24036 --- [nio-8080-exec-5] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:37:18.530  INFO [ce4b3376-5748-4da8-936f-5569f7dcb4ce] 24036 --- [nio-8080-exec-5] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 20:37:18.537 DEBUG [8e95444d-709d-4743-aca2-1e3468898dff] 24036 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:37:18.634 DEBUG [8e95444d-709d-4743-aca2-1e3468898dff] 24036 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:37:18.635 DEBUG [8e95444d-709d-4743-aca2-1e3468898dff] 24036 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:37:18.636  INFO [8e95444d-709d-4743-aca2-1e3468898dff] 24036 --- [nio-8080-exec-4] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:37:18.736  INFO [8e95444d-709d-4743-aca2-1e3468898dff] 24036 --- [nio-8080-exec-4] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 20:37:20.815 DEBUG [db233e40-4fdd-4efe-b559-19d8e67875d2] 24036 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:37:20.993 DEBUG [db233e40-4fdd-4efe-b559-19d8e67875d2] 24036 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:37:20.995 DEBUG [db233e40-4fdd-4efe-b559-19d8e67875d2] 24036 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:37:20.995  INFO [db233e40-4fdd-4efe-b559-19d8e67875d2] 24036 --- [nio-8080-exec-6] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:37:21.126  INFO [db233e40-4fdd-4efe-b559-19d8e67875d2] 24036 --- [nio-8080-exec-6] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 20:37:21.135 DEBUG [01459d80-f0e2-4c83-9668-87c9db7e89b1] 24036 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:37:21.308 DEBUG [01459d80-f0e2-4c83-9668-87c9db7e89b1] 24036 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:37:21.310 DEBUG [01459d80-f0e2-4c83-9668-87c9db7e89b1] 24036 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:37:21.310  INFO [01459d80-f0e2-4c83-9668-87c9db7e89b1] 24036 --- [nio-8080-exec-9] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:37:24.082  INFO [01459d80-f0e2-4c83-9668-87c9db7e89b1] 24036 --- [nio-8080-exec-9] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 20:37:30.322 DEBUG [016bd476-ca0c-45c3-afe6-08e24f164b35] 24036 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /api/checkout/create-payment-intent
2025-06-29 20:37:30.323 DEBUG [016bd476-ca0c-45c3-afe6-08e24f164b35] 24036 --- [nio-8080-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 20:37:30.324 DEBUG [016bd476-ca0c-45c3-afe6-08e24f164b35] 24036 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured POST /api/checkout/create-payment-intent
2025-06-29 20:37:30.325  INFO [016bd476-ca0c-45c3-afe6-08e24f164b35] 24036 --- [nio-8080-exec-8] o.e.x.controllers.PaymentController      : Creating payment intent for amount: 33995 ron
2025-06-29 20:37:30.818  INFO [016bd476-ca0c-45c3-afe6-08e24f164b35] 24036 --- [nio-8080-exec-8] o.e.x.controllers.PaymentController      : Payment intent created successfully: pi_3RfPAVGf8s1WZJnq1j2yTbY7
2025-06-29 20:37:31.992 DEBUG [35d397b0-3f56-4ee5-9df1-1eb6842780de] 24036 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/checkout/confirm
2025-06-29 20:37:32.107 DEBUG [35d397b0-3f56-4ee5-9df1-1eb6842780de] 24036 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:37:32.108 DEBUG [35d397b0-3f56-4ee5-9df1-1eb6842780de] 24036 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/checkout/confirm
2025-06-29 20:37:32.109  INFO [35d397b0-3f56-4ee5-9df1-1eb6842780de] 24036 --- [nio-8080-exec-1] o.e.x.controllers.CheckoutController     : Received purchase confirmation request.
2025-06-29 20:37:32.213  INFO [35d397b0-3f56-4ee5-9df1-1eb6842780de] 24036 --- [nio-8080-exec-1] o.e.x.controllers.CheckoutController     : Processing purchase for user: ****@****.***
2025-06-29 20:37:32.221  INFO [35d397b0-3f56-4ee5-9df1-1eb6842780de] 24036 --- [nio-8080-exec-1] o.e.x.controllers.CheckoutController     : User ****@****.*** persistent cart has 1 items.
2025-06-29 20:37:32.222  WARN [35d397b0-3f56-4ee5-9df1-1eb6842780de] 24036 --- [nio-8080-exec-1] o.e.x.controllers.CheckoutController     : !!! SIMULATING successful payment processing for user ****@****.*** !!!
2025-06-29 20:37:32.223  INFO [35d397b0-3f56-4ee5-9df1-1eb6842780de] 24036 --- [nio-8080-exec-1] o.e.x.services.OrderServiceImpl          : Creating order from persistent cart for user: ****@****.***
2025-06-29 20:37:32.227  INFO [35d397b0-3f56-4ee5-9df1-1eb6842780de] 24036 --- [nio-8080-exec-1] o.e.x.services.OrderServiceImpl          : Order 2 created for user ****@****.***, status: PENDING_PAYMENT. Total: 37.99
2025-06-29 20:37:32.227  INFO [35d397b0-3f56-4ee5-9df1-1eb6842780de] 24036 --- [nio-8080-exec-1] o.e.x.services.OrderServiceImpl          : Created ticket with deferred seat selection for flight XT-OTP-CDG-2 for user ****@****.***
2025-06-29 20:37:32.227  INFO [35d397b0-3f56-4ee5-9df1-1eb6842780de] 24036 --- [nio-8080-exec-1] o.e.x.services.OrderServiceImpl          : Ticket has baggage type: BAGGAGE_TYPE_WEIGHT_CHECKED_10
2025-06-29 20:37:33.299  INFO [35d397b0-3f56-4ee5-9df1-1eb6842780de] 24036 --- [nio-8080-exec-1] o.e.x.services.EmailServiceImpl          : Purchase confirmation email sent to ****@****.***
2025-06-29 20:37:33.300  INFO [35d397b0-3f56-4ee5-9df1-1eb6842780de] 24036 --- [nio-8080-exec-1] o.e.x.services.OrderServiceImpl          : Purchase confirmation email sent to user: ****@****.***
2025-06-29 20:37:33.315  INFO [35d397b0-3f56-4ee5-9df1-1eb6842780de] 24036 --- [nio-8080-exec-1] o.e.x.controllers.CheckoutController     : Order successfully created for user ****@****.***. Confirmation: 2
2025-06-29 20:37:33.320  INFO [35d397b0-3f56-4ee5-9df1-1eb6842780de] 24036 --- [nio-8080-exec-1] o.e.xlr8travel.services.CartServiceImpl  : Clearing 1 items from cart for user ****@****.***
2025-06-29 20:37:33.338  INFO [35d397b0-3f56-4ee5-9df1-1eb6842780de] 24036 --- [nio-8080-exec-1] o.e.x.controllers.CheckoutController     : Persistent cart cleared for user ****@****.***.
2025-06-29 20:37:33.348 DEBUG [26b76438-6f59-495f-9bb1-65c1dd40aa97] 24036 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing DELETE /api/cart/remove/16
2025-06-29 20:37:33.452 DEBUG [26b76438-6f59-495f-9bb1-65c1dd40aa97] 24036 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:37:33.454 DEBUG [26b76438-6f59-495f-9bb1-65c1dd40aa97] 24036 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured DELETE /api/cart/remove/16
2025-06-29 20:37:33.544  INFO [26b76438-6f59-495f-9bb1-65c1dd40aa97] 24036 --- [io-8080-exec-10] o.e.x.controllers.CartController         : User ****@****.*** request to remove flight ID 16 from persistent cart
2025-06-29 20:37:33.553  WARN [26b76438-6f59-495f-9bb1-65c1dd40aa97] 24036 --- [io-8080-exec-10] o.e.xlr8travel.services.CartServiceImpl  : Attempted to remove flight ID 16 not found in cart for user ****@****.***
2025-06-29 20:37:33.555  WARN [26b76438-6f59-495f-9bb1-65c1dd40aa97] 24036 --- [io-8080-exec-10] o.e.x.controllers.CartController         : Attempted to remove flight ID 16 not found in persistent cart for user ****@****.***
2025-06-29 20:37:33.566 DEBUG [482daaec-41f5-49c4-bca4-d883fd37ea9f] 24036 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:37:33.678 DEBUG [482daaec-41f5-49c4-bca4-d883fd37ea9f] 24036 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:37:33.680 DEBUG [482daaec-41f5-49c4-bca4-d883fd37ea9f] 24036 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:37:33.680  INFO [482daaec-41f5-49c4-bca4-d883fd37ea9f] 24036 --- [nio-8080-exec-7] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:37:33.778  INFO [482daaec-41f5-49c4-bca4-d883fd37ea9f] 24036 --- [nio-8080-exec-7] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 20:37:35.773 DEBUG [f25be237-1dc6-409b-855b-816bbfb45b72] 24036 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 20:37:35.906 DEBUG [f25be237-1dc6-409b-855b-816bbfb45b72] 24036 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:37:35.908 DEBUG [f25be237-1dc6-409b-855b-816bbfb45b72] 24036 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 20:37:36.004  INFO [f25be237-1dc6-409b-855b-816bbfb45b72] 24036 --- [nio-8080-exec-2] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 20:37:36.005  INFO [f25be237-1dc6-409b-855b-816bbfb45b72] 24036 --- [nio-8080-exec-2] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 20:37:36.010  INFO [f25be237-1dc6-409b-855b-816bbfb45b72] 24036 --- [nio-8080-exec-2] o.e.x.services.TicketServiceImpl         : Found 1 tickets eligible for check-in for user 4
2025-06-29 20:37:36.017 DEBUG [9184f479-3116-4630-8435-278c066adce2] 24036 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 20:37:36.117 DEBUG [9184f479-3116-4630-8435-278c066adce2] 24036 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:37:36.119 DEBUG [9184f479-3116-4630-8435-278c066adce2] 24036 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 20:37:36.213  INFO [9184f479-3116-4630-8435-278c066adce2] 24036 --- [nio-8080-exec-3] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 20:37:36.213  INFO [9184f479-3116-4630-8435-278c066adce2] 24036 --- [nio-8080-exec-3] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 20:37:36.218  INFO [9184f479-3116-4630-8435-278c066adce2] 24036 --- [nio-8080-exec-3] o.e.x.services.TicketServiceImpl         : Found 1 tickets eligible for check-in for user 4
2025-06-29 20:37:37.531 DEBUG [10bcee5e-f065-46a0-a01d-18ad4d0da04f] 24036 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:37:37.635 DEBUG [10bcee5e-f065-46a0-a01d-18ad4d0da04f] 24036 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:37:37.638 DEBUG [10bcee5e-f065-46a0-a01d-18ad4d0da04f] 24036 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:37:37.639  INFO [10bcee5e-f065-46a0-a01d-18ad4d0da04f] 24036 --- [nio-8080-exec-5] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:37:37.639  INFO [10bcee5e-f065-46a0-a01d-18ad4d0da04f] 24036 --- [nio-8080-exec-5] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:37:37.681 DEBUG [fac7420f-9e11-4113-82f1-053708a807d0] 24036 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:37:37.781 DEBUG [fac7420f-9e11-4113-82f1-053708a807d0] 24036 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:37:37.784 DEBUG [fac7420f-9e11-4113-82f1-053708a807d0] 24036 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:37:37.785  INFO [fac7420f-9e11-4113-82f1-053708a807d0] 24036 --- [nio-8080-exec-4] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:37:37.785  INFO [fac7420f-9e11-4113-82f1-053708a807d0] 24036 --- [nio-8080-exec-4] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:37:40.696 DEBUG [aa4680ab-75a1-450c-8fb7-6eb01e8de94c] 24036 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/check-in/4/with-seat
2025-06-29 20:37:40.791 DEBUG [aa4680ab-75a1-450c-8fb7-6eb01e8de94c] 24036 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:37:40.793 DEBUG [aa4680ab-75a1-450c-8fb7-6eb01e8de94c] 24036 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/check-in/4/with-seat
2025-06-29 20:37:40.889  INFO [aa4680ab-75a1-450c-8fb7-6eb01e8de94c] 24036 --- [nio-8080-exec-6] o.e.x.controllers.CheckinController      : Checking in ticket 4 with seat for user: ****@****.***
2025-06-29 20:37:40.893  INFO [aa4680ab-75a1-450c-8fb7-6eb01e8de94c] 24036 --- [nio-8080-exec-6] o.e.x.services.TicketServiceImpl         : Checking in ticket 4 with seat 1E of type SEAT_TYPE_UPFRONT
2025-06-29 20:37:40.894  INFO [aa4680ab-75a1-450c-8fb7-6eb01e8de94c] 24036 --- [nio-8080-exec-6] o.e.x.services.TicketServiceImpl         : Checking if seat 1E is booked for flight 16
2025-06-29 20:37:40.898  INFO [aa4680ab-75a1-450c-8fb7-6eb01e8de94c] 24036 --- [nio-8080-exec-6] o.e.x.services.TicketServiceImpl         : Successfully checked in ticket 4 with seat 1E
2025-06-29 20:37:43.658 DEBUG [e1fd1856-fec4-45b9-82a9-6df37d09d017] 24036 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/check-in/boarding-passes
2025-06-29 20:37:43.658 DEBUG [e8c1024f-ac0b-43a3-92bd-94fa862201cb] 24036 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/check-in/boarding-passes
2025-06-29 20:37:43.664 DEBUG [f05b0f30-5014-471e-b45f-90485985d99e] 24036 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/boarding-passes
2025-06-29 20:37:43.777 DEBUG [f05b0f30-5014-471e-b45f-90485985d99e] 24036 --- [nio-8080-exec-1] o.s.s.core.session.SessionRegistryImpl   : Registering session C570B690B8CF16579D37AFF8E172AF52, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}])
2025-06-29 20:37:43.778 DEBUG [f05b0f30-5014-471e-b45f-90485985d99e] 24036 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@46b3c448]
2025-06-29 20:37:43.779 DEBUG [f05b0f30-5014-471e-b45f-90485985d99e] 24036 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/boarding-passes
2025-06-29 20:37:43.874  INFO [f05b0f30-5014-471e-b45f-90485985d99e] 24036 --- [nio-8080-exec-1] o.e.x.services.TicketServiceImpl         : Finding checked-in tickets for user 4
2025-06-29 20:37:43.880 DEBUG [6a3ecdeb-5caf-4eaa-8cfc-f8da086d61f5] 24036 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/boarding-passes
2025-06-29 20:37:43.981 DEBUG [6a3ecdeb-5caf-4eaa-8cfc-f8da086d61f5] 24036 --- [io-8080-exec-10] o.s.s.core.session.SessionRegistryImpl   : Registering session 26CE7F37D954DE491FFE279A416A5D16, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}])
2025-06-29 20:37:43.982 DEBUG [6a3ecdeb-5caf-4eaa-8cfc-f8da086d61f5] 24036 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@708626da]
2025-06-29 20:37:43.984 DEBUG [6a3ecdeb-5caf-4eaa-8cfc-f8da086d61f5] 24036 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/boarding-passes
2025-06-29 20:37:44.077  INFO [6a3ecdeb-5caf-4eaa-8cfc-f8da086d61f5] 24036 --- [io-8080-exec-10] o.e.x.services.TicketServiceImpl         : Finding checked-in tickets for user 4
2025-06-29 20:38:19.556 DEBUG [5dddde5e-3c14-4552-9473-56bb29e5503f] 24036 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/nearby?origin=OTP
2025-06-29 20:38:19.557 DEBUG [5dddde5e-3c14-4552-9473-56bb29e5503f] 24036 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/nearby?origin=OTP
2025-06-29 20:38:19.558  INFO [5dddde5e-3c14-4552-9473-56bb29e5503f] 24036 --- [nio-8080-exec-7] o.e.x.controllers.FlightController       : Received request for nearby flights from origin: OTP, departureDate: null
2025-06-29 20:38:19.558  INFO [5dddde5e-3c14-4552-9473-56bb29e5503f] 24036 --- [nio-8080-exec-7] o.e.x.controllers.FlightController       : Using search date: 2025-06-29
2025-06-29 20:38:19.559  INFO [5dddde5e-3c14-4552-9473-56bb29e5503f] 24036 --- [nio-8080-exec-7] o.e.x.controllers.FlightController       : Cache key: OTP-2025-06-29
2025-06-29 20:38:19.559  INFO [5dddde5e-3c14-4552-9473-56bb29e5503f] 24036 --- [nio-8080-exec-7] o.e.x.controllers.FlightController       : Returning cached nearby flights for origin: OTP, found 6 flights
2025-06-29 20:38:19.560 DEBUG [5dddde5e-3c14-4552-9473-56bb29e5503f] 24036 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:38:40.061 DEBUG [41c1c566-b634-4956-9590-d8274b5f9b60] 24036 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/check-in/boarding-passes
2025-06-29 20:38:40.062 DEBUG [72797b79-89c7-44c1-8dbc-d68ac08b548d] 24036 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/check-in/boarding-passes
2025-06-29 20:38:40.065 DEBUG [26dca3ad-e5e1-4020-9d1b-04f77598a146] 24036 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/boarding-passes
2025-06-29 20:38:40.162 DEBUG [903c0295-5067-4654-98c2-abc96727087b] 24036 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 20:38:40.196 DEBUG [26dca3ad-e5e1-4020-9d1b-04f77598a146] 24036 --- [nio-8080-exec-4] o.s.s.core.session.SessionRegistryImpl   : Registering session 644482EEF89C750B9B2AC9C2B4CCCF84, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}])
2025-06-29 20:38:40.196 DEBUG [26dca3ad-e5e1-4020-9d1b-04f77598a146] 24036 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@5ae5ecd6]
2025-06-29 20:38:40.198 DEBUG [26dca3ad-e5e1-4020-9d1b-04f77598a146] 24036 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/boarding-passes
2025-06-29 20:38:40.270 DEBUG [903c0295-5067-4654-98c2-abc96727087b] 24036 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:38:40.273 DEBUG [903c0295-5067-4654-98c2-abc96727087b] 24036 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 20:38:40.297  INFO [26dca3ad-e5e1-4020-9d1b-04f77598a146] 24036 --- [nio-8080-exec-4] o.e.x.services.TicketServiceImpl         : Finding checked-in tickets for user 4
2025-06-29 20:38:40.302 DEBUG [263045fc-dd50-4081-b4fd-68443f979ce1] 24036 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/boarding-passes
2025-06-29 20:38:40.369  INFO [903c0295-5067-4654-98c2-abc96727087b] 24036 --- [nio-8080-exec-6] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 20:38:40.369  INFO [903c0295-5067-4654-98c2-abc96727087b] 24036 --- [nio-8080-exec-6] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 20:38:40.374  INFO [903c0295-5067-4654-98c2-abc96727087b] 24036 --- [nio-8080-exec-6] o.e.x.services.TicketServiceImpl         : Found 0 tickets eligible for check-in for user 4
2025-06-29 20:38:40.383 DEBUG [ed015ad3-ef0e-43ee-84b4-08583ceba139] 24036 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 20:38:40.410 DEBUG [263045fc-dd50-4081-b4fd-68443f979ce1] 24036 --- [nio-8080-exec-9] o.s.s.core.session.SessionRegistryImpl   : Registering session F6B79D31155BC51CFD2AA37F0447C30F, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}])
2025-06-29 20:38:40.411 DEBUG [263045fc-dd50-4081-b4fd-68443f979ce1] 24036 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@5ae792f9]
2025-06-29 20:38:40.413 DEBUG [263045fc-dd50-4081-b4fd-68443f979ce1] 24036 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/boarding-passes
2025-06-29 20:38:40.490 DEBUG [ed015ad3-ef0e-43ee-84b4-08583ceba139] 24036 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:38:40.492 DEBUG [ed015ad3-ef0e-43ee-84b4-08583ceba139] 24036 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 20:38:40.511  INFO [263045fc-dd50-4081-b4fd-68443f979ce1] 24036 --- [nio-8080-exec-9] o.e.x.services.TicketServiceImpl         : Finding checked-in tickets for user 4
2025-06-29 20:38:40.597 DEBUG [e241fd4b-ad3b-4c01-a0f0-6fd6ab926326] 24036 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:38:40.603  INFO [ed015ad3-ef0e-43ee-84b4-08583ceba139] 24036 --- [nio-8080-exec-8] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 20:38:40.603  INFO [ed015ad3-ef0e-43ee-84b4-08583ceba139] 24036 --- [nio-8080-exec-8] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 20:38:40.609  INFO [ed015ad3-ef0e-43ee-84b4-08583ceba139] 24036 --- [nio-8080-exec-8] o.e.x.services.TicketServiceImpl         : Found 0 tickets eligible for check-in for user 4
2025-06-29 20:38:40.694 DEBUG [e241fd4b-ad3b-4c01-a0f0-6fd6ab926326] 24036 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:38:40.696 DEBUG [e241fd4b-ad3b-4c01-a0f0-6fd6ab926326] 24036 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:38:40.696  INFO [e241fd4b-ad3b-4c01-a0f0-6fd6ab926326] 24036 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:38:40.817  INFO [e241fd4b-ad3b-4c01-a0f0-6fd6ab926326] 24036 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 20:38:40.825 DEBUG [5b8e2a27-dc43-4718-8afa-8858afeb3d43] 24036 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:38:40.916 DEBUG [5b8e2a27-dc43-4718-8afa-8858afeb3d43] 24036 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:38:40.917 DEBUG [5b8e2a27-dc43-4718-8afa-8858afeb3d43] 24036 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:38:40.918  INFO [5b8e2a27-dc43-4718-8afa-8858afeb3d43] 24036 --- [io-8080-exec-10] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:38:41.024  INFO [5b8e2a27-dc43-4718-8afa-8858afeb3d43] 24036 --- [io-8080-exec-10] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 20:38:41.031 DEBUG [b8ad244c-800f-48c7-b3cc-a79e0ff1b87a] 24036 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:38:41.121 DEBUG [b8ad244c-800f-48c7-b3cc-a79e0ff1b87a] 24036 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:38:41.122 DEBUG [b8ad244c-800f-48c7-b3cc-a79e0ff1b87a] 24036 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:38:41.123  INFO [b8ad244c-800f-48c7-b3cc-a79e0ff1b87a] 24036 --- [nio-8080-exec-7] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:38:41.210  INFO [b8ad244c-800f-48c7-b3cc-a79e0ff1b87a] 24036 --- [nio-8080-exec-7] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 20:38:41.218 DEBUG [da39ff65-255d-4365-aeae-6aa026530a2d] 24036 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:38:41.316 DEBUG [da39ff65-255d-4365-aeae-6aa026530a2d] 24036 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:38:41.318 DEBUG [da39ff65-255d-4365-aeae-6aa026530a2d] 24036 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:38:41.318  INFO [da39ff65-255d-4365-aeae-6aa026530a2d] 24036 --- [nio-8080-exec-2] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:38:41.412  INFO [da39ff65-255d-4365-aeae-6aa026530a2d] 24036 --- [nio-8080-exec-2] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 20:38:41.591 DEBUG [e0afb8e3-6fbd-4924-8dcd-d4b4b9beba2f] 24036 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:38:41.593 DEBUG [e0afb8e3-6fbd-4924-8dcd-d4b4b9beba2f] 24036 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:38:41.594  INFO [e0afb8e3-6fbd-4924-8dcd-d4b4b9beba2f] 24036 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 20:38:41.594  INFO [e0afb8e3-6fbd-4924-8dcd-d4b4b9beba2f] 24036 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 20:38:41.640  INFO [e0afb8e3-6fbd-4924-8dcd-d4b4b9beba2f] 24036 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 20:38:41.641 DEBUG [e0afb8e3-6fbd-4924-8dcd-d4b4b9beba2f] 24036 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:38:41.647 DEBUG [56983155-e23f-4f2d-b1dd-780ce1da41ce] 24036 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:38:41.649 DEBUG [56983155-e23f-4f2d-b1dd-780ce1da41ce] 24036 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:38:41.650  INFO [56983155-e23f-4f2d-b1dd-780ce1da41ce] 24036 --- [nio-8080-exec-5] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 20:38:41.650  INFO [56983155-e23f-4f2d-b1dd-780ce1da41ce] 24036 --- [nio-8080-exec-5] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 20:38:41.670 DEBUG [0de9b249-1ba8-4042-9065-b160bcf7c3d9] 24036 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 20:38:41.671 DEBUG [0de9b249-1ba8-4042-9065-b160bcf7c3d9] 24036 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 20:38:41.672  INFO [0de9b249-1ba8-4042-9065-b160bcf7c3d9] 24036 --- [nio-8080-exec-4] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 20:38:41.696  INFO [56983155-e23f-4f2d-b1dd-780ce1da41ce] 24036 --- [nio-8080-exec-5] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 20:38:41.697 DEBUG [56983155-e23f-4f2d-b1dd-780ce1da41ce] 24036 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:38:41.826  INFO [0de9b249-1ba8-4042-9065-b160bcf7c3d9] 24036 --- [nio-8080-exec-4] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 20:38:41.828 DEBUG [0de9b249-1ba8-4042-9065-b160bcf7c3d9] 24036 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:38:41.834 DEBUG [f9303104-6981-4c09-bdb1-0c7347683c76] 24036 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 20:38:41.835 DEBUG [f9303104-6981-4c09-bdb1-0c7347683c76] 24036 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 20:38:41.836 DEBUG [ec2a68ea-9e0c-4db0-89d6-902bf2f67f43] 24036 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:38:41.836  INFO [f9303104-6981-4c09-bdb1-0c7347683c76] 24036 --- [nio-8080-exec-6] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 20:38:41.836 DEBUG [ec2a68ea-9e0c-4db0-89d6-902bf2f67f43] 24036 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:38:41.837  INFO [ec2a68ea-9e0c-4db0-89d6-902bf2f67f43] 24036 --- [nio-8080-exec-9] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 20:38:41.871  INFO [f9303104-6981-4c09-bdb1-0c7347683c76] 24036 --- [nio-8080-exec-6] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 20:38:41.873 DEBUG [f9303104-6981-4c09-bdb1-0c7347683c76] 24036 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:38:41.998  INFO [ec2a68ea-9e0c-4db0-89d6-902bf2f67f43] 24036 --- [nio-8080-exec-9] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 20:38:42.000 DEBUG [ec2a68ea-9e0c-4db0-89d6-902bf2f67f43] 24036 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:38:42.006 DEBUG [b6942e27-d146-44c7-b690-ccdfbb106e20] 24036 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:38:42.007 DEBUG [b6942e27-d146-44c7-b690-ccdfbb106e20] 24036 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:38:42.008  INFO [b6942e27-d146-44c7-b690-ccdfbb106e20] 24036 --- [nio-8080-exec-8] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 20:38:42.047  INFO [b6942e27-d146-44c7-b690-ccdfbb106e20] 24036 --- [nio-8080-exec-8] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 20:38:42.049 DEBUG [b6942e27-d146-44c7-b690-ccdfbb106e20] 24036 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:38:48.031 DEBUG [d208cd7e-72f7-497b-a29d-d1f79cd3ae04] 24036 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:38:48.298 DEBUG [d208cd7e-72f7-497b-a29d-d1f79cd3ae04] 24036 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:38:48.301 DEBUG [d208cd7e-72f7-497b-a29d-d1f79cd3ae04] 24036 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:38:48.301  INFO [d208cd7e-72f7-497b-a29d-d1f79cd3ae04] 24036 --- [nio-8080-exec-1] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:38:48.302  INFO [d208cd7e-72f7-497b-a29d-d1f79cd3ae04] 24036 --- [nio-8080-exec-1] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:38:48.366 DEBUG [8ad53272-9620-4565-a79a-24d04848572f] 24036 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:38:48.548 DEBUG [8ad53272-9620-4565-a79a-24d04848572f] 24036 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:38:48.551 DEBUG [8ad53272-9620-4565-a79a-24d04848572f] 24036 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:38:48.552  INFO [8ad53272-9620-4565-a79a-24d04848572f] 24036 --- [io-8080-exec-10] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:38:48.552  INFO [8ad53272-9620-4565-a79a-24d04848572f] 24036 --- [io-8080-exec-10] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:38:48.730 DEBUG [6ca66c11-7551-4adb-9ceb-5bd2257b5e4f] 24036 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:38:48.881 DEBUG [6ca66c11-7551-4adb-9ceb-5bd2257b5e4f] 24036 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:38:48.884 DEBUG [6ca66c11-7551-4adb-9ceb-5bd2257b5e4f] 24036 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:38:48.885  INFO [6ca66c11-7551-4adb-9ceb-5bd2257b5e4f] 24036 --- [nio-8080-exec-7] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:38:48.885  INFO [6ca66c11-7551-4adb-9ceb-5bd2257b5e4f] 24036 --- [nio-8080-exec-7] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:38:50.542 DEBUG [bdffbaf1-fb6c-4e00-bd22-448243650604] 24036 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /api/cart/add
2025-06-29 20:38:50.652 DEBUG [bdffbaf1-fb6c-4e00-bd22-448243650604] 24036 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:38:50.654 DEBUG [bdffbaf1-fb6c-4e00-bd22-448243650604] 24036 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured POST /api/cart/add
2025-06-29 20:38:50.771  INFO [bdffbaf1-fb6c-4e00-bd22-448243650604] 24036 --- [nio-8080-exec-5] o.e.x.controllers.CartController         : User ****@****.*** request to add flight ID 16 to persistent cart
2025-06-29 20:38:50.775  INFO [bdffbaf1-fb6c-4e00-bd22-448243650604] 24036 --- [nio-8080-exec-5] o.e.x.controllers.CartController         : AddToCart request: flightId=16, seatNumber=null, seatType=null, deferSeat=false, randomSeat=true
2025-06-29 20:38:50.780  INFO [bdffbaf1-fb6c-4e00-bd22-448243650604] 24036 --- [nio-8080-exec-5] o.e.xlr8travel.services.CartServiceImpl  : Added new flight ID 16 to cart for user ****@****.***
2025-06-29 20:38:50.801  INFO [bdffbaf1-fb6c-4e00-bd22-448243650604] 24036 --- [nio-8080-exec-5] o.e.x.controllers.CartController         : Flight ID 16 added/incremented in persistent cart for user ****@****.***.
2025-06-29 20:38:50.814 DEBUG [7c7702ee-ea77-4140-b91f-1db776545826] 24036 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:38:50.931 DEBUG [7c7702ee-ea77-4140-b91f-1db776545826] 24036 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:38:50.933 DEBUG [7c7702ee-ea77-4140-b91f-1db776545826] 24036 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:38:50.934  INFO [7c7702ee-ea77-4140-b91f-1db776545826] 24036 --- [nio-8080-exec-4] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:38:51.046  INFO [7c7702ee-ea77-4140-b91f-1db776545826] 24036 --- [nio-8080-exec-4] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 20:38:51.269 DEBUG [feecc8be-0e41-4461-bca3-d551b1a77091] 24036 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:38:51.384 DEBUG [feecc8be-0e41-4461-bca3-d551b1a77091] 24036 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:38:51.386 DEBUG [feecc8be-0e41-4461-bca3-d551b1a77091] 24036 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:38:51.387  INFO [feecc8be-0e41-4461-bca3-d551b1a77091] 24036 --- [nio-8080-exec-6] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:38:51.512  INFO [feecc8be-0e41-4461-bca3-d551b1a77091] 24036 --- [nio-8080-exec-6] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 20:38:51.521 DEBUG [d2c2842d-7d1b-41d1-b5eb-901c84f27d5f] 24036 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:38:51.633 DEBUG [d2c2842d-7d1b-41d1-b5eb-901c84f27d5f] 24036 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:38:51.634 DEBUG [d2c2842d-7d1b-41d1-b5eb-901c84f27d5f] 24036 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:38:51.635  INFO [d2c2842d-7d1b-41d1-b5eb-901c84f27d5f] 24036 --- [nio-8080-exec-9] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:38:51.745  INFO [d2c2842d-7d1b-41d1-b5eb-901c84f27d5f] 24036 --- [nio-8080-exec-9] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 20:38:53.273 DEBUG [9814fd7c-a062-4909-a2cc-add2bf4a1ecb] 24036 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:38:53.380 DEBUG [9814fd7c-a062-4909-a2cc-add2bf4a1ecb] 24036 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:38:53.382 DEBUG [9814fd7c-a062-4909-a2cc-add2bf4a1ecb] 24036 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:38:53.383  INFO [9814fd7c-a062-4909-a2cc-add2bf4a1ecb] 24036 --- [nio-8080-exec-8] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:38:53.492  INFO [9814fd7c-a062-4909-a2cc-add2bf4a1ecb] 24036 --- [nio-8080-exec-8] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 20:38:53.502 DEBUG [dc3f9278-fca7-4a54-a3c1-5a00b82cb44b] 24036 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:38:53.642 DEBUG [dc3f9278-fca7-4a54-a3c1-5a00b82cb44b] 24036 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:38:53.645 DEBUG [dc3f9278-fca7-4a54-a3c1-5a00b82cb44b] 24036 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:38:53.645  INFO [dc3f9278-fca7-4a54-a3c1-5a00b82cb44b] 24036 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:38:53.806  INFO [dc3f9278-fca7-4a54-a3c1-5a00b82cb44b] 24036 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 20:38:59.828 DEBUG [00b80646-68ab-4038-9f48-9fc2c777b342] 24036 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing POST /api/checkout/create-payment-intent
2025-06-29 20:38:59.829 DEBUG [00b80646-68ab-4038-9f48-9fc2c777b342] 24036 --- [io-8080-exec-10] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 20:38:59.830 DEBUG [00b80646-68ab-4038-9f48-9fc2c777b342] 24036 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured POST /api/checkout/create-payment-intent
2025-06-29 20:38:59.831  INFO [00b80646-68ab-4038-9f48-9fc2c777b342] 24036 --- [io-8080-exec-10] o.e.x.controllers.PaymentController      : Creating payment intent for amount: 18995 ron
2025-06-29 20:39:00.315  INFO [00b80646-68ab-4038-9f48-9fc2c777b342] 24036 --- [io-8080-exec-10] o.e.x.controllers.PaymentController      : Payment intent created successfully: pi_3RfPBwGf8s1WZJnq11xa7B8P
2025-06-29 20:39:01.706 DEBUG [3d21be9e-6138-4869-8b37-ba7196e5b429] 24036 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/checkout/confirm
2025-06-29 20:39:01.796 DEBUG [3d21be9e-6138-4869-8b37-ba7196e5b429] 24036 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:39:01.797 DEBUG [3d21be9e-6138-4869-8b37-ba7196e5b429] 24036 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/checkout/confirm
2025-06-29 20:39:01.798  INFO [3d21be9e-6138-4869-8b37-ba7196e5b429] 24036 --- [nio-8080-exec-7] o.e.x.controllers.CheckoutController     : Received purchase confirmation request.
2025-06-29 20:39:01.886  INFO [3d21be9e-6138-4869-8b37-ba7196e5b429] 24036 --- [nio-8080-exec-7] o.e.x.controllers.CheckoutController     : Processing purchase for user: ****@****.***
2025-06-29 20:39:01.895  INFO [3d21be9e-6138-4869-8b37-ba7196e5b429] 24036 --- [nio-8080-exec-7] o.e.x.controllers.CheckoutController     : User ****@****.*** persistent cart has 1 items.
2025-06-29 20:39:01.896  WARN [3d21be9e-6138-4869-8b37-ba7196e5b429] 24036 --- [nio-8080-exec-7] o.e.x.controllers.CheckoutController     : !!! SIMULATING successful payment processing for user ****@****.*** !!!
2025-06-29 20:39:01.896  INFO [3d21be9e-6138-4869-8b37-ba7196e5b429] 24036 --- [nio-8080-exec-7] o.e.x.services.OrderServiceImpl          : Creating order from persistent cart for user: ****@****.***
2025-06-29 20:39:01.900  INFO [3d21be9e-6138-4869-8b37-ba7196e5b429] 24036 --- [nio-8080-exec-7] o.e.x.services.OrderServiceImpl          : Order 3 created for user ****@****.***, status: PENDING_PAYMENT. Total: 37.99
2025-06-29 20:39:01.901  INFO [3d21be9e-6138-4869-8b37-ba7196e5b429] 24036 --- [nio-8080-exec-7] o.e.x.services.OrderServiceImpl          : Created ticket with random seat allocation (free) for flight XT-OTP-CDG-2 for user ****@****.***
2025-06-29 20:39:01.901  INFO [3d21be9e-6138-4869-8b37-ba7196e5b429] 24036 --- [nio-8080-exec-7] o.e.x.services.OrderServiceImpl          : Ticket has baggage type: BAGGAGE_TYPE_WEIGHT_CARRY_ON_0
2025-06-29 20:39:03.088  INFO [3d21be9e-6138-4869-8b37-ba7196e5b429] 24036 --- [nio-8080-exec-7] o.e.x.services.EmailServiceImpl          : Purchase confirmation email sent to ****@****.***
2025-06-29 20:39:03.089  INFO [3d21be9e-6138-4869-8b37-ba7196e5b429] 24036 --- [nio-8080-exec-7] o.e.x.services.OrderServiceImpl          : Purchase confirmation email sent to user: ****@****.***
2025-06-29 20:39:03.103  INFO [3d21be9e-6138-4869-8b37-ba7196e5b429] 24036 --- [nio-8080-exec-7] o.e.x.controllers.CheckoutController     : Order successfully created for user ****@****.***. Confirmation: 3
2025-06-29 20:39:03.109  INFO [3d21be9e-6138-4869-8b37-ba7196e5b429] 24036 --- [nio-8080-exec-7] o.e.xlr8travel.services.CartServiceImpl  : Clearing 1 items from cart for user ****@****.***
2025-06-29 20:39:03.126  INFO [3d21be9e-6138-4869-8b37-ba7196e5b429] 24036 --- [nio-8080-exec-7] o.e.x.controllers.CheckoutController     : Persistent cart cleared for user ****@****.***.
2025-06-29 20:39:03.136 DEBUG [e8e5693c-f268-4991-81e0-20c1d115c9ae] 24036 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing DELETE /api/cart/remove/16
2025-06-29 20:39:03.228 DEBUG [e8e5693c-f268-4991-81e0-20c1d115c9ae] 24036 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:39:03.229 DEBUG [e8e5693c-f268-4991-81e0-20c1d115c9ae] 24036 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured DELETE /api/cart/remove/16
2025-06-29 20:39:03.320  INFO [e8e5693c-f268-4991-81e0-20c1d115c9ae] 24036 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : User ****@****.*** request to remove flight ID 16 from persistent cart
2025-06-29 20:39:03.329  WARN [e8e5693c-f268-4991-81e0-20c1d115c9ae] 24036 --- [nio-8080-exec-3] o.e.xlr8travel.services.CartServiceImpl  : Attempted to remove flight ID 16 not found in cart for user ****@****.***
2025-06-29 20:39:03.331  WARN [e8e5693c-f268-4991-81e0-20c1d115c9ae] 24036 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : Attempted to remove flight ID 16 not found in persistent cart for user ****@****.***
2025-06-29 20:39:03.360 DEBUG [40016715-344d-406b-a5aa-eecc3e51a2e7] 24036 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:39:03.451 DEBUG [40016715-344d-406b-a5aa-eecc3e51a2e7] 24036 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:39:03.453 DEBUG [40016715-344d-406b-a5aa-eecc3e51a2e7] 24036 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:39:03.453  INFO [40016715-344d-406b-a5aa-eecc3e51a2e7] 24036 --- [nio-8080-exec-2] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:39:03.577  INFO [40016715-344d-406b-a5aa-eecc3e51a2e7] 24036 --- [nio-8080-exec-2] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 20:39:06.798 DEBUG [6b3b2e53-d0ca-4b60-97f5-87538040e36e] 24036 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 20:39:06.926 DEBUG [6b3b2e53-d0ca-4b60-97f5-87538040e36e] 24036 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:39:06.928 DEBUG [6b3b2e53-d0ca-4b60-97f5-87538040e36e] 24036 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 20:39:07.024  INFO [6b3b2e53-d0ca-4b60-97f5-87538040e36e] 24036 --- [nio-8080-exec-5] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 20:39:07.024  INFO [6b3b2e53-d0ca-4b60-97f5-87538040e36e] 24036 --- [nio-8080-exec-5] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 20:39:07.029  INFO [6b3b2e53-d0ca-4b60-97f5-87538040e36e] 24036 --- [nio-8080-exec-5] o.e.x.services.TicketServiceImpl         : Found 1 tickets eligible for check-in for user 4
2025-06-29 20:39:07.038 DEBUG [71742ea3-9bfe-47af-b271-a9301a1d316a] 24036 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 20:39:07.143 DEBUG [71742ea3-9bfe-47af-b271-a9301a1d316a] 24036 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:39:07.145 DEBUG [71742ea3-9bfe-47af-b271-a9301a1d316a] 24036 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 20:39:07.234  INFO [71742ea3-9bfe-47af-b271-a9301a1d316a] 24036 --- [nio-8080-exec-4] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 20:39:07.235  INFO [71742ea3-9bfe-47af-b271-a9301a1d316a] 24036 --- [nio-8080-exec-4] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 20:39:07.240  INFO [71742ea3-9bfe-47af-b271-a9301a1d316a] 24036 --- [nio-8080-exec-4] o.e.x.services.TicketServiceImpl         : Found 1 tickets eligible for check-in for user 4
2025-06-29 20:39:13.185 DEBUG [6869c4ff-8e9f-42f7-8d21-79c7a913446f] 24036 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/check-in/5/without-seat
2025-06-29 20:39:13.271 DEBUG [6869c4ff-8e9f-42f7-8d21-79c7a913446f] 24036 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:39:13.273 DEBUG [6869c4ff-8e9f-42f7-8d21-79c7a913446f] 24036 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/check-in/5/without-seat
2025-06-29 20:39:13.360  INFO [6869c4ff-8e9f-42f7-8d21-79c7a913446f] 24036 --- [nio-8080-exec-6] o.e.x.controllers.CheckinController      : Checking in ticket 5 without seat for user: ****@****.***
2025-06-29 20:39:13.364  INFO [6869c4ff-8e9f-42f7-8d21-79c7a913446f] 24036 --- [nio-8080-exec-6] o.e.x.services.TicketServiceImpl         : Checking in ticket 5 without seat selection
2025-06-29 20:39:13.364  INFO [6869c4ff-8e9f-42f7-8d21-79c7a913446f] 24036 --- [nio-8080-exec-6] o.e.x.services.TicketServiceImpl         : Allocating random seat for ticket 5
2025-06-29 20:39:13.364  INFO [6869c4ff-8e9f-42f7-8d21-79c7a913446f] 24036 --- [nio-8080-exec-6] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:39:13.368  INFO [6869c4ff-8e9f-42f7-8d21-79c7a913446f] 24036 --- [nio-8080-exec-6] o.e.x.services.TicketServiceImpl         : Randomly allocated seat 1A of type SEAT_TYPE_UPFRONT for ticket 5
2025-06-29 20:39:13.368  INFO [6869c4ff-8e9f-42f7-8d21-79c7a913446f] 24036 --- [nio-8080-exec-6] o.e.x.services.TicketServiceImpl         : Successfully checked in ticket 5 without seat selection
2025-06-29 20:36:51.489 DEBUG [123232e5-a287-4f29-b4b8-a08e4bf89b03] 24036 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/nearby?origin=OTP
2025-06-29 20:36:51.497 DEBUG [123232e5-a287-4f29-b4b8-a08e4bf89b03] 24036 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/nearby?origin=OTP
2025-06-29 20:36:51.508  INFO [123232e5-a287-4f29-b4b8-a08e4bf89b03] 24036 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Received request for nearby flights from origin: OTP, departureDate: null
2025-06-29 20:36:51.520  INFO [123232e5-a287-4f29-b4b8-a08e4bf89b03] 24036 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Using search date: 2025-06-29
2025-06-29 20:36:51.523  INFO [123232e5-a287-4f29-b4b8-a08e4bf89b03] 24036 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Cache key: OTP-2025-06-29
2025-06-29 20:36:51.524  INFO [123232e5-a287-4f29-b4b8-a08e4bf89b03] 24036 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Returning cached nearby flights for origin: OTP, found 6 flights
2025-06-29 20:36:51.528 DEBUG [123232e5-a287-4f29-b4b8-a08e4bf89b03] 24036 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:36:53.531 DEBUG [07140fd2-e330-4c0a-942a-2578b5b7068a] 24036 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-29 20:36:53.534 DEBUG [07140fd2-e330-4c0a-942a-2578b5b7068a] 24036 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-29 20:36:53.548  INFO [07140fd2-e330-4c0a-942a-2578b5b7068a] 24036 --- [nio-8080-exec-9] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris
2025-06-29 20:36:53.548  INFO [07140fd2-e330-4c0a-942a-2578b5b7068a] 24036 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-29 20:36:53.549  INFO [07140fd2-e330-4c0a-942a-2578b5b7068a] 24036 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-29 20:36:53.549 DEBUG [07140fd2-e330-4c0a-942a-2578b5b7068a] 24036 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-29).    For example, if today is 2025-06-29, a good departure date would be between 2025-07-06 and 2025-07-13, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris";
2025-06-29 20:36:53.553  INFO [07140fd2-e330-4c0a-942a-2578b5b7068a] 24036 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-29 20:36:53.553  INFO [07140fd2-e330-4c0a-942a-2578b5b7068a] 24036 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-29 20:36:53.553  INFO [07140fd2-e330-4c0a-942a-2578b5b7068a] 24036 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-29 20:36:53.554  INFO [07140fd2-e330-4c0a-942a-2578b5b7068a] 24036 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 20:36:53.554  INFO [07140fd2-e330-4c0a-942a-2578b5b7068a] 24036 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-29 20:36:53.557  INFO [07140fd2-e330-4c0a-942a-2578b5b7068a] 24036 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-29 20:36:53.557  INFO [07140fd2-e330-4c0a-942a-2578b5b7068a] 24036 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-29 20:36:53.558  INFO [07140fd2-e330-4c0a-942a-2578b5b7068a] 24036 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-29 20:36:53.559  INFO [07140fd2-e330-4c0a-942a-2578b5b7068a] 24036 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-29 20:36:55.520  INFO [07140fd2-e330-4c0a-942a-2578b5b7068a] 24036 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-29 20:36:55.521  INFO [07140fd2-e330-4c0a-942a-2578b5b7068a] 24036 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Response length: 195 characters
2025-06-29 20:36:55.521 DEBUG [07140fd2-e330-4c0a-942a-2578b5b7068a] 24036 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-06",
  "returnDate": "2025-07-08",
  "tripType": "roundTrip",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-29 20:36:55.522 DEBUG [07140fd2-e330-4c0a-942a-2578b5b7068a] 24036 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-29 20:36:55.522 DEBUG [07140fd2-e330-4c0a-942a-2578b5b7068a] 24036 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-29 20:36:55.523 DEBUG [07140fd2-e330-4c0a-942a-2578b5b7068a] 24036 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-29 20:36:55.523 DEBUG [07140fd2-e330-4c0a-942a-2578b5b7068a] 24036 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 20:36:55.523  INFO [07140fd2-e330-4c0a-942a-2578b5b7068a] 24036 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 20:36:55.523  INFO [07140fd2-e330-4c0a-942a-2578b5b7068a] 24036 --- [nio-8080-exec-9] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-06, returnDate=2025-07-08, tripType=roundTrip, adults=1, children=0, infants=0
2025-06-29 20:36:55.524  INFO [07140fd2-e330-4c0a-942a-2578b5b7068a] 24036 --- [nio-8080-exec-9] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-29 20:36:55.525 DEBUG [07140fd2-e330-4c0a-942a-2578b5b7068a] 24036 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:36:57.602 DEBUG [b5f38944-6322-4e89-9ce4-89ce6db7061f] 24036 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-29 20:36:57.604 DEBUG [b5f38944-6322-4e89-9ce4-89ce6db7061f] 24036 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-29 20:36:57.607  INFO [b5f38944-6322-4e89-9ce4-89ce6db7061f] 24036 --- [nio-8080-exec-8] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris one way
2025-06-29 20:36:57.607  INFO [b5f38944-6322-4e89-9ce4-89ce6db7061f] 24036 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-29 20:36:57.607  INFO [b5f38944-6322-4e89-9ce4-89ce6db7061f] 24036 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-29 20:36:57.608 DEBUG [b5f38944-6322-4e89-9ce4-89ce6db7061f] 24036 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-29).    For example, if today is 2025-06-29, a good departure date would be between 2025-07-06 and 2025-07-13, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris one way";
2025-06-29 20:36:57.611  INFO [b5f38944-6322-4e89-9ce4-89ce6db7061f] 24036 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-29 20:36:57.612  INFO [b5f38944-6322-4e89-9ce4-89ce6db7061f] 24036 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-29 20:36:57.612  INFO [b5f38944-6322-4e89-9ce4-89ce6db7061f] 24036 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-29 20:36:57.612  INFO [b5f38944-6322-4e89-9ce4-89ce6db7061f] 24036 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 20:36:57.613  INFO [b5f38944-6322-4e89-9ce4-89ce6db7061f] 24036 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-29 20:36:57.616  INFO [b5f38944-6322-4e89-9ce4-89ce6db7061f] 24036 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-29 20:36:57.616  INFO [b5f38944-6322-4e89-9ce4-89ce6db7061f] 24036 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-29 20:36:57.616  INFO [b5f38944-6322-4e89-9ce4-89ce6db7061f] 24036 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-29 20:36:57.617  INFO [b5f38944-6322-4e89-9ce4-89ce6db7061f] 24036 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-29 20:36:59.202  INFO [b5f38944-6322-4e89-9ce4-89ce6db7061f] 24036 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-29 20:36:59.202  INFO [b5f38944-6322-4e89-9ce4-89ce6db7061f] 24036 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Response length: 184 characters
2025-06-29 20:36:59.202 DEBUG [b5f38944-6322-4e89-9ce4-89ce6db7061f] 24036 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-06",
  "returnDate": null,
  "tripType": "oneWay",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-29 20:36:59.203 DEBUG [b5f38944-6322-4e89-9ce4-89ce6db7061f] 24036 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-29 20:36:59.203 DEBUG [b5f38944-6322-4e89-9ce4-89ce6db7061f] 24036 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-29 20:36:59.204 DEBUG [b5f38944-6322-4e89-9ce4-89ce6db7061f] 24036 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-29 20:36:59.204 DEBUG [b5f38944-6322-4e89-9ce4-89ce6db7061f] 24036 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 20:36:59.204  INFO [b5f38944-6322-4e89-9ce4-89ce6db7061f] 24036 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 20:36:59.204  INFO [b5f38944-6322-4e89-9ce4-89ce6db7061f] 24036 --- [nio-8080-exec-8] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-06, returnDate=null, tripType=oneWay, adults=1, children=0, infants=0
2025-06-29 20:36:59.205  INFO [b5f38944-6322-4e89-9ce4-89ce6db7061f] 24036 --- [nio-8080-exec-8] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-29 20:36:59.206 DEBUG [b5f38944-6322-4e89-9ce4-89ce6db7061f] 24036 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:37:01.081 DEBUG [b63600f9-24e7-4c82-b557-901dd63cc3fa] 24036 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me
2025-06-29 20:37:01.238 DEBUG [b63600f9-24e7-4c82-b557-901dd63cc3fa] 24036 --- [nio-8080-exec-1] o.s.s.core.session.SessionRegistryImpl   : Registering session 64FCC93603C0B3DFA876FE5C5208D2AA, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}])
2025-06-29 20:37:01.239 DEBUG [b63600f9-24e7-4c82-b557-901dd63cc3fa] 24036 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@1c39c12d]
2025-06-29 20:37:01.241 DEBUG [b63600f9-24e7-4c82-b557-901dd63cc3fa] 24036 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me
2025-06-29 20:37:01.241  INFO [b63600f9-24e7-4c82-b557-901dd63cc3fa] 24036 --- [nio-8080-exec-1] o.e.x.controllers.UserController         : Request received for current user details: ****@****.***
2025-06-29 20:37:01.364  INFO [b63600f9-24e7-4c82-b557-901dd63cc3fa] 24036 --- [nio-8080-exec-1] o.e.x.controllers.UserController         : Returning details for user: ****@****.***
2025-06-29 20:37:01.452 DEBUG [dc30eec6-8cb0-4582-8062-8c28ff80aaac] 24036 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 20:37:01.456 DEBUG [54afc2dc-78bd-4c23-99c9-89784dd1bf00] 24036 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:37:01.462 DEBUG [54afc2dc-78bd-4c23-99c9-89784dd1bf00] 24036 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:37:01.462 DEBUG [e127f106-06da-496e-83e1-eb517e45c397] 24036 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:37:01.466  INFO [54afc2dc-78bd-4c23-99c9-89784dd1bf00] 24036 --- [io-8080-exec-10] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 20:37:01.469  INFO [54afc2dc-78bd-4c23-99c9-89784dd1bf00] 24036 --- [io-8080-exec-10] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 20:37:01.584  INFO [54afc2dc-78bd-4c23-99c9-89784dd1bf00] 24036 --- [io-8080-exec-10] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 20:37:01.585 DEBUG [54afc2dc-78bd-4c23-99c9-89784dd1bf00] 24036 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:37:01.593 DEBUG [008cdb25-5b9e-4e3d-adac-d7f94f6a22d8] 24036 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:37:01.595 DEBUG [008cdb25-5b9e-4e3d-adac-d7f94f6a22d8] 24036 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:37:01.596  INFO [008cdb25-5b9e-4e3d-adac-d7f94f6a22d8] 24036 --- [nio-8080-exec-7] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 20:37:01.596  INFO [008cdb25-5b9e-4e3d-adac-d7f94f6a22d8] 24036 --- [nio-8080-exec-7] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 20:37:01.638 DEBUG [81708a76-738a-437c-9daf-107cd5b011ec] 24036 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 20:37:01.640 DEBUG [81708a76-738a-437c-9daf-107cd5b011ec] 24036 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 20:37:01.641  INFO [81708a76-738a-437c-9daf-107cd5b011ec] 24036 --- [nio-8080-exec-5] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 20:37:01.649 DEBUG [dc30eec6-8cb0-4582-8062-8c28ff80aaac] 24036 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:37:01.651 DEBUG [e127f106-06da-496e-83e1-eb517e45c397] 24036 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:37:01.652 DEBUG [dc30eec6-8cb0-4582-8062-8c28ff80aaac] 24036 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 20:37:01.653 DEBUG [e127f106-06da-496e-83e1-eb517e45c397] 24036 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:37:01.653  INFO [e127f106-06da-496e-83e1-eb517e45c397] 24036 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:37:01.658  INFO [008cdb25-5b9e-4e3d-adac-d7f94f6a22d8] 24036 --- [nio-8080-exec-7] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 20:37:01.660 DEBUG [008cdb25-5b9e-4e3d-adac-d7f94f6a22d8] 24036 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:37:01.750  WARN [dc30eec6-8cb0-4582-8062-8c28ff80aaac] 24036 --- [nio-8080-exec-2] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 20:37:01.751  WARN [dc30eec6-8cb0-4582-8062-8c28ff80aaac] 24036 --- [nio-8080-exec-2] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 20:37:01.756 DEBUG [b57d327b-bf94-4d02-a3e0-9a494e93e14a] 24036 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/user/me/avatar
2025-06-29 20:37:01.757  INFO [e127f106-06da-496e-83e1-eb517e45c397] 24036 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 20:37:01.782  INFO [81708a76-738a-437c-9daf-107cd5b011ec] 24036 --- [nio-8080-exec-5] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 20:37:01.784 DEBUG [81708a76-738a-437c-9daf-107cd5b011ec] 24036 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:37:01.789 DEBUG [358c9d0b-7257-4a3c-b280-dd4dfa1a7724] 24036 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 20:37:01.791 DEBUG [358c9d0b-7257-4a3c-b280-dd4dfa1a7724] 24036 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 20:37:01.791  INFO [358c9d0b-7257-4a3c-b280-dd4dfa1a7724] 24036 --- [nio-8080-exec-4] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 20:37:01.812 DEBUG [9035d5a1-73e3-42d1-9725-967d2a21d1e0] 24036 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:37:01.814 DEBUG [9035d5a1-73e3-42d1-9725-967d2a21d1e0] 24036 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:37:01.814  INFO [9035d5a1-73e3-42d1-9725-967d2a21d1e0] 24036 --- [nio-8080-exec-9] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 20:37:01.827  INFO [358c9d0b-7257-4a3c-b280-dd4dfa1a7724] 24036 --- [nio-8080-exec-4] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 20:37:01.828 DEBUG [358c9d0b-7257-4a3c-b280-dd4dfa1a7724] 24036 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:37:01.858 DEBUG [b57d327b-bf94-4d02-a3e0-9a494e93e14a] 24036 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:37:01.860 DEBUG [b57d327b-bf94-4d02-a3e0-9a494e93e14a] 24036 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/user/me/avatar
2025-06-29 20:37:01.975  WARN [b57d327b-bf94-4d02-a3e0-9a494e93e14a] 24036 --- [nio-8080-exec-6] o.e.x.config.GlobalExceptionHandler      : Response status exception: 404 NOT_FOUND "No avatar"
2025-06-29 20:37:01.977  WARN [b57d327b-bf94-4d02-a3e0-9a494e93e14a] 24036 --- [nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.server.ResponseStatusException: 404 NOT_FOUND "No avatar"]
2025-06-29 20:37:01.985  INFO [9035d5a1-73e3-42d1-9725-967d2a21d1e0] 24036 --- [nio-8080-exec-9] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 20:37:01.987 DEBUG [9035d5a1-73e3-42d1-9725-967d2a21d1e0] 24036 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:37:01.995 DEBUG [c8f9814b-847a-46e0-a40c-3280668a47e5] 24036 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:37:01.996 DEBUG [c8f9814b-847a-46e0-a40c-3280668a47e5] 24036 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:37:01.997  INFO [c8f9814b-847a-46e0-a40c-3280668a47e5] 24036 --- [nio-8080-exec-8] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 20:37:02.035  INFO [c8f9814b-847a-46e0-a40c-3280668a47e5] 24036 --- [nio-8080-exec-8] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 20:37:02.037 DEBUG [c8f9814b-847a-46e0-a40c-3280668a47e5] 24036 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:37:11.281 DEBUG [ef8698bc-6fd3-4b28-a8eb-6af1e3feb440] 24036 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:37:11.388 DEBUG [ef8698bc-6fd3-4b28-a8eb-6af1e3feb440] 24036 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:37:11.391 DEBUG [ef8698bc-6fd3-4b28-a8eb-6af1e3feb440] 24036 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:37:11.392  INFO [ef8698bc-6fd3-4b28-a8eb-6af1e3feb440] 24036 --- [nio-8080-exec-1] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:37:11.392  INFO [ef8698bc-6fd3-4b28-a8eb-6af1e3feb440] 24036 --- [nio-8080-exec-1] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:37:11.433 DEBUG [4d90726b-da89-45d6-8ae7-27b034a270d3] 24036 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:37:11.531 DEBUG [4d90726b-da89-45d6-8ae7-27b034a270d3] 24036 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:37:11.534 DEBUG [4d90726b-da89-45d6-8ae7-27b034a270d3] 24036 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:37:11.534  INFO [4d90726b-da89-45d6-8ae7-27b034a270d3] 24036 --- [io-8080-exec-10] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:37:11.535  INFO [4d90726b-da89-45d6-8ae7-27b034a270d3] 24036 --- [io-8080-exec-10] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:37:11.647 DEBUG [ba28bf91-7527-4771-b95c-2c3c52ed9c2e] 24036 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:37:11.741 DEBUG [ba28bf91-7527-4771-b95c-2c3c52ed9c2e] 24036 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:37:11.744 DEBUG [ba28bf91-7527-4771-b95c-2c3c52ed9c2e] 24036 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:37:11.745  INFO [ba28bf91-7527-4771-b95c-2c3c52ed9c2e] 24036 --- [nio-8080-exec-7] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:37:11.745  INFO [ba28bf91-7527-4771-b95c-2c3c52ed9c2e] 24036 --- [nio-8080-exec-7] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:37:17.587 DEBUG [a40b7ede-6c41-4cfc-8329-f4ae2591e261] 24036 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/cart/add
2025-06-29 20:37:17.678 DEBUG [a40b7ede-6c41-4cfc-8329-f4ae2591e261] 24036 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:37:17.680 DEBUG [a40b7ede-6c41-4cfc-8329-f4ae2591e261] 24036 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /api/cart/add
2025-06-29 20:37:17.773  INFO [a40b7ede-6c41-4cfc-8329-f4ae2591e261] 24036 --- [nio-8080-exec-2] o.e.x.controllers.CartController         : User ****@****.*** request to add flight ID 16 to persistent cart
2025-06-29 20:37:17.777  INFO [a40b7ede-6c41-4cfc-8329-f4ae2591e261] 24036 --- [nio-8080-exec-2] o.e.x.controllers.CartController         : AddToCart request: flightId=16, seatNumber=null, seatType=null, deferSeat=true, randomSeat=false
2025-06-29 20:37:17.782  INFO [a40b7ede-6c41-4cfc-8329-f4ae2591e261] 24036 --- [nio-8080-exec-2] o.e.xlr8travel.services.CartServiceImpl  : Added new flight ID 16 to cart for user ****@****.***
2025-06-29 20:37:17.799  INFO [a40b7ede-6c41-4cfc-8329-f4ae2591e261] 24036 --- [nio-8080-exec-2] o.e.x.controllers.CartController         : Flight ID 16 added/incremented in persistent cart for user ****@****.***.
2025-06-29 20:37:17.809 DEBUG [b6937b03-cab5-488b-b4b3-3c1672b2f4c2] 24036 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:37:17.919 DEBUG [b6937b03-cab5-488b-b4b3-3c1672b2f4c2] 24036 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:37:17.920 DEBUG [b6937b03-cab5-488b-b4b3-3c1672b2f4c2] 24036 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:37:17.920  INFO [b6937b03-cab5-488b-b4b3-3c1672b2f4c2] 24036 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:37:18.026  INFO [b6937b03-cab5-488b-b4b3-3c1672b2f4c2] 24036 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 20:37:18.310 DEBUG [ce4b3376-5748-4da8-936f-5569f7dcb4ce] 24036 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:37:18.420 DEBUG [ce4b3376-5748-4da8-936f-5569f7dcb4ce] 24036 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:37:18.421 DEBUG [ce4b3376-5748-4da8-936f-5569f7dcb4ce] 24036 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:37:18.422  INFO [ce4b3376-5748-4da8-936f-5569f7dcb4ce] 24036 --- [nio-8080-exec-5] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:37:18.530  INFO [ce4b3376-5748-4da8-936f-5569f7dcb4ce] 24036 --- [nio-8080-exec-5] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 20:37:18.537 DEBUG [8e95444d-709d-4743-aca2-1e3468898dff] 24036 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:37:18.634 DEBUG [8e95444d-709d-4743-aca2-1e3468898dff] 24036 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:37:18.635 DEBUG [8e95444d-709d-4743-aca2-1e3468898dff] 24036 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:37:18.636  INFO [8e95444d-709d-4743-aca2-1e3468898dff] 24036 --- [nio-8080-exec-4] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:37:18.736  INFO [8e95444d-709d-4743-aca2-1e3468898dff] 24036 --- [nio-8080-exec-4] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 20:37:20.815 DEBUG [db233e40-4fdd-4efe-b559-19d8e67875d2] 24036 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:37:20.993 DEBUG [db233e40-4fdd-4efe-b559-19d8e67875d2] 24036 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:37:20.995 DEBUG [db233e40-4fdd-4efe-b559-19d8e67875d2] 24036 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:37:20.995  INFO [db233e40-4fdd-4efe-b559-19d8e67875d2] 24036 --- [nio-8080-exec-6] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:37:21.126  INFO [db233e40-4fdd-4efe-b559-19d8e67875d2] 24036 --- [nio-8080-exec-6] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 20:37:21.135 DEBUG [01459d80-f0e2-4c83-9668-87c9db7e89b1] 24036 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:37:21.308 DEBUG [01459d80-f0e2-4c83-9668-87c9db7e89b1] 24036 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:37:21.310 DEBUG [01459d80-f0e2-4c83-9668-87c9db7e89b1] 24036 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:37:21.310  INFO [01459d80-f0e2-4c83-9668-87c9db7e89b1] 24036 --- [nio-8080-exec-9] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:37:24.082  INFO [01459d80-f0e2-4c83-9668-87c9db7e89b1] 24036 --- [nio-8080-exec-9] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 20:37:30.322 DEBUG [016bd476-ca0c-45c3-afe6-08e24f164b35] 24036 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /api/checkout/create-payment-intent
2025-06-29 20:37:30.323 DEBUG [016bd476-ca0c-45c3-afe6-08e24f164b35] 24036 --- [nio-8080-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 20:37:30.324 DEBUG [016bd476-ca0c-45c3-afe6-08e24f164b35] 24036 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured POST /api/checkout/create-payment-intent
2025-06-29 20:37:30.325  INFO [016bd476-ca0c-45c3-afe6-08e24f164b35] 24036 --- [nio-8080-exec-8] o.e.x.controllers.PaymentController      : Creating payment intent for amount: 33995 ron
2025-06-29 20:37:30.818  INFO [016bd476-ca0c-45c3-afe6-08e24f164b35] 24036 --- [nio-8080-exec-8] o.e.x.controllers.PaymentController      : Payment intent created successfully: pi_3RfPAVGf8s1WZJnq1j2yTbY7
2025-06-29 20:37:31.992 DEBUG [35d397b0-3f56-4ee5-9df1-1eb6842780de] 24036 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/checkout/confirm
2025-06-29 20:37:32.107 DEBUG [35d397b0-3f56-4ee5-9df1-1eb6842780de] 24036 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:37:32.108 DEBUG [35d397b0-3f56-4ee5-9df1-1eb6842780de] 24036 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/checkout/confirm
2025-06-29 20:37:32.109  INFO [35d397b0-3f56-4ee5-9df1-1eb6842780de] 24036 --- [nio-8080-exec-1] o.e.x.controllers.CheckoutController     : Received purchase confirmation request.
2025-06-29 20:37:32.213  INFO [35d397b0-3f56-4ee5-9df1-1eb6842780de] 24036 --- [nio-8080-exec-1] o.e.x.controllers.CheckoutController     : Processing purchase for user: ****@****.***
2025-06-29 20:37:32.221  INFO [35d397b0-3f56-4ee5-9df1-1eb6842780de] 24036 --- [nio-8080-exec-1] o.e.x.controllers.CheckoutController     : User ****@****.*** persistent cart has 1 items.
2025-06-29 20:37:32.222  WARN [35d397b0-3f56-4ee5-9df1-1eb6842780de] 24036 --- [nio-8080-exec-1] o.e.x.controllers.CheckoutController     : !!! SIMULATING successful payment processing for user ****@****.*** !!!
2025-06-29 20:37:32.223  INFO [35d397b0-3f56-4ee5-9df1-1eb6842780de] 24036 --- [nio-8080-exec-1] o.e.x.services.OrderServiceImpl          : Creating order from persistent cart for user: ****@****.***
2025-06-29 20:37:32.227  INFO [35d397b0-3f56-4ee5-9df1-1eb6842780de] 24036 --- [nio-8080-exec-1] o.e.x.services.OrderServiceImpl          : Order 2 created for user ****@****.***, status: PENDING_PAYMENT. Total: 37.99
2025-06-29 20:37:32.227  INFO [35d397b0-3f56-4ee5-9df1-1eb6842780de] 24036 --- [nio-8080-exec-1] o.e.x.services.OrderServiceImpl          : Created ticket with deferred seat selection for flight XT-OTP-CDG-2 for user ****@****.***
2025-06-29 20:37:32.227  INFO [35d397b0-3f56-4ee5-9df1-1eb6842780de] 24036 --- [nio-8080-exec-1] o.e.x.services.OrderServiceImpl          : Ticket has baggage type: BAGGAGE_TYPE_WEIGHT_CHECKED_10
2025-06-29 20:37:33.299  INFO [35d397b0-3f56-4ee5-9df1-1eb6842780de] 24036 --- [nio-8080-exec-1] o.e.x.services.EmailServiceImpl          : Purchase confirmation email sent to ****@****.***
2025-06-29 20:37:33.300  INFO [35d397b0-3f56-4ee5-9df1-1eb6842780de] 24036 --- [nio-8080-exec-1] o.e.x.services.OrderServiceImpl          : Purchase confirmation email sent to user: ****@****.***
2025-06-29 20:37:33.315  INFO [35d397b0-3f56-4ee5-9df1-1eb6842780de] 24036 --- [nio-8080-exec-1] o.e.x.controllers.CheckoutController     : Order successfully created for user ****@****.***. Confirmation: 2
2025-06-29 20:37:33.320  INFO [35d397b0-3f56-4ee5-9df1-1eb6842780de] 24036 --- [nio-8080-exec-1] o.e.xlr8travel.services.CartServiceImpl  : Clearing 1 items from cart for user ****@****.***
2025-06-29 20:37:33.338  INFO [35d397b0-3f56-4ee5-9df1-1eb6842780de] 24036 --- [nio-8080-exec-1] o.e.x.controllers.CheckoutController     : Persistent cart cleared for user ****@****.***.
2025-06-29 20:37:33.348 DEBUG [26b76438-6f59-495f-9bb1-65c1dd40aa97] 24036 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing DELETE /api/cart/remove/16
2025-06-29 20:37:33.452 DEBUG [26b76438-6f59-495f-9bb1-65c1dd40aa97] 24036 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:37:33.454 DEBUG [26b76438-6f59-495f-9bb1-65c1dd40aa97] 24036 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured DELETE /api/cart/remove/16
2025-06-29 20:37:33.544  INFO [26b76438-6f59-495f-9bb1-65c1dd40aa97] 24036 --- [io-8080-exec-10] o.e.x.controllers.CartController         : User ****@****.*** request to remove flight ID 16 from persistent cart
2025-06-29 20:37:33.553  WARN [26b76438-6f59-495f-9bb1-65c1dd40aa97] 24036 --- [io-8080-exec-10] o.e.xlr8travel.services.CartServiceImpl  : Attempted to remove flight ID 16 not found in cart for user ****@****.***
2025-06-29 20:37:33.555  WARN [26b76438-6f59-495f-9bb1-65c1dd40aa97] 24036 --- [io-8080-exec-10] o.e.x.controllers.CartController         : Attempted to remove flight ID 16 not found in persistent cart for user ****@****.***
2025-06-29 20:37:33.566 DEBUG [482daaec-41f5-49c4-bca4-d883fd37ea9f] 24036 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:37:33.678 DEBUG [482daaec-41f5-49c4-bca4-d883fd37ea9f] 24036 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:37:33.680 DEBUG [482daaec-41f5-49c4-bca4-d883fd37ea9f] 24036 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:37:33.680  INFO [482daaec-41f5-49c4-bca4-d883fd37ea9f] 24036 --- [nio-8080-exec-7] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:37:33.778  INFO [482daaec-41f5-49c4-bca4-d883fd37ea9f] 24036 --- [nio-8080-exec-7] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 20:37:35.773 DEBUG [f25be237-1dc6-409b-855b-816bbfb45b72] 24036 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 20:37:35.906 DEBUG [f25be237-1dc6-409b-855b-816bbfb45b72] 24036 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:37:35.908 DEBUG [f25be237-1dc6-409b-855b-816bbfb45b72] 24036 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 20:37:36.004  INFO [f25be237-1dc6-409b-855b-816bbfb45b72] 24036 --- [nio-8080-exec-2] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 20:37:36.005  INFO [f25be237-1dc6-409b-855b-816bbfb45b72] 24036 --- [nio-8080-exec-2] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 20:37:36.010  INFO [f25be237-1dc6-409b-855b-816bbfb45b72] 24036 --- [nio-8080-exec-2] o.e.x.services.TicketServiceImpl         : Found 1 tickets eligible for check-in for user 4
2025-06-29 20:37:36.017 DEBUG [9184f479-3116-4630-8435-278c066adce2] 24036 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 20:37:36.117 DEBUG [9184f479-3116-4630-8435-278c066adce2] 24036 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:37:36.119 DEBUG [9184f479-3116-4630-8435-278c066adce2] 24036 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 20:37:36.213  INFO [9184f479-3116-4630-8435-278c066adce2] 24036 --- [nio-8080-exec-3] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 20:37:36.213  INFO [9184f479-3116-4630-8435-278c066adce2] 24036 --- [nio-8080-exec-3] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 20:37:36.218  INFO [9184f479-3116-4630-8435-278c066adce2] 24036 --- [nio-8080-exec-3] o.e.x.services.TicketServiceImpl         : Found 1 tickets eligible for check-in for user 4
2025-06-29 20:37:37.531 DEBUG [10bcee5e-f065-46a0-a01d-18ad4d0da04f] 24036 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:37:37.635 DEBUG [10bcee5e-f065-46a0-a01d-18ad4d0da04f] 24036 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:37:37.638 DEBUG [10bcee5e-f065-46a0-a01d-18ad4d0da04f] 24036 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:37:37.639  INFO [10bcee5e-f065-46a0-a01d-18ad4d0da04f] 24036 --- [nio-8080-exec-5] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:37:37.639  INFO [10bcee5e-f065-46a0-a01d-18ad4d0da04f] 24036 --- [nio-8080-exec-5] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:37:37.681 DEBUG [fac7420f-9e11-4113-82f1-053708a807d0] 24036 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:37:37.781 DEBUG [fac7420f-9e11-4113-82f1-053708a807d0] 24036 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:37:37.784 DEBUG [fac7420f-9e11-4113-82f1-053708a807d0] 24036 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:37:37.785  INFO [fac7420f-9e11-4113-82f1-053708a807d0] 24036 --- [nio-8080-exec-4] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:37:37.785  INFO [fac7420f-9e11-4113-82f1-053708a807d0] 24036 --- [nio-8080-exec-4] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:37:40.696 DEBUG [aa4680ab-75a1-450c-8fb7-6eb01e8de94c] 24036 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/check-in/4/with-seat
2025-06-29 20:37:40.791 DEBUG [aa4680ab-75a1-450c-8fb7-6eb01e8de94c] 24036 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:37:40.793 DEBUG [aa4680ab-75a1-450c-8fb7-6eb01e8de94c] 24036 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/check-in/4/with-seat
2025-06-29 20:37:40.889  INFO [aa4680ab-75a1-450c-8fb7-6eb01e8de94c] 24036 --- [nio-8080-exec-6] o.e.x.controllers.CheckinController      : Checking in ticket 4 with seat for user: ****@****.***
2025-06-29 20:37:40.893  INFO [aa4680ab-75a1-450c-8fb7-6eb01e8de94c] 24036 --- [nio-8080-exec-6] o.e.x.services.TicketServiceImpl         : Checking in ticket 4 with seat 1E of type SEAT_TYPE_UPFRONT
2025-06-29 20:37:40.894  INFO [aa4680ab-75a1-450c-8fb7-6eb01e8de94c] 24036 --- [nio-8080-exec-6] o.e.x.services.TicketServiceImpl         : Checking if seat 1E is booked for flight 16
2025-06-29 20:37:40.898  INFO [aa4680ab-75a1-450c-8fb7-6eb01e8de94c] 24036 --- [nio-8080-exec-6] o.e.x.services.TicketServiceImpl         : Successfully checked in ticket 4 with seat 1E
2025-06-29 20:37:43.658 DEBUG [e1fd1856-fec4-45b9-82a9-6df37d09d017] 24036 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/check-in/boarding-passes
2025-06-29 20:37:43.658 DEBUG [e8c1024f-ac0b-43a3-92bd-94fa862201cb] 24036 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/check-in/boarding-passes
2025-06-29 20:37:43.664 DEBUG [f05b0f30-5014-471e-b45f-90485985d99e] 24036 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/boarding-passes
2025-06-29 20:37:43.777 DEBUG [f05b0f30-5014-471e-b45f-90485985d99e] 24036 --- [nio-8080-exec-1] o.s.s.core.session.SessionRegistryImpl   : Registering session C570B690B8CF16579D37AFF8E172AF52, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}])
2025-06-29 20:37:43.778 DEBUG [f05b0f30-5014-471e-b45f-90485985d99e] 24036 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@46b3c448]
2025-06-29 20:37:43.779 DEBUG [f05b0f30-5014-471e-b45f-90485985d99e] 24036 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/boarding-passes
2025-06-29 20:37:43.874  INFO [f05b0f30-5014-471e-b45f-90485985d99e] 24036 --- [nio-8080-exec-1] o.e.x.services.TicketServiceImpl         : Finding checked-in tickets for user 4
2025-06-29 20:37:43.880 DEBUG [6a3ecdeb-5caf-4eaa-8cfc-f8da086d61f5] 24036 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/boarding-passes
2025-06-29 20:37:43.981 DEBUG [6a3ecdeb-5caf-4eaa-8cfc-f8da086d61f5] 24036 --- [io-8080-exec-10] o.s.s.core.session.SessionRegistryImpl   : Registering session 26CE7F37D954DE491FFE279A416A5D16, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}])
2025-06-29 20:37:43.982 DEBUG [6a3ecdeb-5caf-4eaa-8cfc-f8da086d61f5] 24036 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@708626da]
2025-06-29 20:37:43.984 DEBUG [6a3ecdeb-5caf-4eaa-8cfc-f8da086d61f5] 24036 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/boarding-passes
2025-06-29 20:37:44.077  INFO [6a3ecdeb-5caf-4eaa-8cfc-f8da086d61f5] 24036 --- [io-8080-exec-10] o.e.x.services.TicketServiceImpl         : Finding checked-in tickets for user 4
2025-06-29 20:38:19.556 DEBUG [5dddde5e-3c14-4552-9473-56bb29e5503f] 24036 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/nearby?origin=OTP
2025-06-29 20:38:19.557 DEBUG [5dddde5e-3c14-4552-9473-56bb29e5503f] 24036 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/nearby?origin=OTP
2025-06-29 20:38:19.558  INFO [5dddde5e-3c14-4552-9473-56bb29e5503f] 24036 --- [nio-8080-exec-7] o.e.x.controllers.FlightController       : Received request for nearby flights from origin: OTP, departureDate: null
2025-06-29 20:38:19.558  INFO [5dddde5e-3c14-4552-9473-56bb29e5503f] 24036 --- [nio-8080-exec-7] o.e.x.controllers.FlightController       : Using search date: 2025-06-29
2025-06-29 20:38:19.559  INFO [5dddde5e-3c14-4552-9473-56bb29e5503f] 24036 --- [nio-8080-exec-7] o.e.x.controllers.FlightController       : Cache key: OTP-2025-06-29
2025-06-29 20:38:19.559  INFO [5dddde5e-3c14-4552-9473-56bb29e5503f] 24036 --- [nio-8080-exec-7] o.e.x.controllers.FlightController       : Returning cached nearby flights for origin: OTP, found 6 flights
2025-06-29 20:38:19.560 DEBUG [5dddde5e-3c14-4552-9473-56bb29e5503f] 24036 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:38:40.061 DEBUG [41c1c566-b634-4956-9590-d8274b5f9b60] 24036 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/check-in/boarding-passes
2025-06-29 20:38:40.062 DEBUG [72797b79-89c7-44c1-8dbc-d68ac08b548d] 24036 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/check-in/boarding-passes
2025-06-29 20:38:40.065 DEBUG [26dca3ad-e5e1-4020-9d1b-04f77598a146] 24036 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/boarding-passes
2025-06-29 20:38:40.162 DEBUG [903c0295-5067-4654-98c2-abc96727087b] 24036 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 20:38:40.196 DEBUG [26dca3ad-e5e1-4020-9d1b-04f77598a146] 24036 --- [nio-8080-exec-4] o.s.s.core.session.SessionRegistryImpl   : Registering session 644482EEF89C750B9B2AC9C2B4CCCF84, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}])
2025-06-29 20:38:40.196 DEBUG [26dca3ad-e5e1-4020-9d1b-04f77598a146] 24036 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@5ae5ecd6]
2025-06-29 20:38:40.198 DEBUG [26dca3ad-e5e1-4020-9d1b-04f77598a146] 24036 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/boarding-passes
2025-06-29 20:38:40.270 DEBUG [903c0295-5067-4654-98c2-abc96727087b] 24036 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CONFIRMED'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:38:40.273 DEBUG [903c0295-5067-4654-98c2-abc96727087b] 24036 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 20:38:40.297  INFO [26dca3ad-e5e1-4020-9d1b-04f77598a146] 24036 --- [nio-8080-exec-4] o.e.x.services.TicketServiceImpl         : Finding checked-in tickets for user 4
2025-06-29 20:38:40.302 DEBUG [263045fc-dd50-4081-b4fd-68443f979ce1] 24036 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/boarding-passes
2025-06-29 20:38:40.369  INFO [903c0295-5067-4654-98c2-abc96727087b] 24036 --- [nio-8080-exec-6] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 20:38:40.369  INFO [903c0295-5067-4654-98c2-abc96727087b] 24036 --- [nio-8080-exec-6] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 20:38:40.374  INFO [903c0295-5067-4654-98c2-abc96727087b] 24036 --- [nio-8080-exec-6] o.e.x.services.TicketServiceImpl         : Found 0 tickets eligible for check-in for user 4
2025-06-29 20:38:40.383 DEBUG [ed015ad3-ef0e-43ee-84b4-08583ceba139] 24036 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 20:38:40.410 DEBUG [263045fc-dd50-4081-b4fd-68443f979ce1] 24036 --- [nio-8080-exec-9] o.s.s.core.session.SessionRegistryImpl   : Registering session F6B79D31155BC51CFD2AA37F0447C30F, for principal User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}])
2025-06-29 20:38:40.411 DEBUG [263045fc-dd50-4081-b4fd-68443f979ce1] 24036 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@5ae792f9]
2025-06-29 20:38:40.413 DEBUG [263045fc-dd50-4081-b4fd-68443f979ce1] 24036 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/boarding-passes
2025-06-29 20:38:40.490 DEBUG [ed015ad3-ef0e-43ee-84b4-08583ceba139] 24036 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:38:40.492 DEBUG [ed015ad3-ef0e-43ee-84b4-08583ceba139] 24036 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 20:38:40.511  INFO [263045fc-dd50-4081-b4fd-68443f979ce1] 24036 --- [nio-8080-exec-9] o.e.x.services.TicketServiceImpl         : Finding checked-in tickets for user 4
2025-06-29 20:38:40.597 DEBUG [e241fd4b-ad3b-4c01-a0f0-6fd6ab926326] 24036 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:38:40.603  INFO [ed015ad3-ef0e-43ee-84b4-08583ceba139] 24036 --- [nio-8080-exec-8] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 20:38:40.603  INFO [ed015ad3-ef0e-43ee-84b4-08583ceba139] 24036 --- [nio-8080-exec-8] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 20:38:40.609  INFO [ed015ad3-ef0e-43ee-84b4-08583ceba139] 24036 --- [nio-8080-exec-8] o.e.x.services.TicketServiceImpl         : Found 0 tickets eligible for check-in for user 4
2025-06-29 20:38:40.694 DEBUG [e241fd4b-ad3b-4c01-a0f0-6fd6ab926326] 24036 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:38:40.696 DEBUG [e241fd4b-ad3b-4c01-a0f0-6fd6ab926326] 24036 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:38:40.696  INFO [e241fd4b-ad3b-4c01-a0f0-6fd6ab926326] 24036 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:38:40.817  INFO [e241fd4b-ad3b-4c01-a0f0-6fd6ab926326] 24036 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 20:38:40.825 DEBUG [5b8e2a27-dc43-4718-8afa-8858afeb3d43] 24036 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:38:40.916 DEBUG [5b8e2a27-dc43-4718-8afa-8858afeb3d43] 24036 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:38:40.917 DEBUG [5b8e2a27-dc43-4718-8afa-8858afeb3d43] 24036 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:38:40.918  INFO [5b8e2a27-dc43-4718-8afa-8858afeb3d43] 24036 --- [io-8080-exec-10] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:38:41.024  INFO [5b8e2a27-dc43-4718-8afa-8858afeb3d43] 24036 --- [io-8080-exec-10] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 20:38:41.031 DEBUG [b8ad244c-800f-48c7-b3cc-a79e0ff1b87a] 24036 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:38:41.121 DEBUG [b8ad244c-800f-48c7-b3cc-a79e0ff1b87a] 24036 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:38:41.122 DEBUG [b8ad244c-800f-48c7-b3cc-a79e0ff1b87a] 24036 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:38:41.123  INFO [b8ad244c-800f-48c7-b3cc-a79e0ff1b87a] 24036 --- [nio-8080-exec-7] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:38:41.210  INFO [b8ad244c-800f-48c7-b3cc-a79e0ff1b87a] 24036 --- [nio-8080-exec-7] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 20:38:41.218 DEBUG [da39ff65-255d-4365-aeae-6aa026530a2d] 24036 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:38:41.316 DEBUG [da39ff65-255d-4365-aeae-6aa026530a2d] 24036 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:38:41.318 DEBUG [da39ff65-255d-4365-aeae-6aa026530a2d] 24036 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:38:41.318  INFO [da39ff65-255d-4365-aeae-6aa026530a2d] 24036 --- [nio-8080-exec-2] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:38:41.412  INFO [da39ff65-255d-4365-aeae-6aa026530a2d] 24036 --- [nio-8080-exec-2] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 20:38:41.591 DEBUG [e0afb8e3-6fbd-4924-8dcd-d4b4b9beba2f] 24036 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:38:41.593 DEBUG [e0afb8e3-6fbd-4924-8dcd-d4b4b9beba2f] 24036 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:38:41.594  INFO [e0afb8e3-6fbd-4924-8dcd-d4b4b9beba2f] 24036 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 20:38:41.594  INFO [e0afb8e3-6fbd-4924-8dcd-d4b4b9beba2f] 24036 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 20:38:41.640  INFO [e0afb8e3-6fbd-4924-8dcd-d4b4b9beba2f] 24036 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 20:38:41.641 DEBUG [e0afb8e3-6fbd-4924-8dcd-d4b4b9beba2f] 24036 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:38:41.647 DEBUG [56983155-e23f-4f2d-b1dd-780ce1da41ce] 24036 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:38:41.649 DEBUG [56983155-e23f-4f2d-b1dd-780ce1da41ce] 24036 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-29 20:38:41.650  INFO [56983155-e23f-4f2d-b1dd-780ce1da41ce] 24036 --- [nio-8080-exec-5] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-29 20:38:41.650  INFO [56983155-e23f-4f2d-b1dd-780ce1da41ce] 24036 --- [nio-8080-exec-5] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-29 20:38:41.670 DEBUG [0de9b249-1ba8-4042-9065-b160bcf7c3d9] 24036 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 20:38:41.671 DEBUG [0de9b249-1ba8-4042-9065-b160bcf7c3d9] 24036 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 20:38:41.672  INFO [0de9b249-1ba8-4042-9065-b160bcf7c3d9] 24036 --- [nio-8080-exec-4] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 20:38:41.696  INFO [56983155-e23f-4f2d-b1dd-780ce1da41ce] 24036 --- [nio-8080-exec-5] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-29 20:38:41.697 DEBUG [56983155-e23f-4f2d-b1dd-780ce1da41ce] 24036 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:38:41.826  INFO [0de9b249-1ba8-4042-9065-b160bcf7c3d9] 24036 --- [nio-8080-exec-4] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 20:38:41.828 DEBUG [0de9b249-1ba8-4042-9065-b160bcf7c3d9] 24036 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:38:41.834 DEBUG [f9303104-6981-4c09-bdb1-0c7347683c76] 24036 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-29 20:38:41.835 DEBUG [f9303104-6981-4c09-bdb1-0c7347683c76] 24036 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-29 20:38:41.836 DEBUG [ec2a68ea-9e0c-4db0-89d6-902bf2f67f43] 24036 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:38:41.836  INFO [f9303104-6981-4c09-bdb1-0c7347683c76] 24036 --- [nio-8080-exec-6] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-29 20:38:41.836 DEBUG [ec2a68ea-9e0c-4db0-89d6-902bf2f67f43] 24036 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:38:41.837  INFO [ec2a68ea-9e0c-4db0-89d6-902bf2f67f43] 24036 --- [nio-8080-exec-9] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 20:38:41.871  INFO [f9303104-6981-4c09-bdb1-0c7347683c76] 24036 --- [nio-8080-exec-6] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-29 20:38:41.873 DEBUG [f9303104-6981-4c09-bdb1-0c7347683c76] 24036 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:38:41.998  INFO [ec2a68ea-9e0c-4db0-89d6-902bf2f67f43] 24036 --- [nio-8080-exec-9] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 20:38:42.000 DEBUG [ec2a68ea-9e0c-4db0-89d6-902bf2f67f43] 24036 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:38:42.006 DEBUG [b6942e27-d146-44c7-b690-ccdfbb106e20] 24036 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:38:42.007 DEBUG [b6942e27-d146-44c7-b690-ccdfbb106e20] 24036 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-29 20:38:42.008  INFO [b6942e27-d146-44c7-b690-ccdfbb106e20] 24036 --- [nio-8080-exec-8] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-29 20:38:42.047  INFO [b6942e27-d146-44c7-b690-ccdfbb106e20] 24036 --- [nio-8080-exec-8] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-29 20:38:42.049 DEBUG [b6942e27-d146-44c7-b690-ccdfbb106e20] 24036 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:38:48.031 DEBUG [d208cd7e-72f7-497b-a29d-d1f79cd3ae04] 24036 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:38:48.298 DEBUG [d208cd7e-72f7-497b-a29d-d1f79cd3ae04] 24036 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:38:48.301 DEBUG [d208cd7e-72f7-497b-a29d-d1f79cd3ae04] 24036 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:38:48.301  INFO [d208cd7e-72f7-497b-a29d-d1f79cd3ae04] 24036 --- [nio-8080-exec-1] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:38:48.302  INFO [d208cd7e-72f7-497b-a29d-d1f79cd3ae04] 24036 --- [nio-8080-exec-1] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:38:48.366 DEBUG [8ad53272-9620-4565-a79a-24d04848572f] 24036 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:38:48.548 DEBUG [8ad53272-9620-4565-a79a-24d04848572f] 24036 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:38:48.551 DEBUG [8ad53272-9620-4565-a79a-24d04848572f] 24036 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:38:48.552  INFO [8ad53272-9620-4565-a79a-24d04848572f] 24036 --- [io-8080-exec-10] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:38:48.552  INFO [8ad53272-9620-4565-a79a-24d04848572f] 24036 --- [io-8080-exec-10] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:38:48.730 DEBUG [6ca66c11-7551-4adb-9ceb-5bd2257b5e4f] 24036 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/16/booked-seats
2025-06-29 20:38:48.881 DEBUG [6ca66c11-7551-4adb-9ceb-5bd2257b5e4f] 24036 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:38:48.884 DEBUG [6ca66c11-7551-4adb-9ceb-5bd2257b5e4f] 24036 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/flights/16/booked-seats
2025-06-29 20:38:48.885  INFO [6ca66c11-7551-4adb-9ceb-5bd2257b5e4f] 24036 --- [nio-8080-exec-7] o.e.x.controllers.CheckinController      : Getting booked seats for flight: 16
2025-06-29 20:38:48.885  INFO [6ca66c11-7551-4adb-9ceb-5bd2257b5e4f] 24036 --- [nio-8080-exec-7] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:38:50.542 DEBUG [bdffbaf1-fb6c-4e00-bd22-448243650604] 24036 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /api/cart/add
2025-06-29 20:38:50.652 DEBUG [bdffbaf1-fb6c-4e00-bd22-448243650604] 24036 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:38:50.654 DEBUG [bdffbaf1-fb6c-4e00-bd22-448243650604] 24036 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured POST /api/cart/add
2025-06-29 20:38:50.771  INFO [bdffbaf1-fb6c-4e00-bd22-448243650604] 24036 --- [nio-8080-exec-5] o.e.x.controllers.CartController         : User ****@****.*** request to add flight ID 16 to persistent cart
2025-06-29 20:38:50.775  INFO [bdffbaf1-fb6c-4e00-bd22-448243650604] 24036 --- [nio-8080-exec-5] o.e.x.controllers.CartController         : AddToCart request: flightId=16, seatNumber=null, seatType=null, deferSeat=false, randomSeat=true
2025-06-29 20:38:50.780  INFO [bdffbaf1-fb6c-4e00-bd22-448243650604] 24036 --- [nio-8080-exec-5] o.e.xlr8travel.services.CartServiceImpl  : Added new flight ID 16 to cart for user ****@****.***
2025-06-29 20:38:50.801  INFO [bdffbaf1-fb6c-4e00-bd22-448243650604] 24036 --- [nio-8080-exec-5] o.e.x.controllers.CartController         : Flight ID 16 added/incremented in persistent cart for user ****@****.***.
2025-06-29 20:38:50.814 DEBUG [7c7702ee-ea77-4140-b91f-1db776545826] 24036 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:38:50.931 DEBUG [7c7702ee-ea77-4140-b91f-1db776545826] 24036 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:38:50.933 DEBUG [7c7702ee-ea77-4140-b91f-1db776545826] 24036 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:38:50.934  INFO [7c7702ee-ea77-4140-b91f-1db776545826] 24036 --- [nio-8080-exec-4] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:38:51.046  INFO [7c7702ee-ea77-4140-b91f-1db776545826] 24036 --- [nio-8080-exec-4] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 20:38:51.269 DEBUG [feecc8be-0e41-4461-bca3-d551b1a77091] 24036 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:38:51.384 DEBUG [feecc8be-0e41-4461-bca3-d551b1a77091] 24036 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:38:51.386 DEBUG [feecc8be-0e41-4461-bca3-d551b1a77091] 24036 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:38:51.387  INFO [feecc8be-0e41-4461-bca3-d551b1a77091] 24036 --- [nio-8080-exec-6] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:38:51.512  INFO [feecc8be-0e41-4461-bca3-d551b1a77091] 24036 --- [nio-8080-exec-6] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 20:38:51.521 DEBUG [d2c2842d-7d1b-41d1-b5eb-901c84f27d5f] 24036 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:38:51.633 DEBUG [d2c2842d-7d1b-41d1-b5eb-901c84f27d5f] 24036 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:38:51.634 DEBUG [d2c2842d-7d1b-41d1-b5eb-901c84f27d5f] 24036 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:38:51.635  INFO [d2c2842d-7d1b-41d1-b5eb-901c84f27d5f] 24036 --- [nio-8080-exec-9] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:38:51.745  INFO [d2c2842d-7d1b-41d1-b5eb-901c84f27d5f] 24036 --- [nio-8080-exec-9] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 20:38:53.273 DEBUG [9814fd7c-a062-4909-a2cc-add2bf4a1ecb] 24036 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:38:53.380 DEBUG [9814fd7c-a062-4909-a2cc-add2bf4a1ecb] 24036 --- [nio-8080-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:38:53.382 DEBUG [9814fd7c-a062-4909-a2cc-add2bf4a1ecb] 24036 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:38:53.383  INFO [9814fd7c-a062-4909-a2cc-add2bf4a1ecb] 24036 --- [nio-8080-exec-8] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:38:53.492  INFO [9814fd7c-a062-4909-a2cc-add2bf4a1ecb] 24036 --- [nio-8080-exec-8] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 20:38:53.502 DEBUG [dc3f9278-fca7-4a54-a3c1-5a00b82cb44b] 24036 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:38:53.642 DEBUG [dc3f9278-fca7-4a54-a3c1-5a00b82cb44b] 24036 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:38:53.645 DEBUG [dc3f9278-fca7-4a54-a3c1-5a00b82cb44b] 24036 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:38:53.645  INFO [dc3f9278-fca7-4a54-a3c1-5a00b82cb44b] 24036 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:38:53.806  INFO [dc3f9278-fca7-4a54-a3c1-5a00b82cb44b] 24036 --- [nio-8080-exec-1] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 1 items, 1 total quantity.
2025-06-29 20:38:59.828 DEBUG [00b80646-68ab-4038-9f48-9fc2c777b342] 24036 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing POST /api/checkout/create-payment-intent
2025-06-29 20:38:59.829 DEBUG [00b80646-68ab-4038-9f48-9fc2c777b342] 24036 --- [io-8080-exec-10] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 20:38:59.830 DEBUG [00b80646-68ab-4038-9f48-9fc2c777b342] 24036 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured POST /api/checkout/create-payment-intent
2025-06-29 20:38:59.831  INFO [00b80646-68ab-4038-9f48-9fc2c777b342] 24036 --- [io-8080-exec-10] o.e.x.controllers.PaymentController      : Creating payment intent for amount: 18995 ron
2025-06-29 20:39:00.315  INFO [00b80646-68ab-4038-9f48-9fc2c777b342] 24036 --- [io-8080-exec-10] o.e.x.controllers.PaymentController      : Payment intent created successfully: pi_3RfPBwGf8s1WZJnq11xa7B8P
2025-06-29 20:39:01.706 DEBUG [3d21be9e-6138-4869-8b37-ba7196e5b429] 24036 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/checkout/confirm
2025-06-29 20:39:01.796 DEBUG [3d21be9e-6138-4869-8b37-ba7196e5b429] 24036 --- [nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:39:01.797 DEBUG [3d21be9e-6138-4869-8b37-ba7196e5b429] 24036 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/checkout/confirm
2025-06-29 20:39:01.798  INFO [3d21be9e-6138-4869-8b37-ba7196e5b429] 24036 --- [nio-8080-exec-7] o.e.x.controllers.CheckoutController     : Received purchase confirmation request.
2025-06-29 20:39:01.886  INFO [3d21be9e-6138-4869-8b37-ba7196e5b429] 24036 --- [nio-8080-exec-7] o.e.x.controllers.CheckoutController     : Processing purchase for user: ****@****.***
2025-06-29 20:39:01.895  INFO [3d21be9e-6138-4869-8b37-ba7196e5b429] 24036 --- [nio-8080-exec-7] o.e.x.controllers.CheckoutController     : User ****@****.*** persistent cart has 1 items.
2025-06-29 20:39:01.896  WARN [3d21be9e-6138-4869-8b37-ba7196e5b429] 24036 --- [nio-8080-exec-7] o.e.x.controllers.CheckoutController     : !!! SIMULATING successful payment processing for user ****@****.*** !!!
2025-06-29 20:39:01.896  INFO [3d21be9e-6138-4869-8b37-ba7196e5b429] 24036 --- [nio-8080-exec-7] o.e.x.services.OrderServiceImpl          : Creating order from persistent cart for user: ****@****.***
2025-06-29 20:39:01.900  INFO [3d21be9e-6138-4869-8b37-ba7196e5b429] 24036 --- [nio-8080-exec-7] o.e.x.services.OrderServiceImpl          : Order 3 created for user ****@****.***, status: PENDING_PAYMENT. Total: 37.99
2025-06-29 20:39:01.901  INFO [3d21be9e-6138-4869-8b37-ba7196e5b429] 24036 --- [nio-8080-exec-7] o.e.x.services.OrderServiceImpl          : Created ticket with random seat allocation (free) for flight XT-OTP-CDG-2 for user ****@****.***
2025-06-29 20:39:01.901  INFO [3d21be9e-6138-4869-8b37-ba7196e5b429] 24036 --- [nio-8080-exec-7] o.e.x.services.OrderServiceImpl          : Ticket has baggage type: BAGGAGE_TYPE_WEIGHT_CARRY_ON_0
2025-06-29 20:39:03.088  INFO [3d21be9e-6138-4869-8b37-ba7196e5b429] 24036 --- [nio-8080-exec-7] o.e.x.services.EmailServiceImpl          : Purchase confirmation email sent to ****@****.***
2025-06-29 20:39:03.089  INFO [3d21be9e-6138-4869-8b37-ba7196e5b429] 24036 --- [nio-8080-exec-7] o.e.x.services.OrderServiceImpl          : Purchase confirmation email sent to user: ****@****.***
2025-06-29 20:39:03.103  INFO [3d21be9e-6138-4869-8b37-ba7196e5b429] 24036 --- [nio-8080-exec-7] o.e.x.controllers.CheckoutController     : Order successfully created for user ****@****.***. Confirmation: 3
2025-06-29 20:39:03.109  INFO [3d21be9e-6138-4869-8b37-ba7196e5b429] 24036 --- [nio-8080-exec-7] o.e.xlr8travel.services.CartServiceImpl  : Clearing 1 items from cart for user ****@****.***
2025-06-29 20:39:03.126  INFO [3d21be9e-6138-4869-8b37-ba7196e5b429] 24036 --- [nio-8080-exec-7] o.e.x.controllers.CheckoutController     : Persistent cart cleared for user ****@****.***.
2025-06-29 20:39:03.136 DEBUG [e8e5693c-f268-4991-81e0-20c1d115c9ae] 24036 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing DELETE /api/cart/remove/16
2025-06-29 20:39:03.228 DEBUG [e8e5693c-f268-4991-81e0-20c1d115c9ae] 24036 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:39:03.229 DEBUG [e8e5693c-f268-4991-81e0-20c1d115c9ae] 24036 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured DELETE /api/cart/remove/16
2025-06-29 20:39:03.320  INFO [e8e5693c-f268-4991-81e0-20c1d115c9ae] 24036 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : User ****@****.*** request to remove flight ID 16 from persistent cart
2025-06-29 20:39:03.329  WARN [e8e5693c-f268-4991-81e0-20c1d115c9ae] 24036 --- [nio-8080-exec-3] o.e.xlr8travel.services.CartServiceImpl  : Attempted to remove flight ID 16 not found in cart for user ****@****.***
2025-06-29 20:39:03.331  WARN [e8e5693c-f268-4991-81e0-20c1d115c9ae] 24036 --- [nio-8080-exec-3] o.e.x.controllers.CartController         : Attempted to remove flight ID 16 not found in persistent cart for user ****@****.***
2025-06-29 20:39:03.360 DEBUG [40016715-344d-406b-a5aa-eecc3e51a2e7] 24036 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/cart
2025-06-29 20:39:03.451 DEBUG [40016715-344d-406b-a5aa-eecc3e51a2e7] 24036 --- [nio-8080-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:39:03.453 DEBUG [40016715-344d-406b-a5aa-eecc3e51a2e7] 24036 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/cart
2025-06-29 20:39:03.453  INFO [40016715-344d-406b-a5aa-eecc3e51a2e7] 24036 --- [nio-8080-exec-2] o.e.x.controllers.CartController         : Request received to view persistent cart
2025-06-29 20:39:03.577  INFO [40016715-344d-406b-a5aa-eecc3e51a2e7] 24036 --- [nio-8080-exec-2] o.e.x.controllers.CartController         : Returning persistent cart for user ****@****.*** with 0 items, 0 total quantity.
2025-06-29 20:39:06.798 DEBUG [6b3b2e53-d0ca-4b60-97f5-87538040e36e] 24036 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 20:39:06.926 DEBUG [6b3b2e53-d0ca-4b60-97f5-87538040e36e] 24036 --- [nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:39:06.928 DEBUG [6b3b2e53-d0ca-4b60-97f5-87538040e36e] 24036 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 20:39:07.024  INFO [6b3b2e53-d0ca-4b60-97f5-87538040e36e] 24036 --- [nio-8080-exec-5] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 20:39:07.024  INFO [6b3b2e53-d0ca-4b60-97f5-87538040e36e] 24036 --- [nio-8080-exec-5] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 20:39:07.029  INFO [6b3b2e53-d0ca-4b60-97f5-87538040e36e] 24036 --- [nio-8080-exec-5] o.e.x.services.TicketServiceImpl         : Found 1 tickets eligible for check-in for user 4
2025-06-29 20:39:07.038 DEBUG [71742ea3-9bfe-47af-b271-a9301a1d316a] 24036 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/eligible-tickets
2025-06-29 20:39:07.143 DEBUG [71742ea3-9bfe-47af-b271-a9301a1d316a] 24036 --- [nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:39:07.145 DEBUG [71742ea3-9bfe-47af-b271-a9301a1d316a] 24036 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/check-in/eligible-tickets
2025-06-29 20:39:07.234  INFO [71742ea3-9bfe-47af-b271-a9301a1d316a] 24036 --- [nio-8080-exec-4] o.e.x.controllers.CheckinController      : Getting eligible tickets for check-in for user: ****@****.***
2025-06-29 20:39:07.235  INFO [71742ea3-9bfe-47af-b271-a9301a1d316a] 24036 --- [nio-8080-exec-4] o.e.x.services.TicketServiceImpl         : Finding tickets eligible for check-in for user 4
2025-06-29 20:39:07.240  INFO [71742ea3-9bfe-47af-b271-a9301a1d316a] 24036 --- [nio-8080-exec-4] o.e.x.services.TicketServiceImpl         : Found 1 tickets eligible for check-in for user 4
2025-06-29 20:39:13.185 DEBUG [6869c4ff-8e9f-42f7-8d21-79c7a913446f] 24036 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/check-in/5/without-seat
2025-06-29 20:39:13.271 DEBUG [6869c4ff-8e9f-42f7-8d21-79c7a913446f] 24036 --- [nio-8080-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User(id=4, firstname=Razvan, lastname=Uleia, username=****@****.***, age=0, gender=null, email=****@****.***, password: ********, dob=null, accountStatus=null, roles=[ROLE_USER], profilePicture=null, profilePictureContentType=null, createdAt=2025-06-29T20:34:15.150308, lastLogin=null, addresses=[], tickets=[Country{id=4, name='TICKET_STATUS_CHECKED_IN'}, Country{id=3, name='TICKET_STATUS_CHECKED_IN'}, Country{id=5, name='TICKET_STATUS_CONFIRMED'}]), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=45512D94797730CD89823B5A6950FF31], Granted Authorities=[ROLE_USER]]]
2025-06-29 20:39:13.273 DEBUG [6869c4ff-8e9f-42f7-8d21-79c7a913446f] 24036 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/check-in/5/without-seat
2025-06-29 20:39:13.360  INFO [6869c4ff-8e9f-42f7-8d21-79c7a913446f] 24036 --- [nio-8080-exec-6] o.e.x.controllers.CheckinController      : Checking in ticket 5 without seat for user: ****@****.***
2025-06-29 20:39:13.364  INFO [6869c4ff-8e9f-42f7-8d21-79c7a913446f] 24036 --- [nio-8080-exec-6] o.e.x.services.TicketServiceImpl         : Checking in ticket 5 without seat selection
2025-06-29 20:39:13.364  INFO [6869c4ff-8e9f-42f7-8d21-79c7a913446f] 24036 --- [nio-8080-exec-6] o.e.x.services.TicketServiceImpl         : Allocating random seat for ticket 5
2025-06-29 20:39:13.364  INFO [6869c4ff-8e9f-42f7-8d21-79c7a913446f] 24036 --- [nio-8080-exec-6] o.e.x.services.TicketServiceImpl         : Getting booked seats for flight 16
2025-06-29 20:39:13.368  INFO [6869c4ff-8e9f-42f7-8d21-79c7a913446f] 24036 --- [nio-8080-exec-6] o.e.x.services.TicketServiceImpl         : Randomly allocated seat 1A of type SEAT_TYPE_UPFRONT for ticket 5
2025-06-29 20:39:13.368  INFO [6869c4ff-8e9f-42f7-8d21-79c7a913446f] 24036 --- [nio-8080-exec-6] o.e.x.services.TicketServiceImpl         : Successfully checked in ticket 5 without seat selection
2025-06-29 20:43:31.509  INFO [NONE] 24036 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-29 20:43:31.514  INFO [NONE] 24036 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-06-29 20:43:31.525  INFO [NONE] 24036 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-06-29 23:54:12.380  INFO [NONE] 24116 --- [  restartedMain] o.e.xlr8travel.Xlr8travelApplication     : Starting Xlr8travelApplication using Java 21.0.5 with PID 24116 (C:\Users\razvi\Desktop\Licenta\backend\target\classes started by razvi in C:\Users\razvi\Desktop\Licenta\backend)
2025-06-29 23:54:12.389 DEBUG [NONE] 24116 --- [  restartedMain] o.e.xlr8travel.Xlr8travelApplication     : Running with Spring Boot v3.2.4, Spring v6.1.5
2025-06-29 23:54:12.389  INFO [NONE] 24116 --- [  restartedMain] o.e.xlr8travel.Xlr8travelApplication     : The following 1 profile is active: "local"
2025-06-29 23:54:12.439  INFO [NONE] 24116 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-29 23:54:12.440  INFO [NONE] 24116 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-29 23:54:13.624  INFO [NONE] 24116 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-29 23:54:13.717  INFO [NONE] 24116 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 84 ms. Found 9 JPA repository interfaces.
2025-06-29 23:54:14.588  INFO [NONE] 24116 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-29 23:54:14.601  INFO [NONE] 24116 --- [  restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-29 23:54:14.601  INFO [NONE] 24116 --- [  restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.19]
2025-06-29 23:54:14.681  INFO [NONE] 24116 --- [  restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-06-29 23:54:14.682  INFO [NONE] 24116 --- [  restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2240 ms
2025-06-29 23:54:14.966  INFO [NONE] 24116 --- [  restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-29 23:54:15.039  INFO [NONE] 24116 --- [  restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.4.Final
2025-06-29 23:54:15.079  INFO [NONE] 24116 --- [  restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-06-29 23:54:15.340  INFO [NONE] 24116 --- [  restartedMain] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-29 23:54:15.372  INFO [NONE] 24116 --- [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-06-29 23:54:15.594  INFO [NONE] 24116 --- [  restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4d84c002
2025-06-29 23:54:15.597  INFO [NONE] 24116 --- [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-06-29 23:54:15.665  WARN [NONE] 24116 --- [  restartedMain] org.hibernate.orm.deprecation            : HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-29 23:54:17.002  INFO [NONE] 24116 --- [  restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-29 23:54:24.419  INFO [NONE] 24116 --- [  restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-29 23:54:24.797  INFO [NONE] 24116 --- [  restartedMain] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-29 23:54:25.313  WARN [NONE] 24116 --- [  restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Cannot deserialize session attribute [SPRING_SECURITY_CONTEXT] for session [64FCC93603C0B3DFA876FE5C5208D2AA]
2025-06-29 23:54:25.315 ERROR [NONE] 24116 --- [  restartedMain] o.a.catalina.session.StandardManager     : Exception loading sessions from persistent storage

java.io.StreamCorruptedException: invalid type code: 00
	at java.base/java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1793)
	at java.base/java.io.ObjectInputStream$FieldValues.<init>(ObjectInputStream.java:2618)
	at java.base/java.io.ObjectInputStream.defaultReadObject(ObjectInputStream.java:678)
	at java.base/java.lang.Throwable.readObject(Throwable.java:936)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1102)
	at java.base/java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2444)
	at java.base/java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2284)
	at java.base/java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1762)
	at java.base/java.io.ObjectInputStream.readObject(ObjectInputStream.java:540)
	at java.base/java.io.ObjectInputStream.readObject(ObjectInputStream.java:498)
	at org.apache.catalina.session.StandardSession.doReadObject(StandardSession.java:1348)
	at org.apache.catalina.session.StandardSession.readObjectData(StandardSession.java:985)
	at org.apache.catalina.session.StandardManager.doLoad(StandardManager.java:210)
	at org.apache.catalina.session.StandardManager.load(StandardManager.java:156)
	at org.apache.catalina.session.StandardManager.startInternal(StandardManager.java:346)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4893)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1332)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1322)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:866)
	at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:845)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1332)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1322)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:866)
	at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:240)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.StandardService.startInternal(StandardService.java:433)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:921)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.startup.Tomcat.start(Tomcat.java:437)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:126)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.<init>(TomcatWebServer.java:105)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getTomcatWebServer(TomcatServletWebServerFactory.java:499)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getWebServer(TomcatServletWebServerFactory.java:218)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.createWebServer(ServletWebServerApplicationContext.java:188)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:162)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:618)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at org.example.xlr8travel.Xlr8travelApplication.main(Xlr8travelApplication.java:10)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)

2025-06-29 23:54:25.325 DEBUG [NONE] 24116 --- [  restartedMain] o.e.x.security.JwtAuthenticationFilter   : Filter 'jwtAuthenticationFilter' configured for use
2025-06-29 23:54:25.327 DEBUG [NONE] 24116 --- [  restartedMain] o.e.x.security.RateLimitingFilter        : Filter 'rateLimitingFilter' configured for use
2025-06-29 23:54:25.567  INFO [NONE] 24116 --- [  restartedMain] o.e.x.config.LocalPropertiesConfig       : Loaded application-local.properties
2025-06-29 23:54:25.957  INFO [NONE] 24116 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : === GEMINI SERVICE CONFIGURATION ===
2025-06-29 23:54:25.958  INFO [NONE] 24116 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : Project ID: xlr8travel
2025-06-29 23:54:25.958  INFO [NONE] 24116 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : Location ID: us-east1
2025-06-29 23:54:25.958  INFO [NONE] 24116 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : Model: gemini-2.0-flash-001
2025-06-29 23:54:25.959  INFO [NONE] 24116 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : Credentials Path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 23:54:25.959  INFO [NONE] 24116 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : API Key: ***SET***
2025-06-29 23:54:25.960  INFO [NONE] 24116 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : ✅ Credentials file exists: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 23:54:25.961  INFO [NONE] 24116 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : ✅ Credentials file size: 2376 bytes
2025-06-29 23:54:25.961  INFO [NONE] 24116 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : ✅ GOOGLE_APPLICATION_CREDENTIALS env var is set: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 23:54:25.962  INFO [NONE] 24116 --- [  restartedMain] o.e.x.services.GeminiServiceImpl         : =====================================
2025-06-29 23:54:25.992  INFO [NONE] 24116 --- [  restartedMain] o.e.x.config.SensitiveDataConfig         : Validating sensitive data configuration for profile: local
2025-06-29 23:54:25.992  WARN [NONE] 24116 --- [  restartedMain] o.e.x.config.SensitiveDataConfig         : Environment variable SPRING_DATASOURCE_URL is not set
2025-06-29 23:54:25.993  WARN [NONE] 24116 --- [  restartedMain] o.e.x.config.SensitiveDataConfig         : Environment variable SPRING_DATASOURCE_USERNAME is not set
2025-06-29 23:54:25.993  WARN [NONE] 24116 --- [  restartedMain] o.e.x.config.SensitiveDataConfig         : Environment variable SPRING_DATASOURCE_PASSWORD is not set
2025-06-29 23:54:25.993  WARN [NONE] 24116 --- [  restartedMain] o.e.x.config.SensitiveDataConfig         : Environment variable STRIPE_SECRET_KEY is not set
2025-06-29 23:54:26.052  WARN [NONE] 24116 --- [  restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-29 23:54:26.185  INFO [NONE] 24116 --- [  restartedMain] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2025-06-29 23:54:26.530  INFO [NONE] 24116 --- [  restartedMain] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 4 endpoint(s) beneath base path '/actuator'
2025-06-29 23:54:26.643  INFO [NONE] 24116 --- [  restartedMain] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@539afc1c, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2610104a, org.springframework.security.web.context.SecurityContextHolderFilter@61fbf1a2, org.springframework.security.web.header.HeaderWriterFilter@1687dcae, org.springframework.web.filter.CorsFilter@43ee2af3, org.springframework.security.web.authentication.logout.LogoutFilter@31e0377e, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@5195ceac, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@6e1c801a, org.example.xlr8travel.security.JwtAuthenticationFilter@f110b32, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@6232e9ac, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@2375c6de, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@4d5c115f, org.springframework.security.web.session.ConcurrentSessionFilter@7acfe350, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@3cd7417a, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@262b3b16, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7525265b, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@49226ef4, org.springframework.security.web.session.SessionManagementFilter@f93ccf0, org.springframework.security.web.access.ExceptionTranslationFilter@5399eca3, org.springframework.security.web.access.intercept.AuthorizationFilter@6fd028a0]
2025-06-29 23:54:27.246  INFO [NONE] 24116 --- [  restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2025-06-29 23:54:27.326  INFO [NONE] 24116 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path ''
2025-06-29 23:54:27.338  INFO [NONE] 24116 --- [  restartedMain] o.e.xlr8travel.Xlr8travelApplication     : Started Xlr8travelApplication in 15.446 seconds (process running for 16.166)
2025-06-29 23:54:54.343  INFO [NONE] 24116 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-29 23:54:54.344  INFO [NONE] 24116 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-06-29 23:54:54.348  INFO [NONE] 24116 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2025-06-29 23:54:54.369 DEBUG [b5365328-bebd-45ef-9592-51d3ca6c4f67] 24116 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/nearby?origin=OTP
2025-06-29 23:54:54.392 DEBUG [b5365328-bebd-45ef-9592-51d3ca6c4f67] 24116 --- [nio-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 23:54:54.392 DEBUG [b5365328-bebd-45ef-9592-51d3ca6c4f67] 24116 --- [nio-8080-exec-1] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 29FCC5ABBD2D20519A14D98D833CA9D0
2025-06-29 23:54:54.398  WARN [b5365328-bebd-45ef-9592-51d3ca6c4f67] 24116 --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/api/flights/nearby' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2025-06-29 23:54:54.411 DEBUG [b5365328-bebd-45ef-9592-51d3ca6c4f67] 24116 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/nearby?origin=OTP
2025-06-29 23:54:54.442  INFO [b5365328-bebd-45ef-9592-51d3ca6c4f67] 24116 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Received request for nearby flights from origin: OTP, departureDate: null
2025-06-29 23:54:54.443  INFO [b5365328-bebd-45ef-9592-51d3ca6c4f67] 24116 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Using search date: 2025-06-29
2025-06-29 23:54:54.443  INFO [b5365328-bebd-45ef-9592-51d3ca6c4f67] 24116 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Cache key: OTP-2025-06-29
2025-06-29 23:54:54.444  INFO [b5365328-bebd-45ef-9592-51d3ca6c4f67] 24116 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : No valid cache found. Searching nearby flights from origin: OTP, after date: 2025-06-29
2025-06-29 23:54:54.444  INFO [b5365328-bebd-45ef-9592-51d3ca6c4f67] 24116 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Calling flightService.findByOriginAndDepartureDateAfter for origin: OTP, date: 2025-06-29
2025-06-29 23:54:54.520  INFO [b5365328-bebd-45ef-9592-51d3ca6c4f67] 24116 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Database query completed, found 16 flights
2025-06-29 23:54:54.520  INFO [b5365328-bebd-45ef-9592-51d3ca6c4f67] 24116 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Converting 16 Flight entities to FlightDTOs
2025-06-29 23:54:54.521  INFO [b5365328-bebd-45ef-9592-51d3ca6c4f67] 24116 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Converted to 16 FlightDTOs
2025-06-29 23:54:54.521  INFO [b5365328-bebd-45ef-9592-51d3ca6c4f67] 24116 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Grouping flights by destination country
2025-06-29 23:54:54.522  INFO [b5365328-bebd-45ef-9592-51d3ca6c4f67] 24116 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Grouped flights into 7 countries
2025-06-29 23:54:54.522  INFO [b5365328-bebd-45ef-9592-51d3ca6c4f67] 24116 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Selecting diverse flights - one from each country first
2025-06-29 23:54:54.522  INFO [b5365328-bebd-45ef-9592-51d3ca6c4f67] 24116 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Adding first flight from Greece (has 2 flights)
2025-06-29 23:54:54.523  INFO [b5365328-bebd-45ef-9592-51d3ca6c4f67] 24116 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Adding first flight from Netherlands (has 2 flights)
2025-06-29 23:54:54.523  INFO [b5365328-bebd-45ef-9592-51d3ca6c4f67] 24116 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Adding first flight from Italy (has 2 flights)
2025-06-29 23:54:54.524  INFO [b5365328-bebd-45ef-9592-51d3ca6c4f67] 24116 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Adding first flight from United Kingdom (has 2 flights)
2025-06-29 23:54:54.524  INFO [b5365328-bebd-45ef-9592-51d3ca6c4f67] 24116 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Adding first flight from France (has 2 flights)
2025-06-29 23:54:54.524  INFO [b5365328-bebd-45ef-9592-51d3ca6c4f67] 24116 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Adding first flight from Switzerland (has 2 flights)
2025-06-29 23:54:54.524  INFO [b5365328-bebd-45ef-9592-51d3ca6c4f67] 24116 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Reached 6 flights after first pass, stopping
2025-06-29 23:54:54.524  INFO [b5365328-bebd-45ef-9592-51d3ca6c4f67] 24116 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Caching 6 diverse flights with key: OTP-2025-06-29
2025-06-29 23:54:54.525  INFO [b5365328-bebd-45ef-9592-51d3ca6c4f67] 24116 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Returning 6 diverse nearby flights from: OTP
2025-06-29 23:55:19.095 DEBUG [7f6cb7be-dad4-4038-b0a7-ef753ef228ac] 24116 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-29 23:55:19.102 DEBUG [7f6cb7be-dad4-4038-b0a7-ef753ef228ac] 24116 --- [nio-8080-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 23:55:19.104 DEBUG [7f6cb7be-dad4-4038-b0a7-ef753ef228ac] 24116 --- [nio-8080-exec-2] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 29FCC5ABBD2D20519A14D98D833CA9D0
2025-06-29 23:55:19.112 DEBUG [7f6cb7be-dad4-4038-b0a7-ef753ef228ac] 24116 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-29 23:55:19.163  INFO [7f6cb7be-dad4-4038-b0a7-ef753ef228ac] 24116 --- [nio-8080-exec-2] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris
2025-06-29 23:55:19.164  INFO [7f6cb7be-dad4-4038-b0a7-ef753ef228ac] 24116 --- [nio-8080-exec-2] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-29 23:55:19.165  INFO [7f6cb7be-dad4-4038-b0a7-ef753ef228ac] 24116 --- [nio-8080-exec-2] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-29 23:55:19.168 DEBUG [7f6cb7be-dad4-4038-b0a7-ef753ef228ac] 24116 --- [nio-8080-exec-2] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-29).    For example, if today is 2025-06-29, a good departure date would be between 2025-07-06 and 2025-07-13, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris";
2025-06-29 23:55:19.170  INFO [7f6cb7be-dad4-4038-b0a7-ef753ef228ac] 24116 --- [nio-8080-exec-2] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-29 23:55:19.171  INFO [7f6cb7be-dad4-4038-b0a7-ef753ef228ac] 24116 --- [nio-8080-exec-2] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-29 23:55:19.171  INFO [7f6cb7be-dad4-4038-b0a7-ef753ef228ac] 24116 --- [nio-8080-exec-2] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-29 23:55:19.171  INFO [7f6cb7be-dad4-4038-b0a7-ef753ef228ac] 24116 --- [nio-8080-exec-2] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 23:55:19.171  INFO [7f6cb7be-dad4-4038-b0a7-ef753ef228ac] 24116 --- [nio-8080-exec-2] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-29 23:55:19.245  INFO [7f6cb7be-dad4-4038-b0a7-ef753ef228ac] 24116 --- [nio-8080-exec-2] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-29 23:55:19.248  INFO [7f6cb7be-dad4-4038-b0a7-ef753ef228ac] 24116 --- [nio-8080-exec-2] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-29 23:55:19.251  INFO [7f6cb7be-dad4-4038-b0a7-ef753ef228ac] 24116 --- [nio-8080-exec-2] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-29 23:55:19.283  INFO [7f6cb7be-dad4-4038-b0a7-ef753ef228ac] 24116 --- [nio-8080-exec-2] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-29 23:55:22.301  INFO [7f6cb7be-dad4-4038-b0a7-ef753ef228ac] 24116 --- [nio-8080-exec-2] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-29 23:55:22.302  INFO [7f6cb7be-dad4-4038-b0a7-ef753ef228ac] 24116 --- [nio-8080-exec-2] o.e.x.services.GeminiServiceImpl         : Response length: 195 characters
2025-06-29 23:55:22.306 DEBUG [7f6cb7be-dad4-4038-b0a7-ef753ef228ac] 24116 --- [nio-8080-exec-2] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-06",
  "returnDate": "2025-07-08",
  "tripType": "roundTrip",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-29 23:55:22.308 DEBUG [7f6cb7be-dad4-4038-b0a7-ef753ef228ac] 24116 --- [nio-8080-exec-2] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-29 23:55:22.314 DEBUG [7f6cb7be-dad4-4038-b0a7-ef753ef228ac] 24116 --- [nio-8080-exec-2] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-29 23:55:22.315 DEBUG [7f6cb7be-dad4-4038-b0a7-ef753ef228ac] 24116 --- [nio-8080-exec-2] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-29 23:55:22.316 DEBUG [7f6cb7be-dad4-4038-b0a7-ef753ef228ac] 24116 --- [nio-8080-exec-2] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 23:55:22.317  INFO [7f6cb7be-dad4-4038-b0a7-ef753ef228ac] 24116 --- [nio-8080-exec-2] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 23:55:22.317  INFO [7f6cb7be-dad4-4038-b0a7-ef753ef228ac] 24116 --- [nio-8080-exec-2] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-06, returnDate=2025-07-08, tripType=roundTrip, adults=1, children=0, infants=0
2025-06-29 23:55:22.318  INFO [7f6cb7be-dad4-4038-b0a7-ef753ef228ac] 24116 --- [nio-8080-exec-2] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-29 23:55:26.816 DEBUG [27cc0448-fa2b-4fb0-97e9-ff2cb876ea86] 24116 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-29 23:55:26.818 DEBUG [27cc0448-fa2b-4fb0-97e9-ff2cb876ea86] 24116 --- [nio-8080-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 23:55:26.819 DEBUG [27cc0448-fa2b-4fb0-97e9-ff2cb876ea86] 24116 --- [nio-8080-exec-3] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 29FCC5ABBD2D20519A14D98D833CA9D0
2025-06-29 23:55:26.820 DEBUG [27cc0448-fa2b-4fb0-97e9-ff2cb876ea86] 24116 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-29 23:55:26.822  INFO [27cc0448-fa2b-4fb0-97e9-ff2cb876ea86] 24116 --- [nio-8080-exec-3] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris 2 adults, one way
2025-06-29 23:55:26.823  INFO [27cc0448-fa2b-4fb0-97e9-ff2cb876ea86] 24116 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-29 23:55:26.823  INFO [27cc0448-fa2b-4fb0-97e9-ff2cb876ea86] 24116 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-29 23:55:26.823 DEBUG [27cc0448-fa2b-4fb0-97e9-ff2cb876ea86] 24116 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-29).    For example, if today is 2025-06-29, a good departure date would be between 2025-07-06 and 2025-07-13, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris 2 adults, one way";
2025-06-29 23:55:26.826  INFO [27cc0448-fa2b-4fb0-97e9-ff2cb876ea86] 24116 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-29 23:55:26.826  INFO [27cc0448-fa2b-4fb0-97e9-ff2cb876ea86] 24116 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-29 23:55:26.827  INFO [27cc0448-fa2b-4fb0-97e9-ff2cb876ea86] 24116 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-29 23:55:26.827  INFO [27cc0448-fa2b-4fb0-97e9-ff2cb876ea86] 24116 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 23:55:26.827  INFO [27cc0448-fa2b-4fb0-97e9-ff2cb876ea86] 24116 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-29 23:55:26.829  INFO [27cc0448-fa2b-4fb0-97e9-ff2cb876ea86] 24116 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-29 23:55:26.829  INFO [27cc0448-fa2b-4fb0-97e9-ff2cb876ea86] 24116 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-29 23:55:26.830  INFO [27cc0448-fa2b-4fb0-97e9-ff2cb876ea86] 24116 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-29 23:55:26.830  INFO [27cc0448-fa2b-4fb0-97e9-ff2cb876ea86] 24116 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-29 23:55:28.506  INFO [27cc0448-fa2b-4fb0-97e9-ff2cb876ea86] 24116 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-29 23:55:28.506  INFO [27cc0448-fa2b-4fb0-97e9-ff2cb876ea86] 24116 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Response length: 184 characters
2025-06-29 23:55:28.507 DEBUG [27cc0448-fa2b-4fb0-97e9-ff2cb876ea86] 24116 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-06",
  "returnDate": null,
  "tripType": "oneWay",
  "adults": 2,
  "children": 0,
  "infants": 0
}
```
2025-06-29 23:55:28.507 DEBUG [27cc0448-fa2b-4fb0-97e9-ff2cb876ea86] 24116 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-29 23:55:28.508 DEBUG [27cc0448-fa2b-4fb0-97e9-ff2cb876ea86] 24116 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-29 23:55:28.508 DEBUG [27cc0448-fa2b-4fb0-97e9-ff2cb876ea86] 24116 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-29 23:55:28.509 DEBUG [27cc0448-fa2b-4fb0-97e9-ff2cb876ea86] 24116 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 23:55:28.509  INFO [27cc0448-fa2b-4fb0-97e9-ff2cb876ea86] 24116 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 23:55:28.509  INFO [27cc0448-fa2b-4fb0-97e9-ff2cb876ea86] 24116 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-06, returnDate=null, tripType=oneWay, adults=2, children=0, infants=0
2025-06-29 23:55:28.509  INFO [27cc0448-fa2b-4fb0-97e9-ff2cb876ea86] 24116 --- [nio-8080-exec-3] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-29 23:55:50.658 DEBUG [59dbd7bf-6497-47c4-aae8-8a987f1cf684] 24116 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/nearby?origin=OTP
2025-06-29 23:55:50.659 DEBUG [59dbd7bf-6497-47c4-aae8-8a987f1cf684] 24116 --- [nio-8080-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 23:55:50.660 DEBUG [59dbd7bf-6497-47c4-aae8-8a987f1cf684] 24116 --- [nio-8080-exec-4] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 29FCC5ABBD2D20519A14D98D833CA9D0
2025-06-29 23:55:50.664 DEBUG [59dbd7bf-6497-47c4-aae8-8a987f1cf684] 24116 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/nearby?origin=OTP
2025-06-29 23:55:50.669  INFO [59dbd7bf-6497-47c4-aae8-8a987f1cf684] 24116 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Received request for nearby flights from origin: OTP, departureDate: null
2025-06-29 23:55:50.670  INFO [59dbd7bf-6497-47c4-aae8-8a987f1cf684] 24116 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Using search date: 2025-06-29
2025-06-29 23:55:50.670  INFO [59dbd7bf-6497-47c4-aae8-8a987f1cf684] 24116 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Cache key: OTP-2025-06-29
2025-06-29 23:55:50.670  INFO [59dbd7bf-6497-47c4-aae8-8a987f1cf684] 24116 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Returning cached nearby flights for origin: OTP, found 6 flights
2025-06-29 23:59:34.685 DEBUG [e5e2fdad-4b23-462d-884f-e41e8b5dc13f] 24116 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/nearby?origin=OTP
2025-06-29 23:59:34.686 DEBUG [e5e2fdad-4b23-462d-884f-e41e8b5dc13f] 24116 --- [nio-8080-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 23:59:34.686 DEBUG [e5e2fdad-4b23-462d-884f-e41e8b5dc13f] 24116 --- [nio-8080-exec-5] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 29FCC5ABBD2D20519A14D98D833CA9D0
2025-06-29 23:59:34.690 DEBUG [e5e2fdad-4b23-462d-884f-e41e8b5dc13f] 24116 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/nearby?origin=OTP
2025-06-29 23:59:34.694  INFO [e5e2fdad-4b23-462d-884f-e41e8b5dc13f] 24116 --- [nio-8080-exec-5] o.e.x.controllers.FlightController       : Received request for nearby flights from origin: OTP, departureDate: null
2025-06-29 23:59:34.695  INFO [e5e2fdad-4b23-462d-884f-e41e8b5dc13f] 24116 --- [nio-8080-exec-5] o.e.x.controllers.FlightController       : Using search date: 2025-06-29
2025-06-29 23:59:34.697  INFO [e5e2fdad-4b23-462d-884f-e41e8b5dc13f] 24116 --- [nio-8080-exec-5] o.e.x.controllers.FlightController       : Cache key: OTP-2025-06-29
2025-06-29 23:59:34.697  INFO [e5e2fdad-4b23-462d-884f-e41e8b5dc13f] 24116 --- [nio-8080-exec-5] o.e.x.controllers.FlightController       : Returning cached nearby flights for origin: OTP, found 6 flights
2025-06-29 23:59:36.882 DEBUG [a6baf464-cd95-4a86-a68b-b6d2383baddc] 24116 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-29 23:59:36.884 DEBUG [a6baf464-cd95-4a86-a68b-b6d2383baddc] 24116 --- [nio-8080-exec-6] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 23:59:36.884 DEBUG [a6baf464-cd95-4a86-a68b-b6d2383baddc] 24116 --- [nio-8080-exec-6] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 29FCC5ABBD2D20519A14D98D833CA9D0
2025-06-29 23:59:36.885 DEBUG [a6baf464-cd95-4a86-a68b-b6d2383baddc] 24116 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-29 23:59:36.889  INFO [a6baf464-cd95-4a86-a68b-b6d2383baddc] 24116 --- [nio-8080-exec-6] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris
2025-06-29 23:59:36.889  INFO [a6baf464-cd95-4a86-a68b-b6d2383baddc] 24116 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-29 23:59:36.891  INFO [a6baf464-cd95-4a86-a68b-b6d2383baddc] 24116 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-29 23:59:36.891 DEBUG [a6baf464-cd95-4a86-a68b-b6d2383baddc] 24116 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-29).    For example, if today is 2025-06-29, a good departure date would be between 2025-07-06 and 2025-07-13, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris";
2025-06-29 23:59:36.895  INFO [a6baf464-cd95-4a86-a68b-b6d2383baddc] 24116 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-29 23:59:36.896  INFO [a6baf464-cd95-4a86-a68b-b6d2383baddc] 24116 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-29 23:59:36.896  INFO [a6baf464-cd95-4a86-a68b-b6d2383baddc] 24116 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-29 23:59:36.896  INFO [a6baf464-cd95-4a86-a68b-b6d2383baddc] 24116 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 23:59:36.896  INFO [a6baf464-cd95-4a86-a68b-b6d2383baddc] 24116 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-29 23:59:36.900  INFO [a6baf464-cd95-4a86-a68b-b6d2383baddc] 24116 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-29 23:59:36.901  INFO [a6baf464-cd95-4a86-a68b-b6d2383baddc] 24116 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-29 23:59:36.901  INFO [a6baf464-cd95-4a86-a68b-b6d2383baddc] 24116 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-29 23:59:36.902  INFO [a6baf464-cd95-4a86-a68b-b6d2383baddc] 24116 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-29 23:59:38.826  INFO [a6baf464-cd95-4a86-a68b-b6d2383baddc] 24116 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-29 23:59:38.827  INFO [a6baf464-cd95-4a86-a68b-b6d2383baddc] 24116 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Response length: 195 characters
2025-06-29 23:59:38.827 DEBUG [a6baf464-cd95-4a86-a68b-b6d2383baddc] 24116 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-06",
  "returnDate": "2025-07-08",
  "tripType": "roundTrip",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-29 23:59:38.828 DEBUG [a6baf464-cd95-4a86-a68b-b6d2383baddc] 24116 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-29 23:59:38.829 DEBUG [a6baf464-cd95-4a86-a68b-b6d2383baddc] 24116 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-29 23:59:38.829 DEBUG [a6baf464-cd95-4a86-a68b-b6d2383baddc] 24116 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-29 23:59:38.829 DEBUG [a6baf464-cd95-4a86-a68b-b6d2383baddc] 24116 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 23:59:38.829  INFO [a6baf464-cd95-4a86-a68b-b6d2383baddc] 24116 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 23:59:38.829  INFO [a6baf464-cd95-4a86-a68b-b6d2383baddc] 24116 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-06, returnDate=2025-07-08, tripType=roundTrip, adults=1, children=0, infants=0
2025-06-29 23:59:38.830  INFO [a6baf464-cd95-4a86-a68b-b6d2383baddc] 24116 --- [nio-8080-exec-6] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-29 23:59:45.541 DEBUG [ff266a1c-4144-4612-93ae-70a9708df9b1] 24116 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-29 23:59:45.544 DEBUG [ff266a1c-4144-4612-93ae-70a9708df9b1] 24116 --- [nio-8080-exec-7] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-29 23:59:45.545 DEBUG [ff266a1c-4144-4612-93ae-70a9708df9b1] 24116 --- [nio-8080-exec-7] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 29FCC5ABBD2D20519A14D98D833CA9D0
2025-06-29 23:59:45.547 DEBUG [ff266a1c-4144-4612-93ae-70a9708df9b1] 24116 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-29 23:59:45.548  INFO [ff266a1c-4144-4612-93ae-70a9708df9b1] 24116 --- [nio-8080-exec-7] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris for 2 adults, one way
2025-06-29 23:59:45.548  INFO [ff266a1c-4144-4612-93ae-70a9708df9b1] 24116 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-29 23:59:45.549  INFO [ff266a1c-4144-4612-93ae-70a9708df9b1] 24116 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-29 23:59:45.549 DEBUG [ff266a1c-4144-4612-93ae-70a9708df9b1] 24116 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-29).    For example, if today is 2025-06-29, a good departure date would be between 2025-07-06 and 2025-07-13, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris for 2 adults, one way";
2025-06-29 23:59:45.551  INFO [ff266a1c-4144-4612-93ae-70a9708df9b1] 24116 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-29 23:59:45.551  INFO [ff266a1c-4144-4612-93ae-70a9708df9b1] 24116 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-29 23:59:45.551  INFO [ff266a1c-4144-4612-93ae-70a9708df9b1] 24116 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-29 23:59:45.551  INFO [ff266a1c-4144-4612-93ae-70a9708df9b1] 24116 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-29 23:59:45.552  INFO [ff266a1c-4144-4612-93ae-70a9708df9b1] 24116 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-29 23:59:45.554  INFO [ff266a1c-4144-4612-93ae-70a9708df9b1] 24116 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-29 23:59:45.554  INFO [ff266a1c-4144-4612-93ae-70a9708df9b1] 24116 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-29 23:59:45.554  INFO [ff266a1c-4144-4612-93ae-70a9708df9b1] 24116 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-29 23:59:45.554  INFO [ff266a1c-4144-4612-93ae-70a9708df9b1] 24116 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-29 23:59:47.092  INFO [ff266a1c-4144-4612-93ae-70a9708df9b1] 24116 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-29 23:59:47.092  INFO [ff266a1c-4144-4612-93ae-70a9708df9b1] 24116 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Response length: 184 characters
2025-06-29 23:59:47.093 DEBUG [ff266a1c-4144-4612-93ae-70a9708df9b1] 24116 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-06",
  "returnDate": null,
  "tripType": "oneWay",
  "adults": 2,
  "children": 0,
  "infants": 0
}
```
2025-06-29 23:59:47.094 DEBUG [ff266a1c-4144-4612-93ae-70a9708df9b1] 24116 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-29 23:59:47.094 DEBUG [ff266a1c-4144-4612-93ae-70a9708df9b1] 24116 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-29 23:59:47.094 DEBUG [ff266a1c-4144-4612-93ae-70a9708df9b1] 24116 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-29 23:59:47.094 DEBUG [ff266a1c-4144-4612-93ae-70a9708df9b1] 24116 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 23:59:47.095  INFO [ff266a1c-4144-4612-93ae-70a9708df9b1] 24116 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-29 23:59:47.095  INFO [ff266a1c-4144-4612-93ae-70a9708df9b1] 24116 --- [nio-8080-exec-7] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-06, returnDate=null, tripType=oneWay, adults=2, children=0, infants=0
2025-06-29 23:59:47.095  INFO [ff266a1c-4144-4612-93ae-70a9708df9b1] 24116 --- [nio-8080-exec-7] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
