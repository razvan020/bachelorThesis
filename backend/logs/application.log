2025-06-30 00:02:22.294 DEBUG [29ddc1fb-4df3-4d8e-9a57-04391b1e505c] 24116 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-30 00:02:22.329 DEBUG [29ddc1fb-4df3-4d8e-9a57-04391b1e505c] 24116 --- [nio-8080-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-30 00:02:22.332 DEBUG [29ddc1fb-4df3-4d8e-9a57-04391b1e505c] 24116 --- [nio-8080-exec-8] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 29FCC5ABBD2D20519A14D98D833CA9D0
2025-06-30 00:02:22.337 DEBUG [29ddc1fb-4df3-4d8e-9a57-04391b1e505c] 24116 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-30 00:02:22.349  INFO [29ddc1fb-4df3-4d8e-9a57-04391b1e505c] 24116 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-30 00:02:22.352  INFO [29ddc1fb-4df3-4d8e-9a57-04391b1e505c] 24116 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-30 00:02:22.470  INFO [29ddc1fb-4df3-4d8e-9a57-04391b1e505c] 24116 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-30 00:02:22.483 DEBUG [ae521500-8ef1-4ed6-9b31-4fcca1a6c851] 24116 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-30 00:02:22.484 DEBUG [ae521500-8ef1-4ed6-9b31-4fcca1a6c851] 24116 --- [nio-8080-exec-9] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-30 00:02:22.484 DEBUG [ae521500-8ef1-4ed6-9b31-4fcca1a6c851] 24116 --- [nio-8080-exec-9] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 29FCC5ABBD2D20519A14D98D833CA9D0
2025-06-30 00:02:22.487 DEBUG [ae521500-8ef1-4ed6-9b31-4fcca1a6c851] 24116 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-06&tripType=oneWay
2025-06-30 00:02:22.490  INFO [ae521500-8ef1-4ed6-9b31-4fcca1a6c851] 24116 --- [nio-8080-exec-9] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-30 00:02:22.490  INFO [ae521500-8ef1-4ed6-9b31-4fcca1a6c851] 24116 --- [nio-8080-exec-9] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-06
2025-06-30 00:02:22.521 DEBUG [d8c7c45d-6442-440a-b562-ab164b0ab4f0] 24116 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-30 00:02:22.522 DEBUG [d8c7c45d-6442-440a-b562-ab164b0ab4f0] 24116 --- [io-8080-exec-10] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-30 00:02:22.523 DEBUG [d8c7c45d-6442-440a-b562-ab164b0ab4f0] 24116 --- [io-8080-exec-10] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 29FCC5ABBD2D20519A14D98D833CA9D0
2025-06-30 00:02:22.526 DEBUG [d8c7c45d-6442-440a-b562-ab164b0ab4f0] 24116 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-30 00:02:22.532  INFO [d8c7c45d-6442-440a-b562-ab164b0ab4f0] 24116 --- [io-8080-exec-10] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-30 00:02:22.613  INFO [ae521500-8ef1-4ed6-9b31-4fcca1a6c851] 24116 --- [nio-8080-exec-9] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-30 00:02:22.769  INFO [d8c7c45d-6442-440a-b562-ab164b0ab4f0] 24116 --- [io-8080-exec-10] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-30 00:02:22.802 DEBUG [62b16c1f-fcf5-49a7-945d-7c9fee760a66] 24116 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-30 00:02:22.804 DEBUG [62b16c1f-fcf5-49a7-945d-7c9fee760a66] 24116 --- [nio-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-30 00:02:22.805 DEBUG [62b16c1f-fcf5-49a7-945d-7c9fee760a66] 24116 --- [nio-8080-exec-1] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 29FCC5ABBD2D20519A14D98D833CA9D0
2025-06-30 00:02:22.806 DEBUG [aa2f7018-b219-45ca-afd4-008d01dc6130] 24116 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-30 00:02:22.807 DEBUG [aa2f7018-b219-45ca-afd4-008d01dc6130] 24116 --- [nio-8080-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-30 00:02:22.808 DEBUG [62b16c1f-fcf5-49a7-945d-7c9fee760a66] 24116 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-30 00:02:22.810 DEBUG [aa2f7018-b219-45ca-afd4-008d01dc6130] 24116 --- [nio-8080-exec-2] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 29FCC5ABBD2D20519A14D98D833CA9D0
2025-06-30 00:02:22.811  INFO [62b16c1f-fcf5-49a7-945d-7c9fee760a66] 24116 --- [nio-8080-exec-1] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-30 00:02:22.814 DEBUG [aa2f7018-b219-45ca-afd4-008d01dc6130] 24116 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-30 00:02:22.816  INFO [aa2f7018-b219-45ca-afd4-008d01dc6130] 24116 --- [nio-8080-exec-2] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-30 00:02:22.857  INFO [62b16c1f-fcf5-49a7-945d-7c9fee760a66] 24116 --- [nio-8080-exec-1] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-30 00:02:23.048  INFO [aa2f7018-b219-45ca-afd4-008d01dc6130] 24116 --- [nio-8080-exec-2] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-30 00:02:23.057 DEBUG [69714d93-cfc5-4bdd-8144-e31e90835830] 24116 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-30 00:02:23.058 DEBUG [69714d93-cfc5-4bdd-8144-e31e90835830] 24116 --- [nio-8080-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-30 00:02:23.060 DEBUG [69714d93-cfc5-4bdd-8144-e31e90835830] 24116 --- [nio-8080-exec-3] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 29FCC5ABBD2D20519A14D98D833CA9D0
2025-06-30 00:02:23.062 DEBUG [69714d93-cfc5-4bdd-8144-e31e90835830] 24116 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-30 00:02:23.063  INFO [69714d93-cfc5-4bdd-8144-e31e90835830] 24116 --- [nio-8080-exec-3] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-30 00:02:23.117  INFO [69714d93-cfc5-4bdd-8144-e31e90835830] 24116 --- [nio-8080-exec-3] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-30 00:02:33.766 DEBUG [125d2f50-62ef-4b2a-ad27-fd28ebd39472] 24116 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/nearby?origin=OTP
2025-06-30 00:02:33.767 DEBUG [125d2f50-62ef-4b2a-ad27-fd28ebd39472] 24116 --- [nio-8080-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-30 00:02:33.767 DEBUG [125d2f50-62ef-4b2a-ad27-fd28ebd39472] 24116 --- [nio-8080-exec-4] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 29FCC5ABBD2D20519A14D98D833CA9D0
2025-06-30 00:02:33.768 DEBUG [125d2f50-62ef-4b2a-ad27-fd28ebd39472] 24116 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/nearby?origin=OTP
2025-06-30 00:02:33.769  INFO [125d2f50-62ef-4b2a-ad27-fd28ebd39472] 24116 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Received request for nearby flights from origin: OTP, departureDate: null
2025-06-30 00:02:33.770  INFO [125d2f50-62ef-4b2a-ad27-fd28ebd39472] 24116 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Using search date: 2025-06-30
2025-06-30 00:02:33.770  INFO [125d2f50-62ef-4b2a-ad27-fd28ebd39472] 24116 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Cache key: OTP-2025-06-30
2025-06-30 00:02:33.770  INFO [125d2f50-62ef-4b2a-ad27-fd28ebd39472] 24116 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : No valid cache found. Searching nearby flights from origin: OTP, after date: 2025-06-30
2025-06-30 00:02:33.771  INFO [125d2f50-62ef-4b2a-ad27-fd28ebd39472] 24116 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Calling flightService.findByOriginAndDepartureDateAfter for origin: OTP, date: 2025-06-30
2025-06-30 00:02:33.853  INFO [125d2f50-62ef-4b2a-ad27-fd28ebd39472] 24116 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Database query completed, found 8 flights
2025-06-30 00:02:33.853  INFO [125d2f50-62ef-4b2a-ad27-fd28ebd39472] 24116 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Converting 8 Flight entities to FlightDTOs
2025-06-30 00:02:33.854  INFO [125d2f50-62ef-4b2a-ad27-fd28ebd39472] 24116 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Converted to 8 FlightDTOs
2025-06-30 00:02:33.854  INFO [125d2f50-62ef-4b2a-ad27-fd28ebd39472] 24116 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Grouping flights by destination country
2025-06-30 00:02:33.854  INFO [125d2f50-62ef-4b2a-ad27-fd28ebd39472] 24116 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Grouped flights into 7 countries
2025-06-30 00:02:33.854  INFO [125d2f50-62ef-4b2a-ad27-fd28ebd39472] 24116 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Selecting diverse flights - one from each country first
2025-06-30 00:02:33.854  INFO [125d2f50-62ef-4b2a-ad27-fd28ebd39472] 24116 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Adding first flight from Greece (has 1 flights)
2025-06-30 00:02:33.855  INFO [125d2f50-62ef-4b2a-ad27-fd28ebd39472] 24116 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Adding first flight from Netherlands (has 1 flights)
2025-06-30 00:02:33.855  INFO [125d2f50-62ef-4b2a-ad27-fd28ebd39472] 24116 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Adding first flight from Italy (has 1 flights)
2025-06-30 00:02:33.856  INFO [125d2f50-62ef-4b2a-ad27-fd28ebd39472] 24116 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Adding first flight from United Kingdom (has 1 flights)
2025-06-30 00:02:33.856  INFO [125d2f50-62ef-4b2a-ad27-fd28ebd39472] 24116 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Adding first flight from France (has 1 flights)
2025-06-30 00:02:33.856  INFO [125d2f50-62ef-4b2a-ad27-fd28ebd39472] 24116 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Adding first flight from Switzerland (has 1 flights)
2025-06-30 00:02:33.856  INFO [125d2f50-62ef-4b2a-ad27-fd28ebd39472] 24116 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Reached 6 flights after first pass, stopping
2025-06-30 00:02:33.856  INFO [125d2f50-62ef-4b2a-ad27-fd28ebd39472] 24116 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Caching 6 diverse flights with key: OTP-2025-06-30
2025-06-30 00:02:33.857  INFO [125d2f50-62ef-4b2a-ad27-fd28ebd39472] 24116 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Returning 6 diverse nearby flights from: OTP
2025-06-30 00:02:37.305 DEBUG [2c50fef0-55c2-4ee0-9744-74f46d2a2c54] 24116 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-30 00:02:37.306 DEBUG [2c50fef0-55c2-4ee0-9744-74f46d2a2c54] 24116 --- [nio-8080-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-30 00:02:37.306 DEBUG [2c50fef0-55c2-4ee0-9744-74f46d2a2c54] 24116 --- [nio-8080-exec-5] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 29FCC5ABBD2D20519A14D98D833CA9D0
2025-06-30 00:02:37.307 DEBUG [2c50fef0-55c2-4ee0-9744-74f46d2a2c54] 24116 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-30 00:02:37.309  INFO [2c50fef0-55c2-4ee0-9744-74f46d2a2c54] 24116 --- [nio-8080-exec-5] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris
2025-06-30 00:02:37.309  INFO [2c50fef0-55c2-4ee0-9744-74f46d2a2c54] 24116 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-30 00:02:37.310  INFO [2c50fef0-55c2-4ee0-9744-74f46d2a2c54] 24116 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-30 00:02:37.310 DEBUG [2c50fef0-55c2-4ee0-9744-74f46d2a2c54] 24116 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-30).    For example, if today is 2025-06-30, a good departure date would be between 2025-07-07 and 2025-07-14, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris";
2025-06-30 00:02:37.312  INFO [2c50fef0-55c2-4ee0-9744-74f46d2a2c54] 24116 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-30 00:02:37.312  INFO [2c50fef0-55c2-4ee0-9744-74f46d2a2c54] 24116 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-30 00:02:37.312  INFO [2c50fef0-55c2-4ee0-9744-74f46d2a2c54] 24116 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-30 00:02:37.312  INFO [2c50fef0-55c2-4ee0-9744-74f46d2a2c54] 24116 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-30 00:02:37.314  INFO [2c50fef0-55c2-4ee0-9744-74f46d2a2c54] 24116 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-30 00:02:37.316  INFO [2c50fef0-55c2-4ee0-9744-74f46d2a2c54] 24116 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-30 00:02:37.316  INFO [2c50fef0-55c2-4ee0-9744-74f46d2a2c54] 24116 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-30 00:02:37.316  INFO [2c50fef0-55c2-4ee0-9744-74f46d2a2c54] 24116 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-30 00:02:37.317  INFO [2c50fef0-55c2-4ee0-9744-74f46d2a2c54] 24116 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-30 00:02:39.231  INFO [2c50fef0-55c2-4ee0-9744-74f46d2a2c54] 24116 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-30 00:02:39.232  INFO [2c50fef0-55c2-4ee0-9744-74f46d2a2c54] 24116 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Response length: 195 characters
2025-06-30 00:02:39.232 DEBUG [2c50fef0-55c2-4ee0-9744-74f46d2a2c54] 24116 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-07",
  "returnDate": "2025-07-09",
  "tripType": "roundTrip",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-30 00:02:39.233 DEBUG [2c50fef0-55c2-4ee0-9744-74f46d2a2c54] 24116 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-30 00:02:39.233 DEBUG [2c50fef0-55c2-4ee0-9744-74f46d2a2c54] 24116 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-30 00:02:39.233 DEBUG [2c50fef0-55c2-4ee0-9744-74f46d2a2c54] 24116 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-30 00:02:39.233 DEBUG [2c50fef0-55c2-4ee0-9744-74f46d2a2c54] 24116 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-30 00:02:39.234  INFO [2c50fef0-55c2-4ee0-9744-74f46d2a2c54] 24116 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-30 00:02:39.234  INFO [2c50fef0-55c2-4ee0-9744-74f46d2a2c54] 24116 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-07, returnDate=2025-07-09, tripType=roundTrip, adults=1, children=0, infants=0
2025-06-30 00:02:39.234  INFO [2c50fef0-55c2-4ee0-9744-74f46d2a2c54] 24116 --- [nio-8080-exec-5] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-30 00:02:43.172 DEBUG [c021d149-fe92-4a4d-b8d2-5f625551877e] 24116 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-30 00:02:43.177 DEBUG [c021d149-fe92-4a4d-b8d2-5f625551877e] 24116 --- [nio-8080-exec-6] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-30 00:02:43.178 DEBUG [c021d149-fe92-4a4d-b8d2-5f625551877e] 24116 --- [nio-8080-exec-6] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 29FCC5ABBD2D20519A14D98D833CA9D0
2025-06-30 00:02:43.180 DEBUG [c021d149-fe92-4a4d-b8d2-5f625551877e] 24116 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-30 00:02:43.183  INFO [c021d149-fe92-4a4d-b8d2-5f625551877e] 24116 --- [nio-8080-exec-6] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris one way 2 adults
2025-06-30 00:02:43.184  INFO [c021d149-fe92-4a4d-b8d2-5f625551877e] 24116 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-30 00:02:43.184  INFO [c021d149-fe92-4a4d-b8d2-5f625551877e] 24116 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-30 00:02:43.185 DEBUG [c021d149-fe92-4a4d-b8d2-5f625551877e] 24116 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-30).    For example, if today is 2025-06-30, a good departure date would be between 2025-07-07 and 2025-07-14, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris one way 2 adults";
2025-06-30 00:02:43.188  INFO [c021d149-fe92-4a4d-b8d2-5f625551877e] 24116 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-30 00:02:43.188  INFO [c021d149-fe92-4a4d-b8d2-5f625551877e] 24116 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-30 00:02:43.188  INFO [c021d149-fe92-4a4d-b8d2-5f625551877e] 24116 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-30 00:02:43.188  INFO [c021d149-fe92-4a4d-b8d2-5f625551877e] 24116 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-30 00:02:43.188  INFO [c021d149-fe92-4a4d-b8d2-5f625551877e] 24116 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-30 00:02:43.190  INFO [c021d149-fe92-4a4d-b8d2-5f625551877e] 24116 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-30 00:02:43.190  INFO [c021d149-fe92-4a4d-b8d2-5f625551877e] 24116 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-30 00:02:43.190  INFO [c021d149-fe92-4a4d-b8d2-5f625551877e] 24116 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-30 00:02:43.191  INFO [c021d149-fe92-4a4d-b8d2-5f625551877e] 24116 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-30 00:02:44.922  INFO [c021d149-fe92-4a4d-b8d2-5f625551877e] 24116 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-30 00:02:44.923  INFO [c021d149-fe92-4a4d-b8d2-5f625551877e] 24116 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Response length: 184 characters
2025-06-30 00:02:44.927 DEBUG [c021d149-fe92-4a4d-b8d2-5f625551877e] 24116 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-07",
  "returnDate": null,
  "tripType": "oneWay",
  "adults": 2,
  "children": 0,
  "infants": 0
}
```
2025-06-30 00:02:44.929 DEBUG [c021d149-fe92-4a4d-b8d2-5f625551877e] 24116 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-30 00:02:44.930 DEBUG [c021d149-fe92-4a4d-b8d2-5f625551877e] 24116 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-30 00:02:44.930 DEBUG [c021d149-fe92-4a4d-b8d2-5f625551877e] 24116 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-30 00:02:44.930 DEBUG [c021d149-fe92-4a4d-b8d2-5f625551877e] 24116 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-30 00:02:44.932  INFO [c021d149-fe92-4a4d-b8d2-5f625551877e] 24116 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-30 00:02:44.932  INFO [c021d149-fe92-4a4d-b8d2-5f625551877e] 24116 --- [nio-8080-exec-6] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-07, returnDate=null, tripType=oneWay, adults=2, children=0, infants=0
2025-06-30 00:02:44.932  INFO [c021d149-fe92-4a4d-b8d2-5f625551877e] 24116 --- [nio-8080-exec-6] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-30 00:02:47.345 DEBUG [03ad38e0-5355-4569-8a1c-956733f639c5] 24116 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-07&tripType=oneWay
2025-06-30 00:02:47.346 DEBUG [03ad38e0-5355-4569-8a1c-956733f639c5] 24116 --- [nio-8080-exec-7] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-30 00:02:47.348 DEBUG [03ad38e0-5355-4569-8a1c-956733f639c5] 24116 --- [nio-8080-exec-7] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 29FCC5ABBD2D20519A14D98D833CA9D0
2025-06-30 00:02:47.351 DEBUG [03ad38e0-5355-4569-8a1c-956733f639c5] 24116 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-07&tripType=oneWay
2025-06-30 00:02:47.353  INFO [03ad38e0-5355-4569-8a1c-956733f639c5] 24116 --- [nio-8080-exec-7] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-07, Return=null, Pax=1/0/0
2025-06-30 00:02:47.354  INFO [03ad38e0-5355-4569-8a1c-956733f639c5] 24116 --- [nio-8080-exec-7] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-07
2025-06-30 00:02:47.372  WARN [03ad38e0-5355-4569-8a1c-956733f639c5] 24116 --- [nio-8080-exec-7] o.e.x.controllers.FlightController       : No flights found for search: OTP to CDG on 2025-07-07
2025-06-30 00:02:47.373  INFO [03ad38e0-5355-4569-8a1c-956733f639c5] 24116 --- [nio-8080-exec-7] o.e.x.controllers.FlightController       : Found 0 available flights for search criteria.
2025-06-30 00:02:47.386 DEBUG [b30412ff-7132-408a-9be9-47dacf2e30aa] 24116 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-07&tripType=oneWay
2025-06-30 00:02:47.388 DEBUG [b30412ff-7132-408a-9be9-47dacf2e30aa] 24116 --- [nio-8080-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-30 00:02:47.388 DEBUG [b30412ff-7132-408a-9be9-47dacf2e30aa] 24116 --- [nio-8080-exec-8] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 29FCC5ABBD2D20519A14D98D833CA9D0
2025-06-30 00:02:47.390 DEBUG [b30412ff-7132-408a-9be9-47dacf2e30aa] 24116 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-07&tripType=oneWay
2025-06-30 00:02:47.391  INFO [b30412ff-7132-408a-9be9-47dacf2e30aa] 24116 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-07, Return=null, Pax=1/0/0
2025-06-30 00:02:47.392  INFO [b30412ff-7132-408a-9be9-47dacf2e30aa] 24116 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-07
2025-06-30 00:02:47.404  WARN [b30412ff-7132-408a-9be9-47dacf2e30aa] 24116 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : No flights found for search: OTP to CDG on 2025-07-07
2025-06-30 00:02:47.405  INFO [b30412ff-7132-408a-9be9-47dacf2e30aa] 24116 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Found 0 available flights for search criteria.
2025-06-30 00:02:47.413 DEBUG [7c4bb171-e3ae-481c-97f1-35d6d165a0df] 24116 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-30 00:02:47.414 DEBUG [7c4bb171-e3ae-481c-97f1-35d6d165a0df] 24116 --- [nio-8080-exec-9] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-30 00:02:47.415 DEBUG [7c4bb171-e3ae-481c-97f1-35d6d165a0df] 24116 --- [nio-8080-exec-9] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 29FCC5ABBD2D20519A14D98D833CA9D0
2025-06-30 00:02:47.416 DEBUG [7c4bb171-e3ae-481c-97f1-35d6d165a0df] 24116 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-30 00:02:47.417  INFO [7c4bb171-e3ae-481c-97f1-35d6d165a0df] 24116 --- [nio-8080-exec-9] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-30 00:02:47.570  INFO [7c4bb171-e3ae-481c-97f1-35d6d165a0df] 24116 --- [nio-8080-exec-9] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-30 00:02:47.580 DEBUG [90e3ef92-63d1-4b5b-aa91-0466bd327225] 24116 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-30 00:02:47.582 DEBUG [90e3ef92-63d1-4b5b-aa91-0466bd327225] 24116 --- [io-8080-exec-10] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-30 00:02:47.582 DEBUG [90e3ef92-63d1-4b5b-aa91-0466bd327225] 24116 --- [io-8080-exec-10] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 29FCC5ABBD2D20519A14D98D833CA9D0
2025-06-30 00:02:47.583 DEBUG [64641051-5cc5-4646-83f4-6d3e13dfc4e7] 24116 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-30 00:02:47.583 DEBUG [64641051-5cc5-4646-83f4-6d3e13dfc4e7] 24116 --- [nio-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-30 00:02:47.584 DEBUG [90e3ef92-63d1-4b5b-aa91-0466bd327225] 24116 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-30 00:02:47.584 DEBUG [64641051-5cc5-4646-83f4-6d3e13dfc4e7] 24116 --- [nio-8080-exec-1] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 29FCC5ABBD2D20519A14D98D833CA9D0
2025-06-30 00:02:47.585  INFO [90e3ef92-63d1-4b5b-aa91-0466bd327225] 24116 --- [io-8080-exec-10] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-30 00:02:47.585 DEBUG [64641051-5cc5-4646-83f4-6d3e13dfc4e7] 24116 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-30 00:02:47.586  INFO [64641051-5cc5-4646-83f4-6d3e13dfc4e7] 24116 --- [nio-8080-exec-1] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-30 00:02:47.630  INFO [90e3ef92-63d1-4b5b-aa91-0466bd327225] 24116 --- [io-8080-exec-10] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-30 00:02:47.763  INFO [64641051-5cc5-4646-83f4-6d3e13dfc4e7] 24116 --- [nio-8080-exec-1] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-30 00:02:47.776 DEBUG [8d82fc68-f211-413f-956b-0b70b4ff60e1] 24116 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-30 00:02:47.778 DEBUG [8d82fc68-f211-413f-956b-0b70b4ff60e1] 24116 --- [nio-8080-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-30 00:02:47.779 DEBUG [8d82fc68-f211-413f-956b-0b70b4ff60e1] 24116 --- [nio-8080-exec-2] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 29FCC5ABBD2D20519A14D98D833CA9D0
2025-06-30 00:02:47.781 DEBUG [8d82fc68-f211-413f-956b-0b70b4ff60e1] 24116 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-30 00:02:47.783  INFO [8d82fc68-f211-413f-956b-0b70b4ff60e1] 24116 --- [nio-8080-exec-2] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-30 00:02:47.827  INFO [8d82fc68-f211-413f-956b-0b70b4ff60e1] 24116 --- [nio-8080-exec-2] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-30 00:02:50.407 DEBUG [b8c1b089-fed1-4301-9938-4612d3b6310f] 24116 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/nearby?origin=OTP
2025-06-30 00:02:50.408 DEBUG [b8c1b089-fed1-4301-9938-4612d3b6310f] 24116 --- [nio-8080-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-30 00:02:50.414 DEBUG [b8c1b089-fed1-4301-9938-4612d3b6310f] 24116 --- [nio-8080-exec-3] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 29FCC5ABBD2D20519A14D98D833CA9D0
2025-06-30 00:02:50.418 DEBUG [b8c1b089-fed1-4301-9938-4612d3b6310f] 24116 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/nearby?origin=OTP
2025-06-30 00:02:50.421  INFO [b8c1b089-fed1-4301-9938-4612d3b6310f] 24116 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : Received request for nearby flights from origin: OTP, departureDate: null
2025-06-30 00:02:50.421  INFO [b8c1b089-fed1-4301-9938-4612d3b6310f] 24116 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : Using search date: 2025-06-30
2025-06-30 00:02:50.422  INFO [b8c1b089-fed1-4301-9938-4612d3b6310f] 24116 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : Cache key: OTP-2025-06-30
2025-06-30 00:02:50.429  INFO [b8c1b089-fed1-4301-9938-4612d3b6310f] 24116 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : Returning cached nearby flights for origin: OTP, found 6 flights
2025-06-30 00:02:52.212 DEBUG [1c041ef3-fe5b-45fa-8c95-db5a906832aa] 24116 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-30 00:02:52.213 DEBUG [1c041ef3-fe5b-45fa-8c95-db5a906832aa] 24116 --- [nio-8080-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-30 00:02:52.214 DEBUG [1c041ef3-fe5b-45fa-8c95-db5a906832aa] 24116 --- [nio-8080-exec-4] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 29FCC5ABBD2D20519A14D98D833CA9D0
2025-06-30 00:02:52.216 DEBUG [1c041ef3-fe5b-45fa-8c95-db5a906832aa] 24116 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-30 00:02:52.217  INFO [1c041ef3-fe5b-45fa-8c95-db5a906832aa] 24116 --- [nio-8080-exec-4] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris
2025-06-30 00:02:52.217  INFO [1c041ef3-fe5b-45fa-8c95-db5a906832aa] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-30 00:02:52.217  INFO [1c041ef3-fe5b-45fa-8c95-db5a906832aa] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-30 00:02:52.217 DEBUG [1c041ef3-fe5b-45fa-8c95-db5a906832aa] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-30).    For example, if today is 2025-06-30, a good departure date would be between 2025-07-07 and 2025-07-14, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris";
2025-06-30 00:02:52.219  INFO [1c041ef3-fe5b-45fa-8c95-db5a906832aa] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-30 00:02:52.219  INFO [1c041ef3-fe5b-45fa-8c95-db5a906832aa] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-30 00:02:52.219  INFO [1c041ef3-fe5b-45fa-8c95-db5a906832aa] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-30 00:02:52.220  INFO [1c041ef3-fe5b-45fa-8c95-db5a906832aa] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-30 00:02:52.220  INFO [1c041ef3-fe5b-45fa-8c95-db5a906832aa] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-30 00:02:52.222  INFO [1c041ef3-fe5b-45fa-8c95-db5a906832aa] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-30 00:02:52.222  INFO [1c041ef3-fe5b-45fa-8c95-db5a906832aa] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-30 00:02:52.222  INFO [1c041ef3-fe5b-45fa-8c95-db5a906832aa] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-30 00:02:52.222  INFO [1c041ef3-fe5b-45fa-8c95-db5a906832aa] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-30 00:02:54.040  INFO [1c041ef3-fe5b-45fa-8c95-db5a906832aa] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-30 00:02:54.040  INFO [1c041ef3-fe5b-45fa-8c95-db5a906832aa] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Response length: 195 characters
2025-06-30 00:02:54.040 DEBUG [1c041ef3-fe5b-45fa-8c95-db5a906832aa] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-07",
  "returnDate": "2025-07-09",
  "tripType": "roundTrip",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-30 00:02:54.041 DEBUG [1c041ef3-fe5b-45fa-8c95-db5a906832aa] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-30 00:02:54.041 DEBUG [1c041ef3-fe5b-45fa-8c95-db5a906832aa] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-30 00:02:54.042 DEBUG [1c041ef3-fe5b-45fa-8c95-db5a906832aa] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-30 00:02:54.042 DEBUG [1c041ef3-fe5b-45fa-8c95-db5a906832aa] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-30 00:02:54.042  INFO [1c041ef3-fe5b-45fa-8c95-db5a906832aa] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-30 00:02:54.042  INFO [1c041ef3-fe5b-45fa-8c95-db5a906832aa] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-07, returnDate=2025-07-09, tripType=roundTrip, adults=1, children=0, infants=0
2025-06-30 00:02:54.043  INFO [1c041ef3-fe5b-45fa-8c95-db5a906832aa] 24116 --- [nio-8080-exec-4] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-30 00:02:57.671 DEBUG [baa3192b-fedd-454d-b7c0-5276eac674f1] 24116 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-30 00:02:57.672 DEBUG [baa3192b-fedd-454d-b7c0-5276eac674f1] 24116 --- [nio-8080-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-30 00:02:57.672 DEBUG [baa3192b-fedd-454d-b7c0-5276eac674f1] 24116 --- [nio-8080-exec-5] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 29FCC5ABBD2D20519A14D98D833CA9D0
2025-06-30 00:02:57.674 DEBUG [baa3192b-fedd-454d-b7c0-5276eac674f1] 24116 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-30 00:02:57.676  INFO [baa3192b-fedd-454d-b7c0-5276eac674f1] 24116 --- [nio-8080-exec-5] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris for 2 adults, one way
2025-06-30 00:02:57.676  INFO [baa3192b-fedd-454d-b7c0-5276eac674f1] 24116 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-30 00:02:57.676  INFO [baa3192b-fedd-454d-b7c0-5276eac674f1] 24116 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-30 00:02:57.676 DEBUG [baa3192b-fedd-454d-b7c0-5276eac674f1] 24116 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-30).    For example, if today is 2025-06-30, a good departure date would be between 2025-07-07 and 2025-07-14, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris for 2 adults, one way";
2025-06-30 00:02:57.679  INFO [baa3192b-fedd-454d-b7c0-5276eac674f1] 24116 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-30 00:02:57.679  INFO [baa3192b-fedd-454d-b7c0-5276eac674f1] 24116 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-30 00:02:57.679  INFO [baa3192b-fedd-454d-b7c0-5276eac674f1] 24116 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-30 00:02:57.679  INFO [baa3192b-fedd-454d-b7c0-5276eac674f1] 24116 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-30 00:02:57.680  INFO [baa3192b-fedd-454d-b7c0-5276eac674f1] 24116 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-30 00:02:57.682  INFO [baa3192b-fedd-454d-b7c0-5276eac674f1] 24116 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-30 00:02:57.682  INFO [baa3192b-fedd-454d-b7c0-5276eac674f1] 24116 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-30 00:02:57.682  INFO [baa3192b-fedd-454d-b7c0-5276eac674f1] 24116 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-30 00:02:57.682  INFO [baa3192b-fedd-454d-b7c0-5276eac674f1] 24116 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-30 00:02:59.362  INFO [baa3192b-fedd-454d-b7c0-5276eac674f1] 24116 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-30 00:02:59.362  INFO [baa3192b-fedd-454d-b7c0-5276eac674f1] 24116 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Response length: 184 characters
2025-06-30 00:02:59.362 DEBUG [baa3192b-fedd-454d-b7c0-5276eac674f1] 24116 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-07",
  "returnDate": null,
  "tripType": "oneWay",
  "adults": 2,
  "children": 0,
  "infants": 0
}
```
2025-06-30 00:02:59.363 DEBUG [baa3192b-fedd-454d-b7c0-5276eac674f1] 24116 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-30 00:02:59.364 DEBUG [baa3192b-fedd-454d-b7c0-5276eac674f1] 24116 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-30 00:02:59.364 DEBUG [baa3192b-fedd-454d-b7c0-5276eac674f1] 24116 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-30 00:02:59.364 DEBUG [baa3192b-fedd-454d-b7c0-5276eac674f1] 24116 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-30 00:02:59.364  INFO [baa3192b-fedd-454d-b7c0-5276eac674f1] 24116 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-30 00:02:59.364  INFO [baa3192b-fedd-454d-b7c0-5276eac674f1] 24116 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-07, returnDate=null, tripType=oneWay, adults=2, children=0, infants=0
2025-06-30 00:02:59.365  INFO [baa3192b-fedd-454d-b7c0-5276eac674f1] 24116 --- [nio-8080-exec-5] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-30 00:03:01.824 DEBUG [7d50ac2b-8cf6-4962-85f9-370101a58e8c] 24116 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-07&tripType=oneWay
2025-06-30 00:03:01.825 DEBUG [7d50ac2b-8cf6-4962-85f9-370101a58e8c] 24116 --- [nio-8080-exec-6] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-30 00:03:01.825 DEBUG [7d50ac2b-8cf6-4962-85f9-370101a58e8c] 24116 --- [nio-8080-exec-6] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 29FCC5ABBD2D20519A14D98D833CA9D0
2025-06-30 00:03:01.827 DEBUG [7d50ac2b-8cf6-4962-85f9-370101a58e8c] 24116 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-07&tripType=oneWay
2025-06-30 00:03:01.828  INFO [7d50ac2b-8cf6-4962-85f9-370101a58e8c] 24116 --- [nio-8080-exec-6] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-07, Return=null, Pax=1/0/0
2025-06-30 00:03:01.829  INFO [7d50ac2b-8cf6-4962-85f9-370101a58e8c] 24116 --- [nio-8080-exec-6] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-07
2025-06-30 00:03:01.844  WARN [7d50ac2b-8cf6-4962-85f9-370101a58e8c] 24116 --- [nio-8080-exec-6] o.e.x.controllers.FlightController       : No flights found for search: OTP to CDG on 2025-07-07
2025-06-30 00:03:01.844  INFO [7d50ac2b-8cf6-4962-85f9-370101a58e8c] 24116 --- [nio-8080-exec-6] o.e.x.controllers.FlightController       : Found 0 available flights for search criteria.
2025-06-30 00:03:01.855 DEBUG [b680fdb1-4559-466d-90a1-e623d97933bc] 24116 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-07&tripType=oneWay
2025-06-30 00:03:01.856 DEBUG [b680fdb1-4559-466d-90a1-e623d97933bc] 24116 --- [nio-8080-exec-7] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-30 00:03:01.859 DEBUG [b680fdb1-4559-466d-90a1-e623d97933bc] 24116 --- [nio-8080-exec-7] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 29FCC5ABBD2D20519A14D98D833CA9D0
2025-06-30 00:03:01.861 DEBUG [b680fdb1-4559-466d-90a1-e623d97933bc] 24116 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-07&tripType=oneWay
2025-06-30 00:03:01.862  INFO [b680fdb1-4559-466d-90a1-e623d97933bc] 24116 --- [nio-8080-exec-7] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-07, Return=null, Pax=1/0/0
2025-06-30 00:03:01.864  INFO [b680fdb1-4559-466d-90a1-e623d97933bc] 24116 --- [nio-8080-exec-7] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-07
2025-06-30 00:03:01.877  WARN [b680fdb1-4559-466d-90a1-e623d97933bc] 24116 --- [nio-8080-exec-7] o.e.x.controllers.FlightController       : No flights found for search: OTP to CDG on 2025-07-07
2025-06-30 00:03:01.877  INFO [b680fdb1-4559-466d-90a1-e623d97933bc] 24116 --- [nio-8080-exec-7] o.e.x.controllers.FlightController       : Found 0 available flights for search criteria.
2025-06-30 00:03:01.894 DEBUG [0ce1edfa-2dc5-4388-bb23-2cf19b12b314] 24116 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-30 00:03:01.896 DEBUG [0ce1edfa-2dc5-4388-bb23-2cf19b12b314] 24116 --- [nio-8080-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-30 00:03:01.897 DEBUG [0ce1edfa-2dc5-4388-bb23-2cf19b12b314] 24116 --- [nio-8080-exec-8] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 29FCC5ABBD2D20519A14D98D833CA9D0
2025-06-30 00:03:01.900 DEBUG [0ce1edfa-2dc5-4388-bb23-2cf19b12b314] 24116 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-30 00:03:01.905  INFO [0ce1edfa-2dc5-4388-bb23-2cf19b12b314] 24116 --- [nio-8080-exec-8] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-30 00:03:02.065  INFO [0ce1edfa-2dc5-4388-bb23-2cf19b12b314] 24116 --- [nio-8080-exec-8] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-30 00:03:02.073 DEBUG [0ffa08a2-793f-4bad-a8c1-3d4628f04450] 24116 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-30 00:03:02.074 DEBUG [0ffa08a2-793f-4bad-a8c1-3d4628f04450] 24116 --- [nio-8080-exec-9] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-30 00:03:02.074 DEBUG [0ffa08a2-793f-4bad-a8c1-3d4628f04450] 24116 --- [nio-8080-exec-9] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 29FCC5ABBD2D20519A14D98D833CA9D0
2025-06-30 00:03:02.075 DEBUG [0ffa08a2-793f-4bad-a8c1-3d4628f04450] 24116 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-30 00:03:02.076 DEBUG [f22987fb-bc40-4f2b-9f4e-b7d439a0a1a3] 24116 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-30 00:03:02.076  INFO [0ffa08a2-793f-4bad-a8c1-3d4628f04450] 24116 --- [nio-8080-exec-9] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-30 00:03:02.076 DEBUG [f22987fb-bc40-4f2b-9f4e-b7d439a0a1a3] 24116 --- [io-8080-exec-10] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-30 00:03:02.076 DEBUG [f22987fb-bc40-4f2b-9f4e-b7d439a0a1a3] 24116 --- [io-8080-exec-10] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 29FCC5ABBD2D20519A14D98D833CA9D0
2025-06-30 00:03:02.078 DEBUG [f22987fb-bc40-4f2b-9f4e-b7d439a0a1a3] 24116 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-30 00:03:02.079  INFO [f22987fb-bc40-4f2b-9f4e-b7d439a0a1a3] 24116 --- [io-8080-exec-10] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-30 00:03:02.121  INFO [0ffa08a2-793f-4bad-a8c1-3d4628f04450] 24116 --- [nio-8080-exec-9] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-30 00:03:02.282  INFO [f22987fb-bc40-4f2b-9f4e-b7d439a0a1a3] 24116 --- [io-8080-exec-10] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-30 00:03:02.289 DEBUG [a9268fa4-a3bc-4b84-9f7e-74c1fa8a94a4] 24116 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-30 00:03:02.291 DEBUG [a9268fa4-a3bc-4b84-9f7e-74c1fa8a94a4] 24116 --- [nio-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-30 00:03:02.291 DEBUG [a9268fa4-a3bc-4b84-9f7e-74c1fa8a94a4] 24116 --- [nio-8080-exec-1] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 29FCC5ABBD2D20519A14D98D833CA9D0
2025-06-30 00:03:02.292 DEBUG [a9268fa4-a3bc-4b84-9f7e-74c1fa8a94a4] 24116 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-30 00:03:02.293  INFO [a9268fa4-a3bc-4b84-9f7e-74c1fa8a94a4] 24116 --- [nio-8080-exec-1] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-30 00:03:02.340  INFO [a9268fa4-a3bc-4b84-9f7e-74c1fa8a94a4] 24116 --- [nio-8080-exec-1] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-30 00:06:39.363 DEBUG [00e2085c-ff8d-4d0a-b886-b56362927122] 24116 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/nearby?origin=OTP
2025-06-30 00:06:39.365 DEBUG [00e2085c-ff8d-4d0a-b886-b56362927122] 24116 --- [nio-8080-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-30 00:06:39.365 DEBUG [00e2085c-ff8d-4d0a-b886-b56362927122] 24116 --- [nio-8080-exec-2] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 29FCC5ABBD2D20519A14D98D833CA9D0
2025-06-30 00:06:39.366 DEBUG [00e2085c-ff8d-4d0a-b886-b56362927122] 24116 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/nearby?origin=OTP
2025-06-30 00:06:39.367  INFO [00e2085c-ff8d-4d0a-b886-b56362927122] 24116 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Received request for nearby flights from origin: OTP, departureDate: null
2025-06-30 00:06:39.368  INFO [00e2085c-ff8d-4d0a-b886-b56362927122] 24116 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Using search date: 2025-06-30
2025-06-30 00:06:39.368  INFO [00e2085c-ff8d-4d0a-b886-b56362927122] 24116 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Cache key: OTP-2025-06-30
2025-06-30 00:06:39.368  INFO [00e2085c-ff8d-4d0a-b886-b56362927122] 24116 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Returning cached nearby flights for origin: OTP, found 6 flights
2025-06-30 00:06:41.368 DEBUG [83d2a183-1aa5-4c3c-92fc-0d44f53c9d92] 24116 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-30 00:06:41.369 DEBUG [83d2a183-1aa5-4c3c-92fc-0d44f53c9d92] 24116 --- [nio-8080-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-30 00:06:41.370 DEBUG [83d2a183-1aa5-4c3c-92fc-0d44f53c9d92] 24116 --- [nio-8080-exec-3] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 29FCC5ABBD2D20519A14D98D833CA9D0
2025-06-30 00:06:41.371 DEBUG [83d2a183-1aa5-4c3c-92fc-0d44f53c9d92] 24116 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-30 00:06:41.372  INFO [83d2a183-1aa5-4c3c-92fc-0d44f53c9d92] 24116 --- [nio-8080-exec-3] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris
2025-06-30 00:06:41.372  INFO [83d2a183-1aa5-4c3c-92fc-0d44f53c9d92] 24116 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-30 00:06:41.372  INFO [83d2a183-1aa5-4c3c-92fc-0d44f53c9d92] 24116 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-30 00:06:41.373 DEBUG [83d2a183-1aa5-4c3c-92fc-0d44f53c9d92] 24116 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-30).    For example, if today is 2025-06-30, a good departure date would be between 2025-07-07 and 2025-07-14, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris";
2025-06-30 00:06:41.376  INFO [83d2a183-1aa5-4c3c-92fc-0d44f53c9d92] 24116 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-30 00:06:41.376  INFO [83d2a183-1aa5-4c3c-92fc-0d44f53c9d92] 24116 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-30 00:06:41.377  INFO [83d2a183-1aa5-4c3c-92fc-0d44f53c9d92] 24116 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-30 00:06:41.378  INFO [83d2a183-1aa5-4c3c-92fc-0d44f53c9d92] 24116 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-30 00:06:41.378  INFO [83d2a183-1aa5-4c3c-92fc-0d44f53c9d92] 24116 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-30 00:06:41.380  INFO [83d2a183-1aa5-4c3c-92fc-0d44f53c9d92] 24116 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-30 00:06:41.381  INFO [83d2a183-1aa5-4c3c-92fc-0d44f53c9d92] 24116 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-30 00:06:41.381  INFO [83d2a183-1aa5-4c3c-92fc-0d44f53c9d92] 24116 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-30 00:06:41.382  INFO [83d2a183-1aa5-4c3c-92fc-0d44f53c9d92] 24116 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-30 00:06:43.325  INFO [83d2a183-1aa5-4c3c-92fc-0d44f53c9d92] 24116 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-30 00:06:43.326  INFO [83d2a183-1aa5-4c3c-92fc-0d44f53c9d92] 24116 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Response length: 195 characters
2025-06-30 00:06:43.326 DEBUG [83d2a183-1aa5-4c3c-92fc-0d44f53c9d92] 24116 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-07",
  "returnDate": "2025-07-09",
  "tripType": "roundTrip",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-30 00:06:43.327 DEBUG [83d2a183-1aa5-4c3c-92fc-0d44f53c9d92] 24116 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-30 00:06:43.328 DEBUG [83d2a183-1aa5-4c3c-92fc-0d44f53c9d92] 24116 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-30 00:06:43.328 DEBUG [83d2a183-1aa5-4c3c-92fc-0d44f53c9d92] 24116 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-30 00:06:43.328 DEBUG [83d2a183-1aa5-4c3c-92fc-0d44f53c9d92] 24116 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-30 00:06:43.328  INFO [83d2a183-1aa5-4c3c-92fc-0d44f53c9d92] 24116 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-30 00:06:43.328  INFO [83d2a183-1aa5-4c3c-92fc-0d44f53c9d92] 24116 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-07, returnDate=2025-07-09, tripType=roundTrip, adults=1, children=0, infants=0
2025-06-30 00:06:43.329  INFO [83d2a183-1aa5-4c3c-92fc-0d44f53c9d92] 24116 --- [nio-8080-exec-3] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-30 00:06:44.208 DEBUG [1eade74a-49e8-4b25-a5d6-c26fd859f785] 24116 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-30 00:06:44.209 DEBUG [1eade74a-49e8-4b25-a5d6-c26fd859f785] 24116 --- [nio-8080-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-30 00:06:44.209 DEBUG [1eade74a-49e8-4b25-a5d6-c26fd859f785] 24116 --- [nio-8080-exec-4] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 29FCC5ABBD2D20519A14D98D833CA9D0
2025-06-30 00:06:44.210 DEBUG [1eade74a-49e8-4b25-a5d6-c26fd859f785] 24116 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-30 00:06:44.211  INFO [1eade74a-49e8-4b25-a5d6-c26fd859f785] 24116 --- [nio-8080-exec-4] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris
2025-06-30 00:06:44.211  INFO [1eade74a-49e8-4b25-a5d6-c26fd859f785] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-30 00:06:44.211  INFO [1eade74a-49e8-4b25-a5d6-c26fd859f785] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-30 00:06:44.211 DEBUG [1eade74a-49e8-4b25-a5d6-c26fd859f785] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-30).    For example, if today is 2025-06-30, a good departure date would be between 2025-07-07 and 2025-07-14, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris";
2025-06-30 00:06:44.213  INFO [1eade74a-49e8-4b25-a5d6-c26fd859f785] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-30 00:06:44.213  INFO [1eade74a-49e8-4b25-a5d6-c26fd859f785] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-30 00:06:44.214  INFO [1eade74a-49e8-4b25-a5d6-c26fd859f785] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-30 00:06:44.214  INFO [1eade74a-49e8-4b25-a5d6-c26fd859f785] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-30 00:06:44.214  INFO [1eade74a-49e8-4b25-a5d6-c26fd859f785] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-30 00:06:44.216  INFO [1eade74a-49e8-4b25-a5d6-c26fd859f785] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-30 00:06:44.216  INFO [1eade74a-49e8-4b25-a5d6-c26fd859f785] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-30 00:06:44.216  INFO [1eade74a-49e8-4b25-a5d6-c26fd859f785] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-30 00:06:44.216  INFO [1eade74a-49e8-4b25-a5d6-c26fd859f785] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-30 00:06:45.874  INFO [1eade74a-49e8-4b25-a5d6-c26fd859f785] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-30 00:06:45.875  INFO [1eade74a-49e8-4b25-a5d6-c26fd859f785] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Response length: 195 characters
2025-06-30 00:06:45.875 DEBUG [1eade74a-49e8-4b25-a5d6-c26fd859f785] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-07",
  "returnDate": "2025-07-10",
  "tripType": "roundTrip",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-30 00:06:45.876 DEBUG [1eade74a-49e8-4b25-a5d6-c26fd859f785] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-30 00:06:45.876 DEBUG [1eade74a-49e8-4b25-a5d6-c26fd859f785] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-30 00:06:45.876 DEBUG [1eade74a-49e8-4b25-a5d6-c26fd859f785] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-30 00:06:45.876 DEBUG [1eade74a-49e8-4b25-a5d6-c26fd859f785] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-30 00:06:45.876  INFO [1eade74a-49e8-4b25-a5d6-c26fd859f785] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-30 00:06:45.877  INFO [1eade74a-49e8-4b25-a5d6-c26fd859f785] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-07, returnDate=2025-07-10, tripType=roundTrip, adults=1, children=0, infants=0
2025-06-30 00:06:45.877  INFO [1eade74a-49e8-4b25-a5d6-c26fd859f785] 24116 --- [nio-8080-exec-4] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-30 00:06:47.683 DEBUG [c2fe3e2c-e960-47bf-aaca-802574d374a0] 24116 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-07&tripType=oneWay
2025-06-30 00:06:47.685 DEBUG [c2fe3e2c-e960-47bf-aaca-802574d374a0] 24116 --- [nio-8080-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-30 00:06:47.685 DEBUG [c2fe3e2c-e960-47bf-aaca-802574d374a0] 24116 --- [nio-8080-exec-5] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 29FCC5ABBD2D20519A14D98D833CA9D0
2025-06-30 00:06:47.686 DEBUG [c2fe3e2c-e960-47bf-aaca-802574d374a0] 24116 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-07&tripType=oneWay
2025-06-30 00:06:47.688  INFO [c2fe3e2c-e960-47bf-aaca-802574d374a0] 24116 --- [nio-8080-exec-5] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-07, Return=null, Pax=1/0/0
2025-06-30 00:06:47.689  INFO [c2fe3e2c-e960-47bf-aaca-802574d374a0] 24116 --- [nio-8080-exec-5] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-07
2025-06-30 00:06:47.700  WARN [c2fe3e2c-e960-47bf-aaca-802574d374a0] 24116 --- [nio-8080-exec-5] o.e.x.controllers.FlightController       : No flights found for search: OTP to CDG on 2025-07-07
2025-06-30 00:06:47.700  INFO [c2fe3e2c-e960-47bf-aaca-802574d374a0] 24116 --- [nio-8080-exec-5] o.e.x.controllers.FlightController       : Found 0 available flights for search criteria.
2025-06-30 00:06:47.708 DEBUG [be967ff3-e93e-4a3b-8c07-4450f9dece3d] 24116 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-07&tripType=oneWay
2025-06-30 00:06:47.710 DEBUG [be967ff3-e93e-4a3b-8c07-4450f9dece3d] 24116 --- [nio-8080-exec-6] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-30 00:06:47.710 DEBUG [be967ff3-e93e-4a3b-8c07-4450f9dece3d] 24116 --- [nio-8080-exec-6] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 29FCC5ABBD2D20519A14D98D833CA9D0
2025-06-30 00:06:47.711 DEBUG [be967ff3-e93e-4a3b-8c07-4450f9dece3d] 24116 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-07&tripType=oneWay
2025-06-30 00:06:47.713  INFO [be967ff3-e93e-4a3b-8c07-4450f9dece3d] 24116 --- [nio-8080-exec-6] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-07, Return=null, Pax=1/0/0
2025-06-30 00:06:47.713  INFO [be967ff3-e93e-4a3b-8c07-4450f9dece3d] 24116 --- [nio-8080-exec-6] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-07
2025-06-30 00:06:47.722  WARN [be967ff3-e93e-4a3b-8c07-4450f9dece3d] 24116 --- [nio-8080-exec-6] o.e.x.controllers.FlightController       : No flights found for search: OTP to CDG on 2025-07-07
2025-06-30 00:06:47.722  INFO [be967ff3-e93e-4a3b-8c07-4450f9dece3d] 24116 --- [nio-8080-exec-6] o.e.x.controllers.FlightController       : Found 0 available flights for search criteria.
2025-06-30 00:06:47.735 DEBUG [cdc04e16-ef52-4ee3-ab05-04a6357e353c] 24116 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=CDG&destination=OTP&departureDate=2025-07-10&tripType=oneWay
2025-06-30 00:06:47.736 DEBUG [cdc04e16-ef52-4ee3-ab05-04a6357e353c] 24116 --- [nio-8080-exec-7] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-30 00:06:47.737 DEBUG [cdc04e16-ef52-4ee3-ab05-04a6357e353c] 24116 --- [nio-8080-exec-7] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 29FCC5ABBD2D20519A14D98D833CA9D0
2025-06-30 00:06:47.738 DEBUG [cdc04e16-ef52-4ee3-ab05-04a6357e353c] 24116 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=CDG&destination=OTP&departureDate=2025-07-10&tripType=oneWay
2025-06-30 00:06:47.739  INFO [cdc04e16-ef52-4ee3-ab05-04a6357e353c] 24116 --- [nio-8080-exec-7] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=CDG, Dest=OTP, Depart=2025-07-10, Return=null, Pax=1/0/0
2025-06-30 00:06:47.739  INFO [cdc04e16-ef52-4ee3-ab05-04a6357e353c] 24116 --- [nio-8080-exec-7] o.e.x.controllers.FlightController       : Performing one-way flight search from CDG to OTP on 2025-07-10
2025-06-30 00:06:47.747  WARN [cdc04e16-ef52-4ee3-ab05-04a6357e353c] 24116 --- [nio-8080-exec-7] o.e.x.controllers.FlightController       : No flights found for search: CDG to OTP on 2025-07-10
2025-06-30 00:06:47.747  INFO [cdc04e16-ef52-4ee3-ab05-04a6357e353c] 24116 --- [nio-8080-exec-7] o.e.x.controllers.FlightController       : Found 0 available flights for search criteria.
2025-06-30 00:06:47.754 DEBUG [fdc5654f-5809-4dc9-95ad-6bb287d9fb10] 24116 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=CDG&destination=OTP&departureDate=2025-07-10&tripType=oneWay
2025-06-30 00:06:47.755 DEBUG [fdc5654f-5809-4dc9-95ad-6bb287d9fb10] 24116 --- [nio-8080-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-30 00:06:47.755 DEBUG [fdc5654f-5809-4dc9-95ad-6bb287d9fb10] 24116 --- [nio-8080-exec-8] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 29FCC5ABBD2D20519A14D98D833CA9D0
2025-06-30 00:06:47.756 DEBUG [fdc5654f-5809-4dc9-95ad-6bb287d9fb10] 24116 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=CDG&destination=OTP&departureDate=2025-07-10&tripType=oneWay
2025-06-30 00:06:47.757  INFO [fdc5654f-5809-4dc9-95ad-6bb287d9fb10] 24116 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=CDG, Dest=OTP, Depart=2025-07-10, Return=null, Pax=1/0/0
2025-06-30 00:06:47.757  INFO [fdc5654f-5809-4dc9-95ad-6bb287d9fb10] 24116 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Performing one-way flight search from CDG to OTP on 2025-07-10
2025-06-30 00:06:47.764  WARN [fdc5654f-5809-4dc9-95ad-6bb287d9fb10] 24116 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : No flights found for search: CDG to OTP on 2025-07-10
2025-06-30 00:06:47.764  INFO [fdc5654f-5809-4dc9-95ad-6bb287d9fb10] 24116 --- [nio-8080-exec-8] o.e.x.controllers.FlightController       : Found 0 available flights for search criteria.
2025-06-30 00:06:47.822 DEBUG [6787f31d-e979-4bc6-831a-29a351577cc9] 24116 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-30 00:06:47.823 DEBUG [6787f31d-e979-4bc6-831a-29a351577cc9] 24116 --- [nio-8080-exec-9] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-30 00:06:47.824 DEBUG [6787f31d-e979-4bc6-831a-29a351577cc9] 24116 --- [nio-8080-exec-9] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 29FCC5ABBD2D20519A14D98D833CA9D0
2025-06-30 00:06:47.825 DEBUG [6787f31d-e979-4bc6-831a-29a351577cc9] 24116 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-30 00:06:47.826  INFO [6787f31d-e979-4bc6-831a-29a351577cc9] 24116 --- [nio-8080-exec-9] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-30 00:06:47.983  INFO [6787f31d-e979-4bc6-831a-29a351577cc9] 24116 --- [nio-8080-exec-9] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-30 00:06:47.991 DEBUG [35a28988-aed7-43b3-b9fc-32144374e876] 24116 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-30 00:06:47.992 DEBUG [35a28988-aed7-43b3-b9fc-32144374e876] 24116 --- [io-8080-exec-10] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-30 00:06:47.992 DEBUG [35a28988-aed7-43b3-b9fc-32144374e876] 24116 --- [io-8080-exec-10] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 29FCC5ABBD2D20519A14D98D833CA9D0
2025-06-30 00:06:47.993 DEBUG [35a28988-aed7-43b3-b9fc-32144374e876] 24116 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-30 00:06:47.995  INFO [35a28988-aed7-43b3-b9fc-32144374e876] 24116 --- [io-8080-exec-10] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-30 00:06:47.999 DEBUG [dcae978d-1921-4318-a3a7-632b00282104] 24116 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-30 00:06:48.000 DEBUG [dcae978d-1921-4318-a3a7-632b00282104] 24116 --- [nio-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-30 00:06:48.000 DEBUG [dcae978d-1921-4318-a3a7-632b00282104] 24116 --- [nio-8080-exec-1] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 29FCC5ABBD2D20519A14D98D833CA9D0
2025-06-30 00:06:48.002 DEBUG [dcae978d-1921-4318-a3a7-632b00282104] 24116 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-30 00:06:48.002  INFO [dcae978d-1921-4318-a3a7-632b00282104] 24116 --- [nio-8080-exec-1] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-30 00:06:48.037  INFO [35a28988-aed7-43b3-b9fc-32144374e876] 24116 --- [io-8080-exec-10] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-30 00:06:48.170  INFO [dcae978d-1921-4318-a3a7-632b00282104] 24116 --- [nio-8080-exec-1] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-30 00:06:48.179 DEBUG [1ca66ee9-c28f-4383-838d-b1ba966d4777] 24116 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-30 00:06:48.180 DEBUG [1ca66ee9-c28f-4383-838d-b1ba966d4777] 24116 --- [nio-8080-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-30 00:06:48.180 DEBUG [1ca66ee9-c28f-4383-838d-b1ba966d4777] 24116 --- [nio-8080-exec-2] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 29FCC5ABBD2D20519A14D98D833CA9D0
2025-06-30 00:06:48.181 DEBUG [1ca66ee9-c28f-4383-838d-b1ba966d4777] 24116 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-30 00:06:48.183  INFO [1ca66ee9-c28f-4383-838d-b1ba966d4777] 24116 --- [nio-8080-exec-2] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-30 00:06:48.225  INFO [1ca66ee9-c28f-4383-838d-b1ba966d4777] 24116 --- [nio-8080-exec-2] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-30 00:06:51.084 DEBUG [01ae5b05-a955-4bbb-96a8-f6ca669a631a] 24116 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/nearby?origin=OTP
2025-06-30 00:06:51.088 DEBUG [01ae5b05-a955-4bbb-96a8-f6ca669a631a] 24116 --- [nio-8080-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-30 00:06:51.088 DEBUG [01ae5b05-a955-4bbb-96a8-f6ca669a631a] 24116 --- [nio-8080-exec-3] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 29FCC5ABBD2D20519A14D98D833CA9D0
2025-06-30 00:06:51.089 DEBUG [01ae5b05-a955-4bbb-96a8-f6ca669a631a] 24116 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/nearby?origin=OTP
2025-06-30 00:06:51.091  INFO [01ae5b05-a955-4bbb-96a8-f6ca669a631a] 24116 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : Received request for nearby flights from origin: OTP, departureDate: null
2025-06-30 00:06:51.091  INFO [01ae5b05-a955-4bbb-96a8-f6ca669a631a] 24116 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : Using search date: 2025-06-30
2025-06-30 00:06:51.092  INFO [01ae5b05-a955-4bbb-96a8-f6ca669a631a] 24116 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : Cache key: OTP-2025-06-30
2025-06-30 00:06:51.092  INFO [01ae5b05-a955-4bbb-96a8-f6ca669a631a] 24116 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : Returning cached nearby flights for origin: OTP, found 6 flights
2025-06-30 00:06:52.659 DEBUG [3c324ee7-30c5-4246-ac5e-099df42afc8d] 24116 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-30 00:06:52.660 DEBUG [3c324ee7-30c5-4246-ac5e-099df42afc8d] 24116 --- [nio-8080-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-30 00:06:52.660 DEBUG [3c324ee7-30c5-4246-ac5e-099df42afc8d] 24116 --- [nio-8080-exec-4] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 29FCC5ABBD2D20519A14D98D833CA9D0
2025-06-30 00:06:52.661 DEBUG [3c324ee7-30c5-4246-ac5e-099df42afc8d] 24116 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-30 00:06:52.662  INFO [3c324ee7-30c5-4246-ac5e-099df42afc8d] 24116 --- [nio-8080-exec-4] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris
2025-06-30 00:06:52.662  INFO [3c324ee7-30c5-4246-ac5e-099df42afc8d] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-30 00:06:52.662  INFO [3c324ee7-30c5-4246-ac5e-099df42afc8d] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-30 00:06:52.662 DEBUG [3c324ee7-30c5-4246-ac5e-099df42afc8d] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-30).    For example, if today is 2025-06-30, a good departure date would be between 2025-07-07 and 2025-07-14, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris";
2025-06-30 00:06:52.664  INFO [3c324ee7-30c5-4246-ac5e-099df42afc8d] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-30 00:06:52.664  INFO [3c324ee7-30c5-4246-ac5e-099df42afc8d] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-30 00:06:52.664  INFO [3c324ee7-30c5-4246-ac5e-099df42afc8d] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-30 00:06:52.665  INFO [3c324ee7-30c5-4246-ac5e-099df42afc8d] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-30 00:06:52.665  INFO [3c324ee7-30c5-4246-ac5e-099df42afc8d] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-30 00:06:52.666  INFO [3c324ee7-30c5-4246-ac5e-099df42afc8d] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-30 00:06:52.667  INFO [3c324ee7-30c5-4246-ac5e-099df42afc8d] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-30 00:06:52.667  INFO [3c324ee7-30c5-4246-ac5e-099df42afc8d] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-30 00:06:52.667  INFO [3c324ee7-30c5-4246-ac5e-099df42afc8d] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-30 00:06:54.374  INFO [3c324ee7-30c5-4246-ac5e-099df42afc8d] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-30 00:06:54.374  INFO [3c324ee7-30c5-4246-ac5e-099df42afc8d] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Response length: 195 characters
2025-06-30 00:06:54.375 DEBUG [3c324ee7-30c5-4246-ac5e-099df42afc8d] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-07",
  "returnDate": "2025-07-09",
  "tripType": "roundTrip",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-30 00:06:54.375 DEBUG [3c324ee7-30c5-4246-ac5e-099df42afc8d] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-30 00:06:54.375 DEBUG [3c324ee7-30c5-4246-ac5e-099df42afc8d] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-30 00:06:54.375 DEBUG [3c324ee7-30c5-4246-ac5e-099df42afc8d] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-30 00:06:54.376 DEBUG [3c324ee7-30c5-4246-ac5e-099df42afc8d] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-30 00:06:54.376  INFO [3c324ee7-30c5-4246-ac5e-099df42afc8d] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-30 00:06:54.376  INFO [3c324ee7-30c5-4246-ac5e-099df42afc8d] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-07, returnDate=2025-07-09, tripType=roundTrip, adults=1, children=0, infants=0
2025-06-30 00:06:54.377  INFO [3c324ee7-30c5-4246-ac5e-099df42afc8d] 24116 --- [nio-8080-exec-4] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-30 00:06:57.829 DEBUG [8917feb7-f9ad-4ab9-aab6-7acb450291b0] 24116 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-30 00:06:57.831 DEBUG [8917feb7-f9ad-4ab9-aab6-7acb450291b0] 24116 --- [nio-8080-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-30 00:06:57.831 DEBUG [8917feb7-f9ad-4ab9-aab6-7acb450291b0] 24116 --- [nio-8080-exec-5] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 29FCC5ABBD2D20519A14D98D833CA9D0
2025-06-30 00:06:57.832 DEBUG [8917feb7-f9ad-4ab9-aab6-7acb450291b0] 24116 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-30 00:06:57.833  INFO [8917feb7-f9ad-4ab9-aab6-7acb450291b0] 24116 --- [nio-8080-exec-5] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris for 2 adults, one way
2025-06-30 00:06:57.833  INFO [8917feb7-f9ad-4ab9-aab6-7acb450291b0] 24116 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Determined closest airport from coordinates: OTP
2025-06-30 00:06:57.834  INFO [8917feb7-f9ad-4ab9-aab6-7acb450291b0] 24116 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-30 00:06:57.834 DEBUG [8917feb7-f9ad-4ab9-aab6-7acb450291b0] 24116 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-30).    For example, if today is 2025-06-30, a good departure date would be between 2025-07-07 and 2025-07-14, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris for 2 adults, one way";
2025-06-30 00:06:57.836  INFO [8917feb7-f9ad-4ab9-aab6-7acb450291b0] 24116 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-30 00:06:57.836  INFO [8917feb7-f9ad-4ab9-aab6-7acb450291b0] 24116 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-30 00:06:57.836  INFO [8917feb7-f9ad-4ab9-aab6-7acb450291b0] 24116 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-30 00:06:57.836  INFO [8917feb7-f9ad-4ab9-aab6-7acb450291b0] 24116 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-30 00:06:57.836  INFO [8917feb7-f9ad-4ab9-aab6-7acb450291b0] 24116 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-30 00:06:57.838  INFO [8917feb7-f9ad-4ab9-aab6-7acb450291b0] 24116 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-30 00:06:57.838  INFO [8917feb7-f9ad-4ab9-aab6-7acb450291b0] 24116 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-30 00:06:57.838  INFO [8917feb7-f9ad-4ab9-aab6-7acb450291b0] 24116 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-30 00:06:57.839  INFO [8917feb7-f9ad-4ab9-aab6-7acb450291b0] 24116 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-30 00:06:59.406  INFO [8917feb7-f9ad-4ab9-aab6-7acb450291b0] 24116 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-30 00:06:59.407  INFO [8917feb7-f9ad-4ab9-aab6-7acb450291b0] 24116 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Response length: 184 characters
2025-06-30 00:06:59.407 DEBUG [8917feb7-f9ad-4ab9-aab6-7acb450291b0] 24116 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-07",
  "returnDate": null,
  "tripType": "oneWay",
  "adults": 2,
  "children": 0,
  "infants": 0
}
```
2025-06-30 00:06:59.408 DEBUG [8917feb7-f9ad-4ab9-aab6-7acb450291b0] 24116 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-30 00:06:59.408 DEBUG [8917feb7-f9ad-4ab9-aab6-7acb450291b0] 24116 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-30 00:06:59.408 DEBUG [8917feb7-f9ad-4ab9-aab6-7acb450291b0] 24116 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-30 00:06:59.409 DEBUG [8917feb7-f9ad-4ab9-aab6-7acb450291b0] 24116 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-30 00:06:59.409  INFO [8917feb7-f9ad-4ab9-aab6-7acb450291b0] 24116 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-30 00:06:59.409  INFO [8917feb7-f9ad-4ab9-aab6-7acb450291b0] 24116 --- [nio-8080-exec-5] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-07, returnDate=null, tripType=oneWay, adults=2, children=0, infants=0
2025-06-30 00:06:59.409  INFO [8917feb7-f9ad-4ab9-aab6-7acb450291b0] 24116 --- [nio-8080-exec-5] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-30 00:07:00.987 DEBUG [1a99c2a1-8737-48ea-9ff8-3389655dfa02] 24116 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-07&tripType=oneWay
2025-06-30 00:07:00.989 DEBUG [1a99c2a1-8737-48ea-9ff8-3389655dfa02] 24116 --- [nio-8080-exec-6] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-30 00:07:00.989 DEBUG [1a99c2a1-8737-48ea-9ff8-3389655dfa02] 24116 --- [nio-8080-exec-6] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 29FCC5ABBD2D20519A14D98D833CA9D0
2025-06-30 00:07:00.990 DEBUG [1a99c2a1-8737-48ea-9ff8-3389655dfa02] 24116 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-07&tripType=oneWay
2025-06-30 00:07:00.992  INFO [1a99c2a1-8737-48ea-9ff8-3389655dfa02] 24116 --- [nio-8080-exec-6] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-07, Return=null, Pax=1/0/0
2025-06-30 00:07:00.992  INFO [1a99c2a1-8737-48ea-9ff8-3389655dfa02] 24116 --- [nio-8080-exec-6] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-07
2025-06-30 00:07:01.004  WARN [1a99c2a1-8737-48ea-9ff8-3389655dfa02] 24116 --- [nio-8080-exec-6] o.e.x.controllers.FlightController       : No flights found for search: OTP to CDG on 2025-07-07
2025-06-30 00:07:01.005  INFO [1a99c2a1-8737-48ea-9ff8-3389655dfa02] 24116 --- [nio-8080-exec-6] o.e.x.controllers.FlightController       : Found 0 available flights for search criteria.
2025-06-30 00:07:01.014 DEBUG [386c2af2-4f76-4e95-83da-ea043ca31a69] 24116 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-07&tripType=oneWay
2025-06-30 00:07:01.016 DEBUG [386c2af2-4f76-4e95-83da-ea043ca31a69] 24116 --- [nio-8080-exec-7] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-30 00:07:01.017 DEBUG [386c2af2-4f76-4e95-83da-ea043ca31a69] 24116 --- [nio-8080-exec-7] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 29FCC5ABBD2D20519A14D98D833CA9D0
2025-06-30 00:07:01.019 DEBUG [386c2af2-4f76-4e95-83da-ea043ca31a69] 24116 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-07&tripType=oneWay
2025-06-30 00:07:01.021  INFO [386c2af2-4f76-4e95-83da-ea043ca31a69] 24116 --- [nio-8080-exec-7] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-07, Return=null, Pax=1/0/0
2025-06-30 00:07:01.021  INFO [386c2af2-4f76-4e95-83da-ea043ca31a69] 24116 --- [nio-8080-exec-7] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-07
2025-06-30 00:07:01.035  WARN [386c2af2-4f76-4e95-83da-ea043ca31a69] 24116 --- [nio-8080-exec-7] o.e.x.controllers.FlightController       : No flights found for search: OTP to CDG on 2025-07-07
2025-06-30 00:07:01.035  INFO [386c2af2-4f76-4e95-83da-ea043ca31a69] 24116 --- [nio-8080-exec-7] o.e.x.controllers.FlightController       : Found 0 available flights for search criteria.
2025-06-30 00:07:01.053 DEBUG [887573cd-c055-4021-bee6-f90b97962681] 24116 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-30 00:07:01.054 DEBUG [887573cd-c055-4021-bee6-f90b97962681] 24116 --- [nio-8080-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-30 00:07:01.054 DEBUG [887573cd-c055-4021-bee6-f90b97962681] 24116 --- [nio-8080-exec-8] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 29FCC5ABBD2D20519A14D98D833CA9D0
2025-06-30 00:07:01.055 DEBUG [887573cd-c055-4021-bee6-f90b97962681] 24116 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-30 00:07:01.057  INFO [887573cd-c055-4021-bee6-f90b97962681] 24116 --- [nio-8080-exec-8] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-30 00:07:01.232  INFO [887573cd-c055-4021-bee6-f90b97962681] 24116 --- [nio-8080-exec-8] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-30 00:07:01.242 DEBUG [e75ec647-2fd4-40b9-9685-f011b09ba7c9] 24116 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-30 00:07:01.243 DEBUG [e75ec647-2fd4-40b9-9685-f011b09ba7c9] 24116 --- [nio-8080-exec-9] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-30 00:07:01.243 DEBUG [e75ec647-2fd4-40b9-9685-f011b09ba7c9] 24116 --- [nio-8080-exec-9] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 29FCC5ABBD2D20519A14D98D833CA9D0
2025-06-30 00:07:01.245 DEBUG [e75ec647-2fd4-40b9-9685-f011b09ba7c9] 24116 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-30 00:07:01.246 DEBUG [b669ba8e-d755-440a-8ffe-f16e99cec4c1] 24116 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-30 00:07:01.246  INFO [e75ec647-2fd4-40b9-9685-f011b09ba7c9] 24116 --- [nio-8080-exec-9] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-30 00:07:01.247 DEBUG [b669ba8e-d755-440a-8ffe-f16e99cec4c1] 24116 --- [io-8080-exec-10] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-30 00:07:01.247 DEBUG [b669ba8e-d755-440a-8ffe-f16e99cec4c1] 24116 --- [io-8080-exec-10] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 29FCC5ABBD2D20519A14D98D833CA9D0
2025-06-30 00:07:01.247 DEBUG [b669ba8e-d755-440a-8ffe-f16e99cec4c1] 24116 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-30 00:07:01.249  INFO [b669ba8e-d755-440a-8ffe-f16e99cec4c1] 24116 --- [io-8080-exec-10] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-30 00:07:01.286  INFO [e75ec647-2fd4-40b9-9685-f011b09ba7c9] 24116 --- [nio-8080-exec-9] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-30 00:07:01.436  INFO [b669ba8e-d755-440a-8ffe-f16e99cec4c1] 24116 --- [io-8080-exec-10] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-30 00:07:01.446 DEBUG [0b7c53a5-a2b6-4aab-8afe-91e9f98c4a05] 24116 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-30 00:07:01.447 DEBUG [0b7c53a5-a2b6-4aab-8afe-91e9f98c4a05] 24116 --- [nio-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-30 00:07:01.448 DEBUG [0b7c53a5-a2b6-4aab-8afe-91e9f98c4a05] 24116 --- [nio-8080-exec-1] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 29FCC5ABBD2D20519A14D98D833CA9D0
2025-06-30 00:07:01.448 DEBUG [0b7c53a5-a2b6-4aab-8afe-91e9f98c4a05] 24116 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-30 00:07:01.449  INFO [0b7c53a5-a2b6-4aab-8afe-91e9f98c4a05] 24116 --- [nio-8080-exec-1] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-30 00:07:01.492  INFO [0b7c53a5-a2b6-4aab-8afe-91e9f98c4a05] 24116 --- [nio-8080-exec-1] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-30 00:07:05.305 DEBUG [abda8cf2-5bdf-4296-875f-2329696c7660] 24116 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/nearby?origin=OTP
2025-06-30 00:07:05.306 DEBUG [abda8cf2-5bdf-4296-875f-2329696c7660] 24116 --- [nio-8080-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-30 00:07:05.307 DEBUG [abda8cf2-5bdf-4296-875f-2329696c7660] 24116 --- [nio-8080-exec-2] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 29FCC5ABBD2D20519A14D98D833CA9D0
2025-06-30 00:07:05.307 DEBUG [abda8cf2-5bdf-4296-875f-2329696c7660] 24116 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/nearby?origin=OTP
2025-06-30 00:07:05.308  INFO [abda8cf2-5bdf-4296-875f-2329696c7660] 24116 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Received request for nearby flights from origin: OTP, departureDate: null
2025-06-30 00:07:05.309  INFO [abda8cf2-5bdf-4296-875f-2329696c7660] 24116 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Using search date: 2025-06-30
2025-06-30 00:07:05.309  INFO [abda8cf2-5bdf-4296-875f-2329696c7660] 24116 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Cache key: OTP-2025-06-30
2025-06-30 00:07:05.309  INFO [abda8cf2-5bdf-4296-875f-2329696c7660] 24116 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Returning cached nearby flights for origin: OTP, found 6 flights
2025-06-30 00:07:09.243 DEBUG [3fd9ceea-6d59-48b2-ad91-f9e1c65af527] 24116 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=ATH&departureDate=2025-07-06&tripType=oneWay
2025-06-30 00:07:09.244 DEBUG [3fd9ceea-6d59-48b2-ad91-f9e1c65af527] 24116 --- [nio-8080-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-30 00:07:09.246 DEBUG [3fd9ceea-6d59-48b2-ad91-f9e1c65af527] 24116 --- [nio-8080-exec-3] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 29FCC5ABBD2D20519A14D98D833CA9D0
2025-06-30 00:07:09.246 DEBUG [3fd9ceea-6d59-48b2-ad91-f9e1c65af527] 24116 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=ATH&departureDate=2025-07-06&tripType=oneWay
2025-06-30 00:07:09.248  INFO [3fd9ceea-6d59-48b2-ad91-f9e1c65af527] 24116 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=ATH, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-30 00:07:09.248  INFO [3fd9ceea-6d59-48b2-ad91-f9e1c65af527] 24116 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to ATH on 2025-07-06
2025-06-30 00:07:09.305  INFO [3fd9ceea-6d59-48b2-ad91-f9e1c65af527] 24116 --- [nio-8080-exec-3] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-30 00:07:09.312 DEBUG [86ba4c42-7157-4db3-bc18-c0379b5bad68] 24116 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=ATH&departureDate=2025-07-06&tripType=oneWay
2025-06-30 00:07:09.313 DEBUG [86ba4c42-7157-4db3-bc18-c0379b5bad68] 24116 --- [nio-8080-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-30 00:07:09.313 DEBUG [86ba4c42-7157-4db3-bc18-c0379b5bad68] 24116 --- [nio-8080-exec-4] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 29FCC5ABBD2D20519A14D98D833CA9D0
2025-06-30 00:07:09.314 DEBUG [86ba4c42-7157-4db3-bc18-c0379b5bad68] 24116 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=ATH&departureDate=2025-07-06&tripType=oneWay
2025-06-30 00:07:09.315  INFO [86ba4c42-7157-4db3-bc18-c0379b5bad68] 24116 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=ATH, Depart=2025-07-06, Return=null, Pax=1/0/0
2025-06-30 00:07:09.315  INFO [86ba4c42-7157-4db3-bc18-c0379b5bad68] 24116 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to ATH on 2025-07-06
2025-06-30 00:07:09.323 DEBUG [6a313bc0-96a0-49da-ad81-2269f65d4619] 24116 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Athens&country=Greece
2025-06-30 00:07:09.324 DEBUG [6a313bc0-96a0-49da-ad81-2269f65d4619] 24116 --- [nio-8080-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-30 00:07:09.324 DEBUG [6a313bc0-96a0-49da-ad81-2269f65d4619] 24116 --- [nio-8080-exec-5] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 29FCC5ABBD2D20519A14D98D833CA9D0
2025-06-30 00:07:09.325 DEBUG [6a313bc0-96a0-49da-ad81-2269f65d4619] 24116 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Athens&country=Greece
2025-06-30 00:07:09.326  INFO [6a313bc0-96a0-49da-ad81-2269f65d4619] 24116 --- [nio-8080-exec-5] o.e.x.controllers.WeatherController      : Fetching weather for city: Athens, country: Greece
2025-06-30 00:07:09.403  INFO [86ba4c42-7157-4db3-bc18-c0379b5bad68] 24116 --- [nio-8080-exec-4] o.e.x.controllers.FlightController       : Found 1 available flights for search criteria.
2025-06-30 00:07:09.472  INFO [6a313bc0-96a0-49da-ad81-2269f65d4619] 24116 --- [nio-8080-exec-5] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Athens, Greece
2025-06-30 00:07:09.480 DEBUG [8a8d5cd7-4b57-45ae-8fe1-bff2c5693269] 24116 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Athens&country=Greece
2025-06-30 00:07:09.481 DEBUG [8a8d5cd7-4b57-45ae-8fe1-bff2c5693269] 24116 --- [nio-8080-exec-6] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-30 00:07:09.481 DEBUG [8a8d5cd7-4b57-45ae-8fe1-bff2c5693269] 24116 --- [nio-8080-exec-6] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 29FCC5ABBD2D20519A14D98D833CA9D0
2025-06-30 00:07:09.482 DEBUG [8a8d5cd7-4b57-45ae-8fe1-bff2c5693269] 24116 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Athens&country=Greece
2025-06-30 00:07:09.483 DEBUG [ff3b59e8-80eb-4983-8f52-cdb4c57e8f7a] 24116 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Athens&country=Greece
2025-06-30 00:07:09.483  INFO [8a8d5cd7-4b57-45ae-8fe1-bff2c5693269] 24116 --- [nio-8080-exec-6] o.e.x.controllers.WeatherController      : Fetching weather for city: Athens, country: Greece
2025-06-30 00:07:09.483 DEBUG [ff3b59e8-80eb-4983-8f52-cdb4c57e8f7a] 24116 --- [nio-8080-exec-7] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-30 00:07:09.483 DEBUG [ff3b59e8-80eb-4983-8f52-cdb4c57e8f7a] 24116 --- [nio-8080-exec-7] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 29FCC5ABBD2D20519A14D98D833CA9D0
2025-06-30 00:07:09.484 DEBUG [ff3b59e8-80eb-4983-8f52-cdb4c57e8f7a] 24116 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Athens&country=Greece
2025-06-30 00:07:09.485  INFO [ff3b59e8-80eb-4983-8f52-cdb4c57e8f7a] 24116 --- [nio-8080-exec-7] o.e.x.controllers.WeatherController      : Fetching forecast for city: Athens, country: Greece
2025-06-30 00:07:09.522  INFO [8a8d5cd7-4b57-45ae-8fe1-bff2c5693269] 24116 --- [nio-8080-exec-6] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Athens, Greece
2025-06-30 00:07:09.666  INFO [ff3b59e8-80eb-4983-8f52-cdb4c57e8f7a] 24116 --- [nio-8080-exec-7] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Athens, Greece
2025-06-30 00:07:09.673 DEBUG [1113917e-20f4-4e8c-9950-caa940aaf325] 24116 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Athens&country=Greece
2025-06-30 00:07:09.674 DEBUG [1113917e-20f4-4e8c-9950-caa940aaf325] 24116 --- [nio-8080-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-30 00:07:09.674 DEBUG [1113917e-20f4-4e8c-9950-caa940aaf325] 24116 --- [nio-8080-exec-8] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 29FCC5ABBD2D20519A14D98D833CA9D0
2025-06-30 00:07:09.675 DEBUG [1113917e-20f4-4e8c-9950-caa940aaf325] 24116 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Athens&country=Greece
2025-06-30 00:07:09.675  INFO [1113917e-20f4-4e8c-9950-caa940aaf325] 24116 --- [nio-8080-exec-8] o.e.x.controllers.WeatherController      : Fetching forecast for city: Athens, country: Greece
2025-06-30 00:07:09.717  INFO [1113917e-20f4-4e8c-9950-caa940aaf325] 24116 --- [nio-8080-exec-8] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Athens, Greece
2025-06-30 00:07:20.839 DEBUG [083ce8ed-6cc6-496f-bea7-e6aac285cf6b] 24116 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/28/booked-seats
2025-06-30 00:07:20.872 ERROR [083ce8ed-6cc6-496f-bea7-e6aac285cf6b] 24116 --- [nio-8080-exec-9] o.example.xlr8travel.security.JwtUtils   : Invalid JWT token: JWT strings must contain exactly 2 period characters. Found: 0
2025-06-30 00:07:20.879 DEBUG [083ce8ed-6cc6-496f-bea7-e6aac285cf6b] 24116 --- [nio-8080-exec-9] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-30 00:07:20.879 DEBUG [083ce8ed-6cc6-496f-bea7-e6aac285cf6b] 24116 --- [nio-8080-exec-9] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 29FCC5ABBD2D20519A14D98D833CA9D0
2025-06-30 00:07:20.895 DEBUG [083ce8ed-6cc6-496f-bea7-e6aac285cf6b] 24116 --- [nio-8080-exec-9] o.s.s.w.s.HttpSessionRequestCache        : Saved request http://localhost:8080/api/check-in/flights/28/booked-seats?continue to session
2025-06-30 00:07:20.895 DEBUG [083ce8ed-6cc6-496f-bea7-e6aac285cf6b] 24116 --- [nio-8080-exec-9] s.w.a.DelegatingAuthenticationEntryPoint : Trying to match using Ant [pattern='/api/**']
2025-06-30 00:07:20.895 DEBUG [083ce8ed-6cc6-496f-bea7-e6aac285cf6b] 24116 --- [nio-8080-exec-9] s.w.a.DelegatingAuthenticationEntryPoint : Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@ea6aa6d
2025-06-30 00:07:20.902 DEBUG [2d71fef8-c136-453b-9f7a-8c149772ba4c] 24116 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/28/booked-seats
2025-06-30 00:07:20.904 ERROR [2d71fef8-c136-453b-9f7a-8c149772ba4c] 24116 --- [io-8080-exec-10] o.example.xlr8travel.security.JwtUtils   : Invalid JWT token: JWT strings must contain exactly 2 period characters. Found: 0
2025-06-30 00:07:20.904 DEBUG [2d71fef8-c136-453b-9f7a-8c149772ba4c] 24116 --- [io-8080-exec-10] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-30 00:07:20.904 DEBUG [2d71fef8-c136-453b-9f7a-8c149772ba4c] 24116 --- [io-8080-exec-10] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 29FCC5ABBD2D20519A14D98D833CA9D0
2025-06-30 00:07:20.907 DEBUG [2d71fef8-c136-453b-9f7a-8c149772ba4c] 24116 --- [io-8080-exec-10] o.s.s.w.s.HttpSessionRequestCache        : Saved request http://localhost:8080/api/check-in/flights/28/booked-seats?continue to session
2025-06-30 00:07:20.908 DEBUG [2d71fef8-c136-453b-9f7a-8c149772ba4c] 24116 --- [io-8080-exec-10] s.w.a.DelegatingAuthenticationEntryPoint : Trying to match using Ant [pattern='/api/**']
2025-06-30 00:07:20.908 DEBUG [2d71fef8-c136-453b-9f7a-8c149772ba4c] 24116 --- [io-8080-exec-10] s.w.a.DelegatingAuthenticationEntryPoint : Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@ea6aa6d
2025-06-30 00:07:21.153 DEBUG [ffe8104d-9724-4b52-a916-e973ff1952a4] 24116 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/check-in/flights/28/booked-seats
2025-06-30 00:07:21.156 ERROR [ffe8104d-9724-4b52-a916-e973ff1952a4] 24116 --- [nio-8080-exec-1] o.example.xlr8travel.security.JwtUtils   : Invalid JWT token: JWT strings must contain exactly 2 period characters. Found: 0
2025-06-30 00:07:21.156 DEBUG [ffe8104d-9724-4b52-a916-e973ff1952a4] 24116 --- [nio-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-30 00:07:21.159 DEBUG [ffe8104d-9724-4b52-a916-e973ff1952a4] 24116 --- [nio-8080-exec-1] o.s.s.w.s.HttpSessionRequestCache        : Saved request http://localhost:8080/api/check-in/flights/28/booked-seats?continue to session
2025-06-30 00:07:21.159 DEBUG [ffe8104d-9724-4b52-a916-e973ff1952a4] 24116 --- [nio-8080-exec-1] s.w.a.DelegatingAuthenticationEntryPoint : Trying to match using Ant [pattern='/api/**']
2025-06-30 00:07:21.160 DEBUG [ffe8104d-9724-4b52-a916-e973ff1952a4] 24116 --- [nio-8080-exec-1] s.w.a.DelegatingAuthenticationEntryPoint : Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@ea6aa6d
2025-06-30 00:20:06.951 DEBUG [af91664a-9b6b-419a-ab09-9e889d09a913] 24116 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/nearby?origin=OTP
2025-06-30 00:20:06.953 DEBUG [af91664a-9b6b-419a-ab09-9e889d09a913] 24116 --- [nio-8080-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-30 00:20:06.954 DEBUG [af91664a-9b6b-419a-ab09-9e889d09a913] 24116 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/nearby?origin=OTP
2025-06-30 00:20:06.957  INFO [af91664a-9b6b-419a-ab09-9e889d09a913] 24116 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Received request for nearby flights from origin: OTP, departureDate: null
2025-06-30 00:20:06.957  INFO [af91664a-9b6b-419a-ab09-9e889d09a913] 24116 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Using search date: 2025-06-30
2025-06-30 00:20:06.957  INFO [af91664a-9b6b-419a-ab09-9e889d09a913] 24116 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Cache key: OTP-2025-06-30
2025-06-30 00:20:06.957  INFO [af91664a-9b6b-419a-ab09-9e889d09a913] 24116 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : No valid cache found. Searching nearby flights from origin: OTP, after date: 2025-06-30
2025-06-30 00:20:06.958  INFO [af91664a-9b6b-419a-ab09-9e889d09a913] 24116 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Calling flightService.findByOriginAndDepartureDateAfter for origin: OTP, date: 2025-06-30
2025-06-30 00:20:07.024  INFO [af91664a-9b6b-419a-ab09-9e889d09a913] 24116 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Database query completed, found 8 flights
2025-06-30 00:20:07.024  INFO [af91664a-9b6b-419a-ab09-9e889d09a913] 24116 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Converting 8 Flight entities to FlightDTOs
2025-06-30 00:20:07.024  INFO [af91664a-9b6b-419a-ab09-9e889d09a913] 24116 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Converted to 8 FlightDTOs
2025-06-30 00:20:07.025  INFO [af91664a-9b6b-419a-ab09-9e889d09a913] 24116 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Grouping flights by destination country
2025-06-30 00:20:07.025  INFO [af91664a-9b6b-419a-ab09-9e889d09a913] 24116 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Grouped flights into 7 countries
2025-06-30 00:20:07.025  INFO [af91664a-9b6b-419a-ab09-9e889d09a913] 24116 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Selecting diverse flights - one from each country first
2025-06-30 00:20:07.025  INFO [af91664a-9b6b-419a-ab09-9e889d09a913] 24116 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Adding first flight from Greece (has 1 flights)
2025-06-30 00:20:07.025  INFO [af91664a-9b6b-419a-ab09-9e889d09a913] 24116 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Adding first flight from Netherlands (has 1 flights)
2025-06-30 00:20:07.025  INFO [af91664a-9b6b-419a-ab09-9e889d09a913] 24116 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Adding first flight from Italy (has 1 flights)
2025-06-30 00:20:07.026  INFO [af91664a-9b6b-419a-ab09-9e889d09a913] 24116 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Adding first flight from United Kingdom (has 1 flights)
2025-06-30 00:20:07.026  INFO [af91664a-9b6b-419a-ab09-9e889d09a913] 24116 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Adding first flight from France (has 1 flights)
2025-06-30 00:20:07.026  INFO [af91664a-9b6b-419a-ab09-9e889d09a913] 24116 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Adding first flight from Switzerland (has 1 flights)
2025-06-30 00:20:07.026  INFO [af91664a-9b6b-419a-ab09-9e889d09a913] 24116 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Reached 6 flights after first pass, stopping
2025-06-30 00:20:07.026  INFO [af91664a-9b6b-419a-ab09-9e889d09a913] 24116 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Caching 6 diverse flights with key: OTP-2025-06-30
2025-06-30 00:20:07.026  INFO [af91664a-9b6b-419a-ab09-9e889d09a913] 24116 --- [nio-8080-exec-2] o.e.x.controllers.FlightController       : Returning 6 diverse nearby flights from: OTP
2025-06-30 00:20:55.210 DEBUG [c43b201a-0fe3-4f57-85ea-78f1cd1d29d4] 24116 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-30 00:20:55.211 DEBUG [c43b201a-0fe3-4f57-85ea-78f1cd1d29d4] 24116 --- [nio-8080-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-30 00:20:55.212 DEBUG [c43b201a-0fe3-4f57-85ea-78f1cd1d29d4] 24116 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-30 00:20:55.215  INFO [c43b201a-0fe3-4f57-85ea-78f1cd1d29d4] 24116 --- [nio-8080-exec-3] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris
2025-06-30 00:20:55.215  INFO [c43b201a-0fe3-4f57-85ea-78f1cd1d29d4] 24116 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : No closest airport provided or determined, defaulting to OTP
2025-06-30 00:20:55.215  INFO [c43b201a-0fe3-4f57-85ea-78f1cd1d29d4] 24116 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-30 00:20:55.215 DEBUG [c43b201a-0fe3-4f57-85ea-78f1cd1d29d4] 24116 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-30).    For example, if today is 2025-06-30, a good departure date would be between 2025-07-07 and 2025-07-14, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris";
2025-06-30 00:20:55.217  INFO [c43b201a-0fe3-4f57-85ea-78f1cd1d29d4] 24116 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-30 00:20:55.217  INFO [c43b201a-0fe3-4f57-85ea-78f1cd1d29d4] 24116 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-30 00:20:55.218  INFO [c43b201a-0fe3-4f57-85ea-78f1cd1d29d4] 24116 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-30 00:20:55.218  INFO [c43b201a-0fe3-4f57-85ea-78f1cd1d29d4] 24116 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-30 00:20:55.218  INFO [c43b201a-0fe3-4f57-85ea-78f1cd1d29d4] 24116 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-30 00:20:55.221  INFO [c43b201a-0fe3-4f57-85ea-78f1cd1d29d4] 24116 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-30 00:20:55.221  INFO [c43b201a-0fe3-4f57-85ea-78f1cd1d29d4] 24116 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-30 00:20:55.221  INFO [c43b201a-0fe3-4f57-85ea-78f1cd1d29d4] 24116 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-30 00:20:55.222  INFO [c43b201a-0fe3-4f57-85ea-78f1cd1d29d4] 24116 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-30 00:20:57.159  INFO [c43b201a-0fe3-4f57-85ea-78f1cd1d29d4] 24116 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-30 00:20:57.160  INFO [c43b201a-0fe3-4f57-85ea-78f1cd1d29d4] 24116 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Response length: 195 characters
2025-06-30 00:20:57.161 DEBUG [c43b201a-0fe3-4f57-85ea-78f1cd1d29d4] 24116 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-07",
  "returnDate": "2025-07-09",
  "tripType": "roundTrip",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-30 00:20:57.161 DEBUG [c43b201a-0fe3-4f57-85ea-78f1cd1d29d4] 24116 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-30 00:20:57.161 DEBUG [c43b201a-0fe3-4f57-85ea-78f1cd1d29d4] 24116 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-30 00:20:57.162 DEBUG [c43b201a-0fe3-4f57-85ea-78f1cd1d29d4] 24116 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-30 00:20:57.162 DEBUG [c43b201a-0fe3-4f57-85ea-78f1cd1d29d4] 24116 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-30 00:20:57.162  INFO [c43b201a-0fe3-4f57-85ea-78f1cd1d29d4] 24116 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-30 00:20:57.162  INFO [c43b201a-0fe3-4f57-85ea-78f1cd1d29d4] 24116 --- [nio-8080-exec-3] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-07, returnDate=2025-07-09, tripType=roundTrip, adults=1, children=0, infants=0
2025-06-30 00:20:57.163  INFO [c43b201a-0fe3-4f57-85ea-78f1cd1d29d4] 24116 --- [nio-8080-exec-3] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-30 00:20:59.068 DEBUG [1da3e685-3819-45a6-adc4-c1a90bab2173] 24116 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing POST /api/flights/natural-language/search
2025-06-30 00:20:59.069 DEBUG [1da3e685-3819-45a6-adc4-c1a90bab2173] 24116 --- [nio-8080-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-30 00:20:59.070 DEBUG [1da3e685-3819-45a6-adc4-c1a90bab2173] 24116 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured POST /api/flights/natural-language/search
2025-06-30 00:20:59.071  INFO [1da3e685-3819-45a6-adc4-c1a90bab2173] 24116 --- [nio-8080-exec-4] o.e.x.c.NaturalLanguageSearchController  : Received natural language search request: Weekend trip from Bucharest to Paris one way
2025-06-30 00:20:59.071  INFO [1da3e685-3819-45a6-adc4-c1a90bab2173] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : No closest airport provided or determined, defaulting to OTP
2025-06-30 00:20:59.072  INFO [1da3e685-3819-45a6-adc4-c1a90bab2173] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Processing natural language query with closest airport: OTP
2025-06-30 00:20:59.072 DEBUG [1da3e685-3819-45a6-adc4-c1a90bab2173] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Generated prompt for Gemini API: You are a flight search assistant. Extract the following information from this query: origin city, destination city, departure date, return date (if applicable), trip type (one-way or round-trip), and number of passengers (adults, children, infants). If any information is missing, use reasonable defaults. The user's closest airport is OTP. IMPORTANT RULES: 1. When extracting dates, use the current year (2025) for any dates where the year is not explicitly specified. 2. If the query mentions a 'weekend trip' or similar weekend travel, and specific dates aren't provided,    set the departure and return dates to be within 1-2 weeks from today (2025-06-30).    For example, if today is 2025-06-30, a good departure date would be between 2025-07-07 and 2025-07-14, with the return date 2-3 days after departure. 3. IMPORTANT: If the user specifies an origin in the query (e.g., 'from Paris', 'departing London'),    you MUST use that origin. Only if no origin is provided in the query,    use 'OTP' as the origin.    This is the closest airport to the user's current location. 4. CRITICAL: You MUST use the correct IATA airport codes for cities. DO NOT use generic city codes.    For example, use 'FCO' for Rome (not 'ROM'), 'LHR' for London (not 'LON'), 'CDG' for Paris, etc.    Here are the correct airport codes for common cities:    - Rome: FCO (Leonardo da Vinci Fiumicino)    - London: LHR (Heathrow Airport)    - Paris: CDG (Charles de Gaulle)    - New York: JFK (John F. Kennedy)    - Los Angeles: LAX (Los Angeles Intl)    - Barcelona: BCN (El Prat Airport)    - Madrid: MAD (Adolfo Suárez Madrid–Barajas)    - Berlin: BER (Berlin Brandenburg)    - Munich: MUC (Franz Josef Strauss)    - Milan: MXP (Milano Malpensa)    - Amsterdam: AMS (Amsterdam Schiphol)    - Vienna: VIE (Vienna Intl)    - Zurich: ZRH (Zurich Airport)    - Athens: ATH (Athens International)    - Bucharest: OTP (Henri Coandă Intl)    - Cluj: CLJ (Avram Iancu)    - Brussels: CRL (Brussels South Charleroi)    - Baku: GYD (Heydar Aliyev Intl)    - Yerevan: EVN (Zvartnots Intl)    - Tirana: TIA (Rinas Mother Teresa) Format your response as a JSON object with the following fields: origin (airport code), destination (airport code), departureDate (YYYY-MM-DD), returnDate (YYYY-MM-DD or null for one-way), tripType (oneWay or roundTrip), adults (number), children (number), infants (number). Here's the user query: "Weekend trip from Bucharest to Paris one way";
2025-06-30 00:20:59.075  INFO [1da3e685-3819-45a6-adc4-c1a90bab2173] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : === CALLING GEMINI API ===
2025-06-30 00:20:59.075  INFO [1da3e685-3819-45a6-adc4-c1a90bab2173] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Using project ID: xlr8travel
2025-06-30 00:20:59.075  INFO [1da3e685-3819-45a6-adc4-c1a90bab2173] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Using location ID: us-east1
2025-06-30 00:20:59.075  INFO [1da3e685-3819-45a6-adc4-c1a90bab2173] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Using credentials path: E:\\Downloads\\xlr8travel-9c86a78a37ca.json
2025-06-30 00:20:59.076  INFO [1da3e685-3819-45a6-adc4-c1a90bab2173] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Credentials file size: 2376 bytes
2025-06-30 00:20:59.077  INFO [1da3e685-3819-45a6-adc4-c1a90bab2173] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : ✅ Successfully loaded Google credentials
2025-06-30 00:20:59.077  INFO [1da3e685-3819-45a6-adc4-c1a90bab2173] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : ✅ Successfully initialized Vertex AI client
2025-06-30 00:20:59.077  INFO [1da3e685-3819-45a6-adc4-c1a90bab2173] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : ✅ Successfully created generative model: gemini-2.0-flash-001
2025-06-30 00:20:59.077  INFO [1da3e685-3819-45a6-adc4-c1a90bab2173] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Making API call to Gemini...
2025-06-30 00:21:00.620  INFO [1da3e685-3819-45a6-adc4-c1a90bab2173] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : ✅ Successfully received response from Gemini API
2025-06-30 00:21:00.621  INFO [1da3e685-3819-45a6-adc4-c1a90bab2173] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Response length: 184 characters
2025-06-30 00:21:00.621 DEBUG [1da3e685-3819-45a6-adc4-c1a90bab2173] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Gemini API response: ```json
{
  "origin": "OTP",
  "destination": "CDG",
  "departureDate": "2025-07-07",
  "returnDate": null,
  "tripType": "oneWay",
  "adults": 1,
  "children": 0,
  "infants": 0
}
```
2025-06-30 00:21:00.622 DEBUG [1da3e685-3819-45a6-adc4-c1a90bab2173] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Passing closest airport to parseGeminiResponse: 'OTP'
2025-06-30 00:21:00.622 DEBUG [1da3e685-3819-45a6-adc4-c1a90bab2173] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Origin code from Gemini API: 'OTP', userClosestAirport: 'OTP'
2025-06-30 00:21:00.623 DEBUG [1da3e685-3819-45a6-adc4-c1a90bab2173] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Trimmed origin code: 'OTP', isClosestAirportPlaceholder: false
2025-06-30 00:21:00.623 DEBUG [1da3e685-3819-45a6-adc4-c1a90bab2173] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-30 00:21:00.623  INFO [1da3e685-3819-45a6-adc4-c1a90bab2173] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Final origin after processing: 'OTP'
2025-06-30 00:21:00.623  INFO [1da3e685-3819-45a6-adc4-c1a90bab2173] 24116 --- [nio-8080-exec-4] o.e.x.services.GeminiServiceImpl         : Parsed response: origin=OTP, destination=CDG, departureDate=2025-07-07, returnDate=null, tripType=oneWay, adults=1, children=0, infants=0
2025-06-30 00:21:00.623  INFO [1da3e685-3819-45a6-adc4-c1a90bab2173] 24116 --- [nio-8080-exec-4] o.e.x.c.NaturalLanguageSearchController  : Successfully processed natural language query. Origin: OTP, Destination: CDG
2025-06-30 00:21:04.768 DEBUG [f3f8c9f7-4f8f-4158-8572-5dcd51f9cb0d] 24116 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-07&tripType=oneWay
2025-06-30 00:21:04.770 DEBUG [f3f8c9f7-4f8f-4158-8572-5dcd51f9cb0d] 24116 --- [nio-8080-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-30 00:21:04.770 DEBUG [f3f8c9f7-4f8f-4158-8572-5dcd51f9cb0d] 24116 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-07&tripType=oneWay
2025-06-30 00:21:04.772  INFO [f3f8c9f7-4f8f-4158-8572-5dcd51f9cb0d] 24116 --- [nio-8080-exec-5] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-07, Return=null, Pax=1/0/0
2025-06-30 00:21:04.772  INFO [f3f8c9f7-4f8f-4158-8572-5dcd51f9cb0d] 24116 --- [nio-8080-exec-5] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-07
2025-06-30 00:21:04.783  WARN [f3f8c9f7-4f8f-4158-8572-5dcd51f9cb0d] 24116 --- [nio-8080-exec-5] o.e.x.controllers.FlightController       : No flights found for search: OTP to CDG on 2025-07-07
2025-06-30 00:21:04.783  INFO [f3f8c9f7-4f8f-4158-8572-5dcd51f9cb0d] 24116 --- [nio-8080-exec-5] o.e.x.controllers.FlightController       : Found 0 available flights for search criteria.
2025-06-30 00:21:04.794 DEBUG [ecf091f3-0361-452b-bf2c-7dbcdc04f2b2] 24116 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-07&tripType=oneWay
2025-06-30 00:21:04.796 DEBUG [ecf091f3-0361-452b-bf2c-7dbcdc04f2b2] 24116 --- [nio-8080-exec-6] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-30 00:21:04.797 DEBUG [ecf091f3-0361-452b-bf2c-7dbcdc04f2b2] 24116 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/search?origin=OTP&destination=CDG&departureDate=2025-07-07&tripType=oneWay
2025-06-30 00:21:04.799  INFO [ecf091f3-0361-452b-bf2c-7dbcdc04f2b2] 24116 --- [nio-8080-exec-6] o.e.x.controllers.FlightController       : Searching flights: Type=oneWay, Origin=OTP, Dest=CDG, Depart=2025-07-07, Return=null, Pax=1/0/0
2025-06-30 00:21:04.799  INFO [ecf091f3-0361-452b-bf2c-7dbcdc04f2b2] 24116 --- [nio-8080-exec-6] o.e.x.controllers.FlightController       : Performing one-way flight search from OTP to CDG on 2025-07-07
2025-06-30 00:21:04.808  WARN [ecf091f3-0361-452b-bf2c-7dbcdc04f2b2] 24116 --- [nio-8080-exec-6] o.e.x.controllers.FlightController       : No flights found for search: OTP to CDG on 2025-07-07
2025-06-30 00:21:04.808  INFO [ecf091f3-0361-452b-bf2c-7dbcdc04f2b2] 24116 --- [nio-8080-exec-6] o.e.x.controllers.FlightController       : Found 0 available flights for search criteria.
2025-06-30 00:21:04.908 DEBUG [b1251406-93ae-4381-b39e-ddd13537b1eb] 24116 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-30 00:21:04.909 DEBUG [b1251406-93ae-4381-b39e-ddd13537b1eb] 24116 --- [nio-8080-exec-7] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-30 00:21:04.910 DEBUG [b1251406-93ae-4381-b39e-ddd13537b1eb] 24116 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-30 00:21:04.910  INFO [b1251406-93ae-4381-b39e-ddd13537b1eb] 24116 --- [nio-8080-exec-7] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-30 00:21:05.097  INFO [b1251406-93ae-4381-b39e-ddd13537b1eb] 24116 --- [nio-8080-exec-7] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-30 00:21:05.107 DEBUG [32766d3f-6906-4adc-9621-9a4947167d41] 24116 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/weather?city=Paris&country=France
2025-06-30 00:21:05.108 DEBUG [32766d3f-6906-4adc-9621-9a4947167d41] 24116 --- [nio-8080-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-30 00:21:05.108 DEBUG [32766d3f-6906-4adc-9621-9a4947167d41] 24116 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/weather?city=Paris&country=France
2025-06-30 00:21:05.109  INFO [32766d3f-6906-4adc-9621-9a4947167d41] 24116 --- [nio-8080-exec-8] o.e.x.controllers.WeatherController      : Fetching weather for city: Paris, country: France
2025-06-30 00:21:05.110 DEBUG [bd4a1dae-f5e8-44a7-a2c5-a51d3af83117] 24116 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-30 00:21:05.111 DEBUG [bd4a1dae-f5e8-44a7-a2c5-a51d3af83117] 24116 --- [nio-8080-exec-9] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-30 00:21:05.111 DEBUG [bd4a1dae-f5e8-44a7-a2c5-a51d3af83117] 24116 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-30 00:21:05.112  INFO [bd4a1dae-f5e8-44a7-a2c5-a51d3af83117] 24116 --- [nio-8080-exec-9] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-30 00:21:05.157  INFO [32766d3f-6906-4adc-9621-9a4947167d41] 24116 --- [nio-8080-exec-8] o.e.x.controllers.WeatherController      : Weather data successfully retrieved for Paris, France
2025-06-30 00:21:05.282  INFO [bd4a1dae-f5e8-44a7-a2c5-a51d3af83117] 24116 --- [nio-8080-exec-9] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-30 00:21:05.292 DEBUG [98c81055-2a9b-4a4d-b733-e53e27e205ee] 24116 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/weather/forecast?city=Paris&country=France
2025-06-30 00:21:05.293 DEBUG [98c81055-2a9b-4a4d-b733-e53e27e205ee] 24116 --- [io-8080-exec-10] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-30 00:21:05.294 DEBUG [98c81055-2a9b-4a4d-b733-e53e27e205ee] 24116 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/weather/forecast?city=Paris&country=France
2025-06-30 00:21:05.295  INFO [98c81055-2a9b-4a4d-b733-e53e27e205ee] 24116 --- [io-8080-exec-10] o.e.x.controllers.WeatherController      : Fetching forecast for city: Paris, country: France
2025-06-30 00:21:05.335  INFO [98c81055-2a9b-4a4d-b733-e53e27e205ee] 24116 --- [io-8080-exec-10] o.e.x.controllers.WeatherController      : Forecast data successfully retrieved for Paris, France
2025-06-30 00:21:07.214 DEBUG [a83197b2-aff9-4f1a-9e27-2e06f0e88f06] 24116 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/flights/nearby?origin=OTP
2025-06-30 00:21:07.215 DEBUG [a83197b2-aff9-4f1a-9e27-2e06f0e88f06] 24116 --- [nio-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-30 00:21:07.215 DEBUG [a83197b2-aff9-4f1a-9e27-2e06f0e88f06] 24116 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/flights/nearby?origin=OTP
2025-06-30 00:21:07.216  INFO [a83197b2-aff9-4f1a-9e27-2e06f0e88f06] 24116 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Received request for nearby flights from origin: OTP, departureDate: null
2025-06-30 00:21:07.216  INFO [a83197b2-aff9-4f1a-9e27-2e06f0e88f06] 24116 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Using search date: 2025-06-30
2025-06-30 00:21:07.216  INFO [a83197b2-aff9-4f1a-9e27-2e06f0e88f06] 24116 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Cache key: OTP-2025-06-30
2025-06-30 00:21:07.216  INFO [a83197b2-aff9-4f1a-9e27-2e06f0e88f06] 24116 --- [nio-8080-exec-1] o.e.x.controllers.FlightController       : Returning cached nearby flights for origin: OTP, found 6 flights
2025-06-30 00:42:51.096  INFO [NONE] 24116 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-30 00:42:51.100  INFO [NONE] 24116 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-06-30 00:42:51.103  INFO [NONE] 24116 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
